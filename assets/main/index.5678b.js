System.register("chunks:///_virtual/uma.min.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var n;return{setters:[function(e){n=e.default}],execute:function(){e("default",void 0),n.define(t.meta.url,(function(t,i,r,o,s){n.createRequireWithReqMap({},i);!function(){if(console.log("检查qg_umeng"),void 0!==window.qg){var e=function(){},t=function(){return qg},n=function(e,t){function n(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e,t){var n=r(e,t);return e&&e.id_tracking&&(n[t.id_tracking||"id_tracking"]=r(e.id_tracking,J)),n},r=function(e,t){var n={};for(var i in e)t[i]?n[t[i]]=e[i]:n[i]=e[i];return n},o=function(e,t){var n={};if(e)for(var i in e)e[i]&&(n[t[i]]=e[i]);return n},s=function(){return X},a=function(e,t,n,r){F.instance().setIdType(w().getIdType()),F.instance().setIdTracking(w().getIdTracking());var a=w().getUserId();a&&e.analytics&&(e.analytics.active_user={puid:a,provider:w().getProvider()});var u=A.clone(F.instance().get());e.header=A.assign(u,e.header,{ts:Date.now(),testToken:s(),traceId:A.getRandomStr(10)+Date.now()+A.getRandomStr(9)});var c=function(e){return{h:i(e.header,Y),a:o(e.analytics,K)}}(e),f=C(c),p={url:N.ENDPOINT+N.LOG_URL,method:"POST",data:re(f),success:function(i){var r=i.code||i.status||i.statusCode;200===r||413===r?(y().i("数据发送成功: ",e,f),function(e){e&&(F.instance().setItem(N.IMPRINT,e),se.set(e),se.save(),y().v("imprint: ",se.getImpObj()),se.getItem("ttn_invalid")&&(X=""))}((i.data||{}).imprint),"function"==typeof t&&t(i)):(y().w("数据发送失败: ",f),"function"==typeof n&&n())},fail:function(e){y().w("超时: ",f),"function"==typeof n&&n()},complete:function(){"function"==typeof r&&r()}};E.request(A.assign(p,{header:{"content-type":"text/plain","Msg-Type":E.getSdkType()+"/json"}}))},u=function(e){var t=e,n=[];this.enqueue=function(e){"number"==typeof t&&this.size()>=t&&this.dequeue(),n.push(e)},this.dequeue=function(){return n.shift()},this.front=function(){return n[0]},this.isEmpty=function(){return 0===n.length},this.clear=function(){n.length=0},this.size=function(){return n.length},this.items=function(){return n},this.print=function(){console.log(n.toString())}},c=function(e,t){this.id=e,this.ts=Date.now();var n=typeof t;if("string"===n&&t)this[e]=t;else if("object"===n)for(var i in t)({}).hasOwnProperty.call(t,i)&&(this[i]=t[i])},f=function(){var e=!1,t=!1,n=0;this.init=function(t){y().v("sdk version: "+N.IMPL_VERSION),e?y().v("Lib重复实例化"):j().load((function(){y().v("cache初始化成功: ",j().getAll()),w().setUseOpenid&&w().setUseOpenid(m().useOpenid()),w().init((function(){F.instance().init(),y().v("Header初始化成功")})),e=!0,"function"==typeof t&&t(),y().tip("SDK集成成功")}))},this.resume=function(n){var i;e&&!t&&(y().v("showOptions: ",n),t=!0,m().enableVerify()&&n&&n.query&&(i=n.query._ttn,X=i||X),this._resume(n))},this._resume=function(e){ae().load();var t=H().resume(e),n=H().getCurrentSessionId();function i(e,t){w().getId()||e<=0||w().getOpenIdAsync(m().appKey(),(function(n){n?(y().v("获取id成功"),ae().send()):(y().v("获取openid失败,启动重试,剩余可用次数",e-1),setTimeout((function(){i(e-1,t)}),t))}))}M().setSessionId(n),t&&ae().add(V,{},(function(){w().setUseOpenid&&w().setUseOpenid(m().useOpenid()),m().useOpenid()&&m().autoGetOpenid()&&!w().getId()?(y().v("get id async"),i(10,3e3)):(y().v("session auto send"),ae().send())}))},this.pause=function(i){e&&(t=!1,n=0,H().pause(),m().uploadUserInfo()&&ue().update(),ae().send(q,{},(function(){ae().save(),j().save(),y().v("cache save success"),"function"==typeof i&&i()})))},this.setOpenid=function(e){y().v("setOpenId: %s",e),w().setOpenid(e),ae().send()},this.setUnionid=function(e){y().v("setUnionid: %s",e),w().setUnionid(e)},this.setUserid=function(e,t){y().v("setUserid: %s",e,t),w().setUserid(e,t)},this.setUserInfo=function(e){y().v("setUserInfo: %s",e),ue().setUserInfo(e)},this.setAnonymousid=function(e){y().v("setAnonymousId: %s",e),w().setAnonymousid(e),ae().send()},this.setAppVersion=function(e){e&&"string"!=typeof e?y().w("setAppVersion方法只接受字符串类型参数"):F.instance().setAppVersion(e)},this.setAlipayUserid=function(e){e&&"string"!=typeof e?y().w("setAlipayUserid方法只接受字符串类型参数"):(y().v("setAlipayUserid: %s",e),w().setAlipayUserid(e))},this.setDeviceId=function(e){if("string"==typeof e)return w().setDeviceId(e),e},this.setSuperProperty=function(e){if(e&&"string"!=typeof e)y().w("超级属性只支持字符串类型");else{var t=this;F.instance().getSuperProperty()!==e&&(F.instance().setSuperProperty(e),t.pause((function(){t.resume()})))}},this.trackEvent=function(t,i){if(e&&(y().v("event: ",t,i),function(e,t){if(!e||"string"!=typeof e)return y().e('please check trackEvent id. id should be "string" and not null'),!1;var n=["id","ts","du"],i={};if(n.forEach((function(e){i[e]=1})),i[e])return y().e("eventId不能与以下保留字冲突: "+n.join(",")),!1;if(e.length>N.MAX_EVENTID_LENGTH)return y().e("The maximum length of event id shall not exceed "+N.MAX_EVENTID_LENGTH),!1;if(t&&("object"!=typeof t||Array.isArray(t))&&"string"!=typeof t)return y().e("please check trackEvent properties. properties should be string or object(not include Array)"),!1;if("object"==typeof t){var r=0;for(var o in t)if({}.hasOwnProperty.call(t,o)){if(o.length>N.MAX_PROPERTY_KEY_LENGTH)return y().e("The maximum length of property key shall not exceed "+N.MAX_PROPERTY_KEY_LENGTH),!1;if(r>=N.MAX_PROPERTY_KEYS_COUNT)return y().e("The maximum count of properties shall not exceed "+N.MAX_PROPERTY_KEYS_COUNT),!1;if(i[o])return y().e("属性中的key不能与以下保留字冲突: "+n.join(",")),!1;r+=1}}return!0}(t,i))){var r=new c(t,i);M().addEvent(r);var o=!!s(),a=o?0:N.EVENT_SEND_DEFAULT_INTERVAL,u=Date.now();(function(e,t){return"number"!=typeof n||"number"!=typeof t||n<=0||e-n>t})(u,a)&&(n=u,ae().send(x,{noCache:o},(function(){})))}},this.trackShare=function(t){if(e)try{E.getSdkType().indexOf("game")>-1?(t=P().add(t,!0),y().v("shareQuery: ",t)):(t=P().add(t,!1),y().v("sharePath: ",t.path))}catch(e){y().v("shareAppMessage: ",e)}return t},this.trackPageStart=function(t){e&&R().addPageStart(t)},this.trackPageEnd=function(t){e&&R().addPageEnd(t)},this.onShareAppMessage=function(e){var t=this;E.onShareAppMessage((function(){return t.trackShare(e())}))},this.shareAppMessage=function(e){this.trackShare(e),E.shareAppMessage(e)}},p=function(){},l=function e(t,n){var i,r;if(0===t||1===t&&n?i=N.ENDPOINT:2===t&&n?i=N.ENDPOINTB:n&&(i=fe[t]),t>=fe.length||n)return n&&(r=i,N.ENDPOINT=r),n&&y().v("命中可用服务",i),!n&&y().tip_w("未命中可用服务"),!1;E.request({url:N.ENDPOINT+"/uminiprogram_logs/ckdh",success:function(n){200===(n.code||n.status||n.statusCode)&&n.data&&200===n.data.code?e(t+1,!0):e(t+1,!1)},fail:function(){e(t+1,!1)}})},d=function(e){y().v("开始构建 fetch body"),E.getSystemInfo((function(t){E.getNetworkInfo((function(n){var i=(n=n||{}).networkType;i=i===he?"unknown":i.toUpperCase(),_e.access=i,function(e,t){var n=e.brand||"";if(_e.deviceType="Phone",_e.sdkVersion=de,_e.appkey=m().appKey(),_e.sdkType=E.getSdkType(),_e.umid=w().getId(),e){_e.language=e.language||"",_e.os=e.OS,_e.osVersion=e.OSVersion,_e.deviceName=e.deviceName,_e.platformVersion=e.platformVersion,_e.platformSdkVersion=e.platformSDKVersion,_e.deviceBrand=n;var i=e.resolution.split("*");ge.isArray(i)&&(_e.resolutionHeight=Number(i[0]),_e.resolutionWidth=Number(i[1]))}!function(e){e&&(_e.installTime=e.install_datetime&&Date.parse(e.install_datetime),_e.scene=e.install_scene,_e.channel=e.install_channel,_e.campaign=e.install_campaign)}(se.getImpObj()),t&&t(_e)}(t,e)}))}))},h=function(e){e&&ge.each(e,(function(e){ye[e.k]=e}))},g=function(){var e=this;this.STORAGE_NAME=null,S.once(S.messageType.CONFIG_LOADED,(function(t){y().v("云配初始化开始..."),e.init(t)}))},v=function(e){var t={};for(var n in e){var i=e[n];if("object"==typeof i)for(var r in i)t[n+"."+r]=i[r];else t[n]=i}return t};console.log("初始化qg_umeng");var _="[UMENG] -- ",y=function(){var e=null,t=!1;function n(){this.setDebug=function(e){t=e},this.d=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=_+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.i=function(){try{if(t)try{"string"==typeof arguments[0]&&(arguments[0]=_+arguments[0]),console.log.apply(console,arguments)}catch(e){}}catch(e){}},this.e=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=_+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.w=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=_+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.v=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=_+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.t=function(){if(t)try{console.log.apply(console,arguments)}catch(e){}},this.tip=function(){try{"string"==typeof arguments[0]&&(arguments[0]=_+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.tip_w=function(e){try{console.log("%c [UMENG] -- "+e,"background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(e){}},this.err=function(){try{"string"==typeof arguments[0]&&(arguments[0]=_+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.repeat=function(e){for(var t=e;t.length<86;)t+=e;return t}}return function(){return null===e&&(e=new n),e}}(),m=function(){var e=null;function t(){var e={};this.useOpenid=function(){return!!e.useOpenid},this.useSwanid=function(){return!!e.useSwanid},this.autoGetOpenid=function(){return!!e.autoGetOpenid},this.appKey=function(){return e.appKey},this.uploadUserInfo=function(){return e.uploadUserInfo},this.enableVerify=function(){return e.enableVerify},this.set=function(t){e=t},this.get=function(){return e},this.setItem=function(t,n){e[t]=n},this.getItem=function(t){return e[t]}}return function(){return e||(e=new t),e}}();e.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var i=this;function r(){i.off(e,r),t.apply(n,arguments)}return r._=t,this.on(e,r,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,s=i.length;o<s;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);return r.length?n[e]=r:delete n[e],this}};var S=new e;S.messageType={CONFIG_LOADED:0,UMA_LIB_INITED:1};var I,O=t(),E=new(function(){function e(){}return e.prototype.setStorage=function(e,t,n){O.setStorage?O.setStorage({key:e,value:t,success:function(){"function"==typeof n&&n(!0)},fail:function(){"function"==typeof n&&n(!1)}}):(localStorage.setItem(e,t),"function"==typeof n&&n(!0))},e.prototype.getStorage=function(e,t){if(O.getStorage)O.getStorage({key:e,success:function(e){"function"==typeof t&&t(e)},fail:function(n,i){y().w(e+"code = : "+i),"function"==typeof t&&t()}});else if(localStorage){var n=localStorage.getItem(e);"function"==typeof t&&t(n)}},e.prototype.removeStorage=function(e,t){O.deleteStorage?O.deleteStorage({key:e,success:function(){"function"==typeof t&&t(!0)},fail:function(){"function"==typeof t&&t(!1)}}):localStorage&&(localStorage.removeItem(e),"function"==typeof t&&t(!0))},e.prototype.getSystemInfo=function(e){O.getSystemInfo({success:function(t){var n={model:t.model,brand:t.brand,screenWidth:t.screenWidth,screenHeight:t.screenHeight,platform:t.osType,pixelRatio:t.pixelRatio,platformVersion:t.platformVersionCode,language:t.language,deviceName:t.model,OSVersion:t.osVersionName,resolution:"",statusBarHeight:t.statusBarHeight};if(t.system){var i=t.system.split(" ");Array.isArray(i)&&(!n.platform&&(n.platform=i[0]),!n.OSVersion&&(n.OSVersion=i[1]))}var r=Math.round(t.screenWidth*t.pixelRatio),o=Math.round(t.screenHeight*t.pixelRatio);n.resolution=r>o?r+"*"+o:o+"*"+r,"function"==typeof e&&e(n)},fail:function(){"function"==typeof e&&e()}})},e.prototype.getDeviceInfo=function(e){"function"==typeof e&&e("")},e.prototype.getNetworkInfo=function(e){O.getNetworkType({success:function(t){"function"==typeof e&&e({networkAvailable:"none"!==t.networkType,networkType:t.networkType})},fail:function(){"function"==typeof e&&e()}})},e.prototype.request=function(e){var t=e.success,n=e.fail,i=!1,r=null;e.success=function(e){i||(r&&clearTimeout(r),"function"==typeof t&&t(e))},e.fail=function(){i||(r&&clearTimeout(r),"function"==typeof n&&n(!1))},O.request?O.request(e):XMLHttpRequest&&function(e,t){void 0===t&&(t=!0),(e=e||{}).method=e.method||"GET",e.url=e.url||"",e.success=e.success||function(){},e.fail=e.fail||function(){};var n,i,r=new XMLHttpRequest,o=[];if("object"==typeof e.data){for(var s in e.data)o.push(s+"="+encodeURIComponent(e.data[s]));n=JSON.stringify(e.data||{}),i=o.join("&")}else"string"==typeof e.data&&(n=e.data,i=e.data);if("POST"===e.method?r.open(e.method,e.url,t):r.open(e.method,e.url+"?"+i||"",t),e.header&&"object"==typeof e.header){for(var a in e.header)r.setRequestHeader(a,e.header[a]);e.header["content-type"]||e.header["Content-Type"]||r.setRequestHeader("content-type","text/plain")}t&&(r.timeout=e.timeout||3e4),r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var t={};try{t=JSON.parse(r.responseText)}catch(e){}e.success({data:t,status:r.status})}else 4==r.readyState&&e.fail({data:null,status:r.status})},"POST"===e.method?r.send(n||""):r.send()}(e,!0),r=setTimeout((function(){r&&clearTimeout(r),i=!0,"function"==typeof n&&n(i)}),e.timeout||3e4)},e.prototype.getSdkType=function(){return this.getPlatform()+"mp"},e.prototype.getPlatform=function(){return"quickgame"},e.prototype.getUserInfo=function(e){e&&e()},e.prototype.getAppInfoSync=function(){return{}},e.prototype.onShareAppMessage=function(e){},e.prototype.shareAppMessage=function(e){},e.prototype.getContext=function(){return t()},e.prototype.getLaunchOptionsSync=function(){var e=null;if(e)return e;if(!O.getLaunchOptionsSync)return{};try{e=O.getLaunchOptionsSync()}catch(t){e=null}return e||{}},e}()),T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},N={SESSION_INTERVAL:3e4,LOG_URL:"/quickgamem_logs",GET_OPENID_URL:"",USERINFO_URL:"/uminiprogram_logs/comm/uif",ENDPOINT:"https://umini.shujupie.com",ENDPOINTB:"https://ulogs.umeng.com",DEVICE_INFO_KEY:"device_info",ADVERTISING_ID:"mobile_ad_id",ANDROID_ID:"android_id",CURRENT_SESSION:"current_session",SESSION_PAUSE_TIME:"session_pause_time",EVENT_SEND_DEFAULT_INTERVAL:15e3,EVENT_LAST_SEND_TIME:"last_send_time",MAX_EVENTID_LENGTH:128,MAX_PROPERTY_KEY_LENGTH:256,MAX_PROPERTY_KEYS_COUNT:100,REPORT_POLICY:"report_policy",REPORT_INTERVAL_TIME:"report_interval_time",REPORT_POLICY_START_SEND:"1",REPORT_POLICY_INTERVAL:"6",IMPRINT:"imprint",SEED_VERSION:"1.0.0",IMPL_VERSION:"2.7.1",ALIPAY_AVAILABLE_VERSION:"10.1.52",SHARE_PATH:"um_share_path",SHARES:"shares",REQUESTS:"requests",UUID:"um_uuid",UUID_SUFFIX:"ud",OPENID:"um_od",UNIONID:"um_unid",ALIPAYID:"um_alipayid",USERID:"um_userid",PROVIDER:"um_provider",SWANID:"um_swanid",ANONYMOUSID:"um_anonymousid",LAUNCH_OPTIONS:"LAUNCH_OPTIONS",UM_SSRC:"_um_ssrc",USER_INFO:"user_info",IS_ALIYUN:!1},A={isNumber:function(e){return!Number.isNaN(parseInt(e,10))},compareVersion:function(e,t){for(var n=String(e).split("."),i=String(t).split("."),r=0;r<Math.max(n.length,i.length);r++){var o=parseInt(n[r]||0,10),s=parseInt(i[r]||0,10);if(o>s)return 1;if(o<s)return-1}return 0},getRandomStr:function(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i=0;i<Number(e);i++)t+=n[Math.round(Math.random()*(n.length-1))];return t},clone:function(e){return JSON.parse(JSON.stringify(e))},startsWith:function(e,t){return!(!e||!t||0===t.length||t.length>e.length)&&e.substr(0,t.length)===t},endsWith:function(e,t){return!(!t||0===e.length||t.length>e.length)&&e.substring(e.length-t.length)===t},assign:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},deepEqual:function e(t,n){if(t===n)return!0;if(t&&"object"==typeof t&&n&&"object"==typeof n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var i in t){if(Object.prototype.hasOwnProperty.call(n,i))return!1;if(!e(t[i],n[i]))return!1}return!0}return!1},trimStart:function(e,t){if(!e)return"";if("string"==typeof t&&t.length){var n=new RegExp("^"+t+"*");e=e.replace(n,"")}else e=e.replace(/^s*/,"");return e},trimEnd:function(e,t){if(!e)return"";var n,i;if("string"==typeof t&&t.length){for(n=new RegExp(t),i=e.length;n.test(e.charAt(i));)i-=1;return e.slice(0,i+1)}for(n=/s/,i=e.length-1;n.test(e.charAt(i));)i-=1;return e.slice(0,i+1)},isFunction:function(e){return"function"==typeof e}},k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._openid="",t._unionid="",t._useOpenid=!1,t}return n(t,e),t.prototype.initID=function(e){var t=this;t._idType=t._useOpenid?"openid":"uuid",y().v("id type: ",t._idType),E.getStorage(N.UNIONID,(function(e){t._unionid=e})),this._useOpenid?E.getStorage(N.OPENID,(function(n){t._openid=n,e&&e()})):e&&e()},t.prototype.setUseOpenid=function(e){this._useOpenid=e},t.prototype.setOpenid=function(e){!this._openid&&e&&(this._openid=e,E.setStorage(N.OPENID,e))},t.prototype.setUnionid=function(e){!this._unionid&&e&&(this._unionid=e,E.setStorage(N.UNIONID,e))},t.prototype.getIdTracking=function(){var t=e.prototype.getIdTracking.call(this);return this._openid&&(t.openid=this._openid),this._unionid&&(t.unionid=this._unionid),this._userid&&(t.userid=this._userid),t},t.prototype.getId=function(){return this._useOpenid?this._openid:this._uuid},t}(function(){function e(){this._uuid="",this._userid="",this._provider="",this._idType=""}return e.prototype.createUUID=function(){return A.getRandomStr(10)+Date.now()+A.getRandomStr(7)+N.UUID_SUFFIX},e.prototype.initUUID=function(e){var t=this;E.getStorage(N.UUID,(function(n){n?t._uuid=n:(t._uuid=t.createUUID(),E.setStorage(N.UUID,t._uuid)),e&&e(n)}))},e.prototype.initUserid=function(){var e=this;E.getStorage(N.USERID,(function(t){!e._userid&&t&&(e._userid=t,y().v("userId is ",t))})),E.getStorage(N.PROVIDER,(function(t){!e._provider&&t&&(e._provider=t,y().v("provider is ",t))}))},e.prototype.init=function(e){var t=this;t.initUUID((function(){t.initUserid(),t.initID(e)}))},e.prototype.setUserid=function(e,t){!this._userid&&e&&(this._userid=e,this._provider=t,E.setStorage(N.USERID,e),E.setStorage(N.PROVIDER,t))},e.prototype.getUserId=function(){return this._userid},e.prototype.getProvider=function(){return this._provider},e.prototype.getIdType=function(){return this._idType},e.prototype.getIdTracking=function(){var e={};return this._uuid&&(e.uuid=this._uuid),this._userid&&(e.userid=this._userid),e},e}()),b=t(),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getOpenIdAsync=function(e,t){var n=this;b.login({success:function(i){i.code?E.request({url:N.ENDPOINT+N.GET_OPENID_URL,method:"GET",data:{key:e,code:i.code},success:function(e){if(e&&200===e.statusCode&&e.data&&e.data.data){var i=e.data.data;return n.setOpenid(i.oid),n.setUnionid(i.uid),t&&t(!0)}t&&t()},fail:function(e){y().v("wx request failed...",e),t&&t()}}):t&&t()},fail:function(){t&&t()}})},t}(k),w=(I=null,function(){return I||(I=new D),I}),R=function(){var e=null;function t(){var e=!1,t=null,n=[];this.addPageStart=function(n){n&&!e&&(t={ts:Date.now(),path:n,page_name:n},e=!0)},this.addPageEnd=function(i){if(e&&i&&t&&i===t.page_name){var r=Date.now()-t.ts;t.duration=Math.abs(r),n.push(t),t=null,e=!1}},this.get=function(){return n},this.getCurrentPage=function(){return t},this.clear=function(){n.length=0}}return function(){return e||(e=new t),e}}(),U={},P=function(){var e=null,t=[],n="";function i(){return{add:function(e,i){y().v("share origin: %o",e);var r={title:e&&e.title,path:e&&e.path&&e.path.split("?")[0],_um_sts:Date.now()};r.path&&r.path.length>1&&A.startsWith(r.path,"/")&&(r.path=A.trimStart(r.path,"/"));var o=e.path||"",s=w().getId();if(s){var a=n.split(","),u=(a=a.filter((function(e){return e.length>0}))).indexOf(s);u>=0&&(a=a.slice(0,u)),a.length<3&&a.push(s);var c=a.join(",");-1!==o.indexOf("?")?o+="&_um_ssrc="+c:o+="?_um_ssrc="+c;var f=Date.now();if(o+="&_um_sts="+f,i){var p=function(e){var t=[];for(var n in e)"_um_ssrc"!==n&&"_um_sts"!==n&&t.push(n+"="+e[n]);return t.join("&")}(U),l=p?p+"&_um_ssrc="+c+"&_um_sts="+f:"_um_ssrc="+c+"&_um_sts="+f;e.query=e.query?e.query+"&_um_ssrc="+c+"&_um_sts="+f:l}else e.path=o;r._um_ssrc=c,r._um_sts=f}return t.push(r),y().v("share: %o",e),e},setShareSource:function(e){n=e},clear:function(){t.length=0},get:function(){return t}}}return function(){return e||(e=new i),e}}(),C=function(e){if(e)try{return JSON.stringify(e)}catch(e){}return""},L=function(e){if(e)try{return JSON.parse(e)}catch(e){}return null},j=function(){var e=null,t="",n=null,i=!1;function r(){this.load=function(e){n?(E.removeStorage(t),e()):(t="um_cache_"+m().appKey(),E.getStorage(t,(function(r){n=L(r)||{},i=!0,E.removeStorage(t),e()})))},this.save=function(){n&&E.setStorage(t,C(n))},this.set=function(e,t){n&&(n[e]=t)},this.get=function(e){return(n||{})[e]},this.remove=function(e){n&&n[e]&&delete n[e]},this.getAll=function(){return n},this.clear=function(){n=null},this.has=function(e){return!!this.get(e)},this.isLoaded=function(){return i}}return function(){return e||(e=new r),e}}(),M=function(){var e,t,n=[],i=[];function r(e,n){var i=(e=e||{})[t];return Array.isArray(i)&&i.length?e[t]=i.concat(n):e[t]=[].concat(n),e}return function(){return e||(e={addEvent:function(e){t?(n.unshift(e),n.length>1&&(!function(){if(n.length){var e=j().get("ekvs");(function(e){var t=0;for(var n in e)Array.isArray(e[n])&&(t+=e[n].length);return t})(e)+n.length<=1e4&&(e=r(e,n),j().set("ekvs",e))}}(),n.length=0)):(y().w("session id is null: ",t),i.unshift(e))},setSessionId:function(e){if(t=e,y().v("setSessionId: ",t),Array.isArray(i)&&i.length&&t){for(var n=0;n<i.length;n++)this.addEvent(i[n]);i.length=0}},getEkvs:function(){var e=j().get("ekvs");return n&&n.length&&(e=r(e,n)),e},clear:function(){j().remove("ekvs"),n.length=0}}),e}}(),V="half_session",q="close_session",x="ekv",G=["access","access_subtype"],F=function(){var e=null;function t(){var e=!1,t={};return{init:function(){!function(e){var n=j().get(N.IMPRINT);n&&(t.imprint=n),t.device_type="Phone",t.sdk_version=N.IMPL_VERSION,t.appkey=m().appKey(),E.getDeviceInfo((function(e){t.device_info=e||""}));var i=E.getAppInfoSync();t.appid=i.appId,t.app_env=i.appEnv,t.app_version=i.appVersion,E.getSystemInfo((function(n){E.getNetworkInfo((function(i){var r=function(e,t){var n={};(e=e||{}).safeArea=e.safeArea||{};var i=(t=t||{}).networkType;"none"===i&&(i="unknown");var r=e.model||"",o=e.platform||"",s=e.brand||"",a=s.toLowerCase();switch(n.sdk_type=E.getSdkType(),n.platform=E.getPlatform(),n.platform_sdk_version=e.platformSDKVersion,n.platform_version=e.platformVersion,n.resolution=e.resolution,n.pixel_ratio=e.pixelRatio,n.os=o,n.font_size_setting=e.fontSizeSetting,n.device_model=r,n.device_brand=s,n.device_manufacturer=a,n.device_manuid=r,n.device_name=r,n.os_version=e.OSVersion,n.language=e.language,n.theme=e.theme,n.benchmark_level=e.benchmarkLevel,n.status_bar_height=e.statusBarHeight,n.safe_area_top=e.safeArea.top,n.safe_area_left=e.safeArea.left,n.safe_area_right=e.safeArea.right,n.safe_area_bottom=e.safeArea.bottom,n.safe_area_height=e.safeArea.height,n.safe_area_width=e.safeArea.width,n.storage=e.storage,n.screen_width=e.screenWidth,n.screen_height=e.screenHeight,n.host=e.host,i=i?i.toLowerCase():""){case"4g":n.access_subtype="LTE",n.access="4G";break;case"3g":n.access_subtype="CDMA",n.access="3G";break;case"2g":n.access_subtype="GRPS",n.access="2G";break;default:n.access=i,delete n.access_subtype}return n}(n,i);A.assign(t,r),e&&e()}))}))}((function(){e=!0}))},isLoaded:function(){return e},get:function(){return t},getRealtimeFields:function(){var e={};return G.forEach((function(n){e[n]=t[n]})),e},setIdTracking:function(e){this.setItem("id_tracking",e)},setIdType:function(e){this.setItem("id_type",e)},setAppVersion:function(e){this.setItem("app_version",e)},setSuperProperty:function(e){t.sp||(t.sp={}),t.sp.isv=e},getSuperProperty:function(){return t&&t.sp?t.sp.isv:""},setItem:function(e,n){t[e]=n},getItem:function(e){return t[e]}}}return{instance:function(){return e||(e=t()),e}}}(),H=function(){var e=null,t=null,n=null;return function(){return e||(e={resume:function(e){var i=!1;n||(n=j().get(N.CURRENT_SESSION));var r=new Date;return t=r.getTime(),!n||!n.end_time||t-n.end_time>N.SESSION_INTERVAL?(i=!0,function(e){try{var t=(n||{}).options||{},i=A.assign({},function(e){var t={};for(var n in e)0===n.indexOf("_um_")&&(t[n]=e[n]);return y().v("query: ",e),y().v("_um_params: ",t),t}(e.query));i.path=e.path||t.path,i.scene=e.scene?E.getPlatform()+"_"+e.scene:t.scene;var r=e.referrerInfo;r&&(i.referrerAppId=r.appId),y().v("session options: ",i);var o=i[N.UM_SSRC];o&&P().setShareSource(o);var s=Date.now();n={id:A.getRandomStr(10)+s,start_time:s,options:i}}catch(e){y().e("生成新session失败: ",e)}}(e),y().v("开始新的session(%s): ",n.id,n)):y().v("延续上一次session(%s): %s ",n.id,r.toLocaleTimeString(),n),i},pause:function(){!function(){if(n){var e=new Date;n.end_time=e.getTime(),"number"!=typeof n.duration&&(n.duration=0),n.duration=n.end_time-t,j().set(N.CURRENT_SESSION,n),y().v("退出会话(%s): %s ",n.id,e.toLocaleTimeString(),n)}}()},getCurrentSessionId:function(){return(n||{}).id},getCurrentSession:function(){return n},cloneCurrentSession:function(){return A.clone(n)}}),e}}(),K={sessions:"sn",ekvs:"e",active_user:"active_user"},Y={sdk_type:"sdt",access:"ac",access_subtype:"acs",device_model:"dm",language:"lang",device_type:"dt",device_manufacturer:"dmf",device_name:"dn",platform_version:"pv",id_type:"it",font_size_setting:"fss",os_version:"ov",device_manuid:"did",platform_sdk_version:"psv",device_brand:"db",appkey:"ak",_id:"id",id_tracking:"itr",imprint:"imp",sdk_version:"sv",resolution:"rl",testToken:"ttn",theme:"t5",benchmark_level:"bml",screen_width:"sw",screen_height:"sh",status_bar_height:"sbh",safe_area_top:"sat",safe_area_left:"sal",safe_area_right:"sar",safe_area_bottom:"sab",safe_area_height:"sah",safe_area_width:"saw",pixel_ratio:"pr",storage:"s7",host:"hs"},J={uuid:"ud",unionid:"und",openid:"od",anonymousid:"nd",alipay_id:"ad",device_id:"dd",userid:"puid"},X="",B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W=function(e){for(var t={},n=0,i=e.length;n<i;n++)t[e.charAt(n)]=n;return t}(B),z=String.fromCharCode,Q=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?z(192|t>>>6)+z(128|63&t):z(224|t>>>12&15)+z(128|t>>>6&63)+z(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return z(240|t>>>18&7)+z(128|t>>>12&63)+z(128|t>>>6&63)+z(128|63&t)},Z=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,$=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[B.charAt(n>>>18),B.charAt(n>>>12&63),t>=2?"=":B.charAt(n>>>6&63),t>=1?"=":B.charAt(63&n)].join("")},ee=function(e){return function(e){return e.replace(Z,Q)}(e).replace(/[\s\S]{1,3}/g,$)},te=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),ne=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return z(55296+(t>>>10))+z(56320+(1023&t));case 3:return z((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return z((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},ie=function(e){var t=e.length,n=t%4,i=(t>0?W[e.charAt(0)]<<18:0)|(t>1?W[e.charAt(1)]<<12:0)|(t>2?W[e.charAt(2)]<<6:0)|(t>3?W[e.charAt(3)]:0),r=[z(i>>>16),z(i>>>8&255),z(255&i)];return r.length-=[0,0,2,1][n],r.join("")},re=function(e,t){return t?ee(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):ee(String(e))},oe=function(e){return function(e){return function(e){return e.replace(/[\s\S]{1,4}/g,ie)}(e).replace(te,ne)}(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},se=new function(){var e="",t=this;this.set=function(t){e=t},this.get=function(){return e},this.getImpObj=function(){return L(oe(e))},this.getItem=function(e){var n=t.getImpObj();return n&&n[e]||""},this.load=function(){e=j().get(N.IMPRINT)},this.save=function(){e&&j().set(N.IMPRINT,e)}},ae=function(){var e=null,t=!1,n=[],i=new u(50);function r(e,t,n){if(F.instance().isLoaded()){t=t||{};var o=function(e){var t=null;switch(e){case V:t=function(){var e=null,t=H().cloneCurrentSession();return t&&(e={header:{st:"1"},analytics:{sessions:[t]}}),e}();break;case q:t=function(){var e=null,t={},n=H().cloneCurrentSession();if(n){var i=R().get(),r=P().get();Array.isArray(i)&&i.length&&(n.pages=A.clone(i)),Array.isArray(r)&&r.length&&(n.shares=A.clone(r)),R().clear(),P().clear(),t.sessions=[n]}var o=M().getEkvs();return o&&(t.ekvs=A.clone(o),M().clear()),(t.sessions||t.ekvs)&&(e={analytics:t}),e}();break;case x:t=function(){var e=null,t=M().getEkvs();return t&&(e={analytics:{ekvs:A.clone(t)}},M().clear()),e}()}return t}(e);if(o){var s=F.instance().getRealtimeFields();o.header=A.assign({},o.header,s),o.noCache=t.noCache,i.enqueue(o)}"function"==typeof n&&n()}else setTimeout((function(){r(e,t,n)}),100)}function o(e){var t=i.front();t?a(t,(function(){i.dequeue(),o(e)}),(function(){var t=i.dequeue();t&&!t.noCache&&n.push(t),o(e)})):(n.forEach((function(e){i.enqueue(e)})),n.length=0,e())}function s(e){w().getId()?t?y().i("队列正在发送中"):(t=!0,o((function(){t=!1,"function"==typeof e&&e()}))):(y().i("获取id标识失败，暂缓发送"),"function"==typeof e&&e())}function c(){this.send=function(e,t,n){e?this.add(e,t,(function(){s(n)})):s(n)},this.add=function(e,t,n){r(e,t,n)},this.load=function(){var e=j().get(N.REQUESTS);e&&e.length&&e.forEach((function(e){i.enqueue(e)})),j().remove(N.REQUESTS)},this.save=function(){j().set(N.REQUESTS,A.clone(i.items())),i.clear()}}return function(){return e||(e=new c),e}}(),ue=function(){var e=null,t=null;function n(){function e(e){if(e&&"object"==typeof e){var t=j().get(N.USER_INFO);return t&&A.deepEqual(e,t)||function(e,t){var n=m().appKey(),i=E.getSdkType(),r=w().getId(),o=w().getIdType();if(n&&i&&r&&o){var s={ak:m().appKey(),sdt:E.getSdkType(),uin:e.nickName,uia:e.avatar||e.avatarUrl,uig:e.gender,uit:e.country,uip:e.province,uic:e.city,uil:e.language,id:w().getId(),it:w().getIdType(),age:e.age,cln:e.constellation},a=JSON.stringify(s);a=re(a),E.request({url:N.ENDPOINT+N.USERINFO_URL,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:"ui="+a,success:function(n){y().v("用户信息上传成功: ",e),t&&t(n&&n.data&&200===n.data.code)},fail:function(){y().e("用户信息上传失败: ",e),t&&t(!1)}})}}(e,(function(t){t&&j().set(N.USER_INFO,e)})),!0}return!1}this.setUserInfo=function(e){t=e},this.update=function(){e(t)||E.getUserInfo((function(t){e(t)}))}}return function(){return e||(e=new n),e}}(),ce=[];p.prototype={createMethod:function(e,t,n){try{e[t]=n&&n[t]?function(){return n[t].apply(n,arguments)}:function(){ce.push([t,[].slice.call(arguments)])}}catch(e){y().v("create method errror: ",e)}},installApi:function(e,t){try{var n,i,r="resume,pause,trackEvent,trackPageStart,trackPageEnd,trackShare,setUserid,setOpenid,setUnionid,onShareAppMessage,shareAppMessage,setUserInfo".split(",");for(n=0,i=r.length;n<i;n++)this.createMethod(e,r[n],t);if(t)for(n=0,i=ce.length;n<i;n++){var o=ce[n];try{t[o[0]].apply(t,o[1])}catch(e){y().v("impl[v[0]].apply error: ",o[0],e)}}}catch(e){y().v("install api errror: ",e)}}};var fe=[N.ENDPOINT,N.ENDPOINTB];!function(e){N.ENDPOINTB&&setTimeout((function(){l(0,!1)}),e)}(3e3);var pe=new p,le={_inited:!1,_log:y(),preinit:function(e){if(e&&"object"==typeof e)for(var t in e)N[t]=e[t];return N},use:function(e,t){return e&&A.isFunction(e.install)?e.install(le,t):A.isFunction(e)&&e(le,t),le},messager:S,init:function(e){if(this._inited)y().v("已经实例过，请避免重复初始化");else if(e)if(e.appKey){"boolean"!=typeof e.useOpenid&&(e.useOpenid=!0),m().set(e),y().setDebug(e.debug),this._inited=!0;var t=this;S.emit(S.messageType.CONFIG_LOADED,e);try{var n=new f;y().v("成功创建Lib对象"),n.init((function(){y().v("Lib对象初始化成功"),pe.installApi(t,n),y().v("安装Lib接口成功"),S.emit(S.messageType.UMA_LIB_INITED,e)}))}catch(e){y().w("创建Lib对象异常: "+e)}}else y().err("请确保传入正确的appkey");else y().err("请正确设置相关信息！")}};try{pe.installApi(le,null)}catch(_){y().w("uma赋值异常: ",_)}var de="2.7.1",he="none",ge={},ve=Array.isArray;ge.isArray=ve||function(e){return"[object Array]"===toString.call(e)},ge.isObject=function(e){return e===Object(e)&&!ge.isArray(e)},ge.isEmptyObject=function(e){if(ge.isObject(e)){for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}return!1},ge.isUndefined=function(e){return void 0===e},ge.isString=function(e){return"[object String]"===toString.call(e)},ge.isDate=function(e){return"[object Date]"===toString.call(e)},ge.isNumber=function(e){return"[object Number]"===toString.call(e)},ge.each=function(e,t,n){if(null!=e){var i={},r=Array.prototype.forEach;if(r&&e.forEach===r)e.forEach(t,n);else if(e.length===+e.length){for(var o=0,s=e.length;o<s;o++)if(o in e&&t.call(n,e[o],o,e)===i)return}else for(var a in e)if(hasOwnProperty.call(e,a)&&t.call(n,e[a],a,e)===i)return}},ge.buildQuery=function(e,t){var n,i,r=[];return void 0===t&&(t="&"),ge.each(e,(function(e,t){n=encodeURIComponent(e.toString()),i=encodeURIComponent(t),r[r.length]=i+"="+n})),r.join(t)},ge.JSONDecode=function(e){if(e){try{return JSON.parse(e)}catch(e){console.error("JSONDecode error",e)}return null}},ge.JSONEncode=function(e){try{return JSON.stringify(e)}catch(e){console.error("JSONEncode error",e)}};var _e=Object.create(null),ye=Object.create(null),me=null,Se=!1,Ie={minFetchIntervalSeconds:43200};g.prototype={setDefaultValues:function(e){Se&&ge.isObject(e)&&ge.each(e,(function(e,t){ye[t]&&ye[t].v||(ye[t]={v:e})}))},getValue:function(e){y().v("从配置项中读取 value, 当前配置为: ",ye),y().v("待读取的 key : ",e);try{if(!Se)return;var t=ye[e]||{};return y().v("读取相应配置ing..., 结果为: ",t),ge.isNumber(t.e)&&ge.isNumber(t.g)&&(y().v("读取到相应配置, 开始数据上报..."),function(e){var t={appkey:m().appKey(),sdkType:E.getSdkType(),expId:e&&e.e,groupId:e&&e.g,clientTs:Date.now(),key:e&&e.k,value:e&&e.v,umid:w().getId()};try{E.request({url:"https://pslog.umeng.com/mini_ablog",method:"POST",data:[t],success:function(e){e&&200===e.statusCode?y().v("上传数据成功",t):y().w("ablog 请求成功, 返回结果异常 ",e)},fail:function(e){y().w("ablog 请求数据错误 ",t,e)}})}catch(e){y().w("urequest 调用错误",e)}}(t)),t.v}catch(t){y().w("getValue error, key: ",e)}},active:function(e){try{if(!Se)return;var t,n;e&&e.params&&(t=e.params),e&&e.callback&&(n=e.callback),y().v("激活配置项: ",t),t?(y().v("本地已缓存的配置项: ",ye),h(t),y().v("合并后的配置项: ",ye),n&&n(ye),y().v("active 结束")):(y().v("配置项为空!! 读取本地配置..."),E.getStorage(this.STORAGE_NAME,(function(e){e?(h((e=ge.JSONDecode(e)||{}).params),y().v("当前本地配置项为: ",ye),n&&n(ye),y().v("active 结束")):y().v("当前本地配置项为空, 退出激活")})))}catch(e){y().w("SDK active 错误",e)}},init:function(e){e.appKey&&(me=e.appKey,this.STORAGE_NAME="um_remote_config_{{"+me+"}}"),me?Se?y().w("SDK 已经初始化, 请避免重复初始化"):(Se=!0,this.setOptions(e),this.active()):y().err("请检查您的小程序 appKey, appKey 不能为空")},setOptions:function(e){if(ge.isObject(e)){var t=e.minFetchIntervalSeconds;ge.isNumber(t)&&(Ie.minFetchIntervalSeconds=Math.max(t,5))}},fetch:function(e){if(Se&&this.STORAGE_NAME){var t,n;e&&e.active&&(t=e.active),e&&e.callback&&(n=e.callback);var i=this;E.getStorage(this.STORAGE_NAME,(function(e){y().v("开始读缓存 data is ",e),(e=ge.JSONDecode(e)||{}).params&&e.ts&&Date.now()-e.ts<1e3*Ie.minFetchIntervalSeconds?(y().v("缓存数据存在, 并且本次触发时间距离上次fetch触发时间未超过 fetch 时间间隔, 无需 fetch"),n&&n(e.params)):d((function(e){y().v("缓存数据不存在, 构建 fetch body :",e);try{E.request({url:"https://ucc.umeng.com/v1/mini/fetch",method:"POST",data:e,success:function(e){if(e&&200===e.statusCode&&e.data&&e.data.cc){y().v("fetch 请求成功, 响应数据: ",e.data);var r=Object.create(null);ge.each(e.data.cc,(function(e){r[e.k]=e}));var o={ts:Date.now(),params:r};y().v("开始缓存 fetch 请求的云配置结果..."),E.setStorage(i.STORAGE_NAME,ge.JSONEncode(o),(function(e){y().v("缓存云配置成功, 缓存数据为: ",o),y().v("缓存云配置成功, 成功消息为: ",e),y().v("云配拉取数据是否自动激活: ",t),e&&t&&(y().v("激活云配置..."),i.active({params:r,callback:n}))}))}else y().w("fetch 请求成功,返回结果异常 ",e.data),n&&n()},fail:function(t){y().w("fetch请求数据错误 ",e,t),n&&n()}})}catch(e){y().w("urequest调用错误",e)}}))}))}}};var Oe={install:function(e,t){return e.rc||(e.rc=new g),e.messager.once(e.messager.messageType.CONFIG_LOADED,(function(){e._log.v("plugin rc installed")})),e.rc}},Ee="_um",Te="revenue",Ne="stage",Ae="level",ke="running",be="end",De="init",we="set",Re=[Ee,Ne,"start"].join("."),Ue={install:function(e,t){e.revenue=function(t){e.trackEvent([Ee,Te,t.group].join("."),v(t))};var n=0;return e.stage={onStart:function(t){n=Date.now(),e.trackEvent(Re,v(t))},onEnd:function(t){"number"!=typeof t._um_sdu&&(t._um_sdu=0!==n?Date.now()-n:0),e.trackEvent([Ee,Ne,be,t.event].join("."),v(t))},onRunning:function(t){e.trackEvent([Ee,Ne,ke,t.event].join("."),v(t))}},e.level={onInitLevel:function(t){e.trackEvent([Ee,Ae,De].join("."),v(t))},onSetLevel:function(t){e.trackEvent([Ee,Ae,we].join("."),v(t))}},e.messager.once(e.messager.messageType.CONFIG_LOADED,(function(){e._log.v("plugin game-ext installed")})),e}},Pe=E.getContext();Pe.onShow((function(e){var t;y().v("game onShow: ",e),t=e.query,U=t,le.resume(e,!0)})),Pe.onHide((function(){y().v("game onHide"),le.pause()}));var Ce=le.init;le.init=function(e){e&&e.useOpenid&&(y().tip_w(y().repeat("!")),y().tip_w("您选择了使用openid进行统计，请确保使用setOpenid回传openid或通过设置autoGetOpenid为true，并在友盟后台设置secret由友盟帮您获取"),y().tip_w(y().repeat("!"))),le.resume({}),Ce.call(le,e)},le.use(Oe),le.use(Ue),Pe.uma=le}}(),e("default",r.exports)}));e("__cjsMetaURL",t.meta.url)}}}));

System.register("chunks:///_virtual/AchievementUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDAssetManager.ts","./AppManager.ts","./UIBase.ts","./AchievementItem.ts"],(function(t){"use strict";var e,n,i,o,s,a,c,h,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){o=t.CommonUtils},function(t){s=t.Constants},function(t){a=t.RDAssetManager},function(t){c=t.App},function(t){h=t.UIBase},function(t){r=t.AchievementItem}],execute:function(){var u;n._RF.push({},"00ac5bduJxEt7MUedWGkGc7","AchievementUI",void 0);var m=i.ccclass;t("AchievementUI",m("AchievementUI")(u=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._titleNode=null,e._contentNode=null,e._achievementItem=null,e._achieveCompArr=[],e._taskDataArr=[],e}e(n,t);var i=n.prototype;return i.onLoad=function(){this._titleNode=o.getNodeByName(this.node,"title"),this._contentNode=o.getNodeByName(this.node,"content"),this._achievementItem=o.getNodeByName(this._contentNode,"achievementItem"),o.registerButtonEvent(this.node,"closeBtn",this._onCloseButton,this),this._taskDataArr=a.getInstance().getAsset("achievementList").json,this._createAchievementItem(),this.initBgOpacity()},i.getUIName=function(){return"成就"},i.show=function(){this._achieveCompArr.forEach((function(t){return t.updateData()})),this._showNativeAd(),this.playScaleInAnim([this._titleNode].concat(this._contentNode.children)),this._registerCustomEvent(!0),c.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},i.hide=function(){this._registerCustomEvent(!1),t.prototype.hide.call(this)},i._registerCustomEvent=function(t){var e=t?"on":"off";c.Event[e](s.EVENT_TYPE.CLOSE_ACHIEVE,this._playScaleOutAnim,this)},i._createAchievementItem=function(){c.Pool.putNode(this._achievementItem);for(var t=0,e=this._taskDataArr.length;t<e;t++){var n=c.Pool.getNode(this._achievementItem,this._contentNode).getComponent(r);n.init(this._taskDataArr[t]),this._achieveCompArr.push(n)}},i._showNativeAd=function(){this.createOppoNativeAdItem(this._contentNode,"成就列表框")},i._onCloseButton=function(){c.UI.isUIAnimPlaying()||(this._playScaleOutAnim(),c.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭"}))},i._playScaleOutAnim=function(t){var e=[this._titleNode].concat(this._contentNode.children);this.playScaleOutAnim(e,(function(){c.UI.hideDialog(s.UI_DIALOG_NAME.ACHIEVEMENT),t&&c.Event.emit(s.EVENT_TYPE.JUMP_TASK_MUSIC,t)}))},n}(h))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/PerlinNoise.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./AppManager.ts"],(function(r){"use strict";var i,t,e,o,a,n,s,l,h,u,c,p,m,g;return{setters:[function(r){i=r.applyDecoratedDescriptor,t=r.inheritsLoose,e=r.initializerDefineProperty,o=r.assertThisInitialized},function(r){a=r.cclegacy,n=r._decorator,s=r.Color,l=r.instantiate,h=r.v3,u=r.SpriteComponent,c=r.UITransformComponent,p=r.lerp,m=r.Component},function(r){g=r.App}],execute:function(){var f,d,b,v,T,_,y,A,C,B,w,M,L,P,z;a._RF.push({},"00b47BzAqdJgqlveIZDSG+Q","PerlinNoise",void 0);var D,N=n.ccclass,W=n.property,O=4095,Z=function(r){return.5*(1-Math.cos(r*Math.PI))};function I(r,i,t){if(i=i||0,t=t||0,null==D){D=new Array(4096);for(var e=0;e<4096;e++)D[e]=Math.random()}r<0&&(r=-r),i<0&&(i=-i),t<0&&(t=-t);for(var o,a,n,s,l,h=Math.floor(r),u=Math.floor(i),c=Math.floor(t),p=r-h,m=i-u,g=t-c,f=0,d=.5,b=0;b<4;b++){var v=h+(u<<4)+(c<<8);o=Z(p),a=Z(m),n=D[v&O],n+=o*(D[v+1&O]-n),s=D[v+16&O],n+=a*((s+=o*(D[v+16+1&O]-s))-n),s=D[(v+=256)&O],s+=o*(D[v+1&O]-s),l=D[v+16&O],s+=a*((l+=o*(D[v+16+1&O]-l))-s),f+=(n+=Z(g)*(s-n))*d,d*=.5,h<<=1,u<<=1,c<<=1,(p*=2)>=1&&(h++,p--),(m*=2)>=1&&(u++,m--),(g*=2)>=1&&(c++,g--)}return f}r("PerlinNoise",(f=N("PerlinNoise"),d=W({displayOrder:0}),b=W({displayOrder:1}),v=W({displayOrder:2}),T=W({displayOrder:3}),_=W({displayOrder:4}),y=W({displayOrder:5}),f((B=i((C=function(r){function i(){for(var i,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return i=r.call.apply(r,[this].concat(a))||this,e(i,"colorA",B,o(i)),e(i,"colorB",w,o(i)),e(i,"barCount",M,o(i)),e(i,"barLength",L,o(i)),e(i,"changePosTime",P,o(i)),e(i,"barLerpRatio",z,o(i)),i._barTransformCompArr=[],i._targetWidthArr=[],i._curDeltaTime=0,i._allTimer=100,i.bigCount=0,i.isBigZone=!1,i.BigTimer=0,i}t(i,r);var a=i.prototype;return a.start=function(){var r=this.node.getChildByName("barNode");r.parent=null;for(var i=360/this.barCount,t=1/this.barCount*2+.01,e=this.barCount/2,o=this.colorA.clone(),a=0;a<this.barCount;a++){var n=l(r);n.eulerAngles=h(0,0,i*a),this.node.addChild(n),a===e&&(o=this.colorB.clone());var s=a<e?this.colorB:this.colorA;o.lerp(s,t);var p=n.getChildByName("barImg").getComponent(u);p.color=o;var m=p.node.getComponent(c);this._barTransformCompArr.push(m)}},a.update=function(r){if(g.GameData.isLoadingMusic)0!==this._barTransformCompArr[0].width&&this._barTransformCompArr.forEach((function(r){return r.width=0}));else{if(this._curDeltaTime+=r,this._allTimer+=r,this.BigTimer+=r,this.BigTimer>=.1&&(this.isBigTime=!0),this.isBigTime){for(var i=0;i<this._targetWidthArr.length;i++){var t=.1*Math.random()-.05;this._targetWidthArr[i]+=t}this.BigTimer>=.5&&(this.BigTimer=0,this.isBigTime=!1)}if(this._curDeltaTime>=this.changePosTime){this._curDeltaTime=0,this._targetWidthArr=[];for(var e=0;e<this.barCount;e++){var o=7,a=I(1e4*this._allTimer+.1*e),n=void 0;if(!this.isBigZone)100*Math.random()<95?n=(a=Math.max(a-.4,.07))*this.barLength*.5:this.isBigZone=!0;this.isBigZone&&(n=((a=Math.min(a+.3,.5))+.15)*this.barLength*.5,++o>=7&&(o=0,this.isBigZone=!1)),this._targetWidthArr.push(n)}}for(var s=0,l=this._targetWidthArr.length;s<l;s++){var h=this._barTransformCompArr[s],u=p(h.width,this._targetWidthArr[s],this.barLerpRatio);h.width=u}}},i}(m)).prototype,"colorA",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),w=i(C.prototype,"colorB",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),M=i(C.prototype,"barCount",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),L=i(C.prototype,"barLength",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 150}}),P=i(C.prototype,"changePosTime",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),z=i(C.prototype,"barLerpRatio",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),A=C))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonComponent.ts",["cc","./Constants.ts","./AppManager.ts"],(function(){"use strict";var t,e,n,o,a;return{setters:[function(o){t=o.cclegacy,e=o.Button,n=o.EventHandler},function(t){o=t.Constants},function(t){a=t.App}],execute:function(){t._RF.push({},"02dd3dUwZNIpZHN1sN+8tfO","ButtonComponent",void 0),window.LastClickTime=0;e.prototype._onTouchEnded=function(t){var s=t.currentTarget,i=t.currentTarget.getComponent(e),c=(new Date).getTime(),r=c-window.LastClickTime;if(r>0&&r<150||!i._interactable||!i.enabledInHierarchy)r<150&&console.log("按钮点击过快，间隔时间毫秒 ====== "+r);else{var u="";switch(s.name){case"upgradeBtn":case"buffItem":default:u=o.AUDIO_SOURCE_TYPE.CLICK}a.Audio.playSound(u),window.LastClickTime=c,i._pressed&&(n.emitEvents(i.clickEvents,t),i.node.emit(e.EventType.CLICK,i)),i._pressed=!1,i._updateState(),t&&(t.propagationStopped=!0)}},t._RF.pop()}}}));

System.register("chunks:///_virtual/TempUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts"],(function(e){"use strict";var t,i,n,a,o,s,h,m,T,g,_;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,a=e.LabelComponent,o=e.SpriteComponent,s=e.SystemEventType,h=e.tween,m=e.Component},function(e){T=e.CommonUtils},function(e){g=e.Constants},function(e){_=e.App}],execute:function(){var v;i._RF.push({},"0341eUUtH9Depj4dr/JrF6Z","TempUI",void 0);var c=n.ccclass;e("TempUI",c("TempUI")(v=function(e){function i(){return e.apply(this,arguments)||this}t(i,e);var n=i.prototype;return n.start=function(){var e=this;i.Instance=this,this.StartPage=T.getNodeByName(this.node,"StartPage"),this.Btn_Start1=T.getNodeByName(this.node,"Btn_Start1"),this.Btn_Start2=T.getNodeByName(this.node,"Btn_Start2"),this.Btn_Debug=T.getNodeByName(this.node,"Btn_Debug"),this.DebugPage=T.getNodeByName(this.node,"DebugPage"),this.Tex_Time=T.getNodeByName(this.node,"Tex_Time").getComponent(a),this.Tex_BeatIndex=T.getNodeByName(this.node,"Tex_BeatIndex").getComponent(a),this.Tex_CreateCube=T.getNodeByName(this.node,"Tex_CreateCube").getComponent(a),this.Btn_Restart=T.getNodeByName(this.node,"Btn_Restart"),this.Btn_Pause=T.getNodeByName(this.node,"Btn_Pause"),this.Btn_Continue=T.getNodeByName(this.node,"Btn_Continue"),this.Btn_AutoMoveOn=T.getNodeByName(this.node,"Btn_AutoMoveOn"),this.Btn_AutoMoveOff=T.getNodeByName(this.node,"Btn_AutoMoveOff"),this.Btn_ClearData=T.getNodeByName(this.node,"Btn_ClearData"),this.GameoverPage=T.getNodeByName(this.node,"GameoverPage"),this.Btn_Restart2=T.getNodeByName(this.node,"Btn_Restart2"),this.GamewinPage=T.getNodeByName(this.node,"GamewinPage"),this.Btn_Restart3=T.getNodeByName(this.node,"Btn_Restart3"),this.GameRevivePage=T.getNodeByName(this.node,"GameRevivePage"),this.Btn_ReviveByAD=T.getNodeByName(this.node,"Btn_ReviveByAD"),this.Btn_ReviveByGold=T.getNodeByName(this.node,"Btn_ReviveByGold"),this.Img_Timer=T.getNodeByName(this.node,"Img_Timer").getComponent(o),this.Tex_Timer=T.getNodeByName(this.node,"Tex_Timer").getComponent(a),this.Tex_Gold=T.getNodeByName(this.node,"Tex_Timer").getComponent(a),this.ReadyGamePage=T.getNodeByName(this.node,"ReadyGamePage"),this.LoadMusicPage=T.getNodeByName(this.node,"LoadMusicPage"),this.NiceTip=T.getNodeByName(this.node,"NiceTip"),this.StartPage.active=!1,this.GameoverPage.active=!1,this.GamewinPage.active=!1,this.DebugPage.active=!1,this.GameRevivePage.active=!1,this.LoadMusicPage.active=!1,this.ReadyGamePage.active=!1,this.Btn_Debug.on(s.TOUCH_START,(function(){g.IS_DEBUG&&(e.DebugPage.active=!e.DebugPage.active)})),this.Btn_Pause.on(s.TOUCH_START,(function(){e.Btn_Pause.active=!1,e.Btn_Continue.active=!0,_.Event.emit(g.EVENT_TYPE.GAME_PAUSE)}),this),this.Btn_Continue.on(s.TOUCH_START,(function(){e.Btn_Pause.active=!0,e.Btn_Continue.active=!1,_.Event.emit(g.EVENT_TYPE.GAME_CONTINUE)}),this),this.Btn_AutoMoveOn.on(s.TOUCH_START,(function(){e.Btn_AutoMoveOff.active=!0,e.Btn_AutoMoveOn.active=!1}),this),this.Btn_AutoMoveOff.on(s.TOUCH_START,(function(){e.Btn_AutoMoveOff.active=!1,e.Btn_AutoMoveOn.active=!0}),this),this.Btn_Restart.on(s.TOUCH_START,(function(){_.Event.emit(g.EVENT_TYPE.RESTART)}),this),this.Btn_ClearData.on(s.TOUCH_START,(function(){_.Event.emit(g.EVENT_TYPE.CLEAR_STORAGE)}),this),this.Btn_Restart2.on(s.TOUCH_START,(function(){e.GameoverPage.active=!1,_.Event.emit(g.EVENT_TYPE.RESTART)}),this),this.Btn_Restart3.on(s.TOUCH_START,(function(){e.GamewinPage.active=!1,_.Event.emit(g.EVENT_TYPE.RESTART)}),this),this.Btn_Start1.on(s.TOUCH_START,(function(){e.StartPage.active=!1,_.Event.emit(g.EVENT_TYPE.ENTER_GAME)}),this),this.Btn_Start2.on(s.TOUCH_START,(function(){e.StartPage.active=!1,_.Event.emit(g.EVENT_TYPE.ENTER_GAME)}),this),this.Btn_ReviveByAD.on(s.TOUCH_START,(function(){e.GameRevivePage.active=!1,e.unschedule(e.timeing),_.Event.emit(g.EVENT_TYPE.GAME_REVIVE)})),this.Btn_ReviveByGold.on(s.TOUCH_START,(function(){e.GameRevivePage.active=!1,e.unschedule(e.timeing),_.Event.emit(g.EVENT_TYPE.GAME_REVIVE)}))},n.OnStartBtnClick=function(){this.StartPage.active=!1,this.LoadMusicPage.active=!0},n.MusicLoadFinish=function(){this.LoadMusicPage.active=!1},n.startGame=function(){this.ReadyGamePage.active=!1},n.readyGame=function(){this.ReadyGamePage.active=!1},n.gameover=function(){this.GameoverPage.active=!0},n.gamewin=function(){this.GamewinPage.active=!0},n.showGameRevivePage=function(){this.GameRevivePage.active=!0,this.Timer=5,this.Tex_Timer.string=this.Timer.toString(),this.Img_Timer.fillRange=1,h(this.Img_Timer).to(5,{fillRange:0}).start(),this.schedule(this.timeing,1,5,1)},n.timeing=function(){if(this.Timer<=0)return this.GameRevivePage.active=!1,void(this.GameoverPage.active=!0);this.Timer--,this.Tex_Timer.string=this.Timer.toString()},n.update=function(){this.GameRevivePage.active},n.updateTime=function(e){this.Tex_Time.string="时间:"+e.toFixed(2)},n.updateBeatIndex=function(e,t){this.Tex_BeatIndex.string="小球节奏点:"+e+"/"+t},n.updateCreateCubeIndex=function(e,t){this.Tex_CreateCube.string="生成方块数:"+e+"/"+t},n.showNiceTip=function(){},i}(m))||v);i._RF.pop()}}}));

System.register("chunks:///_virtual/TaskManager.ts",["cc","./TimeTask.ts"],(function(e){"use strict";var r,t,i,s;return{setters:[function(e){r=e.cclegacy,t=e._decorator,i=e.game},function(e){s=e.TimeTask}],execute:function(){var a,m,n;r._RF.push({},"04ad07vJpNINq6Ynu1aUDxW","TaskManager",void 0);var T=t.ccclass;t.property,e("TaskManager",T("TaskManager")((n=m=function(){function e(){e.timeTaskArr=[]}return e.update2=function(e){if(this.tempDelTimeArr.length>0)for(var r=this.tempDelTimeArr.length-1;r>=0;r--)this.removeElement(this.timeTaskArr,this.tempDelTimeArr[r]),this.removeElement(this.tempDelTimeArr,this.tempDelTimeArr[r]);for(var t=this.timeTaskArr.length-1;t>=0;t--)this.timeTaskArr[t].isPause||(this.timeTaskArr[t].curTime+=e),this.timeTaskArr[t].curTime>=this.timeTaskArr[t].destTime&&(this.timeTaskArr[t].callback(),this.removeElement(this.timeTaskArr,this.timeTaskArr[t]))},e.removeElement=function(e,r){var t=e.indexOf(r);t>=0&&e.splice(t,1)},e.addTimeTask=function(e,r,t){void 0===t&&(t=-1);var a=.001*i.frameStartTime;this.timeTaskArr.push(new s(e,r,r+a,a,t))},e.pauseTaskByID=function(e){for(var r=0;r<this.timeTaskArr.length;r++)if(this.timeTaskArr[r].taskID==e){this.timeTaskArr[r].isPause=!0;break}},e.pauseAllTask=function(){for(var e=0;e<this.timeTaskArr.length;e++)this.timeTaskArr[e].isPause=!0},e.continueAllTask=function(){for(var e=0;e<this.timeTaskArr.length;e++)this.timeTaskArr[e].isPause=!1},e.deleteTimeTaskByID=function(e){for(var r=0;r<this.timeTaskArr.length;r++)if(this.timeTaskArr[r].taskID==e){this.tempDelTimeArr.push(this.timeTaskArr[r]);break}},e.deleteAllTimeTask=function(){this.timeTaskArr=[],this.tempDelTimeArr=[]},e}(),m.timeTaskArr=new Array,m.tempDelTimeArr=new Array,a=n))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/AdsManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./RDPlatformType.ts","./AudioManager.ts","./RDAssetManager.ts","./RDPlatformParam.ts","./RDCommand.ts","./OptionsManager.ts","./Utils.ts","./GameListManger.ts","./ADMainPush.ts","./ADBannerList.ts","./ADDrawer.ts","./RDStatisticsManager.ts","./NativeAds.ts","./ADScreen.ts","./ADWxScreen.ts","./ADBombGame.ts","./ADDoubleScreen.ts","./ADGameOver.ts","./PushControl.ts","./RDPlatformManager.ts"],(function(e){"use strict";var t,n,a,i,s,o,r,c,d,l,u,g,A,D,h,v,I,m,f,C,_,p,T,S,P,M,N,O,y,B,b,E,w,R,G,L;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e.sys,i=e.find,s=e.Canvas,o=e.instantiate,r=e.loader,c=e.Prefab,d=e.v3,l=e.UITransformComponent,u=e.Component},function(e){g=e.Log},function(e){A=e.RDPlatformType},function(e){D=e.AudioManager},function(e){h=e.RDAssetManager},function(e){v=e.RDPlatformParam},function(e){I=e.RDCommand},function(e){m=e.default,f=e.OpCommand},function(e){C=e.Utils},function(e){_=e.default},function(e){p=e.ADMainPush,T=e.PUSH_TYPE},function(e){S=e.ADBannerList},function(e){P=e.ADDrawer},function(e){M=e.RDStatisticsMgr,N=e.CustomEventID},function(e){O=e.default,y=e.NativeType},function(e){B=e.ADScreen},function(e){b=e.ADWxScreen},function(e){E=e.ADBombGame},function(e){w=e.ADDoubleScreen},function(e){R=e.ADGameOver},function(e){G=e.PushControl},function(e){L=e.RDPlatformManager}],execute:function(){n._RF.push({},"062fd6yeF5Bz4Ms0dHdr7VD","AdsManager",void 0);var V=e("AdsManager",function(e){function n(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this)._playCount=2,t.lastBannerTime=null,t.lastVideoTime=null,t._interval=null,t._mainPush=[],t.bannerList=[],t.drawList=[],t._canvasComp=null,t._isShowVideoing=!1,t.startGameTime=(new Date).getTime(),t}t(n,e),n.getInstance=function(){return this._instance};var u=n.prototype;return u.init=function(){g.debug(n.TAG,"[AdsManager] Init")},u.isMatrixAdOpen=function(){return v.ADPARAM[L.getInstance().platformType].matrixAdOpen},u.showRewardAd=function(e,t){var o=this;g.log("开始播放奖励广告");var r=(new Date).getTime(),c=r-(this.lastVideoTime?this.lastVideoTime:0),d=n.AD_VIDEO_TIME;if(L.getInstance().platformType!=A.VIVOGame&&(d=0),c<=d)return L.getInstance().sendData(I.CMD_TOAST,"激励视频广告加载中"),void(e&&e.fail());this.lastVideoTime=r,L.getInstance().sendData(I.CMD_DATA_STATISTICS,{event:!0,ad_type:I.STATISTICS_CLICK_VIDEO}),(a.isNative||L.getInstance().platformType===A.VIVOGame||L.getInstance().platformType===A.XMGame)&&D.getInstance().pauseMusic(),this._isShowVideoing=!0,L.getInstance().sendData(I.CMD_SHOW_REWARD_VIDEO_AD,{success:function(n){g.log("激励视频广告播放成功"),o._isShowVideoing=!1,(a.isNative||L.getInstance().platformType===A.VIVOGame||L.getInstance().platformType===A.XMGame)&&D.getInstance().resumeMusic(),!o._canvasComp&&(o._canvasComp=i("Canvas").getComponent(s)),o._canvasComp?o._canvasComp.scheduleOnce((function(){g.log("广告播放_canvasComp成功===="),e.success(n),M.customEvent(N.custom_ad_video,{triggeringMode:t})}),.1):setTimeout((function(){g.log("广告播放setTimeout成功===="),e.success(n),M.customEvent(N.custom_ad_video,{triggeringMode:t})}),100),L.getInstance().sendData(I.CMD_DATA_STATISTICS,{event:!0,ad_type:I.STATISTICS_COMPLETE_VIDEO})},fail:function(){g.log("激励视频广告播放失败"),o._isShowVideoing=!1,e.fail(),(a.isNative||L.getInstance().platformType===A.VIVOGame||L.getInstance().platformType===A.XMGame)&&D.getInstance().resumeMusic(),L.getInstance().sendData(I.CMD_DATA_STATISTICS,{event:!0,ad_type:I.STATISTICS_FAIL_VIDEO})},eventId:t})},u.showBannerAd=function(e){if(void 0===e&&(e={}),!(!!e.mustBanner&&e.mustBanner)&&L.getInstance().isShowNativeAd(!0))return g.debug("开始原生banner广告"),void(G.getInstance()&&G.getInstance().showNativeBanner());var t=(new Date).getTime(),a=t-(this.lastBannerTime?this.lastBannerTime:0);a>=n.AD_BANNER_TIME&&(this.lastBannerTime=t),g.log("开始banner广告===",a);var i=a>=n.AD_BANNER_TIME;e.clear=i,L.getInstance().sendData(I.CMD_SHOW_BANNER_AD,e),L.getInstance().sendData(I.CMD_DATA_STATISTICS,{event:!0,ad_type:I.STATISTICS_SHOW_BANNER})},u.hideBannerAd=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),!t&&L.getInstance().isShowNativeAd(!0))return g.debug("关闭原生banner广告"),void(G.getInstance()&&G.getInstance().hideNativeBanner());g.debug("关闭banner广告"),L.getInstance().sendData(I.CMD_HIDE_BANNER_AD,e)},u.showGameBannerAd=function(){L.getInstance().sendData(I.CMD_SHOW_BANNER_OFFICE_AD,null)},u.hideGameBannerAd=function(){L.getInstance().sendData(I.CMD_HIDE_BANNER_OFFICE_AD,null)},u.showGamePortalAd=function(){L.getInstance().sendData(I.CMD_SHOW_OFFICE_PORTAL_AD,null)},u.hideGamePortalAd=function(){L.getInstance().sendData(I.CMD_HIDE_OFFICE_PORTAL_AD,null)},u.showInterstitialAd=function(e){if(void 0===e&&(e={}),L.getInstance().platformType==A.OPPOGame)return!1;var t=m.getInstance().getConfigByKey("nativeIntertital_"+e.type,0);return!(C.random(1,100)>t&&1!=e.type)&&(setTimeout((function(){L.getInstance().sendData(I.CMD_SHOW_INTERSTITIAL_VIDEO_AD,e)}),m.getInstance().getConfigByKey("nativeIntertitalDelay",1e3)),!0)},u.showNativeAd=function(e,t,n,a,i,s){return void 0===t&&(t=null),void 0===n&&(n=""),void 0===a&&(a=null),void 0===i&&(i=!1),void 0===s&&(s=1),!(!v.ADPARAM[L.getInstance().platformType.toString()].native_id||v.ADPARAM[L.getInstance().platformType.toString()].native_id.length<=0||L.getInstance().platformType==A.VIVOGame)&&(L.getInstance().sdk.getGamePortBanner()||(this.hideNativeAd(e,"nativeADPrefab"),h.getInstance().loadPrefab("adUI/nativeADPrefab","resources").then((function(r){var c=o(r);e.addChild(c);var d=c.getComponent(O);d.setNativeType(s,a,i),d.setPopupName(n),c.name="nativeADPrefab",g.log("原生广告"),t&&t(d)})).catch((function(){}))),!0)},u.showNativeInterstitial=function(e,t,n,a){return void 0===n&&(n=null),e.getChildByName("nativeInterstitialADPrefab")?(g.log("原生广告存在, 无法重新创建"),!0):(h.getInstance().loadPrefab("adUI/nativeADPrefab","resources").then((function(i){var s=o(i);e.addChild(s);var r=s.getComponent(O);r.setPopupName("原生插屏"),r.setNativeType(y.NATIVE_INTERSTITIAL,n,!1),r.setCloseCallback(t),s.name="nativeInterstitialADPrefab",a&&a(r)})),!0)},u.showNativeBannerAd=function(e,t,n,a){return void 0===n&&(n=null),!v.ADPARAM[L.getInstance().platformType.toString()].native_id||v.ADPARAM[L.getInstance().platformType.toString()].native_id.length<=0||(g.log("showNativeBannerAd"),this.hideNativeAd(e,"nativeBannerADPrefab"),h.getInstance().loadPrefab("adUI/nativeADPrefab","resources").then((function(i){var s=o(i);e.addChild(s);var r=s.getComponent(O);r.setNativeType(y.NATIVE_BANNER,n,!1),r.setCloseCallback(t),s.name="nativeBannerADPrefab",g.log("原生Banner广告"),a&&a(r)}))),!1},u.showNativeSplash=function(e,t,n,a){return void 0===n&&(n=null),e.getChildByName("nativeSplashADPrefab")?(g.log("原生广告存在, 无法重新创建"),!0):(r.loadRes("adUI/nativeADPrefab",c,null,(function(i,s){var r=o(s);e.addChild(r),r.setSiblingIndex(e.children.length-1);var c=r.getComponent(O);c.setPopupName("原生开屏"),c.setCloseCallback(t),c.setNativeType(y.NATIVE_SPLASH,n,!1),r.name="nativeSplashADPrefab",a&&a(c)})),!0)},u.hideNativeAd=function(e,t){e&&e.getChildByName(t)&&(g.log("原生广告存在, 删除"),e.removeChild(e.getChildByName(t)))},u.createNative=function(e){g.log("展示1============"),L.getInstance().sendData(I.CMD_CREATE_NATIVE_AD,e)},u.onNativeClick=function(e){L.getInstance().sendData(I.CMD_ClICK_NATIVE_AD,e)},u.showMainPush=function(e,t,n){var a=this;this.isMatrixAdOpen()&&m.getInstance().getOptionSwitchByKey(f.CMD_OPTION_SWITCH_XFDD)&&h.getInstance().loadPrefab("adUI/ADMainPush","resources").then((function(n){var i=o(n);e.addChild(i);var s=i.getComponent(p);s.setPosition(t),s.type=T.MAINPUSH,s.setScale(1.5),a._mainPush.push(s)}))},u.updateMainPush=function(){var e=this;g.log("更新主推"),_.getInstance().getPushGameByNet((function(t){var n=C.random(0,t.length);e._mainPush.length<=0||e._mainPush.forEach((function(e){e.node&&e.node.parent.active&&(g.log("======"),n>=t.length&&(n=0),e.freash(t[n]),e.setScale(1.5),n+=1)}))}))},u.hideMainPush=function(){this.isMatrixAdOpen()&&(this._mainPush.forEach((function(e){e.node.destroy()})),this._mainPush=[],clearTimeout(this._interval),this._interval=null)},u.showADDraw=function(e,t){var n=this;this.isMatrixAdOpen()&&h.getInstance().loadPrefab("adUI/ADDrawer","resources").then((function(a){var i=o(a);e.addChild(i);var s=i.getComponent(P);s.setPositionY(t),n.drawList.push(s)}))},u.hideADDraw=function(){this.isMatrixAdOpen()&&(this.drawList.forEach((function(e){e.node.destroy()})),this.drawList=[])},u.showADBannerList=function(e,t){var n=this;this.isMatrixAdOpen()&&h.getInstance().loadPrefab("adUI/ADBannerList","resources").then((function(a){var s=o(a);(e||i("Canvas")).addChild(s);var r=s.getComponent(S);r.setPosition(t),n.bannerList.push(r)}))},u.hideADBannerList=function(){this.isMatrixAdOpen()&&(this.bannerList.forEach((function(e){e.node.destroy()})),this.bannerList=[])},u.showAdDialog=function(e){this.isMatrixAdOpen()&&m.getInstance().getOptionSwitchByKey(f.CMD_OPTION_SWITCH_JSYM)&&h.getInstance().loadPrefab("adUI/ADDialog","resources").then((function(t){var n=o(t);e.addChild(n)}))},u.showAdScreen=function(e){if(void 0===e&&(e=null),this.isMatrixAdOpen()&&m.getInstance().getOptionSwitchByKey(f.CMD_OPTION_SWITCH_RMTJQPDC)){var t=i("Canvas").getChildByName("ADDoubleScreen");t&&t.active||((t=i("Canvas").getChildByName("ADScreen"))?t.active||(t.active=!0,t.getComponent(B).setCloseCallback(e)):h.getInstance().loadPrefab("adUI/ADScreen","resources").then((function(t){var n=o(t);n.name="ADScreen",i("Canvas").addChild(n);var a=n.getComponent(B);n.setPosition(d(0,0,0)),a.setCloseCallback(e)})))}},u.showAdWxScreen=function(){if(this.isMatrixAdOpen()&&m.getInstance().getOptionSwitchByKey(f.CMD_OPTION_SWITCH_RMTJQPDC)){var e=i("Canvas").getChildByName("ADWXScreen");i("Canvas").getChildByName("ADWXScreen")?(e.active=!0,e.getComponent(b).setCloseCallback(null)):h.getInstance().loadPrefab("adUI/ADWXScreen","resources").then((function(e){var t=o(e);t.name="ADWXScreen",i("Canvas").addChild(t);t.getComponent(b);t.setPosition(d(0,0,0))}))}},u.showAdBombDialog=function(e){if(void 0===e&&(e=null),this.isMatrixAdOpen()&&m.getInstance().getOptionSwitchByKey(f.CMD_OPTION_SWITCH_BKYXTC)){var t=i("Canvas").getChildByName("ADBombGame");i("Canvas").getChildByName("ADBombGame")?(t.active=!0,t.getComponent(E).setCloseCallback(e)):h.getInstance().loadPrefab("adUI/ADBombGame","resources").then((function(t){var n=o(t);n.name="ADBombGame",n.getComponent(l).priority=10,i("Canvas").addChild(n);var a=n.getComponent(E);n.setPosition(d(0,0,0)),a.setCloseCallback(e)}))}else e&&e()},u.showAdDoubleDialog=function(e){if(void 0===e&&(e=null),this.isMatrixAdOpen()&&m.getInstance().getOptionSwitchByKey(f.CMD_OPTION_SWITCH_RMTJLL)){var t=i("Canvas").getChildByName("ADDoubleScreen");t?(t.active=!0,t.getComponent(w).setCloseCallback(e)):h.getInstance().loadPrefab("adUI/ADDoubleScreen","resources").then((function(t){var n=o(t);n.name="ADDoubleScreen",i("Canvas").addChild(n);var a=n.getComponent(w);n.setPosition(d(0,0,0)),a.setCloseCallback(e)}))}else e&&e()},u.showGameOverDialog=function(e,t){if(this.isMatrixAdOpen()&&m.getInstance().getOptionSwitchByKey(f.CMD_OPTION_SWITCH_JSYM)){var n=i("Canvas").getChildByName("ADGameOver");n?(n.active=!0,n.getComponent(R).setGameResult(e,t)):h.getInstance().loadPrefab("adUI/ADGameOver","resources").then((function(n){var a=o(n);a.name="ADGameOver",i("Canvas").addChild(a);var s=a.getComponent(R);a.setPosition(d(0,0,0)),s.setGameResult(e,t)}))}else t&&t()},n}(u));V.TAG="AdsManager",V.ADS_LEVEL_COUNT=0,V.AD_BANNER_TIME=1e4,V.AD_VIDEO_TIME=6e4,V.SHOW_FULLSCREEN_AD=0,V._instance=new V,n._RF.pop()}}}));

System.register("chunks:///_virtual/Async.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"067d3bxB4JMq4yu6jMPNToA","Async",void 0);var n=function(){function t(t,i,n,e){this.i=0,this.total=t,this.limit=i,this.fn=n,this.callback=e}var i=t.prototype;return i.setLimit=function(t){return t&&(this.limit=t),this},i.setTotal=function(t){return t&&(this.total=t),this},i.setFn=function(t){return"function"==typeof t&&(this.fn=t),this},i.call=function(){var t=this.limit;t=Math.min(this.total-t,t);for(var i=this.i,n=0;n<t;n++)this.fn(i),i++;return this.i=i,i>=this.total&&(this.callback&&this.callback(),!0)},t}(),e=t("default",function(){function t(){}return t.init=function(){this._init||(this._init=!0,cc.director.getScheduler().enableForTarget(this),cc.director.getScheduler().scheduleUpdate(this,0,!1))},t.addHandler=function(t){this.handlerList.push(t)},t.stopHandler=function(t){var i=this.handlerList.indexOf(t);-1!==i&&this.handlerList.splice(i,1)},t.eachFunction=function(t,i,e,s){var r=new n(t,i,e,s);return this.addHandler(r),r},t.update=function(t){var i=this.handlerList;if(i.length>0)for(var n=0,e=i.length;n<e;n++)i[n].call()&&(i.splice(n,1),n--,e--)},t}());e._init=!1,e.handlerList=[],i._RF.pop()}}}));

System.register("chunks:///_virtual/RDOppoMiniPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Log.ts","./RDPlatformType.ts","./ConstantCommon.ts","./RDPlatformParam.ts","./OptionsManager.ts","./Utils.ts","./RDPlatform.ts"],(function(n){"use strict";var t,e,a,i,o,s,r,c,l,d,g;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,a=n.sys},function(n){i=n.EventManager},function(n){o=n.Log},function(n){s=n.RDPlatformType},function(n){r=n.ConstantCommon},function(n){c=n.RDPlatformParam},function(n){l=n.default},function(n){d=n.Utils},function(n){g=n.RDPlatform}],execute:function(){e._RF.push({},"083earze3xImZko8ytizPBv","RDOppoMiniPlatform",void 0);n("RDOppoMiniPlatform",function(n){function e(t){var e;return(e=n.call(this,t)||this).startTime=(new Date).getTime(),e}t(e,n);var g=e.prototype;return g.loadStorageData=function(n,t,e){var i=JSON.parse(a.localStorage.getItem(n[0]));t&&t(i)},g.flushStorageData=function(n,t){a.localStorage.setItem(n.key,JSON.stringify(n.data))},g.initAD=function(){var t=this;n.prototype.initAD.call(this),this._login(null);var e=c.ADPARAM[s.OPPOGame.toString()].video_id;this._videoBoxInstance=window.qg.createRewardedVideoAd({adUnitId:e}),this._videoBoxInstance.onLoad((function(){o.log("视频广告加载成功")})),this._videoBoxInstance.onError((function(n){t._showToast("暂时没有视频了，请稍后再试"),o.log("videoAd.onError,errMsg",JSON.stringify(n)),t._rewardCaback&&t._rewardCaback.fail()})),this._videoBoxInstance.onClose((function(n){o.log("玩家有操作",JSON.stringify(n)),n&&n.isEnded||void 0===n?(o.log("正常播放结束，可以下发游戏奖励"),t._rewardCaback&&t._rewardCaback.success(null)):t._rewardCaback&&(o.log("播放中途退出，不下发游戏奖励"),t._rewardCaback.fail()),t._rewardCaback=null})),setTimeout((function(){var n=c.ADPARAM[s.OPPOGame.toString()].game_banner_id;window.qg.getSystemInfoSync().platformVersionCode>=1076?(t._gameBannerADInstance=window.qg.createGameBannerAd({adUnitId:n}),t._gameBannerADInstance&&t._gameBannerADInstance.load&&(o.log("oppo横幅广告初始化"),t._gameBannerADInstance.load().then((function(){o.log("oppo横幅广告加载成功")})).catch((function(n){o.log("oppo横幅广告加载失败:"+n.errCode+","+n.errMsg)})))):o.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")}),5);for(var a=c.ADPARAM[s.OPPOGame.toString()].banner_preload_count||3,i=0;i<a;i++){var r=this.createBanner();this._bannerADInstances.push(r)}window.qg.onShow((function(){})),window.qg.onHide((function(){}))},g.createBanner=function(){var n=window.qg.getSystemInfoSync(),t={left:0,top:n.windowHeight-45,width:n.windowWidth,height:20},e=c.ADPARAM[s.OPPOGame.toString()].banner_id,a=window.qg.createBannerAd({adUnitId:e,style:t});return a.onLoad((function(){o.log("banner 广告加载成功")})),a.onError(function(n){o.log("banner 广告失败"+JSON.stringify(n))}.bind(this)),a.onResize((function(t){a.style.top=n.windowHeight-t.height,a.style.left=(n.windowWidth-t.width)/2})),a},g.shareAppMessage=function(n){},g._showToast=function(n){window.qg.showToast({title:n,icon:"none",image:"",mask:!1,duration:2e3,success:function(){},fail:function(){},complete:function(){}})},g._gotoMiniGameByAppid=function(n){o.log("跳转小游戏"+n.packName),window.qg.navigateToMiniGame({pkgName:n.packName,success:function(){o.log("跳转成功")},fail:function(n){o.log(JSON.stringify(n))},complete:function(){}})},g._vibrateShort=function(n){void 0===n&&(n=50),100!=n?this.vibrate(n):this.vibrateStrong()},g.vibrateStrong=function(){window.qg.vibrateLong({success:function(){},fail:function(){},complete:function(){}})},g.vibrate=function(n){(new Date).getTime()-this._lastShakeTime<100||(this._lastShakeTime=(new Date).getTime(),window.qg.vibrateShort({success:function(){},fail:function(){},complete:function(){}}))},g._showBannerAd=function(n){var t=this;if(this.isReviewed())o.log("审核中=====");else if((new Date).getTime()-this.startTime<l.getInstance().getConfigByKey("delayShow",2e4))o.log("oppo前面60s不能出现banner条广告");else if(this.isReviewed())o.log("审核中=====");else{var e=c.ADPARAM[s.OPPOGame.toString()].banner_preload_count||1;this._bannerShowIndex>=e&&(this._bannerShowIndex=0),o.log("调用banner"+this._bannerADInstances.length+" ==== "+this._bannerShowIndex),this._bannerADInstance&&this._bannerADInstance.hide(),this._bannerADInstance=null,this._bannerShow=!1;var a=this._bannerADInstances[this._bannerShowIndex];a?(o.log("调用banner"),a.show().then((function(){o.log("banner 广告显示"),t._bannerShow=!0})).catch((function(n){o.log("banner 广告显示失败"+n)})),this._bannerADInstance=a):o.log("banner 广告显示失败"),this._bannerShowIndex+=1}},g._showGameBannerAd=function(n){if(o.log("oppo横幅广告显示"),!this._gameBannerADInstance){o.log("创建oppo横幅广告");var t=c.ADPARAM[s.OPPOGame.toString()].game_banner_id;window.qg.getSystemInfoSync().platformVersionCode>=1076?(this._gameBannerADInstance=window.qg.createGameBannerAd({adUnitId:t}),this._gameBannerADInstance&&this._gameBannerADInstance.load&&this._gameBannerADInstance.load().then((function(){o.log("oppo横幅广告加载成功")})).catch((function(n){o.log("oppo横幅广告加载失败:"+n.errCode+","+n.errMsg)}))):o.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")}this._gameBannerADInstance&&this._gameBannerADInstance.show().then((function(){o.log("oppo横幅广告 显示成功")})).catch((function(n){o.log("oppo横幅广告 显示失败:"+n.errCode+","+n.errMsg)}))},g._hideGameBannerAd=function(n){this._gameBannerADInstance&&this._gameBannerADInstance.hide().then((function(){o.log("隐藏oppo横幅广告 成功")})).catch((function(n){o.log("隐藏oppo横幅广告 失败:"+n.errCode+","+n.errMsg)}))},g._showGamePortalAd=function(n){var t=this;if(o.log("_showGamePortalAd"),this._gamePortalADInstance=null,this._isShowGamePortalAd=!0,!this._gamePortalADInstance){var e=c.ADPARAM[s.OPPOGame.toString()].game_portal_id;window.qg.getSystemInfoSync().platformVersionCode>=1076?(this._gamePortalADInstance=window.qg.createGamePortalAd({adUnitId:e}),this._gamePortalADInstance.load(),this._gamePortalADInstance.onLoad(function(){o.log("互推盒子九宫格广告加载成功"),this._gamePortalADInstance.show().then((function(){o.log("互推盒子九宫格广告展示 成功"),i.getInstance().emit(r.EVENT_TYPE.NATIVE_AD_HIDE)})).catch((function(n){o.log("互推盒子九宫格广告展示 失败"+n.errCode+","+n.errMsg)}))}.bind(this)),this._gamePortalADInstance.onError((function(n){o.log("互推盒子九宫格广告 错误"+JSON.stringify(n)),t._isShowGamePortalAd=!1})),this._gamePortalADInstance.onClose((function(){o.log("互推盒子九宫格广告关闭"),t._isShowGamePortalAd=!1,i.getInstance().emit(r.EVENT_TYPE.NATIVE_AD_SHOW)}))):o.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")}},g._hideGamePortalAd=function(n){this._gamePortalADInstance&&(this._gamePortalADInstance.destroy().then((function(){o.log("destroy success")})).catch((function(n){o.log("destroy fail with:"+n.errCode+","+n.errMsg)})),this._gamePortalADInstance=null)},g._showVideo=function(n){if(this.isReviewed())this._rewardCaback&&this._rewardCaback.success(null);else{o.log("准备激励广告 展示开始");var t=this;this._videoBoxInstance.load(),this._videoBoxInstance.onLoad((function(){o.log("激励广告 展示开始");try{t._videoBoxInstance.show()}catch(n){o.log("激励广告 失败"+JSON.stringify(n))}}))}},g._showIntertitalAd=function(t){var e=this;if(!this.isReviewed()&&(n.prototype._showIntertitalAd.call(this,null),!this._interstitialAdInstance)){o.log("開始广告加载成功");var a=c.ADPARAM[s.OPPOGame.toString()].interstital_id;this._interstitialAdInstance=window.qg.createInterstitialAd({adUnitId:a}),this._interstitialAdInstance&&(this._interstitialAdInstance.onLoad((function(){o.log("插屏 广告加载成功");try{e._interstitialAdInstance.show()}catch(n){o.log("插屏展示失败"+JSON.stringify(n))}})),this._interstitialAdInstance.onError((function(n){o.log("插屏失败"+JSON.stringify(n))})),this._interstitialAdInstance.onClose((function(n){o.log("插屏 广告关闭")})),this._interstitialAdInstance.onShow((function(){o.log("插屏视频广告展示")})))}},g.initNativeAd=function(n){var t=this;this._destoryNativeAd({name:n});var e=window.qg.createNativeAd({adUnitId:n});e.load(),this._nativeLastTime[n]=(new Date).getTime(),e.onLoad((function(a){o.log("加载原生广告成功====",n,JSON.stringify(a)),a.adList&&a.adList.length>0?(t._nativeADInstances.set(n,e),a.adList[0].name=n,!t._nativeAdParam&&(t._nativeAdParam=[]),t._nativeAdParam.push({nativeId:n,param:a.adList[0]}),t._reportAdShow(a.adList[0])):(o.log("没有广告内容"),e.offError(),e.offLoad(),t._nativeLastTime[n]=null)})),e.onError((function(a){o.log("原生广告加载异常",n,JSON.stringify(a)),e.offError(),e.offLoad(),t._nativeLastTime[n]=null}))},g._createNativeAd=function(n){if(o.log("获取原生广告",JSON.stringify(n)),this._nativeAdParam.length<=0)return o.log("原生广告未加载成功，稍后重试"),n.callback.fail();o.log("获取前原生广告id",this._nativeAdParam);var t=this._nativeAdParam.shift();o.log("成功获取原生广告参数",t.nativeId,JSON.stringify(t)),n.callback&&n.callback.success(t.param),this._nativeAdParam.push(t),o.log("原生广告参数后顺序调换",t.nativeId,JSON.stringify(t))},g._reportAdShow=function(n){d.random(0,100)<=l.getInstance().getConfigByKey("native_report",100)&&this._nativeADInstances.has(n.name)&&this._nativeADInstances.get(n.name).reportAdShow({adId:n.adId})},g._nativeAdClick=function(n){o.log("点击原生广告",JSON.stringify(n)),this._nativeADInstances.has(n.name)&&(o.log("点击原生广告",n.name,n.adId),this._nativeADInstances.get(n.name).reportAdClick({adId:n.adId}),this.initNativeAd(n.name))},g._destoryNativeAd=function(t){o.log("销毁这个原生广告前列表",t.name,JSON.stringify(this._nativeAdParam)),n.prototype._destoryNativeAd.call(this,t),this._nativeADInstances.has(t.name)&&(this._nativeADInstances.get(t.name).offLoad(),this._nativeADInstances.get(t.name).offError(),this._nativeADInstances.get(t.name).destroy(),this._nativeADInstances.delete(t.name),o.log("销毁这个原生广告后列表",JSON.stringify(this._nativeAdParam)))},g._createShortcutInstalled=function(n){var t=this;window.qg.hasShortcutInstalled({success:function(n){o.log("判断图标未存在时，创建图标"+JSON.stringify(n)),t._hasShortcutInstalled=n},fail:function(n){},complete:function(){}})},g._installShortcut=function(n){o.log("各个平台处理");var t=this;window.qg.installShortcut({success:function(){o.log("各个平台处理==="),t._hasShortcutInstalled=!1,t._shortCutInstalledCaback&&t._shortCutInstalledCaback.success(null)},fail:function(n){o.log("各个平台处理1111111==="),t._shortCutInstalledCaback&&t._shortCutInstalledCaback.fail()},complete:function(){}})},g._login=function(n){var t=this;this.loadStorageData(["userId"],(function(n){if(n)o.log("userId",JSON.stringify(n)),t._userInf.userId=n.userId;else{var e=d.getUUID();t.flushStorageData({key:"userId",data:{userId:e}},(function(){})),t._userInf.userId=e}}),(function(n){})),setTimeout((function(){window.qg.login({success:function(n){var e="用户信息:"+JSON.stringify(n.data);o.log(e),t._userInf.userName=n.data.nickName,t._userInf.userHead=n.data.avatar,l.getInstance().login(n.data.token,"OPPO","A1")},fail:function(n){o.log(JSON.stringify(n))}})}),.1)},g.isShowNativeAd=function(n){return!0},g.exitGame=function(){window.qg.exitApplication({})},e}(g));e._RF.pop()}}}));

System.register("chunks:///_virtual/hitColor.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts"],(function(t){"use strict";var i,e,o,s,n,r;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,s=t.MeshRenderer,n=t.Component},function(t){r=t.CommonUtils}],execute:function(){var c;e._RF.push({},"08c5czId0lIe7vikc8qDfcj","hitColor",void 0);var a=o.ccclass;t("HitColor",a("HitColor")(c=function(t){function e(){for(var i,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(i=t.call.apply(t,[this].concat(o))||this)._mtlPass=null,i._ratioHandle=0,i._curTime=0,i._hitFxNode=null,i}i(e,t);var o=e.prototype;return o.onLoad=function(){this._mtlPass=this.getComponent(s).material.passes[0],this._ratioHandle=this._mtlPass.getHandle("ratio"),this._hitFxNode=r.getNodeByName(this.node.parent,"hit_fx")},o.init=function(){this._curTime=.2},o.update=function(t){if(!(this._curTime<=0)){this._curTime-=t,this._curTime=this._curTime>0?this._curTime:0;var i=1-Math.abs(2*this._curTime/.2-1);this._mtlPass.setUniform(this._ratioHandle,i)}},e}(n))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIConstant.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){var E,c,e,u;n._RF.push({},"0aa91EoAD1C56hrXtnopgpM","UIConstant",void 0);var o=t("default",(function(){}));o.UI_PREFAB_DEFAULT_URL="prefab/ui/",o.STATUS=(c=E=function(){},E.LOADING=1,E.PUT=1,E.DESTROY=1,E.EXISTENCE=1,c),o.ZINDEX=(u=e=function(){},e.SCENE=20,e.PANEL=80,e.UI=100,e.DIALOG=200,e.TIPS=300,e.GUIDE=400,e.NOTICE=500,e.LOADING=600,e.PUT_EVENT=1e3,u),n._RF.pop()}}}));

System.register("chunks:///_virtual/GameControl.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDPlatformType.ts","./RDPlatformManager.ts","./AppManager.ts","./TaskManager.ts","./RDSocialManager.ts","./PlayerMgr.ts","./MapMgr.ts"],(function(a){"use strict";var t,e,n,i,o,s,r,m,E,_,c,u,l;return{setters:[function(a){t=a.inheritsLoose},function(a){e=a.cclegacy,n=a._decorator,i=a.Component},function(a){o=a.CommonUtils},function(a){s=a.Constants},function(a){r=a.RDPlatformType},function(a){m=a.RDPlatformManager},function(a){E=a.App},function(a){_=a.TaskManager},function(a){c=a.RDSocialManager},function(a){u=a.PlayerMgr},function(a){l=a.MapMgr}],execute:function(){var G;e._RF.push({},"0ab8aa2wglBn6tkL3SB0EUO","GameControl",void 0);var g=n.ccclass;a("GameControl",g("GameControl")(G=function(a){function e(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(t=a.call.apply(a,[this].concat(n))||this)._mapMgr=null,t._playerMgr=null,t._gamePlayTime=0,t}t(e,a);var n=e.prototype;return n.onLoad=function(){this._mapMgr=o.getNodeComponent(this.node,"mapMgr",l),this._playerMgr=o.getNodeComponent(this._mapMgr.node,"playerMgr",u),this._initCustomEvent(),this._gameInit()},n._initCustomEvent=function(){E.Event.on(s.EVENT_TYPE.GAME_START,this._gameStart,this),E.Event.on(s.EVENT_TYPE.GAME_RESULT,this._gameResult,this),E.Event.on(s.EVENT_TYPE.RESTART,this._gameRestart,this),E.Event.on(s.EVENT_TYPE.GAME_REVIVE,this._gameRevive,this),E.Event.on(s.EVENT_TYPE.GAME_OVER,this._gameOver,this),E.Event.on(s.EVENT_TYPE.QUICK_START,this._gameQuickStart,this),E.Event.on(s.EVENT_TYPE.ENTER_GAME,this._enterGameScene,this),E.Event.on(s.EVENT_TYPE.GAME_PAUSE,this._gamePause,this),E.Event.on(s.EVENT_TYPE.GAME_CONTINUE,this._gameContinue,this),E.Event.on(s.EVENT_TYPE.GAME_WIN,this._gameWin,this),E.Event.on(s.EVENT_TYPE.CLEAR_STORAGE,this._clearLocalStorage,this),E.Event.on(s.EVENT_TYPE.CLEAR_MAP_INFO,this._clearGameInfo,this)},n._gameInit=function(){E.GameData.gameGold=E.Account.gameGold,E.GameData.settingInfo=E.Account.settingInfo,E.GameData.curLevel=E.Account.level,this.schedule(this._timeSchedule,1),E.UI.createAdLayer(),E.UI.showDialog(s.UI_DIALOG_NAME.COMMON),E.UI.showDialog(s.UI_DIALOG_NAME.MAIN),E.playBgm()},n._timeSchedule=function(){this._gamePlayTime++,E.GameData.onlineAwardTimer<s.ONLINE_INTERVAL_TIME&&E.GameData.onlineAwardTimer++,E.Event.emit(s.EVENT_TYPE.UPDATE_TIME)},n._resetData=function(){var a=E.GameData;a.isStartGame=!1,a.isGameOver=!1,a.isGameWin=!1,a.isInFinsh=!1,a.curBeatCnt=0,a.curGetGold=0,a.reviveCnt=0,a.curAICnt=14,a.playerAllSoldierLevel=0,a.curLeaderArr=[],a.mercenaryCampArr=[]},n._enterGameScene=function(){var a=this;this._resetData(),E.GameData.isInHome=!1,E.UI.showDialog(s.UI_DIALOG_NAME.LOADING,(function(){a._mapMgr.enterGameScene()}))},n._gameStart=function(){E.GameData.isStartGame||E.GameData.isGameOver||(E.GameData.isReadyStart=!1,E.GameData.isStartGame=!0,E.GameData.isPause=!1,E.GameData.isGameOver=!1,this._mapMgr.startGame(),this._playerMgr.startGame(),c.getInstance().startRecordVideo(300))},n.update=function(a){_.update2(a),this._mapMgr.update2(a)},n._gamePause=function(){E.GameData.isPause=!0,this._mapMgr.pauseGame(),_.pauseAllTask()},n._gameContinue=function(){E.GameData.isPause=!1,this._mapMgr.continueGame(),_.continueAllTask()},n._gameRestart=function(){this._resetData(),this._mapMgr.restartGame()},n._gameRevive=function(){this._playerMgr.reviveGame(),E.Stats.customEvent("复活游戏",{})},n._gameOver=function(){E.GameData.isStartGame=!1,E.GameData.isPause=!0,E.GameData.isGameOver=!0,this._mapMgr.gameOver(),E.Event.emit(s.EVENT_TYPE.GAME_RESULT),E.Stats.customEvent("游戏结束",{}),c.getInstance().pauseRecordVideo()},n._gameQuickStart=function(){E.UI.hideDialog(s.UI_DIALOG_NAME.COMMON),E.UI.hideDialog(s.UI_DIALOG_NAME.MAIN),E.Event.emit(s.EVENT_TYPE.ENTER_GAME)},n._gameWin=function(){E.GameData.isGameWin=!0,this._mapMgr.gameWin(),this.scheduleOnce((function(){E.Event.emit(s.EVENT_TYPE.GAME_RESULT)}),3),E.Stats.customEvent("游戏胜利",{})},n._gameResult=function(){if(E.GameData.isStartGame=!1,E.GameData.isPause=!1,E.GameData.isGameOver=!1,E.Audio.playSound(s.AUDIO_SOURCE_TYPE.RESULT),E.GameData.gameMode===s.GAME_MODE.PK)E.UI.hideDialog(s.UI_DIALOG_NAME.GAME),E.UI.showDialog(s.UI_DIALOG_NAME.PK_RESULT);else{var a=m.getInstance().platformType===r.TTMinGame;E.UI.hideDialog(s.UI_DIALOG_NAME.GAME),E.UI.showDialog(a?s.UI_DIALOG_NAME.SHARE_HOT:s.UI_DIALOG_NAME.GAME_RESULT),E.UI.showDialog(s.UI_DIALOG_NAME.COMMON)}},n._clearGameInfo=function(){E.GameData.playerSpd=.2*E.GameData.playerInitSpd,this._mapMgr.clearMapInfo()},n._clearLocalStorage=function(){E.Account.clear()},n.onDestroy=function(){E.Audio.releaseAudioClip(),E.Stats.customEvent("退出游戏",{"游戏时长/秒":this._gamePlayTime}),E.Stats.logout()},e}(i))||G);e._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc","./Log.ts"],(function(e){"use strict";var t,n,r;return{setters:[function(e){t=e.cclegacy,n=e.view},function(e){r=e.Log}],execute:function(){t._RF.push({},"0bff3bUxhdCJrEoZGTVmgyd","Utils",void 0),e("Utils",function(){function e(){}return e.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.getRandFromArr=function(e,t,n){if(void 0===n&&(n=!1),!(e instanceof Array))return[];var r=e.length,i=[];for(t=r<t?r:t;i.length<t;){var o=e[this.random(0,r-1)];n?i.indexOf(o)<0&&i.push(o):i.push(o)}return i},e.parseTime=function(e,t){if(0===arguments.length)return null;var n,r=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"==typeof e?n=e:("string"==typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"==typeof e&&10===e.toString().length&&(e*=1e3),n=new Date(e));var i={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},o=r.replace(/{([ymdhisa])+}/g,(function(e,t){var n=i[t];return"a"===t?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")}));return o},e.isNextDay=function(t,n){var r=e.getDateStruct(t),i=e.getDateStruct(n);return r.y>i.y||r.m>i.m||r.d>i.d},e.isSameDay=function(e,t){return new Date(e).setHours(0,0,0,0)===new Date(t).setHours(0,0,0,0)},e.isSameWeek=function(e,t){var n=new Date(e).setHours(0,0,0,0),r=new Date(t).setHours(0,0,0,0),i=864e5,o=Math.floor(n/i),a=Math.floor(r/i);return Math.floor((o+4)/7)===Math.floor((a+4)/7)},e.getDateStruct=function(e){"number"==typeof e&&10===e.toString().length&&(e*=1e3);var t=new Date(e);return{y:t.getFullYear(),m:t.getMonth()+1,d:t.getDate(),h:t.getHours(),i:t.getMinutes(),s:t.getSeconds(),a:t.getDay()}},e.formatTime=function(e,t){},e.paramSecond=function(e){return e?Math.ceil(new Date(e).getTime()/1e3):0},e.isIphoneX=function(){var e=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&3===window.devicePixelRatio&&375===window.screen.width&&812===window.screen.height,t=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&3===window.devicePixelRatio&&414===window.screen.width&&896===window.screen.height,n=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&2===window.devicePixelRatio&&414===window.screen.width&&896===window.screen.height;return r.log("当前机型为isIphoneX:"+e+"isIPhoneXSMax:"+t+"isIPhoneXR:"+n),e||t||n},e.isMiniScreen=function(){return n.getFrameSize().height/n.getFrameSize().width<=1.8},e.getUUID=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},e.isEmpty=function(e){return!e||e.length<=0},e.IsUrl=function(e){if(!e)return!1;var t=new RegExp(/^((http|https):\/\/)?(([A-Za-z0-9]+-[A-Za-z0-9]+|[A-Za-z0-9]+)\.)+([A-Za-z]+)[/\?\:]?.*$/);return!(""!==e&&!t.test(e))},e.IsImage=function(e){if(!e)return!1;var t=new RegExp(/\.(png|jpg|gif|jpeg|webp)$/);return!(""!==e&&!t.test(e))},e}()).TAG="Utils",t._RF.pop()}}}));

System.register("chunks:///_virtual/Simulator.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./AppManager.ts","./Common.ts","./Agent.ts","./kdtree.ts"],(function(t){"use strict";var e,i,n,s,a,o,h,r,g,c;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,n=t.math},function(t){s=t.Constants},function(t){a=t.App},function(t){o=t.Vector2,h=t.RVOMath,r=t.Obstacle},function(t){g=t.Agent},function(t){c=t.KdTree}],execute:function(){i._RF.push({},"0cce9QedcJH9Itthveb21oO","Simulator",void 0);t("Simulator",function(){function t(){this.agentId=0,this.agentIdLst=[],this.aid2agent=Object.create(null),this._obsDict=new Map,this.obstacles=[],this.kdTree=new c,this.time=0}var i=t.prototype;return i.getAgent=function(t){return this.aid2agent[this.agentIdLst[t]]},i.getAgentByAid=function(t){var e=new g;return e.position_.copy(this.aid2agent[t].position_),e.maxNeighbors_=this.aid2agent[t].maxNeighbors_,e.maxSpeed_=this.aid2agent[t].maxSpeed_,e.neighborDist=this.aid2agent[t].neighborDist,e.radius_=this.aid2agent[t].radius_,e.timeHorizon=this.aid2agent[t].timeHorizon,e.timeHorizonObst=this.aid2agent[t].timeHorizonObst,e.obstaclNeighbors_=this.aid2agent[t].obstaclNeighbors_,e.orcaLines_=this.aid2agent[t].orcaLines_,e.prefVelocity_.copy(this.aid2agent[t].prefVelocity_),e.newVelocity_.copy(this.aid2agent[t].newVelocity_),e.velocity_.copy(this.aid2agent[t].velocity_),e.id=this.aid2agent[t].id,e},i.getCurTime=function(){return this.time},i.getNumAgents=function(){return this.agentIdLst.length},i.getAgentIdList=function(){return this.agentIdLst},i.setAgentPrefVelocity=function(t,e){this.aid2agent[t].prefVelocity_.copy(e)},i.getAgentPosition=function(t){return this.hasAgent(t)?isNaN(this.aid2agent[t].position_.x)||isNaN(this.aid2agent[t].position_.y)?this.aid2agent[t].defaultPos:this.aid2agent[t].position_:new o(0,0)},i.setAgentPosition=function(t,e){this.hasAgent(t)&&this.aid2agent[t].position_.copy(e)},i.getAgentPrefVelocity=function(t){return this.aid2agent[t].prefVelocity_},i.getAgentVelocity=function(t){return this.aid2agent[t].velocity_},i.getAgentRadius=function(t){return this.aid2agent[t].radius_},i.getAgentOrcaLines=function(t){return this.aid2agent[t].orcaLines_},i.addAgent=function(t){if(!this.defaultAgent)throw new Error("no default agent");var e=new g;return e.defaultPos.copy(t),e.position_.copy(t),e.maxNeighbors_=this.defaultAgent.maxNeighbors_,e.maxSpeed_=this.defaultAgent.maxSpeed_,e.neighborDist=this.defaultAgent.neighborDist,e.radius_=this.defaultAgent.radius_,e.timeHorizon=this.defaultAgent.timeHorizon,e.timeHorizonObst=this.defaultAgent.timeHorizonObst,e.velocity_.copy(this.defaultAgent.velocity_),e.id=this.agentId++,this.aid2agent[e.id]=e,this.agentIdLst.push(e.id),e.id},i.removeAgent=function(t){if(this.hasAgent(t)){delete this.aid2agent[t];var e=this.agentIdLst.indexOf(t);this.agentIdLst[e]=this.agentIdLst[this.agentIdLst.length-1],this.agentIdLst.length--,this.buildAgentTree()}},i.hasAgent=function(t){return!!this.aid2agent[t]},i.setAgentMass=function(t,e){this.aid2agent[t].mass=e},i.getAgentMass=function(t){return this.aid2agent[t].mass},i.setAgentRadius=function(t,e){this.aid2agent[t].radius_=e},i.setAgentDefaults=function(t,e,i,n,s,a,o){this.defaultAgent||(this.defaultAgent=new g),this.defaultAgent.maxNeighbors_=e,this.defaultAgent.maxSpeed_=a,this.defaultAgent.neighborDist=t,this.defaultAgent.radius_=s,this.defaultAgent.timeHorizon=i,this.defaultAgent.timeHorizonObst=n,this.defaultAgent.velocity_=o},i.run=function(t){this.time+=t},i.buildAgentTree=function(){this.kdTree.buildAgentTree(this.getNumAgents())},i.agentRun=function(t,e){this.hasAgent(t)&&(this.aid2agent[t].computeNeighbors(this),this.aid2agent[t].computeNewVelocity(e),this.aid2agent[t].update(e))},i.addObstacle=function(t){if(t.length<2)return-1;for(var e=this.obstacles.length,i=0;i<t.length;++i){var n=new r;n.point=t[i],0!=i&&(n.previous=this.obstacles[this.obstacles.length-1],n.previous.next=n),i==t.length-1&&(n.next=this.obstacles[e],n.next.previous=n),n.direction=h.normalize(t[i==t.length-1?0:i+1].minus(t[i])),2==t.length?n.convex=!0:n.convex=h.leftOf(t[0==i?t.length-1:i-1],t[i],t[i==t.length-1?0:i+1])>=0,n.id=this.obstacles.length,this.obstacles.push(n)}return e},i.addBoxObstacle=function(t,e,i,s){void 0===i&&(i=e),void 0===s&&(s=0);var a=t.x+e/2,h=t.x-e/2,r=t.z+i/2,g=t.z-i/2,c=n.toRadian(-s),u=[new o(Math.cos(c)*(a-t.x)-Math.sin(c)*(r-t.z)+t.x,Math.sin(c)*(a-t.x)+Math.cos(c)*(r-t.z)+t.z),new o(Math.cos(c)*(h-t.x)-Math.sin(c)*(r-t.z)+t.x,Math.sin(c)*(h-t.x)+Math.cos(c)*(r-t.z)+t.z),new o(Math.cos(c)*(h-t.x)-Math.sin(c)*(g-t.z)+t.x,Math.sin(c)*(h-t.x)+Math.cos(c)*(g-t.z)+t.z),new o(Math.cos(c)*(a-t.x)-Math.sin(c)*(g-t.z)+t.x,Math.sin(c)*(a-t.x)+Math.cos(c)*(g-t.z)+t.z)],d=this.addObstacle(u);return this.kdTree.buildObstacleTree(),this._obsDict.set(d.toString(),this.obstacles.length-d),{obstacleNo:d,obsPointArr:u}},i.removeBoxObstacle=function(t){var e=t.toString();if(this.hasObstacle(t)&&this._obsDict.has(e)){var i=this._obsDict.get(e);this.obstacles.splice(t,i),this._obsDict.delete(e),this.kdTree.buildObstacleTree(),a.Event.emit(s.EVENT_TYPE.UPDATE_OBSTACLE_ID,t,i)}},i.setObsDict=function(t,e){var i=this._obsDict.get(e);this._obsDict.set(t,i),this._obsDict.delete(e)},i.getObstacleById=function(t){return this.obstacles[t]},i.hasObstacle=function(t){return!!this.obstacles[t]},i.processObstacles=function(){this.kdTree.buildObstacleTree()},i.queryVisibility=function(t,e,i){return this.kdTree.queryVisibility(t,e,i)},i.getObstacles=function(){return this.obstacles},i.clear=function(){this.time=0,this.agentIdLst.length=0,this.agentId=0,this.aid2agent=Object.create(null),this.defaultAgent=null,this.kdTree=new c,this.obstacles.length=0,this._obsDict.clear()},e(t,null,[{key:"instance",get:function(){return t._inst||(t._inst=new t),t._inst}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/AccountData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Constants.ts","./ConstantCommon.ts","./IDataModel.ts","./constant-user.ts"],(function(e){"use strict";var t,a,n,i,s,u,y,r;return{setters:[function(e){t=e.inheritsLoose,a=e.createClass},function(e){n=e.cclegacy},function(e){i=e.EventManager},function(e){s=e.Constants},function(e){u=e.ConstantCommon},function(e){y=e.IDataModel},function(e){r=e.ACCOUNT}],execute:function(){n._RF.push({},"0db7e3XfEFB8bf940SIePwQ","AccountData",void 0);e("default",function(e){function n(){var t;return(t=e.call(this,"wzbdd2")||this)._evtMgr=i.getInstance(),t}t(n,e),n.getInstance=function(){return null==n.singleInstance&&(n.singleInstance=new n),n.singleInstance};var y=n.prototype;return y.initData=function(){this.saveValueByKey(r.GOLD,0),this.saveValueByKey(r.FIRST_GAME,1),this.saveValueByKey(r.CURRENT_MAP_ID,1),this.saveValueByKey(r.STAGE,1)},y.saveValueByKey=function(e,t){this.Set(e,t),this.Save()},y.getValueByKey=function(e){return this.Query(e)},y.nexLevel=function(){var e=this.getValueByKey(r.STAGE);e+=1,console.log("nextLevel",e),this.saveValueByKey(r.STAGE,e)},y.initOnlineReward=function(){this.saveValueByKey(r.ONLINE_REWARD,JSON.stringify({recvCnt:0,videoTimes:0}))},y.getMusicData=function(e){var t=this.getValueByKey(r.MUSIC_DATA);t||(t=JSON.stringify({}),this.saveValueByKey(r.MUSIC_DATA,t));var a=JSON.parse(t)[e];return a||{isUnlock:!1}},y.setMusicData=function(e,t){var a=JSON.parse(this.getValueByKey(r.MUSIC_DATA));a[e]=t,this.saveValueByKey(r.MUSIC_DATA,JSON.stringify(a))},y.getPlayerRankData=function(){var e=this.getValueByKey(r.PLAYER_RANK_DATA);e||(e=JSON.stringify({rankId:1,HpLevel:1,damageLevel:1,teamType:0,keyCnt:3,skinType:0,weaponId:0,showWeaponCnt:0}),this.saveValueByKey(r.PLAYER_RANK_DATA,e));var t=JSON.parse(e);return t||{rankId:1,HpLevel:1,damageLevel:1,teamType:0,keyCnt:3,skinType:0,weaponId:0,showWeaponCnt:0}},y.setPlayerRankData=function(e){var t=e;this.saveValueByKey(r.PLAYER_RANK_DATA,JSON.stringify(t))},y.getTreasureBoxData=function(e){var t=this.getValueByKey(r.TREASURE_BOX_DATA);t||(t=JSON.stringify({}),this.saveValueByKey(r.TREASURE_BOX_DATA,t));var a=JSON.parse(t)[e];return a||{isOpen:!1,diamond:0}},y.setTreasureBoxData=function(e,t){var a=JSON.parse(this.getValueByKey(r.TREASURE_BOX_DATA));a[e]=t,this.saveValueByKey(r.TREASURE_BOX_DATA,JSON.stringify(a))},y.getGuideArrowData=function(){var e=this.getValueByKey(r.GUIDE_ARROW_DATA);e||(e=JSON.stringify({isBuildBarrack:!1,isBuildTank:!1,isBuildUAV:!1}),this.saveValueByKey(r.GUIDE_ARROW_DATA,e));var t=JSON.parse(e);return t||{isBuildBarrack:!1,isBuildTank:!1,isBuildUAV:!1}},y.setGuideArrowData=function(e){this.saveValueByKey(r.GUIDE_ARROW_DATA,JSON.stringify(e))},y.getWeaponData=function(e){var t=this.getValueByKey(r.WEAPON_DATA);t||(t=JSON.stringify({}),this.saveValueByKey(r.WEAPON_DATA,t));var a=JSON.parse(t)[e];return a||{isUnlock:!1}},y.setWeaponData=function(e,t){var a=JSON.parse(this.getValueByKey(r.WEAPON_DATA));a[e]=t,this.saveValueByKey(r.WEAPON_DATA,JSON.stringify(a))},y.getPlayerSkinData=function(e){var t=this.getValueByKey(r.SKIN_DATA);t||(t=JSON.stringify({}),this.saveValueByKey(r.SKIN_DATA,t));var a=JSON.parse(t)[e];return a||{isUnlock:!1}},y.setPlayerSkinData=function(e,t){var a=JSON.parse(this.getValueByKey(r.SKIN_DATA));a[e]=t,this.saveValueByKey(r.SKIN_DATA,JSON.stringify(a))},y.getAchievement=function(e){var t=this.getValueByKey(r.ACHIEVEMENT);t||(t=JSON.stringify({}),this.saveValueByKey(r.ACHIEVEMENT,t));var a=JSON.parse(t)[e];return a||{taskLevel:0,statistic:0}},y.setAchievement=function(e,t){var a=JSON.parse(this.getValueByKey(r.ACHIEVEMENT));a[e]=t,this.saveValueByKey(r.ACHIEVEMENT,JSON.stringify(a))},y.getMapData=function(e){return this._getUnlockData(r.MAP_DATA,e)},y.setMapData=function(e,t){this._setUnlockData(r.MAP_DATA,e,t)},y._getReveData=function(e){var t=this.getValueByKey(e);return t||(t=JSON.stringify({count:0,time:0}),this.saveValueByKey(e,t)),JSON.parse(t)},y._getUnlockData=function(e,t){var a=this.getValueByKey(e);a||(a=JSON.stringify({}),this.saveValueByKey(e,a));var n=JSON.parse(a)[t];return n||{isUnlock:!1}},y._setUnlockData=function(e,t,a){var n=JSON.parse(this.getValueByKey(e));n[t]=a,this.saveValueByKey(e,JSON.stringify(n))},a(n,[{key:"level",get:function(){return this.getValueByKey(r.STAGE)},set:function(e){this.saveValueByKey(r.STAGE,e)}},{key:"gameGold",get:function(){return this.getValueByKey(r.GOLD)},set:function(e){this.gameGold>=e&&this._evtMgr.emit(s.EVENT_TYPE.UPDATE_GOLD);var t=Math.max(0,e);this.saveValueByKey(r.GOLD,t)}},{key:"voucher",get:function(){var e;return null!==(e=this.getValueByKey(r.VOUCHER))&&void 0!==e?e:0},set:function(e){var t=Math.max(0,e);this.saveValueByKey(r.VOUCHER,t),this._evtMgr.emit(s.EVENT_TYPE.UPDATE_VOUCHER)}},{key:"signInfo",get:function(){return this._getReveData(r.SIGN_IN)},set:function(e){this.saveValueByKey(r.SIGN_IN,JSON.stringify(e))}},{key:"drawCount",get:function(){var e;return null!==(e=this.getValueByKey(r.DRAW_COUNT))&&void 0!==e?e:0},set:function(e){this.saveValueByKey(r.DRAW_COUNT,e)}},{key:"turntableInfo",get:function(){return this._getReveData(r.TURN_TABLE)},set:function(e){this.saveValueByKey(r.TURN_TABLE,JSON.stringify(e))}},{key:"onlineReward",get:function(){return JSON.parse(this.getValueByKey(r.ONLINE_REWARD))||{recvCnt:0,videoTimes:0}},set:function(e){this.saveValueByKey(r.ONLINE_REWARD,JSON.stringify(e))}},{key:"vipTime",get:function(){var e;return null!==(e=this.getValueByKey(r.VIP_TIME))&&void 0!==e?e:0},set:function(e){this.saveValueByKey(r.VIP_TIME,e)}},{key:"vipVideoCntArray",get:function(){return JSON.parse(this.getValueByKey(r.VIP_VIDEO_COUNT))||[]},set:function(e){this.saveValueByKey(r.VIP_VIDEO_COUNT,JSON.stringify(e))}},{key:"curPlyerSkinId",get:function(){return this.getValueByKey(r.CURRENT_PLAYER_SKIN_ID)},set:function(e){this.saveValueByKey(r.CURRENT_PLAYER_SKIN_ID,e)}},{key:"isFirstGame",get:function(){return 1===this.getValueByKey(r.FIRST_GAME)},set:function(e){this.saveValueByKey(r.FIRST_GAME,e?1:0)}},{key:"isPrivacyAgree",get:function(){return 1===this.getValueByKey(u.PRIVACY_AGREE)},set:function(e){this.saveValueByKey(u.PRIVACY_AGREE,e?1:0)}},{key:"settingInfo",get:function(){var e=this.getValueByKey(r.SETTING);return e||(e=JSON.stringify({musicVolume:1,soundVolume:1,isVibrate:!0}),this.saveValueByKey(r.SETTING,e)),JSON.parse(e)},set:function(e){this.saveValueByKey(r.SETTING,JSON.stringify(e))}},{key:"curMapId",get:function(){return this.getValueByKey(r.CURRENT_MAP_ID)},set:function(e){this.saveValueByKey(r.CURRENT_MAP_ID,e)}},{key:"loginDays",get:function(){return this._getReveData(r.LOGIN_DAYS)},set:function(e){this.saveValueByKey(r.LOGIN_DAYS,JSON.stringify(e))}}]),n}(y)).singleInstance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts","./UIBase.ts","./ListView.ts","./LevelItem.ts"],(function(t){"use strict";var e,i,n,o,s,l,a,c,u,r,h;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,o=t.ScrollView,s=t.ButtonComponent},function(t){l=t.CommonUtils},function(t){a=t.Constants},function(t){c=t.App},function(t){u=t.UIBase},function(t){r=t.ListView},function(t){h=t.LevelItem}],execute:function(){var _;i._RF.push({},"0dd5dRfB2RMXbtlJ2n8XYrM","LevelUI",void 0);var v=n.ccclass;t("LevelUI",v("LevelUI")(_=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._levelScrollView=null,e._levelListNode=null,e._listViewComp=null,e._labelNode=null,e}e(i,t);var n=i.prototype;return n.onLoad=function(){this._levelScrollView=l.getNodeComponent(this.node,"levelListScrollView",o),this._levelListNode=l.getNodeByName(this._levelScrollView.node,"levelListContent"),this._listViewComp=this._levelScrollView.getComponent(r),this._labelNode=l.getNodeByName(this.node,"labelNode"),l.getNodeByName(this.node,"closeBtn").on(s.EventType.CLICK,this._onCloseButton,this),this.initBgOpacity(),this.initOppoNativeAd(),this.alignOppoNativeAd(this._levelScrollView.node)},n.show=function(){this.showUICnt++,c.Event.emit(a.EVENT_TYPE.PLAYER_INIT),this.playScaleInAnim([this._labelNode,this._levelScrollView.node]),this.showAdvertisement(),this._registerCustomEvent(!0),this._listViewComp.scrollTo(0),this._listViewComp.itemCnt=c.MusicDataMgr.getDataCount(),c.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},n.hide=function(){this._registerCustomEvent(!1)},n.getUIName=function(){return"关卡选择"},n.onMusicItemRender=function(t,e){var i=t.getComponent(h),n=c.MusicDataMgr.getDataByIndex(e);i.init(n)},n._registerCustomEvent=function(t){var e=t?"on":"off";c.Event[e](a.EVENT_TYPE.UPDATE_MUSIC,this._updateMusicInfo,this),c.Event[e](a.EVENT_TYPE.JUMP_TASK_MUSIC,this._scrollToTaskMusic,this)},n._updateMusicInfo=function(t){},n._scrollToTaskMusic=function(t){switch(t){case a.ACHIEVEMENT_TYPE.CLEAR_STAGE:c.MusicDataMgr.getFirstUnclearedData().index;break;case a.ACHIEVEMENT_TYPE.UNLOCK_MUSIC:c.MusicDataMgr.getFirstLockData().index}},n._onCloseButton=function(){c.UI.isUIAnimPlaying()||(this.unscheduleAllCallbacks(),this._playScaleOutAnim(),c.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭"}))},n._playScaleOutAnim=function(){var t=[this._labelNode,this._levelScrollView.node];this.playScaleOutAnim(t,(function(){c.UI.hideDialog(a.UI_DIALOG_NAME.LEVELUI)}))},i}(u))||_);i._RF.pop()}}}));

System.register("chunks:///_virtual/JungleMap.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./MapBase.ts"],(function(t){"use strict";var e,r,a,o,s,n;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,a=t._decorator,o=t.color,s=t.ParticleUtils},function(t){n=t.MapBase}],execute:function(){var c;r._RF.push({},"0e744MeNf9LSaywIl81Eolu","JungleMap",void 0);var i=a.ccclass;t("JungleMap",i("JungleMap")(c=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).dayColorInfo={rock:o(156,107,140),grass1:o(0,149,76),grass2:o(0,113,82),leaf:o(52,136,135),treetop:o(143,221,50),terrain:o(114,83,65)},e.nightColorInfo={rock:o(105,39,126),grass1:o(209,124,60),grass2:o(170,35,123),leaf:o(62,148,221),treetop:o(62,148,221),terrain:o(78,32,69)},e}return e(r,t),r.prototype.setParticleEffect=function(t){this.sunrayEffect.active=t,this.fogEffect.active=t;var e=t?"play":"stop";s[e](this.sunrayEffect),s[e](this.fogEffect)},r}(n))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/RDIOSPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./RDPlatformType.ts","./RDPlatformParam.ts","./OptionsManager.ts","./RDPlatform.ts"],(function(t){"use strict";var e,o,i,n,a,r,s,l;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t.sys},function(t){n=t.Log},function(t){a=t.RDPlatformType},function(t){r=t.RDPlatformParam},function(t){s=t.default},function(t){l=t.RDPlatform}],execute:function(){o._RF.push({},"0ff50Lje9dLdK+7LvU0J7C6","RDIOSPlatform",void 0);t("RDIOSPlatform",function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var l=o.prototype;return l.initAD=function(){this._hasShortcutInstalled=!0},l.isReviewed=function(){return s.getInstance().getConfigByKey("iphone_reviewed",!0)},l._showBannerAd=function(t){if(!this.isReviewed()){n.log("ios show Banner");var e=r.ADPARAM[a.Ios.toString()].banner_id,o=window.jsb.reflection.callStaticMethod("AdManager","showBannerAd:",e);n.log("ios return"+o)}},l._hideBannerAd=function(t){n.log("ios hide Banner")},l._showVideo=function(t){if(this.isReviewed())this._rewardCaback&&this._rewardCaback.success(null);else{n.log("ios show video");var e=r.ADPARAM[a.Ios.toString()].video_id;window.jsb.reflection.callStaticMethod("AdManager","showVideoAd:",e)}},l._showIntertitalAd=function(t){if(!this.isReviewed()){n.log("ios show video");var e=r.ADPARAM[a.Ios.toString()].interstital_id;window.jsb.reflection.callStaticMethod("AdManager","showFullScreenAd:",e)}},l._vibrateShort=function(t){},l.loadStorageData=function(t,e,o){var n=JSON.parse(i.localStorage.getItem(t[0]));e&&e(n)},l.flushStorageData=function(t,e){i.localStorage.setItem(t.key,JSON.stringify(t.data))},o}(l));o._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyAIMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./Utils.ts","./AppManager.ts","./TaskManager.ts","./hitColor.ts","./Common.ts","./Simulator.ts","./AttackAreaMgr.ts","./BloodBarMgr.ts","./PlayerMgr.ts"],(function(t){"use strict";var e,i,a,n,r,o,s,l,c,h,d,_,u,g,m,T,f,k,A,p,C,v,E,N,P,y,R,B,M,D,b,S;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass,a=t.asyncToGenerator},function(t){n=t.cclegacy,r=t._decorator,o=t.Vec3,s=t.v3,l=t.geometry,c=t.SkeletalAnimation,h=t.find,d=t.Tween,_=t.SphereCollider,u=t.BoxCollider,g=t.isValid,m=t.MeshRenderer,T=t.tween,f=t.math,k=t.physics,A=t.Component,p=t.easing},function(t){C=t.CommonUtils},function(t){v=t.Constants},function(t){E=t.Utils},function(t){N=t.App},function(t){P=t.TaskManager},function(t){y=t.HitColor},function(t){R=t.Vector2,B=t.RVOMath},function(t){M=t.Simulator},function(t){D=t.AttackAreaMgr},function(t){b=t.BloodBarMgr},function(t){S=t.PlayerMgr}],execute:function(){var I;n._RF.push({},"106b4q+AdRM3ITi90CK3WV9","EnemyAIMgr",void 0);var U,G=r.ccclass;!function(t){t.IDLE="Idle",t.RUN="Running",t.DEATH="Death",t.WIN="Win",t.ATTACK="Construct",t.CARRY_IDLE="carryIdle",t.CARRY_RUN="carryRunning"}(U||(U={}));t("EnemyAIMgr",G("EnemyAIMgr")(I=function(t){function n(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this)._characterNode=null,e._hummerNode=null,e._brickHolder=null,e._bornPos=o.ZERO,e._skeletalAnim=null,e._targetNode=null,e._preTargetType=v.ENEMY_TARGET_TYPE.NONE,e._aid=-1,e._teamType=-1,e._buffArr=[],e._isUnderConstruction=!1,e._curBrickCnt=0,e._isInit=!1,e._isRunning=!1,e._isStaticState=!1,e._searchTime=0,e._totalSearchTime=5,e._rankData=null,e._curHP=0,e._buildCnt=10,e._attackTargetComp=null,e._attackTargetPosOffet=s(),e._attackCD=0,e._isGo2Build=!1,e._hitColorMgr=null,e.bloodBarMgr=null,e._attackAreaMgr=null,e._ray=new l.Ray,e}e(n,t);var r=n.prototype;return r.onLoad=function(){this._characterNode=C.getNodeByName(this.node,"characterNode"),this._hummerNode=C.getNodeByName(this._characterNode,"hammer"),this._brickHolder=C.getNodeByName(this._characterNode,"Brick_Holder"),this._skeletalAnim=C.getNodeComponent(this._characterNode,"leader",c)},r.onDisable=function(){this.unscheduleAllCallbacks(),this._registerCustomEvent(!1),this._resetData()},r.init=function(t,e,i){var a,n;void 0===i&&(i=o.ZERO),this._bornPos=i,M.instance.setAgentDefaults(2,10,1,1,1,99,new R(0,0)),this._targetNode=e;var r=N.RankDataMgr.getPlayerRankData().rankId;this._rankData=N.RankDataMgr.getDataById(r),this.HP=N.RankDataMgr.getAILeaderHpById(this._rankData.id),this._buffArr=[],this._isGo2Build=!1;var s=new R(this.node.worldPosition.x,this.node.worldPosition.z),l=M.instance.addAgent(s);M.instance.setAgentMass(l,1),this._aid=l,this._teamType=t,this.brickCnt=0,this._setCharacterMtl(),this._buildCnt=10,this._attackTargetComp=null,this._attackCD=0,N.GameData.curLeaderArr.push(this.node),this._preTargetType=v.ENEMY_TARGET_TYPE.NONE,M.instance.buildAgentTree(),this._hummerNode.active=!0,null===(a=this._skeletalAnim)||void 0===a||a.stop(),null===(n=this._skeletalAnim)||void 0===n||n.crossFade(U.IDLE),this._isRunning=!1,this._isStaticState=!1,this._isUnderConstruction=!1,this._isInit=!0,this._registerCustomEvent(!0),this.updateScale(),this._initBloodBar(),this._initWeapon()},r._initWeapon=function(){var t=N.WeaponDataMgr.getRandomWeaponData();this._initAttackArea(t)},r._initAttackArea=function(t){var e=this;this._attackAreaMgr&&N.Pool.putNode(this._attackAreaMgr.node),this._attackAreaMgr=null,N.Res.loadPrefab("attackArea/attackArea_"+t.weaponType,"prefab").then((function(i){var a,n=C.getNodeByName(e._characterNode,"attackAreaNode");n.destroyAllChildren();var r=N.Pool.getNode(i,n);e._attackAreaMgr=C.getNodeComponent(r,r.name,D),null===(a=e._attackAreaMgr)||void 0===a||a.init(e,t)}))},r._initBloodBar=function(t){var e=this;void 0===t&&(t=s(0,5.5,0)),this.bloodBarMgr&&N.Pool.putNode(this.bloodBarMgr.node),this.bloodBarMgr=null,N.Res.loadPrefab("prefab/ui/item/bloodBarItem").then((function(i){var a=h("Canvas/BloodBarParentNode"),n=N.Pool.getNode(i,a);C.getNodeComponent(n,n.name,b).init(e,t)}))},r._resetData=function(){var t;this._attackCD=0,this._isGo2Build=!1,this._attackTargetComp=null,N.Event.emit(v.EVENT_TYPE.REMOVE_GUIDE_TIP,this._aid),N.Event.emit(v.EVENT_TYPE.SET_RANK_ITEM,this.teamType,this.brickCnt,this.HP<=0),this._isInit=!1,this._isUnderConstruction=!1,this._targetNode=null,this._bornPos=o.ZERO,M.instance.removeAgent(this._aid),this._aid=-1,this.HP=0,this._teamType=-1,this.brickCnt=0,this._buildCnt=10,this._rankData=null,d.stopAllByTarget(this.node),null===(t=this._attackAreaMgr)||void 0===t||t.resetArea(!0),this.bloodBarMgr&&N.Pool.putNode(this.bloodBarMgr.node),this.bloodBarMgr=null;for(var e=this._brickHolder.children,i=e.length-1;i>=0;i--)N.Pool.putNode(e[i]);for(var a=0;a<N.GameData.curLeaderArr.length;a++){N.GameData.curLeaderArr[a]==this.node&&N.GameData.curLeaderArr.splice(a,1)}},r._removeAI=function(t){var e,i,a=this;(void 0===t&&(t=!1),this._registerCustomEvent(!1),this._resetData(),t)?(null===(e=this._skeletalAnim)||void 0===e||e.stop(),null===(i=this._skeletalAnim)||void 0===i||i.crossFade(U.DEATH),this.scheduleOnce((function(){N.Pool.putNode(a.node)}),2)):N.Pool.putNode(this.node)},r._registerCustomEvent=function(t){var e=t?"on":"off";N.Event[e](v.EVENT_TYPE.UPDATE_AGENT_TARGET,this._updateTargetNode,this),N.Event[e](v.EVENT_TYPE.GAME_START,this._gameStart,this),N.Event[e](v.EVENT_TYPE.GAME_PAUSE,this._gamePause,this),N.Event[e](v.EVENT_TYPE.GAME_CONTINUE,this._gameContinue,this),this.node.getComponent(_)&&this.node.getComponent(_)[e]("onTriggerStay",this._onTriggerStay,this),t&&this.node.getComponent(_)&&(this.node.getComponent(_).radius=v.ATTACK_RANGE);var i=C.getNodeByName(this.node,"brickTrigger");t&&i&&(i.getComponent(_).radius=v.ADD_BRICK_RANGE);var a=C.getNodeByName(this.node,"hitPoint");a&&(a.getComponent(u).enabled=t),i&&(i.getComponent(_).enabled=t)},r._gamePause=function(){var t,e;null===(t=this._skeletalAnim)||void 0===t||t.stop(),null===(e=this._skeletalAnim)||void 0===e||e.crossFade(U.IDLE)},r._gameContinue=function(){var t,e;null===(t=this._skeletalAnim)||void 0===t||t.stop(),null===(e=this._skeletalAnim)||void 0===e||e.crossFade(U.RUN)},r._onTriggerStay=function(t){var e=this,i=t.otherCollider;if(g(i)&&N.GameData.isInGame()){var a=i.node.name,r=M.instance.getCurTime(),s=r>10&&E.random(0,100)<=r/2;if("hitPoint"==a)if(C.getParentByName(i.node,"enemyAI")){var l=C.getParentComponent(i.node,"enemyAI",n),c=o.squaredDistance(this.node.worldPosition,i.node.worldPosition);if(s&&l!=this&&!this._attackTargetComp&&!l.attackTargetComp&&c<=450&&this._attackCD<=0){this._attackTargetComp=l,l.attackTargetComp=this;var h=this.isAttackStronger?this.aid:l.aid,d=this.isAttackStronger?l.node:this.node;N.Event.emit(v.EVENT_TYPE.UPDATE_AGENT_TARGET,h,d),this.scheduleOnce((function(){e._attackTargetComp=null,e._attackCD=4,e.lookForNewTarget(!1)}),4),l.scheduleOnce((function(){l.attackTargetComp=null,l.lookForNewTarget(!1)}),4),console.log(this.isAttackStronger?this.teamType:l.teamType,"追击>>>>>>>>>>",this.isAttackStronger?l.teamType:this.teamType)}}else if(C.getParentByName(i.node,"playerMgr")){var _=C.getParentComponent(i.node,"playerMgr",S),u=o.squaredDistance(this.node.worldPosition,i.node.worldPosition);s&&!this._attackTargetComp&&!_.attackTargetComp&&u<=450&&this._attackCD<=0&&(this._attackTargetComp=_,_.attackTargetComp=this,this.isAttackStronger&&this._updateTargetNode(this._aid,_.node),this.scheduleOnce((function(){e._attackTargetComp=null,e._attackCD=3,e.lookForNewTarget(!1)}),4),_.scheduleOnce((function(){_.attackTargetComp=null}),4))}}},r._setCharacterMtl=function(){var t=this;this._hitColorMgr=null,N.Res.loadTexture("skin/player_new/player_"+this.teamType%5,"texture").then((function(e){var i,a;C.getNodeComponent(t._characterNode,"js",m).material.setProperty("mainTexture",e),C.getNodeByName(t._characterNode,"shadow").setScale(2,2,2),t._skeletalAnim=C.getNodeComponent(t._characterNode,"leader",c),null===(i=t._skeletalAnim)||void 0===i||i.stop(),null===(a=t._skeletalAnim)||void 0===a||a.crossFade(t._isRunning?U.RUN:U.IDLE),C.getNodeByName(t._characterNode,"leader").active=!0,t._hitColorMgr=C.getNodeComponent(t._characterNode,"js",y),t._loadCap()}))},r._loadCap=function(){var t=this;N.Res.loadPrefab("playerCap/cap_"+C.getRandomInteger(3,N.SkinDataMgr.getDataCount()-1),"prefab").then((function(e){var i=C.getNodeByName(t._characterNode,"cp Socket");i.destroyAllChildren();N.Pool.getNode(e,i)}))},r._gameStart=function(){N.Event.emit(v.EVENT_TYPE.SET_GUIDE_TIP,this._aid,this.node,this.teamType),N.Event.emit(v.EVENT_TYPE.SET_RANK_ITEM,this.teamType,this.brickCnt)},r._buildBarrack=function(){var t,e;if(!(this.brickCnt<10||this.HP<=0||this.isMaxSoldierCnt||this.isAttackStronger)){this._preTargetType=v.ENEMY_TARGET_TYPE.NONE,this._isUnderConstruction=!0;Math.floor(this.brickCnt/10);var i=this._brickHolder.children[0];i&&(d.stopAllByTarget(i),T(i).to(v.BUILD_BARRACK_TIME,{scale:s(1,0,1)}).call((function(){N.Pool.putNode(i)})).start()),this._buildCnt=10,this.brickCnt=0,null===(t=this._skeletalAnim)||void 0===t||t.stop(),null===(e=this._skeletalAnim)||void 0===e||e.crossFade(U.CARRY_IDLE),this._hummerNode.active=!0;var a=v.BUILD_BARRACK_TIME;this.scheduleOnce((function(){}),a)}},r.flyBrick=function(t,e){var i=this;void 0===e&&(e=5),N.Res.loadPrefab("Brick","prefab").then((function(a){for(var n=t.worldPosition.clone(),r=n.clone().subtract(i._brickHolder.worldPosition.clone()).normalize(),o=function(t){var o=t*(v.BUILD_BARRACK_TIME/v.FLY_BARRACK_COUNT),l=N.Pool.getNode(a,i._brickHolder);C.getNodeComponent(l,"box",m).material.setProperty("mainColor",v.SOLDIER_COLOR_ARRAY[i.teamType%5]),l.setWorldRotationFromEuler(0,f.toDegree(Math.atan2(-r.z,r.x))+90,0),l.setWorldPosition(i._brickHolder.worldPosition),l.setScale(0,0,0),d.stopAllByTarget(l),T(l).delay(o).to(0,{scale:s(1,1,1)}).to(.5,{worldPosition:C.jumpTo_v3(n,e)},{easing:p.sineInOut}).call((function(){N.Pool.putNode(l)})).start()},l=0;l<v.FLY_BARRACK_COUNT;l++)o(l)}))},r.addBuff=function(t){var e=this,i=this._buffArr.indexOf(t),a=10*this._aid+t.type;-1!==i?(P.deleteTimeTaskByID(a),this.updateScale(),t.type==v.BUFF_TYPE.GET&&this.addBrick(t.level),P.addTimeTask((function(){e.removeBuff(t)}),10,a)):(this._buffArr.push(t),this.updateScale(),t.type==v.BUFF_TYPE.GET&&this.addBrick(t.level),P.addTimeTask((function(){e.removeBuff(t)}),10,a))},r.removeBuff=function(t){var e=this._buffArr.indexOf(t);-1!==e&&this._buffArr.splice(e,1)},r.getBuffData=function(t){for(var e=0;e<this._buffArr.length;e++){var i=this._buffArr[e];if(i.type==t)return i}return null},r.addBrick=function(){var t=a(regeneratorRuntime.mark((function t(e,i,a){var n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=0),void 0===i&&(i=0),void 0===a&&(a=!1),n=i>0?i:this.searchBrickCnt,(r=this.getBuffData(v.BUFF_TYPE.BRICK))&&0==e&&(n+=r.level),0!=e&&(n=1==e?5:10),t.next=9,N.Res.loadPrefab("Brick","prefab").then((function(t){o._isUnderConstruction&&!a||o.HP<=0||!o.isCanCollect||(o.brickCnt=o.brickCnt+n,o.updateScale(),N.Event.emit(v.EVENT_TYPE.SET_RANK_ITEM,o.teamType,o.brickCnt))}));case 9:case"end":return t.stop()}}),t,this)})));return function(e,i,a){return t.apply(this,arguments)}}(),r.getAllSoldierLevel=function(){return 0},r.updateScale=function(){var t,e=this.getBuffData(v.BUFF_TYPE.RANGE),i=1;e&&(i*=1==e.level?1.3:1.5);var a=this.brickCnt/200,n=Math.min(1+a,6);this._characterNode.setScale(n,n,n);var r=C.getNodeByName(this.node,"brickTrigger");r&&(r.getComponent(_).radius=v.ADD_BRICK_RANGE*n*i),null===(t=this.bloodBarMgr)||void 0===t||t.setOffsetPos(s(0,5*n,0))},r._setPreferredVelocities=function(){var t=new R(this._targetNode.worldPosition.x,this._targetNode.worldPosition.z);this.attackTargetComp&&this.isAttackStronger&&(t.x+=this._attackTargetPosOffet.x,t.y+=this._attackTargetPosOffet.z);var e=t.minus(M.instance.getAgentPosition(this._aid));if(B.absSq(e)>1){var i=v.AGENT_SPEED*(this.getBuffData(v.BUFF_TYPE.SPEED)?1.4:1);this.attackTargetComp&&!this.isAttackStronger&&(i*=.95),e=B.normalize(e).scale(i)}if(B.absSq(e)<1){var a,n;if(M.instance.setAgentPrefVelocity(this._aid,new R(0,0)),this.lookForNewTarget(!1),this._isRunning&&!this._isUnderConstruction)null===(a=this._skeletalAnim)||void 0===a||a.stop(),null===(n=this._skeletalAnim)||void 0===n||n.crossFade(U.IDLE),this._isRunning=!1}else{M.instance.setAgentPrefVelocity(this._aid,e);var r,o,s=2*Math.random()*Math.PI,l=1e-4*Math.random();if(M.instance.setAgentPrefVelocity(this._aid,M.instance.getAgentPrefVelocity(this._aid).plus(new R(Math.cos(s),Math.sin(s)).scale(l))),!this._isRunning&&!this._isUnderConstruction)null===(r=this._skeletalAnim)||void 0===r||r.stop(),null===(o=this._skeletalAnim)||void 0===o||o.crossFade(U.RUN),this._isRunning=!0}},r.update=function(t){if(N.GameData.isInGame()&&this._isInit){if(!this._targetNode||this._isStaticState||this._isUnderConstruction)this._targetNode||this._isStaticState||this._isUnderConstruction||this.lookForNewTarget(!0);else{var e,i;this._setPreferredVelocities(),M.instance.agentRun(this._aid,t);var a=M.instance.getAgentPosition(this._aid);this.node.setWorldPosition(a.x,0,a.y);var n=this._targetNode.worldPosition.clone();this.attackTargetComp&&this.isAttackStronger&&n.add(this._attackTargetPosOffet);var r=n.subtract(this._characterNode.worldPosition).normalize();this._characterNode.setWorldRotationFromEuler(0,f.toDegree(Math.atan2(-r.z,r.x))+90,0),null===(e=this._attackAreaMgr)||void 0===e||e.updateArea(t),this._searchTime+=t,(this._searchTime>=this._totalSearchTime||(null===(i=this._attackTargetComp)||void 0===i?void 0:i.HP)<=0)&&this.lookForNewTarget(!1)}this._attackCD>=0&&(this._attackCD-=t)}},r.lookForNewTarget=function(t){var e,i=this;if(void 0===t&&(t=!1),!(this.HP<=0)&&N.GameData.isInGame()){(null===(e=this._attackTargetComp)||void 0===e?void 0:e.HP)<=0&&(this._attackTargetComp=null);var a=t?E.random(0,100)>=60?0:E.random(0,2):0;a>0&&(this._isStaticState=!0,this.playAttackAnim()),this.scheduleOnce((function(){i._isStaticState=!1,i.HP>0&&N.Event.emit(v.EVENT_TYPE.SET_AGENT_TARGET,i._aid,i._rankData,i.node.worldPosition.clone())}),a)}},r.playAttackAnim=function(t){var e,i,a,n,r=this;if(void 0===t&&(t=!1),!this.isUnderConstruction){this._isRunning=!1,null===(e=this._skeletalAnim)||void 0===e||e.stop(),null===(i=this._skeletalAnim)||void 0===i||i.crossFade(U.ATTACK),null===(a=this._attackAreaMgr)||void 0===a||a.attack(t),this._isUnderConstruction=!0;var o=this._skeletalAnim?null===(n=this._skeletalAnim)||void 0===n?void 0:n.getState(U.ATTACK).duration:0;this.scheduleOnce((function(){r._isUnderConstruction=!1}),o/3)}},r.raycastEnemy=function(t){void 0===t&&(t=6);var e=this._characterNode.worldPosition,i=this._characterNode.forward.clone();l.Ray.set(this._ray,e.x,e.y,e.z,-i.x,-i.y,-i.z);var a=k.PhysicsSystem.instance;if(a.raycast(this._ray,v.COLLIDER_GROUP.HIT_POINT,t,!0))for(var r=a.raycastResults,o=0;o<r.length;o++){var s=r[o].collider;if(!g(s))return;var c=C.getParentComponent(s.node,"enemyAI",n)||C.getParentComponent(s.node,"playerMgr",S);if(c&&c.HP>0&&this.teamType!==c.teamType)return this.lookForNewTarget(!1),void this.playAttackAnim()}},r._updateTargetNode=function(t,e){if(this._aid==t&&e){if(this._searchTime=0,this._totalSearchTime=E.random(3,6),this._attackTargetComp&&this._attackTargetComp.HP>0&&this.isAttackStronger){var i=E.random(-10,10),a=E.random(-10,10);return this._attackTargetPosOffet=s(i,0,a),this._targetNode=this._attackTargetComp.node,this._totalSearchTime=E.random(1,3),void(this._preTargetType=v.ENEMY_TARGET_TYPE.NONE)}this._targetNode=e}},r._getAttckLeaderNode=function(){var t=E.random(0,N.GameData.curLeaderArr.length-1);return N.GameData.curLeaderArr[t]},r.HitByBullet=function(t,e){var i,a;if(void 0===e&&(e=null),!(this.HP<=0)){this.HP-=t,null===(i=this.bloodBarMgr)||void 0===i||i.updateBlood(-t),null===(a=this._hitColorMgr)||void 0===a||a.init();var n=e instanceof S;this.HP<=0?(e&&e.HP>0&&e.addBrick(0,this.brickCnt+100,!0),N.Event.emit(v.EVENT_TYPE.SET_RANK_ITEM,this.teamType,this.brickCnt,this.HP<=0,0,!1),--N.GameData.curAICnt<=0&&N.Event.emit(v.EVENT_TYPE.GAME_WIN),n&&N.Audio.playSound(v.AUDIO_SOURCE_TYPE.PLAYER_DEATH,1),this._removeAI(!0)):this.scheduleOnce((function(){n&&N.Audio.playSound(v.AUDIO_SOURCE_TYPE.GET_HIT,1.5)}),.1)}},r.updateCameraPos=function(){},i(n,[{key:"brickHolder",get:function(){return this._brickHolder}},{key:"aid",get:function(){return this._aid}},{key:"teamType",get:function(){return this._teamType}},{key:"buffArr",get:function(){return this._buffArr}},{key:"isUnderConstruction",get:function(){return this._isUnderConstruction}},{key:"brickCnt",get:function(){return this._curBrickCnt},set:function(t){this._curBrickCnt=t}},{key:"HP",get:function(){return this._curHP},set:function(t){this._curHP=t}},{key:"totalHP",get:function(){return N.RankDataMgr.getAILeaderHpById(this._rankData.id)}},{key:"isCanCollect",get:function(){return!0}},{key:"isCanShoot",get:function(){return!0}},{key:"searchBrickCnt",get:function(){var t=-1!=this.teamType&&this._rankData?this._rankData.barrackPB[this.teamType%5]:3,e=Math.floor(M.instance.getCurTime()/55)+t,i=Math.floor((N.GameData.playerAllSoldierLevel-this.getAllSoldierLevel())/3)+t;return Math.min(6,Math.max(e,i))}},{key:"isMaxSoldierCnt",get:function(){return this.getAllSoldierLevel()>=v.TOTAL_SOLDIER_COUNT}},{key:"attackTargetComp",get:function(){return this._attackTargetComp},set:function(t){this._attackTargetComp=t}},{key:"isAttackStronger",get:function(){return!!(this._attackTargetComp&&this.brickCnt>this._attackTargetComp.brickCnt)}}]),n}(A))||I);n._RF.pop()}}}));

System.register("chunks:///_virtual/joystick.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var i,e,o,s,n,r,c,h,a,u,_,l,d,p,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,c=t.Enum,h=t.UITransform,a=t.systemEvent,u=t.SystemEventType,_=t.v3,l=t.Node,d=t.Component},function(t){p=t.Constants},function(t){y=t.App}],execute:function(){var E,T,v,g,N,f,m;n._RF.push({},"10751LkirRPyrv5Hj1x8vB1","joystick",void 0);var D,I=r.ccclass,k=r.property;!function(t){t[t.FIXED=0]="FIXED",t[t.FOLLOW=1]="FOLLOW"}(D||(D={}));t("Joystick",(E=I("Joystick"),T=k({displayName:"显示摇杆"}),v=k({type:c(D),displayName:"触摸类型"}),E((f=i((N=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,o(i,"isShowStick",f,s(i)),o(i,"stickType",m,s(i)),i._bgNode=null,i._centerNode=null,i._radius=0,i._touchID=null,i}e(i,t);var n=i.prototype;return n.onLoad=function(){this._bgNode=this.node.children[0],this._bgNode?(this._centerNode=this._bgNode.children[0],this._radius=.5*this._bgNode.getComponent(h).width,this._registerEvent(!0),this.isShowStick&&this.stickType===D.FIXED&&(this._bgNode.active=!0)):console.error("joystick bgNode is null!")},n._registerEvent=function(t){var i=t?"on":"off";a[i](u.TOUCH_START,this._onTouchStart,this),a[i](u.TOUCH_MOVE,this._onTouchMove,this),a[i](u.TOUCH_END,this._onTouchEnd,this),a[i](u.TOUCH_CANCEL,this._onTouchEnd,this),y.Event[i](p.EVENT_TYPE.GAME_WIN,this._resetJoyStick,this)},n._resetJoyStick=function(){this._touchID=null,this._centerNode.setPosition(0,0,0),this.isShowStick&&this.stickType===D.FOLLOW&&(this._bgNode.active=!1)},n._onTouchStart=function(t){if(null===this._touchID&&y.GameData.isInGame()&&!y.GameData.isGameWin){this._touchID=t.getID();var i=t.getUILocation(),e=_(i.x,i.y);this.stickType===D.FOLLOW&&(this._bgNode.setWorldPosition(e),this.isShowStick&&(this._bgNode.active=!0,this._centerNode.setPosition(0,0,0))),y.Event.emit(p.EVENT_TYPE.SET_GAME_TUTORIAL,!1)}},n._onTouchMove=function(t){if(this._touchID===t.getID()&&y.GameData.isInGame()&&!y.GameData.isGameWin){var i=t.getUILocation(),e=_(i.x,i.y).subtract(this._bgNode.worldPosition);this._radius>e.length()?this._centerNode.setPosition(e):this._centerNode.setPosition(e.normalize().multiplyScalar(this._radius)),y.Event.emit(l.EventType.TOUCH_MOVE,e.normalize())}},n._onTouchEnd=function(t){this._touchID===t.getID()&&(this._touchID=null,this._centerNode.setPosition(0,0,0),this.isShowStick&&this.stickType===D.FOLLOW&&(this._bgNode.active=!1),y.Event.emit(l.EventType.TOUCH_END))},n.onDestroy=function(){this._registerEvent(!1)},i}(d)).prototype,"isShowStick",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=i(N.prototype,"stickType",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.FIXED}}),g=N))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/OptionsManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./RDPlatformType.ts","./RDPlatformManager.ts"],(function(n){"use strict";var t,e,i,a,o;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy},function(n){i=n.Log},function(n){a=n.RDPlatformType},function(n){o=n.RDPlatformManager}],execute:function(){e._RF.push({},"10f47ZUDfFAmKdBovm+SezF","OptionsManager",void 0);var l=n("OpCommand",(function(){}));l.CMD_OPTION_SWITCH_CONTROL="CGXL-MLKG",l.CMD_OPTION_SWITCH_XFDD="CGXL-XFDD",l.CMD_OPTION_SWITCH_BKYXTC="CGXL-BKTC",l.CMD_OPTION_SWITCH_HYRWGD="CGXL-HYRWGD",l.CMD_OPTION_SWITCH_RMTJQPDC="CGXL-RMTJQPDC",l.CMD_OPTION_SWITCH_RMTJLL="CGXL-RMTJLL",l.CMD_OPTION_SWITCH_FXCC="CGXL-FXCC",l.CMD_OPTION_SWITCH_JSYM="DGDWC-JSYM",l.CMD_OPTION_SWITCH_WDKG="CGXL-WDKG",l.CMD_OPTION_BUTTONMOVETIME="buttonMoveTime",l.CMD_OPTION_BUTTONSHOWTIME="bannerShowTime",l.CMD_OPTION_SWITCH_QLSP="CGXL-QLSP",l.CMD_OPTION_SWITCH_VIDEO="CGXL-VIDEO",l.CMD_OPTION_SWITCH_VIDEO_PROBABILITY="CGXL-Videoprobability";var r=n("default",function(){function n(){this.isWhite=!1,this.isInit=!1,this.configData={regionEnable:!1},this.platNameConfig=null,this._urlCallback=null,this.isOnlyVideo=!1}n.getInstance=function(){return this._instance};var e=n.prototype;return e.init=function(n){this._urlCallback=n,this.initLWsdk()},e.initLWsdk=function(){var t=this;if(n.debug||o.getInstance().platformType===a.Game4399||o.getInstance().platformType===a.WeixinMinGame){if(n.debug){var e;null===(e=this._urlCallback)||void 0===e||e.call(this)}}else{i.log("配置文件");var l="https://xcyyby.tiequangame.com/option/version_wzbdd2.json?"+(new Date).getTime();console.log("-----------------",l),this.loadUrl(l,(function(n){t.configData=JSON.parse(n),t.configData.regionEnable=!1,t.platNameConfig=o.getInstance().getSdkConfig(t.configData),i.log("配置文件1",JSON.stringify(t.platNameConfig));var e,r=o.getInstance().getPlatformAreaCode();(l="https://gamecenter.hey-games.com/gamecenter/cfg/version?appid=3198&"+r,o.getInstance().platformType===a.None)&&(t.isInit=!0,t.configData.regionEnable=!1,null===(e=t._urlCallback)||void 0===e||e.call(t),t._urlCallback=null);t.loadUrl(l,(function(n){var e;t.isInit=!0;var a=JSON.parse(n);t.configData.regionEnable=!!a.data&&(1===a.data.switch&&1===a.data.tickSwProtErrOnoff),i.log("配置文件2",JSON.stringify(t.platNameConfig),t.configData.regionEnable,l),null===(e=t._urlCallback)||void 0===e||e.call(t)}))}))}},e.login=function(n,t,e){},e.loadUrl=function(n,t){"function"!=typeof t&&(t=function(n){i.log(n)});var e=new XMLHttpRequest;e.responseType="text",e.onload=function(){t(e.response)},e.open("GET",n,!0),e.send()},e.getOptionSwitchByKey=function(t){return void 0===t&&(t="ttSwitch"),!(!n.debug&&o.getInstance().platformType===a.TTMinGame)||(this.configData?this.configData[t]:(this.initLWsdk(),!1))},e.getConfigByKey=function(n,t){if(!this.isInit)return t;var e=!this.platNameConfig||!this.platNameConfig[n]&&0!=this.platNameConfig[n]?t:this.platNameConfig[n];return i.log("开关===key:"+n+" value:"+e),e},t(n,[{key:"config",get:function(){return this.configData}},{key:"regionEnable",get:function(){return this.config.regionEnable}},{key:"onlyVideo",get:function(){return this.isOnlyVideo&&this.getConfigByKey("onlyVideo",!1)}}]),n}());r._instance=new r,r.debug=!0,e._RF.pop()}}}));

System.register("chunks:///_virtual/LookAtAdButton.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SpriteFrameManager.ts","./OptionsManager.ts","./RDPlatformManager.ts"],(function(t){"use strict";var e,n,r,o,i,a,s,u,c,p,l,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,s=t.SpriteFrame,u=t.Sprite,c=t.Component},function(t){p=t.SpriteFrameManager},function(t){l=t.default},function(t){m=t.RDPlatformManager}],execute:function(){var y,g,f,F,d,h,A;i._RF.push({},"1116bGyi31EiJgIuCGk0L//","LookAtAdButton",void 0);var B=a.ccclass,L=a.property;t("LookAtAdButton",(y=B("LookAtAdButton"),g=L({type:s,tooltip:"开启状态"}),f=L({type:s,tooltip:"关闭状态"}),y((h=e((d=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,r(e,"tryFrame",h,o(e)),r(e,"noneFrame",A,o(e)),e}return n(e,t),e.prototype.onLoad=function(){this.tryFrame||(this.tryFrame=p.getInstance().getSpriteFrameByName("Button_Try")),this.noneFrame||(this.noneFrame=p.getInstance().getSpriteFrameByName("Button_LookAds"));var t=m.getInstance().isBtnFadeIn(!0)&&l.getInstance().getConfigByKey("isTryLookAd",!1);this.node.getComponent(u).spriteFrame=t?this.tryFrame:this.noneFrame},e}(c)).prototype,"tryFrame",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(d.prototype,"noneFrame",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=d))||F));i._RF.pop()}}}));

System.register("chunks:///_virtual/WinterMap.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./GameData.ts"],(function(t){"use strict";var e,n,o,i,s,r,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.ParticleSystemComponent,s=t.Component},function(t){r=t.CommonUtils},function(t){c=t.GameData}],execute:function(){var a;n._RF.push({},"138a7REyXJOAKhpYZwR+h28","WinterMap",void 0);var l=o.ccclass;t("WinterMap",l("WinterMap")(a=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this)._snowParticle=null,e}e(n,t);var o=n.prototype;return o.onLoad=function(){var t=this.node.getChildByName("environmentNode").getChildByName("bgEffect");this._snowParticle=r.getNodeComponent(t,"snow",i),this._registerCustomEvent(!0)},o._registerCustomEvent=function(t){},o._moveSnowVelocity=function(){this._setSnowVelocity(-c.instance.ballMoveSpeed)},o._stopSnowVelocity=function(){this._setSnowVelocity(0)},o._setSnowVelocity=function(t){this._snowParticle.velocityOvertimeModule.y.constant=t},o.onDestroy=function(){this._registerCustomEvent(!1)},n}(s))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/ADGameOver.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./OptionsManager.ts","./GameListManger.ts","./ADMainPush.ts","./AdsManager.ts","./PushControl.ts","./RDPlatformManager.ts"],(function(t){"use strict";var n,e,i,o,s,a,c,r,l,u,h,g,d,m,f,p,B,C,I,b,v,O;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.ButtonComponent,s=t.SpriteComponent,a=t.v3,c=t.view,r=t.tween,l=t.UITransformComponent,u=t.loader,h=t.Prefab,g=t.instantiate,d=t.SpriteFrame,m=t.Component},function(t){f=t.CommonUtils},function(t){p=t.default,B=t.OpCommand},function(t){C=t.default},function(t){I=t.ADMainPush},function(t){b=t.AdsManager},function(t){v=t.PushControl},function(t){O=t.RDPlatformManager}],execute:function(){var M;e._RF.push({},"14a8aqN2OJKgJDAMA+JTHrw","ADGameOver",void 0);var w=i.ccclass;i.property,t("ADGameOver",w("ADGameOver")(M=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).continueBtn=null,n.titleBg=null,n.title=null,n.bottomContent=null,n.result=!1,n.callback=null,n.isBanner=!1,n}n(e,t);var i=e.prototype;return i.onLoad=function(){this.continueBtn=f.getNodeByName(this.node,"continueBtn").getComponent(o),this.continueBtn.node.on("click",this.onBackGame,this),this.titleBg=f.getNodeByName(this.node,"top").getComponent(s),this.title=f.getNodeByName(this.node,"title").getComponent(s),this.bottomContent=f.getNodeByName(this.node,"center")},i.onEnable=function(){this.initBottomView(),this.isBanner=O.getInstance().bannerIsShow(),p.getInstance().getOptionSwitchByKey(B.CMD_OPTION_SWITCH_WDKG)?(b.getInstance().hideBannerAd(),this.continueBtn.node.position=a(this.continueBtn.node.position.x,-c.getVisibleSize().height/2+50,0),this.continueBtn.interactable=!0,this.scheduleOnce(function(){b.getInstance().showBannerAd()}.bind(this),p.getInstance().getConfigByKey(B.CMD_OPTION_BUTTONSHOWTIME,1)),this.scheduleOnce((function(){var t=this;r(this.continueBtn.node).to(.5,{position:a(this.continueBtn.node.position.x,-c.getVisibleSize().height/2+300,0)}).call((function(){t.continueBtn.interactable=!0})).start()}),p.getInstance().getConfigByKey(B.CMD_OPTION_BUTTONMOVETIME,1))):(this.continueBtn.node.position=a(this.continueBtn.node.position.x,-c.getVisibleSize().height/2+300,0),this.isBanner||b.getInstance().showBannerAd()),this.scheduleOnce((function(){v.getInstance().showMainPush(!1)}),.5)},i.onDisable=function(){this.isBanner?b.getInstance().showBannerAd():b.getInstance().hideBannerAd(),v.getInstance().showMainPush(!0),this.bottomContent.children.forEach((function(t){t.active=!1,t.eulerAngles=a(0,0,0)}))},i.initBottomView=function(){for(var t=this,n=C.getInstance().getPushGameList(B.CMD_OPTION_SWITCH_JSYM),e=(c.getVisibleSize().width-20-160)/2,i=e/98,o=-c.getVisibleSize().width/2+80+e/2,s=this.bottomContent.getComponent(l).height/2-10-119*i/2,r=function(e){var c=n[e],r=a(o+Math.floor(e/2)*(98*i+50),s-e%2*(119*i+20),0);t.scheduleOnce((function(){this.createItem(this.bottomContent,c,i,r,e)}),.5*Math.floor(e/2))},u=0;u<4;u++)r(u)},i.createItem=function(t,n,e,i,o){var s=t.children[o];if(s){s.active=!0;var l=s.getComponent(I);l.freash(n),l.setScale(e),s.setPosition(a(-c.getVisibleSize().width/2-20,i.y,0)),r(s).to(.5,{position:i,eulerAngles:a(0,0,360)},{easing:"sineIn"}).start()}else u.loadRes("adUI/ADMainPush",h,null,(function(o,s){if(o)console.warn(o);else{var l=g(s);t.addChild(l),l.setPosition(a(-c.getVisibleSize().width/2-20,i.y,0));var u=l.getComponent(I);u.freash(n),u.setScale(e),r(l).to(.5,{position:i,eulerAngles:a(0,0,360)},{easing:"sineIn"}).start()}}))},i.setGameResult=function(t,n){var e=this;this.result=t,this.callback=n;var i=this.result?"xiayiguan":"jixuyouxi",o=this.result?"shengli":"shibai",a=this.result?"shenglidi":"shibaidi";i="adUI/ui/"+i+"/spriteFrame",o="adUI/ui/"+o+"/spriteFrame",a="adUI/ui/"+a+"/spriteFrame",u.loadRes(i,d,null,(function(t,n){t?console.warn(t):e.continueBtn&&(e.continueBtn.node.getComponent(s).spriteFrame=n)})),u.loadRes(o,d,null,(function(t,n){t?console.warn(t):e.title&&(e.title.spriteFrame=n)})),u.loadRes(a,d,null,(function(t,n){t?console.warn(t):e.titleBg&&(e.titleBg.spriteFrame=n)}))},i.onBackGame=function(){this.callback&&this.callback(),this.node.active=!1},e}(m))||M);e._RF.pop()}}}));

System.register("chunks:///_virtual/BarrackMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./AppManager.ts"],(function(t){"use strict";var e,n,r,o,i,a,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.Animation,i=t.MeshRenderer,a=t.Component},function(t){s=t.CommonUtils},function(t){c=t.App}],execute:function(){var l;n._RF.push({},"160d825jkhPyIBpn38WhC51","BarrackMgr",void 0);var u=r.ccclass;t("BarrackMgr",u("BarrackMgr")(l=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this)._oid=-1,e}e(n,t);var r=n.prototype;return r.onDisable=function(){this.unscheduleAllCallbacks(),this._oid=-1;for(var t=this.node.children,e=t.length-1;e>=0;e--)t[e].active=!1},r.init=function(t,e,n,r){var i=this;void 0===r&&(r=null),this.node.worldPosition=t,this.node.worldRotation=e,this._setBarrackMtl(n);var a=s.getNodeComponent(this.node,this.node.name,o),l=a.getState("build"),u=8;r&&2==r.level?u*=2:r&&1==r.level&&(u*=1.5),l.speed=u;var d=l.duration/l.speed;return a.play("build"),this.scheduleOnce((function(){c.Pool.putNode(i.node)}),d+1),d},r._setBarrackMtl=function(t){var e=this;c.Res.loadImage("texture/skin/barrack/barrack_"+t).then((function(t){s.getNodeComponent(e.node,"Building",i).material.setProperty("mainTexture",t._texture)}))},n}(a))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerSkinData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./SingletonBase2.ts","./RDPlatformManager.ts","./AppManager.ts"],(function(t){"use strict";var n,a,i,e,r,o,s;return{setters:[function(t){n=t.inheritsLoose,a=t.createClass},function(t){i=t.cclegacy},function(t){e=t.CommonUtils},function(t){r=t.SingletonBase},function(t){o=t.RDPlatformManager},function(t){s=t.App}],execute:function(){var u;i._RF.push({},"19ca2RDB3FGf6FkezaxaqTA","PlayerSkinData",void 0),function(t){t[t.NONE=0]="NONE",t[t.DIAMOND=1]="DIAMOND",t[t.VIDEO=2]="VIDEO",t[t.SIGN_IN=3]="SIGN_IN",t[t.TURNTABLE=4]="TURNTABLE",t[t.ONLINE=5]="ONLINE"}(u||(u={}));t("PlayerSkinDataMgr",function(t){function a(){for(var n,a=arguments.length,i=new Array(a),e=0;e<a;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this)._skinDataArr=[],n._skinDataObj={},n}n(a,t);var i=a.prototype;return i.init=function(){this._skinDataArr=[],this._initJsonSkinData(),this._initLocalSkinData()},i.getDataByIndex=function(t){return this._skinDataArr[t]},i.getDataById=function(t){return this._skinDataObj[t]},i.getLocalDataById=function(t){return s.Account.getPlayerSkinData(t)},i.setLocalDataById=function(t,n){s.Account.setPlayerSkinData(t,n)},i.getCurrentSkin=function(){return s.RankDataMgr.getPlayerRankData().skinType},i.setCurrentSkin=function(t){var n=s.RankDataMgr.getPlayerRankData();n.skinType=t,s.RankDataMgr.setPlayerRankData(n)},i.getDataCount=function(){return this._skinDataArr.length},i.getSkinIndexById=function(t){for(var n=this._skinDataArr,a=-1,i=0,e=n.length;i<e;i++)if(n[i].id===t){a=i;break}return a},i.getSkinDataArray=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!0);for(var a=this._skinDataArr,i=[],e=0,r=a.length;e<r;e++){var o=a[e];t&&this.getLocalDataById(o.id).isUnlock||(n||!n&&o.unlockType!=u.TURNTABLE&&o.unlockType!=u.SIGN_IN)&&i.push(o)}return i},i.getOnlineUIType=function(){return 0},i.getRandomLockId=function(t){void 0===t&&(t=!0);var n=this._getRandomData(this.getSkinDataArray(!0,t));return n?n.id:-1},i.unlockSkin=function(t){var n=this.getLocalDataById(t);n.isUnlock=!0,this.setLocalDataById(t,n)},i._initJsonSkinData=function(){for(var t=s.RDAsset.getAsset("playerSkinList").json,n=0,a=Object.keys(t).length;n<a;n++){var i=new c,e=t[n];i.initData(n,e),(o.getInstance().isBtnFadeIn()||1!=i.id&&2!=i.id)&&(this._skinDataArr.push(i),this._skinDataObj[i.id]=i)}},i._initLocalSkinData=function(){for(var t=this._skinDataArr,n=0,a=t.length;n<a;n++){var i=t[n];if(i.unlockType===u.NONE){var e=this.getLocalDataById(i.id);e.isUnlock=!0,this.setLocalDataById(i.id,e)}}},i._getRandomData=function(t){var n=-1;return t.length>0&&(n=e.getRandomInteger(0,t.length-1)),-1!==n?t.splice(n,1)[0]:null},a}(r));var c=t("PlayerSkinData",function(){function t(){this._index=0,this._id=0,this._name="",this._unlockType=0,this._amount=0}return t.prototype.initData=function(t,n){this._index=t,this._id=n.id,this._unlockType=n.unlockType,this._amount=n.amount},a(t,[{key:"index",get:function(){return this._index}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"unlockType",get:function(){return this._unlockType}},{key:"amount",get:function(){return this._amount}}]),t}());c.UNLOCK_TYPE=u,i._RF.pop()}}}));

System.register("chunks:///_virtual/StoneMap.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./MapBase.ts"],(function(o){"use strict";var t,n,a,e,r,l,i;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,a=o._decorator,e=o.color,r=o.ModelComponent},function(o){l=o.CommonUtils},function(o){i=o.MapBase}],execute:function(){var s;n._RF.push({},"1b536fJvc9LHpQyx5NsALXR","StoneMap",void 0);var c=a.ccclass;o("StoneMap",c("StoneMap")(s=function(o){function n(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=o.call.apply(o,[this].concat(a))||this).dayColorInfo={blocks:e(75,206,163),wall:e(105,108,145),ground:e(26,99,95)},t.nightColorInfo={blocks:e(245,39,245),wall:e(178,126,180),ground:e(64,12,84)},t._dayMountainMtl=null,t}t(n,o);var a=n.prototype;return a.onLoad=function(){o.prototype.onLoad.call(this),this._dayMountainMtl=l.getNodeComponent(this.dayBgNode,"dayMountain",r).materials[0]},a.updateBgMaterial=function(t){o.prototype.updateBgMaterial.call(this,t),this._dayMountainMtl.setProperty("mainColor",t)},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/BulletMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var o,i,e,s,n,r,a,h;return{setters:[function(t){o=t.inheritsLoose,i=t.createClass},function(t){e=t.cclegacy,s=t._decorator,n=t.v3,r=t.Component},function(t){a=t.Constants},function(t){h=t.App}],execute:function(){var u;e._RF.push({},"1d516E8TMZGz4yk1ap6GQCS","BulletMgr",void 0);var c=s.ccclass;t("BulletMgr",c("BulletMgr")(u=function(t){function e(){for(var o,i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];return(o=t.call.apply(t,[this].concat(e))||this)._damage=0,o._shootTime=0,o._shootTotalTime=.5,o._isCanShoot=!1,o._curTargetComp=null,o._teamType=-1,o._curTarget=null,o._startPos=n(),o}o(e,t);var s=e.prototype;return s.onEnable=function(){this._isCanShoot=!1,this._curTarget=null},s.onDisable=function(){this._isCanShoot=!1,this._curTarget=null},s.init=function(t,o,i,e){void 0===e&&(e=9999),this.node.children[0].active=!0,this.Shoot(t,o,i,e)},s.Shoot=function(t,o,i,e,s){void 0===e&&(e=1),void 0===s&&(s=.2),this._curTargetComp=t,this._curTarget=o,this._teamType=i,this._damage=e,this._shootTime=0,this._shootTotalTime=s,this._startPos=this.node.worldPosition.clone(),this._isCanShoot=!0},s.update=function(t){if(this._isCanShoot&&this._curTarget){this._shootTime+=t;var o=null,i=this._curTarget.worldPosition.clone();if(i.y+=2,this._shootTime>=this._shootTotalTime)return this._shootTime=this._shootTotalTime,o=i,this.node.children[0].active=!1,h.Event.emit(a.EVENT_TYPE.PLAY_EXPLODE_EFFECT,i),this._curTargetComp.HitByBullet(this._damage,this._teamType,!0),void h.Pool.putNode(this.node);o=this._startPos.clone().lerp(i,this._shootTime/this._shootTotalTime),this.node.setWorldPosition(o)}},i(e,[{key:"curTarget",get:function(){return this._curTarget},set:function(t){this._curTarget=t}}]),e}(r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/uma_tt.min.js",["./cjs-loader.mjs"],(function(t,e){"use strict";var n;return{setters:[function(t){n=t.default}],execute:function(){t("default",void 0),n.define(e.meta.url,(function(e,i,r,o,s){n.createRequireWithReqMap({},i);!function(){if(void 0!==window.tt){var t=function(){},e=function(t,e){function n(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(t,e){var n=i(t,e);return t&&t.id_tracking&&(n[e.id_tracking||"id_tracking"]=i(t.id_tracking,K)),n},i=function(t,e){var n={};for(var i in t)e[i]?n[e[i]]=t[i]:n[i]=t[i];return n},r=function(t,e){var n={};if(t)for(var i in t)t[i]&&(n[e[i]]=t[i]);return n},o=function(){return H},s=function(t,e,i,s){x.instance().setIdType(k().getIdType()),x.instance().setIdTracking(k().getIdTracking());var a=k().getUserId();a&&t.analytics&&(t.analytics.active_user={puid:a,provider:k().getProvider()});var u=E.clone(x.instance().get());t.header=E.assign(u,t.header,{ts:Date.now(),testToken:o(),traceId:E.getRandomStr(10)+Date.now()+E.getRandomStr(9)});var c,f=function(t){return{h:n(t.header,F),a:r(t.analytics,q)}}(t),p=U(f),d={url:O.ENDPOINT+O.LOG_URL,method:"POST",data:nt(p),success:function(n){var r=n.code||n.status||n.statusCode;200===r||413===r?(_().i("数据发送成功: ",t,p),function(t){t&&(x.instance().setItem(O.IMPRINT,t),rt.set(t),rt.save(),_().v("imprint: ",rt.getImpObj()),rt.getItem("ttn_invalid")&&(H=""))}((n.data||{}).imprint),"function"==typeof e&&e(n)):(_().w("数据发送失败: ",p),"function"==typeof i&&i())},fail:function(t){_().w("超时: ",p),"function"==typeof i&&i()},complete:function(){"function"==typeof s&&s()}};I.request(E.assign(d,{header:{"Content-Type":c=I.getSdkType()+"/json","Msg-Type":c}}))},a=function(t){var e=t,n=[];this.enqueue=function(t){"number"==typeof e&&this.size()>=e&&this.dequeue(),n.push(t)},this.dequeue=function(){return n.shift()},this.front=function(){return n[0]},this.isEmpty=function(){return 0===n.length},this.clear=function(){n.length=0},this.size=function(){return n.length},this.items=function(){return n},this.print=function(){console.log(n.toString())}},u=function(t,e){this.id=t,this.ts=Date.now();var n=typeof e;if("string"===n&&e)this[t]=e;else if("object"===n)for(var i in e)({}).hasOwnProperty.call(e,i)&&(this[i]=e[i])},c=function(){var t=!1,e=!1,n=0;this.init=function(e){_().v("sdk version: "+O.IMPL_VERSION),t?_().v("Lib重复实例化"):P().load((function(){_().v("cache初始化成功: ",P().getAll()),k().setUseOpenid&&k().setUseOpenid(y().useOpenid()),k().init((function(){x.instance().init(),_().v("Header初始化成功")})),t=!0,"function"==typeof e&&e(),_().tip("SDK集成成功")}))},this.resume=function(n){var i;t&&!e&&(_().v("showOptions: ",n),e=!0,y().enableVerify()&&n&&n.query&&(i=n.query._ttn,H=i||H),this._resume(n))},this._resume=function(t){ot().load();var e=G().resume(t),n=G().getCurrentSessionId();function i(t,e){k().getId()||t<=0||k().getOpenIdAsync(y().appKey(),(function(n){n?(_().v("获取id成功"),ot().send()):(_().v("获取openid失败,启动重试,剩余可用次数",t-1),setTimeout((function(){i(t-1,e)}),e))}))}C().setSessionId(n),e&&ot().add(L,{},(function(){k().setUseOpenid&&k().setUseOpenid(y().useOpenid()),y().useOpenid()&&y().autoGetOpenid()&&!k().getId()?(_().v("get id async"),i(10,3e3)):(_().v("session auto send"),ot().send())}))},this.pause=function(i){t&&(e=!1,n=0,G().pause(),y().uploadUserInfo()&&st().update(),ot().send(M,{},(function(){ot().save(),P().save(),_().v("cache save success"),"function"==typeof i&&i()})))},this.setOpenid=function(t){_().v("setOpenId: %s",t),k().setOpenid(t),ot().send()},this.setUnionid=function(t){_().v("setUnionid: %s",t),k().setUnionid(t)},this.setUserid=function(t,e){_().v("setUserid: %s",t,e),k().setUserid(t,e)},this.setUserInfo=function(t){_().v("setUserInfo: %s",t),st().setUserInfo(t)},this.setAnonymousid=function(t){_().v("setAnonymousId: %s",t),k().setAnonymousid(t),ot().send()},this.setAppVersion=function(t){t&&"string"!=typeof t?_().w("setAppVersion方法只接受字符串类型参数"):x.instance().setAppVersion(t)},this.setAlipayUserid=function(t){t&&"string"!=typeof t?_().w("setAlipayUserid方法只接受字符串类型参数"):(_().v("setAlipayUserid: %s",t),k().setAlipayUserid(t))},this.setDeviceId=function(t){if("string"==typeof t)return k().setDeviceId(t),t},this.setSuperProperty=function(t){if(t&&"string"!=typeof t)_().w("超级属性只支持字符串类型");else{var e=this;x.instance().getSuperProperty()!==t&&(x.instance().setSuperProperty(t),e.pause((function(){e.resume()})))}},this.trackEvent=function(e,i){if(t&&(_().v("event: ",e,i),function(t,e){if(!t||"string"!=typeof t)return _().e('please check trackEvent id. id should be "string" and not null'),!1;var n=["id","ts","du"],i={};if(n.forEach((function(t){i[t]=1})),i[t])return _().e("eventId不能与以下保留字冲突: "+n.join(",")),!1;if(t.length>O.MAX_EVENTID_LENGTH)return _().e("The maximum length of event id shall not exceed "+O.MAX_EVENTID_LENGTH),!1;if(e&&("object"!=typeof e||Array.isArray(e))&&"string"!=typeof e)return _().e("please check trackEvent properties. properties should be string or object(not include Array)"),!1;if("object"==typeof e){var r=0;for(var o in e)if({}.hasOwnProperty.call(e,o)){if(o.length>O.MAX_PROPERTY_KEY_LENGTH)return _().e("The maximum length of property key shall not exceed "+O.MAX_PROPERTY_KEY_LENGTH),!1;if(r>=O.MAX_PROPERTY_KEYS_COUNT)return _().e("The maximum count of properties shall not exceed "+O.MAX_PROPERTY_KEYS_COUNT),!1;if(i[o])return _().e("属性中的key不能与以下保留字冲突: "+n.join(",")),!1;r+=1}}return!0}(e,i))){var r=new u(e,i);C().addEvent(r);var s=!!o(),a=s?0:O.EVENT_SEND_DEFAULT_INTERVAL,c=Date.now();(function(t,e){return"number"!=typeof n||"number"!=typeof e||n<=0||t-n>e})(c,a)&&(n=c,ot().send(j,{noCache:s},(function(){})))}},this.trackShare=function(e){if(t)try{I.getSdkType().indexOf("game")>-1?(e=w().add(e,!0),_().v("shareQuery: ",e)):(e=w().add(e,!1),_().v("sharePath: ",e.path))}catch(t){_().v("shareAppMessage: ",t)}return e},this.trackPageStart=function(e){t&&D().addPageStart(e)},this.trackPageEnd=function(e){t&&D().addPageEnd(e)},this.onShareAppMessage=function(t){var e=this;I.onShareAppMessage((function(){return e.trackShare(t())}))},this.shareAppMessage=function(t){this.trackShare(t),I.shareAppMessage(t)}},f=function(){},p=function t(e,n){var i,r;if(0===e||1===e&&n?i=O.ENDPOINT:2===e&&n?i=O.ENDPOINTB:n&&(i=ut[e]),e>=ut.length||n)return n&&(r=i,O.ENDPOINT=r),n&&_().v("命中可用服务",i),!n&&_().tip_w("未命中可用服务"),!1;I.request({url:O.ENDPOINT+"/uminiprogram_logs/ckdh",success:function(n){200===(n.code||n.status||n.statusCode)&&n.data&&200===n.data.code?t(e+1,!0):t(e+1,!1)},fail:function(){t(e+1,!1)}})},d=function(t){_().v("开始构建 fetch body"),I.getSystemInfo((function(e){I.getNetworkInfo((function(n){var i=(n=n||{}).networkType;i=i===dt?"unknown":i.toUpperCase(),gt.access=i,function(t,e){var n=t.brand||"";if(gt.deviceType="Phone",gt.sdkVersion=pt,gt.appkey=y().appKey(),gt.sdkType=I.getSdkType(),gt.umid=k().getId(),t){gt.language=t.language||"",gt.os=t.OS,gt.osVersion=t.OSVersion,gt.deviceName=t.deviceName,gt.platformVersion=t.platformVersion,gt.platformSdkVersion=t.platformSDKVersion,gt.deviceBrand=n;var i=t.resolution.split("*");lt.isArray(i)&&(gt.resolutionHeight=Number(i[0]),gt.resolutionWidth=Number(i[1]))}!function(t){t&&(gt.installTime=t.install_datetime&&Date.parse(t.install_datetime),gt.scene=t.install_scene,gt.channel=t.install_channel,gt.campaign=t.install_campaign)}(rt.getImpObj()),e&&e(gt)}(e,t)}))}))},l=function(t){t&&lt.each(t,(function(t){vt[t.k]=t}))},h=function(){var t=this;this.STORAGE_NAME=null,m.once(m.messageType.CONFIG_LOADED,(function(e){_().v("云配初始化开始..."),t.init(e)}))},g=function(t){var e={};for(var n in t){var i=t[n];if("object"==typeof i)for(var r in i)e[n+"."+r]=i[r];else e[n]=i}return e};console.log("初始化tt_umeng");var v="[UMENG] -- ",_=function(){var t=null,e=!1;function n(){this.setDebug=function(t){e=t},this.d=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=v+arguments[0]),console.debug.apply(console,arguments)}catch(t){}},this.i=function(){try{if(e)try{"string"==typeof arguments[0]&&(arguments[0]=v+arguments[0]),console.info.apply(console,arguments)}catch(t){}}catch(t){}},this.e=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=v+arguments[0]),console.error.apply(console,arguments)}catch(t){}},this.w=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=v+arguments[0]),console.warn.apply(console,arguments)}catch(t){}},this.v=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=v+arguments[0]),console.log.apply(console,arguments)}catch(t){}},this.t=function(){if(e)try{console.table.apply(console,arguments)}catch(t){}},this.tip=function(){try{"string"==typeof arguments[0]&&(arguments[0]=v+arguments[0]),console.log.apply(console,arguments)}catch(t){}},this.tip_w=function(t){try{console.log("%c [UMENG] -- "+t,"background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(t){}},this.err=function(){try{"string"==typeof arguments[0]&&(arguments[0]=v+arguments[0]),console.error.apply(console,arguments)}catch(t){}},this.repeat=function(t){for(var e=t;e.length<86;)e+=t;return e}}return function(){return null===t&&(t=new n),t}}(),y=function(){var t=null;function e(){var t={};this.useOpenid=function(){return!!t.useOpenid},this.useSwanid=function(){return!!t.useSwanid},this.autoGetOpenid=function(){return!!t.autoGetOpenid},this.appKey=function(){return t.appKey},this.uploadUserInfo=function(){return t.uploadUserInfo},this.enableVerify=function(){return t.enableVerify},this.set=function(e){t=e},this.get=function(){return t},this.setItem=function(e,n){t[e]=n},this.getItem=function(e){return t[e]}}return function(){return t||(t=new e),t}}();t.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function r(){i.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,s=i.length;o<s;o++)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}};var m=new t;m.messageType={CONFIG_LOADED:0,UMA_LIB_INITED:1};
/*! *****************************************************************************
            Copyright (c) Microsoft Corporation.
            
            Permission to use, copy, modify, and/or distribute this software for any
            purpose with or without fee is hereby granted.
            
            THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
            REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
            AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
            INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
            LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
            OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
            PERFORMANCE OF THIS SOFTWARE.
            ***************************************************************************** */
var S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},I=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.getSdkType=function(){return"ttgamemp"},n}(function(){function t(){}return t.prototype.setStorage=function(t,e,n){tt.setStorage({key:t,data:e,success:function(t){"function"==typeof n&&n(!0)},fail:function(e){_().w(t+": "+e.errMsg),"function"==typeof n&&n(!1)}})},t.prototype.getStorage=function(t,e){tt.getStorage({key:t,success:function(t){"function"==typeof e&&e(t.data)},fail:function(n){_().w(t+": "+n.errMsg),"function"==typeof e&&e()}})},t.prototype.removeStorage=function(t,e){tt.removeStorage({key:t,success:function(){"function"==typeof e&&e(!0)},fail:function(){"function"==typeof e&&e(!1)}})},t.prototype.getSystemInfo=function(t){tt.getSystemInfo({success:function(e){e.safeArea=e.safeArea||{};var n={model:e.model,brand:e.brand,pixelRatio:e.pixelRatio,screenWidth:e.screenWidth,screenHeight:e.screenHeight,fontSizeSetting:e.fontSizeSetting,platform:e.platform,platformVersion:e.version,platformSDKVersion:e.SDKVersion,language:e.language,deviceName:e.model,safeArea:{width:e.safeArea.width,height:e.safeArea.height,top:e.safeArea.top,left:e.safeArea.left,bottom:e.safeArea.bottom,right:e.safeArea.right},statusBarHeight:e.statusBarHeight,host:e.appName},i=e.system.split(" ");Array.isArray(i)&&(n.OS=i[0],n.OSVersion=i[1]);var r=Math.round(e.screenWidth*e.pixelRatio),o=Math.round(e.screenHeight*e.pixelRatio);n.resolution=r>o?r+"*"+o:o+"*"+r,"function"==typeof t&&t(n)},fail:function(){"function"==typeof t&&t()}})},t.prototype.getDeviceInfo=function(t){"function"==typeof t&&t()},t.prototype.checkNetworkAvailable=function(t){tt.getNetworkType({success:function(e){"function"==typeof t&&t(e&&"none"!==e.networkType)},fail:function(){"function"==typeof t&&t()}})},t.prototype.getNetworkInfo=function(t){tt.getNetworkType({success:function(e){"function"==typeof t&&t(e)},fail:function(){"function"==typeof t&&t()}})},t.prototype.onNetworkStatusChange=function(t){tt.onNetworkStatusChange((function(e){"function"==typeof t&&t("none"!==e.networkType)}))},t.prototype.request=function(t){var e=(t=t||{}).success,n=t.fail,i=!1,r=null;t.success=function(t){i||(r&&clearTimeout(r),"function"==typeof e&&e(t))},t.fail=function(){i||(r&&clearTimeout(r),"function"==typeof n&&n())},tt.request(t),r=setTimeout((function(){r&&clearTimeout(r),i=!0,"function"==typeof n&&n(i)}),t.timeout||5e3)},t.prototype.getDeviceId=function(t){t("")},t.prototype.getAdvertisingId=function(t){"function"==typeof t&&t("")},t.prototype.getSdkType=function(){return"ttmp"},t.prototype.getPlatform=function(){return"tt"},t.prototype.getUserInfo=function(t){var e={fail:function(){t&&t()},success:function(e){try{var n=e.userInfo;n&&t&&t({avatar:n.avatarUrl,nickName:n.nickName,gender:n.gender,country:n.country,province:n.province,city:n.city,language:n.language})}catch(e){t&&t()}}};try{tt.getSetting({success:function(t){t.authSetting["scope.userInfo"]&&tt.getUserInfo(e)},fail:function(){t&&t()}})}catch(t){_.e("getUserInfo error",t)}},t.prototype.getAppInfoSync=function(){return{}},t.prototype.onShareAppMessage=function(t){tt.onShareAppMessage(t)},t.prototype.shareAppMessage=function(t){tt.shareAppMessage(t)},t.prototype.getLaunchOptionsSync=function(){var t=null;if(t)return t;if(!tt.getLaunchOptionsSync)return{};try{t=tt.getLaunchOptionsSync()}catch(e){t=null}return t||{}},t}())),O={SESSION_INTERVAL:3e4,LOG_URL:"/bytedancem_logs",GET_OPENID_URL:"/uminiprogram_logs/bytedance/getuut",USERINFO_URL:"/uminiprogram_logs/comm/uif",ENDPOINT:"https://umini.shujupie.com",ENDPOINTB:"https://ulogs.umeng.com",DEVICE_INFO_KEY:"device_info",ADVERTISING_ID:"mobile_ad_id",ANDROID_ID:"android_id",CURRENT_SESSION:"current_session",SESSION_PAUSE_TIME:"session_pause_time",EVENT_SEND_DEFAULT_INTERVAL:15e3,EVENT_LAST_SEND_TIME:"last_send_time",MAX_EVENTID_LENGTH:128,MAX_PROPERTY_KEY_LENGTH:256,MAX_PROPERTY_KEYS_COUNT:100,REPORT_POLICY:"report_policy",REPORT_INTERVAL_TIME:"report_interval_time",REPORT_POLICY_START_SEND:"1",REPORT_POLICY_INTERVAL:"6",IMPRINT:"imprint",SEED_VERSION:"1.0.0",IMPL_VERSION:"2.7.1",ALIPAY_AVAILABLE_VERSION:"10.1.52",SHARE_PATH:"um_share_path",SHARES:"shares",REQUESTS:"requests",UUID:"um_uuid",UUID_SUFFIX:"ud",OPENID:"um_od",UNIONID:"um_unid",ALIPAYID:"um_alipayid",USERID:"um_userid",PROVIDER:"um_provider",SWANID:"um_swanid",ANONYMOUSID:"um_anonymousid",LAUNCH_OPTIONS:"LAUNCH_OPTIONS",UM_SSRC:"_um_ssrc",USER_INFO:"user_info",IS_ALIYUN:!1},E={isNumber:function(t){return!Number.isNaN(parseInt(t,10))},compareVersion:function(t,e){for(var n=String(t).split("."),i=String(e).split("."),r=0;r<Math.max(n.length,i.length);r++){var o=parseInt(n[r]||0,10),s=parseInt(i[r]||0,10);if(o>s)return 1;if(o<s)return-1}return 0},getRandomStr:function(t){for(var e="",n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i=0;i<Number(t);i++)e+=n[Math.round(Math.random()*(n.length-1))];return e},clone:function(t){return JSON.parse(JSON.stringify(t))},startsWith:function(t,e){return!(!t||!e||0===e.length||e.length>t.length)&&t.substr(0,e.length)===e},endsWith:function(t,e){return!(!e||0===t.length||e.length>t.length)&&t.substring(t.length-e.length)===e},assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},deepEqual:function t(e,n){if(e===n)return!0;if(e&&"object"==typeof e&&n&&"object"==typeof n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e){if(Object.prototype.hasOwnProperty.call(n,i))return!1;if(!t(e[i],n[i]))return!1}return!0}return!1},trimStart:function(t,e){if(!t)return"";if("string"==typeof e&&e.length){var n=new RegExp("^"+e+"*");t=t.replace(n,"")}else t=t.replace(/^s*/,"");return t},trimEnd:function(t,e){if(!t)return"";var n,i;if("string"==typeof e&&e.length){for(n=new RegExp(e),i=t.length;n.test(t.charAt(i));)i-=1;return t.slice(0,i+1)}for(n=/s/,i=t.length-1;n.test(t.charAt(i));)i-=1;return t.slice(0,i+1)},isFunction:function(t){return"function"==typeof t}},A=function(){function t(){this._uuid="",this._userid="",this._provider="",this._idType=""}return t.prototype.createUUID=function(){return E.getRandomStr(10)+Date.now()+E.getRandomStr(7)+O.UUID_SUFFIX},t.prototype.initUUID=function(t){var e=this;I.getStorage(O.UUID,(function(n){n?e._uuid=n:(e._uuid=e.createUUID(),I.setStorage(O.UUID,e._uuid)),t&&t(n)}))},t.prototype.initUserid=function(){var t=this;I.getStorage(O.USERID,(function(e){!t._userid&&e&&(t._userid=e,_().v("userId is ",e))})),I.getStorage(O.PROVIDER,(function(e){!t._provider&&e&&(t._provider=e,_().v("provider is ",e))}))},t.prototype.init=function(t){var e=this;e.initUUID((function(){e.initUserid(),e.initID(t)}))},t.prototype.setUserid=function(t,e){!this._userid&&t&&(this._userid=t,this._provider=e,I.setStorage(O.USERID,t),I.setStorage(O.PROVIDER,e))},t.prototype.getUserId=function(){return this._userid},t.prototype.getProvider=function(){return this._provider},t.prototype.getIdType=function(){return this._idType},t.prototype.getIdTracking=function(){var t={};return this._uuid&&(t.uuid=this._uuid),this._userid&&(t.userid=this._userid),t},t}();!function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._openid="",e._unionid="",e._useOpenid=!1,e}e(n,t),n.prototype.initID=function(t){var e=this;e._idType=e._useOpenid?"openid":"uuid",_().v("id type: ",e._idType),I.getStorage(O.UNIONID,(function(t){e._unionid=t})),this._useOpenid?I.getStorage(O.OPENID,(function(n){e._openid=n,t&&t()})):t&&t()},n.prototype.setUseOpenid=function(t){this._useOpenid=t},n.prototype.setOpenid=function(t){!this._openid&&t&&(this._openid=t,I.setStorage(O.OPENID,t))},n.prototype.setUnionid=function(t){!this._unionid&&t&&(this._unionid=t,I.setStorage(O.UNIONID,t))},n.prototype.getIdTracking=function(){var e=t.prototype.getIdTracking.call(this);return this._openid&&(e.openid=this._openid),this._unionid&&(e.unionid=this._unionid),this._userid&&(e.userid=this._userid),e},n.prototype.getId=function(){return this._useOpenid?this._openid:this._uuid}}(A);var N,T=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._unionid="",e._openid="",e._anonymousid="",e._useOpenid=!1,e}return e(n,t),n.prototype.getOpenIdAsync=function(t,e){var n=this;tt.login({force:!1,success:function(i){i?I.request({url:O.ENDPOINT+O.GET_OPENID_URL,method:"GET",data:{key:t,code:i.code||"",anonymous_code:i.anonymousCode||""},success:function(t){if(_().v("tt request ss ",t,O.ENDPOINT+O.GET_OPENID_URL),t&&200===t.statusCode&&t.data&&t.data.data){var i=t.data.data;return n.setOpenid(i.oid),n.setAnonymousid(i.nid),e&&e(!0)}e&&e()},fail:function(t){_().v("tt request failed...",t),e&&e()}}):e&&e()},fail:function(t){_().v("tt login failed...",t),e&&e()}})},n.prototype.initID=function(t){var e=this;e._idType="anonymousid",_().v("id type: ",e._idType),I.getStorage(O.OPENID,(function(t){e._openid=t})),I.getStorage(O.ANONYMOUSID,(function(n){e._anonymousid=n,t&&t()}))},n.prototype.setUseOpenid=function(t){this._useOpenid=t},n.prototype.setOpenid=function(t){!this._openid&&t&&(this._openid=t,I.setStorage(O.OPENID,t))},n.prototype.setAnonymousid=function(t){!this._anonymousid&&t&&(this._anonymousid=t,I.setStorage(O.ANONYMOUSID,t))},n.prototype.getIdTracking=function(){var e=t.prototype.getIdTracking.call(this);return this._openid&&(e.openid=this._openid),this._userid&&(e.userid=this._userid),this._anonymousid&&(e.anonymousid=this._anonymousid),e},n.prototype.getId=function(){if(this._anonymousid)return this._idType="anonymousid",this._anonymousid},n}(A),k=(N=null,function(){return N||(N=new T),N}),D=function(){var t=null;function e(){var t=!1,e=null,n=[];this.addPageStart=function(n){n&&!t&&(e={ts:Date.now(),path:n,page_name:n},t=!0)},this.addPageEnd=function(i){if(t&&i&&e&&i===e.page_name){var r=Date.now()-e.ts;e.duration=Math.abs(r),n.push(e),e=null,t=!1}},this.get=function(){return n},this.getCurrentPage=function(){return e},this.clear=function(){n.length=0}}return function(){return t||(t=new e),t}}(),b={},w=function(){var t=null,e=[],n="";function i(){return{add:function(t,i){_().v("share origin: %o",t);var r={title:t&&t.title,path:t&&t.path&&t.path.split("?")[0],_um_sts:Date.now()};r.path&&r.path.length>1&&E.startsWith(r.path,"/")&&(r.path=E.trimStart(r.path,"/"));var o=t.path||"",s=k().getId();if(s){var a=n.split(","),u=(a=a.filter((function(t){return t.length>0}))).indexOf(s);u>=0&&(a=a.slice(0,u)),a.length<3&&a.push(s);var c=a.join(",");-1!==o.indexOf("?")?o+="&_um_ssrc="+c:o+="?_um_ssrc="+c;var f=Date.now();if(o+="&_um_sts="+f,i){var p=function(t){var e=[];for(var n in t)"_um_ssrc"!==n&&"_um_sts"!==n&&e.push(n+"="+t[n]);return e.join("&")}(b),d=p?p+"&_um_ssrc="+c+"&_um_sts="+f:"_um_ssrc="+c+"&_um_sts="+f;t.query=t.query?t.query+"&_um_ssrc="+c+"&_um_sts="+f:d}else t.path=o;r._um_ssrc=c,r._um_sts=f}return e.push(r),_().v("share: %o",t),t},setShareSource:function(t){n=t},clear:function(){e.length=0},get:function(){return e}}}return function(){return t||(t=new i),t}}(),U=function(t){if(t)try{return JSON.stringify(t)}catch(t){}return""},R=function(t){if(t)try{return JSON.parse(t)}catch(t){}return null},P=function(){var t=null,e="",n=null,i=!1;function r(){this.load=function(t){n?(I.removeStorage(e),t()):(e="um_cache_"+y().appKey(),I.getStorage(e,(function(r){n=R(r)||{},i=!0,I.removeStorage(e),t()})))},this.save=function(){n&&I.setStorage(e,U(n))},this.set=function(t,e){n&&(n[t]=e)},this.get=function(t){return(n||{})[t]},this.remove=function(t){n&&n[t]&&delete n[t]},this.getAll=function(){return n},this.clear=function(){n=null},this.has=function(t){return!!this.get(t)},this.isLoaded=function(){return i}}return function(){return t||(t=new r),t}}(),C=function(){var t,e,n=[],i=[];function r(t,n){var i=(t=t||{})[e];return Array.isArray(i)&&i.length?t[e]=i.concat(n):t[e]=[].concat(n),t}return function(){return t||(t={addEvent:function(t){e?(n.unshift(t),n.length>1&&(!function(){if(n.length){var t=P().get("ekvs");(function(t){var e=0;for(var n in t)Array.isArray(t[n])&&(e+=t[n].length);return e})(t)+n.length<=1e4&&(t=r(t,n),P().set("ekvs",t))}}(),n.length=0)):(_().w("session id is null: ",e),i.unshift(t))},setSessionId:function(t){if(e=t,_().v("setSessionId: ",e),Array.isArray(i)&&i.length&&e){for(var n=0;n<i.length;n++)this.addEvent(i[n]);i.length=0}},getEkvs:function(){var t=P().get("ekvs");return n&&n.length&&(t=r(t,n)),t},clear:function(){P().remove("ekvs"),n.length=0}}),t}}(),L="half_session",M="close_session",j="ekv",V=["access","access_subtype"],x=function(){var t=null;function e(){var t=!1,e={};return{init:function(){!function(t){var n=P().get(O.IMPRINT);n&&(e.imprint=n),e.device_type="Phone",e.sdk_version=O.IMPL_VERSION,e.appkey=y().appKey(),I.getDeviceInfo((function(t){e.device_info=t||""}));var i=I.getAppInfoSync();e.appid=i.appId,e.app_env=i.appEnv,e.app_version=i.appVersion,I.getSystemInfo((function(n){I.getNetworkInfo((function(i){var r=function(t,e){var n={};(t=t||{}).safeArea=t.safeArea||{};var i=(e=e||{}).networkType;"none"===i&&(i="unknown");var r=t.model||"",o=t.platform||"",s=t.brand||"",a=s.toLowerCase();switch(n.sdk_type=I.getSdkType(),n.platform=I.getPlatform(),n.platform_sdk_version=t.platformSDKVersion,n.platform_version=t.platformVersion,n.resolution=t.resolution,n.pixel_ratio=t.pixelRatio,n.os=o,n.font_size_setting=t.fontSizeSetting,n.device_model=r,n.device_brand=s,n.device_manufacturer=a,n.device_manuid=r,n.device_name=r,n.os_version=t.OSVersion,n.language=t.language,n.theme=t.theme,n.benchmark_level=t.benchmarkLevel,n.status_bar_height=t.statusBarHeight,n.safe_area_top=t.safeArea.top,n.safe_area_left=t.safeArea.left,n.safe_area_right=t.safeArea.right,n.safe_area_bottom=t.safeArea.bottom,n.safe_area_height=t.safeArea.height,n.safe_area_width=t.safeArea.width,n.storage=t.storage,n.screen_width=t.screenWidth,n.screen_height=t.screenHeight,n.host=t.host,i=i?i.toLowerCase():""){case"4g":n.access_subtype="LTE",n.access="4G";break;case"3g":n.access_subtype="CDMA",n.access="3G";break;case"2g":n.access_subtype="GRPS",n.access="2G";break;default:n.access=i,delete n.access_subtype}return n}(n,i);E.assign(e,r),t&&t()}))}))}((function(){t=!0}))},isLoaded:function(){return t},get:function(){return e},getRealtimeFields:function(){var t={};return V.forEach((function(n){t[n]=e[n]})),t},setIdTracking:function(t){this.setItem("id_tracking",t)},setIdType:function(t){this.setItem("id_type",t)},setAppVersion:function(t){this.setItem("app_version",t)},setSuperProperty:function(t){e.sp||(e.sp={}),e.sp.isv=t},getSuperProperty:function(){return e&&e.sp?e.sp.isv:""},setItem:function(t,n){e[t]=n},getItem:function(t){return e[t]}}}return{instance:function(){return t||(t=e()),t}}}(),G=function(){var t=null,e=null,n=null;return function(){return t||(t={resume:function(t){var i=!1;n||(n=P().get(O.CURRENT_SESSION));var r=new Date;return e=r.getTime(),!n||!n.end_time||e-n.end_time>O.SESSION_INTERVAL?(i=!0,function(t){try{var e=(n||{}).options||{},i=E.assign({},function(t){var e={};for(var n in t)0===n.indexOf("_um_")&&(e[n]=t[n]);return _().v("query: ",t),_().v("_um_params: ",e),e}(t.query));i.path=t.path||e.path,i.scene=t.scene?I.getPlatform()+"_"+t.scene:e.scene;var r=t.referrerInfo;r&&(i.referrerAppId=r.appId),_().v("session options: ",i);var o=i[O.UM_SSRC];o&&w().setShareSource(o);var s=Date.now();n={id:E.getRandomStr(10)+s,start_time:s,options:i}}catch(t){_().e("生成新session失败: ",t)}}(t),_().v("开始新的session(%s): ",n.id,n)):_().v("延续上一次session(%s): %s ",n.id,r.toLocaleTimeString(),n),i},pause:function(){!function(){if(n){var t=new Date;n.end_time=t.getTime(),"number"!=typeof n.duration&&(n.duration=0),n.duration=n.end_time-e,P().set(O.CURRENT_SESSION,n),_().v("退出会话(%s): %s ",n.id,t.toLocaleTimeString(),n)}}()},getCurrentSessionId:function(){return(n||{}).id},getCurrentSession:function(){return n},cloneCurrentSession:function(){return E.clone(n)}}),t}}(),q={sessions:"sn",ekvs:"e",active_user:"active_user"},F={sdk_type:"sdt",access:"ac",access_subtype:"acs",device_model:"dm",language:"lang",device_type:"dt",device_manufacturer:"dmf",device_name:"dn",platform_version:"pv",id_type:"it",font_size_setting:"fss",os_version:"ov",device_manuid:"did",platform_sdk_version:"psv",device_brand:"db",appkey:"ak",_id:"id",id_tracking:"itr",imprint:"imp",sdk_version:"sv",resolution:"rl",testToken:"ttn",theme:"t5",benchmark_level:"bml",screen_width:"sw",screen_height:"sh",status_bar_height:"sbh",safe_area_top:"sat",safe_area_left:"sal",safe_area_right:"sar",safe_area_bottom:"sab",safe_area_height:"sah",safe_area_width:"saw",pixel_ratio:"pr",storage:"s7",host:"hs"},K={uuid:"ud",unionid:"und",openid:"od",anonymousid:"nd",alipay_id:"ad",device_id:"dd",userid:"puid"},H="",Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J=function(t){for(var e={},n=0,i=t.length;n<i;n++)e[t.charAt(n)]=n;return e}(Y),B=String.fromCharCode,X=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?B(192|e>>>6)+B(128|63&e):B(224|e>>>12&15)+B(128|e>>>6&63)+B(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return B(240|e>>>18&7)+B(128|e>>>12&63)+B(128|e>>>6&63)+B(128|63&e)},W=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,z=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[Y.charAt(n>>>18),Y.charAt(n>>>12&63),e>=2?"=":Y.charAt(n>>>6&63),e>=1?"=":Y.charAt(63&n)].join("")},Q=function(t){return function(t){return t.replace(W,X)}(t).replace(/[\s\S]{1,3}/g,z)},Z=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),$=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return B(55296+(e>>>10))+B(56320+(1023&e));case 3:return B((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return B((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},et=function(t){var e=t.length,n=e%4,i=(e>0?J[t.charAt(0)]<<18:0)|(e>1?J[t.charAt(1)]<<12:0)|(e>2?J[t.charAt(2)]<<6:0)|(e>3?J[t.charAt(3)]:0),r=[B(i>>>16),B(i>>>8&255),B(255&i)];return r.length-=[0,0,2,1][n],r.join("")},nt=function(t,e){return e?Q(String(t)).replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,""):Q(String(t))},it=function(t){return function(t){return function(t){return t.replace(/[\s\S]{1,4}/g,et)}(t).replace(Z,$)}(String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},rt=new function(){var t="",e=this;this.set=function(e){t=e},this.get=function(){return t},this.getImpObj=function(){return R(it(t))},this.getItem=function(t){var n=e.getImpObj();return n&&n[t]||""},this.load=function(){t=P().get(O.IMPRINT)},this.save=function(){t&&P().set(O.IMPRINT,t)}},ot=function(){var t=null,e=!1,n=[],i=new a(50);function r(t,e,n){if(x.instance().isLoaded()){e=e||{};var o=function(t){var e=null;switch(t){case L:e=function(){var t=null,e=G().cloneCurrentSession();return e&&(t={header:{st:"1"},analytics:{sessions:[e]}}),t}();break;case M:e=function(){var t=null,e={},n=G().cloneCurrentSession();if(n){var i=D().get(),r=w().get();Array.isArray(i)&&i.length&&(n.pages=E.clone(i)),Array.isArray(r)&&r.length&&(n.shares=E.clone(r)),D().clear(),w().clear(),e.sessions=[n]}var o=C().getEkvs();return o&&(e.ekvs=E.clone(o),C().clear()),(e.sessions||e.ekvs)&&(t={analytics:e}),t}();break;case j:e=function(){var t=null,e=C().getEkvs();return e&&(t={analytics:{ekvs:E.clone(e)}},C().clear()),t}()}return e}(t);if(o){var s=x.instance().getRealtimeFields();o.header=E.assign({},o.header,s),o.noCache=e.noCache,i.enqueue(o)}"function"==typeof n&&n()}else setTimeout((function(){r(t,e,n)}),100)}function o(t){var e=i.front();e?s(e,(function(){i.dequeue(),o(t)}),(function(){var e=i.dequeue();e&&!e.noCache&&n.push(e),o(t)})):(n.forEach((function(t){i.enqueue(t)})),n.length=0,t())}function u(t){k().getId()?e?_().i("队列正在发送中"):(e=!0,o((function(){e=!1,"function"==typeof t&&t()}))):(_().i("获取id标识失败，暂缓发送"),"function"==typeof t&&t())}function c(){this.send=function(t,e,n){t?this.add(t,e,(function(){u(n)})):u(n)},this.add=function(t,e,n){r(t,e,n)},this.load=function(){var t=P().get(O.REQUESTS);t&&t.length&&t.forEach((function(t){i.enqueue(t)})),P().remove(O.REQUESTS)},this.save=function(){P().set(O.REQUESTS,E.clone(i.items())),i.clear()}}return function(){return t||(t=new c),t}}(),st=function(){var t=null,e=null;function n(){function t(t){if(t&&"object"==typeof t){var e=P().get(O.USER_INFO);return e&&E.deepEqual(t,e)||function(t,e){var n=y().appKey(),i=I.getSdkType(),r=k().getId(),o=k().getIdType();if(n&&i&&r&&o){var s={ak:y().appKey(),sdt:I.getSdkType(),uin:t.nickName,uia:t.avatar||t.avatarUrl,uig:t.gender,uit:t.country,uip:t.province,uic:t.city,uil:t.language,id:k().getId(),it:k().getIdType(),age:t.age,cln:t.constellation},a=JSON.stringify(s);a=nt(a),I.request({url:O.ENDPOINT+O.USERINFO_URL,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:"ui="+a,success:function(n){_().v("用户信息上传成功: ",t),e&&e(n&&n.data&&200===n.data.code)},fail:function(){_().e("用户信息上传失败: ",t),e&&e(!1)}})}}(t,(function(e){e&&P().set(O.USER_INFO,t)})),!0}return!1}this.setUserInfo=function(t){e=t},this.update=function(){t(e)||I.getUserInfo((function(e){t(e)}))}}return function(){return t||(t=new n),t}}(),at=[];f.prototype={createMethod:function(t,e,n){try{t[e]=n&&n[e]?function(){return n[e].apply(n,arguments)}:function(){at.push([e,[].slice.call(arguments)])}}catch(t){_().v("create method errror: ",t)}},installApi:function(t,e){try{var n,i,r="resume,pause,trackEvent,trackPageStart,trackPageEnd,trackShare,setUserid,setOpenid,setAnonymousid,onShareAppMessage,shareAppMessage".split(",");for(n=0,i=r.length;n<i;n++)this.createMethod(t,r[n],e);if(e)for(n=0,i=at.length;n<i;n++){var o=at[n];try{e[o[0]].apply(e,o[1])}catch(t){_().v("impl[v[0]].apply error: ",o[0],t)}}}catch(t){_().v("install api errror: ",t)}}};var ut=[O.ENDPOINT,O.ENDPOINTB];!function(t){O.ENDPOINTB&&setTimeout((function(){p(0,!1)}),t)}(3e3);var ct=new f,ft={_inited:!1,_log:_(),preinit:function(t){if(t&&"object"==typeof t)for(var e in t)O[e]=t[e];return O},use:function(t,e){return t&&E.isFunction(t.install)?t.install(ft,e):E.isFunction(t)&&t(ft,e),ft},messager:m,init:function(t){if(this._inited)_().v("已经实例过，请避免重复初始化");else if(t)if(t.appKey){"boolean"!=typeof t.useOpenid&&(t.useOpenid=!0),y().set(t),_().setDebug(t.debug),this._inited=!0;var e=this;m.emit(m.messageType.CONFIG_LOADED,t);try{var n=new c;_().v("成功创建Lib对象"),n.init((function(){_().v("Lib对象初始化成功"),ct.installApi(e,n),_().v("安装Lib接口成功"),m.emit(m.messageType.UMA_LIB_INITED,t)}))}catch(t){_().w("创建Lib对象异常: "+t)}}else _().err("请确保传入正确的appkey");else _().err("请正确设置相关信息！")}};try{ct.installApi(ft,null)}catch(v){_().w("uma赋值异常: ",v)}var pt="2.7.1",dt="none",lt={},ht=Array.isArray;lt.isArray=ht||function(t){return"[object Array]"===toString.call(t)},lt.isObject=function(t){return t===Object(t)&&!lt.isArray(t)},lt.isEmptyObject=function(t){if(lt.isObject(t)){for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0}return!1},lt.isUndefined=function(t){return void 0===t},lt.isString=function(t){return"[object String]"===toString.call(t)},lt.isDate=function(t){return"[object Date]"===toString.call(t)},lt.isNumber=function(t){return"[object Number]"===toString.call(t)},lt.each=function(t,e,n){if(null!=t){var i={},r=Array.prototype.forEach;if(r&&t.forEach===r)t.forEach(e,n);else if(t.length===+t.length){for(var o=0,s=t.length;o<s;o++)if(o in t&&e.call(n,t[o],o,t)===i)return}else for(var a in t)if(hasOwnProperty.call(t,a)&&e.call(n,t[a],a,t)===i)return}},lt.buildQuery=function(t,e){var n,i,r=[];return void 0===e&&(e="&"),lt.each(t,(function(t,e){n=encodeURIComponent(t.toString()),i=encodeURIComponent(e),r[r.length]=i+"="+n})),r.join(e)},lt.JSONDecode=function(t){if(t){try{return JSON.parse(t)}catch(t){console.error("JSONDecode error",t)}return null}},lt.JSONEncode=function(t){try{return JSON.stringify(t)}catch(t){console.error("JSONEncode error",t)}};var gt=Object.create(null),vt=Object.create(null),_t=null,yt=!1,mt={minFetchIntervalSeconds:43200};h.prototype={setDefaultValues:function(t){yt&&lt.isObject(t)&&lt.each(t,(function(t,e){vt[e]&&vt[e].v||(vt[e]={v:t})}))},getValue:function(t){_().v("从配置项中读取 value, 当前配置为: ",vt),_().v("待读取的 key : ",t);try{if(!yt)return;var e=vt[t]||{};return _().v("读取相应配置ing..., 结果为: ",e),lt.isNumber(e.e)&&lt.isNumber(e.g)&&(_().v("读取到相应配置, 开始数据上报..."),function(t){var e={appkey:y().appKey(),sdkType:I.getSdkType(),expId:t&&t.e,groupId:t&&t.g,clientTs:Date.now(),key:t&&t.k,value:t&&t.v,umid:k().getId()};try{I.request({url:"https://pslog.umeng.com/mini_ablog",method:"POST",data:[e],success:function(t){t&&200===t.statusCode?_().v("上传数据成功",e):_().w("ablog 请求成功, 返回结果异常 ",t)},fail:function(t){_().w("ablog 请求数据错误 ",e,t)}})}catch(t){_().w("urequest 调用错误",t)}}(e)),e.v}catch(e){_().w("getValue error, key: ",t)}},active:function(t){try{if(!yt)return;var e,n;t&&t.params&&(e=t.params),t&&t.callback&&(n=t.callback),_().v("激活配置项: ",e),e?(_().v("本地已缓存的配置项: ",vt),l(e),_().v("合并后的配置项: ",vt),n&&n(vt),_().v("active 结束")):(_().v("配置项为空!! 读取本地配置..."),I.getStorage(this.STORAGE_NAME,(function(t){t?(l((t=lt.JSONDecode(t)||{}).params),_().v("当前本地配置项为: ",vt),n&&n(vt),_().v("active 结束")):_().v("当前本地配置项为空, 退出激活")})))}catch(t){_().w("SDK active 错误",t)}},init:function(t){t.appKey&&(_t=t.appKey,this.STORAGE_NAME="um_remote_config_{{"+_t+"}}"),_t?yt?_().w("SDK 已经初始化, 请避免重复初始化"):(yt=!0,this.setOptions(t),this.active()):_().err("请检查您的小程序 appKey, appKey 不能为空")},setOptions:function(t){if(lt.isObject(t)){var e=t.minFetchIntervalSeconds;lt.isNumber(e)&&(mt.minFetchIntervalSeconds=Math.max(e,5))}},fetch:function(t){if(yt&&this.STORAGE_NAME){var e,n;t&&t.active&&(e=t.active),t&&t.callback&&(n=t.callback);var i=this;I.getStorage(this.STORAGE_NAME,(function(t){_().v("开始读缓存 data is ",t),(t=lt.JSONDecode(t)||{}).params&&t.ts&&Date.now()-t.ts<1e3*mt.minFetchIntervalSeconds?(_().v("缓存数据存在, 并且本次触发时间距离上次fetch触发时间未超过 fetch 时间间隔, 无需 fetch"),n&&n(t.params)):d((function(t){_().v("缓存数据不存在, 构建 fetch body :",t);try{I.request({url:"https://ucc.umeng.com/v1/mini/fetch",method:"POST",data:t,success:function(t){if(t&&200===t.statusCode&&t.data&&t.data.cc){_().v("fetch 请求成功, 响应数据: ",t.data);var r=Object.create(null);lt.each(t.data.cc,(function(t){r[t.k]=t}));var o={ts:Date.now(),params:r};_().v("开始缓存 fetch 请求的云配置结果..."),I.setStorage(i.STORAGE_NAME,lt.JSONEncode(o),(function(t){_().v("缓存云配置成功, 缓存数据为: ",o),_().v("缓存云配置成功, 成功消息为: ",t),_().v("云配拉取数据是否自动激活: ",e),t&&e&&(_().v("激活云配置..."),i.active({params:r,callback:n}))}))}else _().w("fetch 请求成功,返回结果异常 ",t.data),n&&n()},fail:function(e){_().w("fetch请求数据错误 ",t,e),n&&n()}})}catch(t){_().w("urequest调用错误",t)}}))}))}}};var St={install:function(t,e){return t.rc||(t.rc=new h),t.messager.once(t.messager.messageType.CONFIG_LOADED,(function(){t._log.v("plugin rc installed")})),t.rc}},It="_um",Ot="revenue",Et="stage",At="level",Nt="running",Tt="end",kt="init",Dt="set",bt=[It,Et,"start"].join("."),wt={install:function(t,e){t.revenue=function(e){t.trackEvent([It,Ot,e.group].join("."),g(e))};var n=0;return t.stage={onStart:function(e){n=Date.now(),t.trackEvent(bt,g(e))},onEnd:function(e){"number"!=typeof e._um_sdu&&(e._um_sdu=0!==n?Date.now()-n:0),t.trackEvent([It,Et,Tt,e.event].join("."),g(e))},onRunning:function(e){t.trackEvent([It,Et,Nt,e.event].join("."),g(e))}},t.level={onInitLevel:function(e){t.trackEvent([It,At,kt].join("."),g(e))},onSetLevel:function(e){t.trackEvent([It,At,Dt].join("."),g(e))}},t.messager.once(t.messager.messageType.CONFIG_LOADED,(function(){t._log.v("plugin game-ext installed")})),t}};tt.onShow((function(t){var e;_().v("game onShow: ",t),e=t.query,b=e,ft.resume(t,!0)})),tt.onHide((function(){_().v("game onHide"),ft.pause()}));var Ut=ft.init;ft.init=function(t){t&&t.useOpenid&&(_().tip_w(_().repeat("!")),_().tip_w("您选择了使用openid进行统计，请确保使用setOpenid回传openid或通过设置autoGetOpenid为true，并在友盟后台设置secret由友盟帮您获取"),_().tip_w(_().repeat("!"))),Ut.call(ft,t)},ft.use(St),ft.use(wt),tt.uma=ft}}(),t("default",r.exports)}));t("__cjsMetaURL",e.meta.url)}}}));

System.register("chunks:///_virtual/MapData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./SingletonBase2.ts","./RDAssetManager.ts","./AccountData.ts"],(function(t){"use strict";var a,n,e,i,r,o,s;return{setters:[function(t){a=t.inheritsLoose,n=t.createClass},function(t){e=t.cclegacy},function(t){i=t.CommonUtils},function(t){r=t.SingletonBase},function(t){o=t.RDAssetManager},function(t){s=t.default}],execute:function(){e._RF.push({},"1f58cpbVVRHnJpCLSxwjxlw","MapData",void 0);t("MapDataMgr",function(t){function n(){for(var a,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(a=t.call.apply(t,[this].concat(e))||this)._mapDataArr=[],a._mapDataObj={},a._accountModel=null,a}a(n,t);var e=n.prototype;return e.initLocalData=function(){this._accountModel=s.getInstance(),this._initMapData();for(var t=0,a=this._mapDataArr.length;t<a;t++){var n=this._mapDataArr[t];if(0===n.amount){var e=this._accountModel.getMapData(n.id);e.isUnlock||(e.isUnlock=!0,this._accountModel.setMapData(n.id,e))}}},e.getDataByIndex=function(t){return this._mapDataArr[t]},e.getDataById=function(t){return this._mapDataObj[t]},e.getDataLength=function(){return this._mapDataArr.length},e.getRandomlockMap=function(){for(var t=[],a=0,n=this._mapDataArr.length;a<n;a++){var e=this._mapDataArr[a];!this._accountModel.getMapData(e.id).isUnlock&&t.push(e)}var r=-1;return t.length>0&&(r=i.getRandomInteger(0,t.length-1)),-1!==r?t[r]:null},e._initMapData=function(){for(var t=o.getInstance().getAsset("mapList").json,a=0,n=Object.keys(t).length;a<n;a++){var e=new u,i=t[a];e.initData(a,i),this._mapDataArr.push(e),this._mapDataObj[i.id]=e}},n}(r));var u=t("MapData",function(){function t(){this._index=0,this._id=0,this._name="",this._showName=""}return t.prototype.initData=function(t,a){this._index=t,this._id=a.id,this._name=a.name,this._showName=a.showName,this._amount=a.amount},n(t,[{key:"index",get:function(){return this._index}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"showName",get:function(){return this._showName}},{key:"amount",get:function(){return parseInt(this._amount.toString())}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/AttackAreaMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./Utils.ts","./AppManager.ts","./EnemyAIMgr.ts","./PlayerMgr.ts"],(function(e){"use strict";var t,a,r,o,i,n,s,c,l,h,m,g,_,d;return{setters:[function(e){t=e.inheritsLoose,a=e.createClass},function(e){r=e.cclegacy,o=e._decorator,i=e.SphereCollider,n=e.BoxCollider,s=e.isValid,c=e.Component},function(e){l=e.CommonUtils},function(e){h=e.Constants},function(e){m=e.Utils},function(e){g=e.App},function(e){_=e.EnemyAIMgr},function(e){d=e.PlayerMgr}],execute:function(){var p;r._RF.push({},"2191cVtyk9G/qBn9eXC3yca","AttackAreaMgr",void 0);var C=o.ccclass;o.property,e("AttackAreaMgr",C("AttackAreaMgr")(p=function(e){function r(){for(var t,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._attackAreaNode=null,t._warnAreaNode=null,t._damage=0,t._teamType=-1,t._attackerComp=null,t._warnCollider=null,t._attackCollider=null,t._areaType=0,t._totalChargeTime=0,t._chargeTime=0,t}t(r,e);var o=r.prototype;return o.onLoad=function(){this._attackAreaNode=l.getNodeByName(this.node,"attackArea"),this._warnAreaNode=l.getNodeByName(this.node,"warnArea"),this._attackCollider=l.getNodeComponent(this._attackAreaNode,"coliderNode",i)||l.getNodeComponent(this.node,"coliderNode",n),this._warnCollider=l.getNodeComponent(this._warnAreaNode,"coliderNode",i)||l.getNodeComponent(this.node,"coliderNode",n)},o.start=function(){this.resetArea(!0)},o.onDisable=function(){this.resetArea(!0),this._chargeTime=0,this._registerEvent(!1),this._attackerComp=null},o._registerEvent=function(e){var t=e?"on":"off";this._warnCollider[t]("onTriggerEnter",this._onTriggerEnter,this),this.attackerComp instanceof _&&this._attackCollider[t]("onTriggerEnter",this._onAttackTriggerEnter,this)},o._onTriggerEnter=function(e){var t=e.otherCollider,a=l.getParentComponent(t.node,"enemyAI",_)||l.getParentComponent(t.node,"playerMgr",d);s(t)&&g.GameData.isInGame()&&a&&!(a.HP<=0)&&this._teamType!=a.teamType&&(a.HitByBullet(this._damage,this._attackerComp),console.log(this.attackerComp.teamType,"伤害---------\x3e",a.teamType))},o._onAttackTriggerEnter=function(e){var t=e.otherCollider,a=l.getParentComponent(t.node,"enemyAI",_)||l.getParentComponent(t.node,"playerMgr",d);if(!(!s(t)||!g.GameData.isInGame()||this.attackerComp.HP<=0||this.attackerComp.isUnderConstruction||!a||a.HP<=0||this._teamType==a.teamType)){var r=this.attackerComp.attackTargetComp?50:80,o=m.random(0,100)<=r;this.attackerComp instanceof _&&o&&(console.log(this.attackerComp.teamType,"攻击=========>",a.teamType),this.attackerComp.playAttackAnim(a instanceof d),this.attackerComp.lookForNewTarget(!1))}},o.init=function(e,t){this._attackerComp=e,this._teamType=e.teamType,this._damage=t.maxDamage,this._areaType=t.weaponType,this._totalChargeTime=t.chargeTime;var a=l.getNodeByName(this.node,"scaleNode"),r=t.areaScale;a.setScale(r,r,r),this.resetArea(!0),this._registerEvent(!0),console.log(this._attackerComp.teamType,"-----武器",t.name,"蓄力时间",this._totalChargeTime,"范围",r,"攻击力",this._damage)},o.updateArea=function(e){if(void 0===e&&(e=0),!(this._chargeTime>=this._totalChargeTime)){this._chargeTime+=e;var t=Math.min(this._chargeTime/this._totalChargeTime,1);0==this._areaType?(this._warnAreaNode.setScale(t,t,t),this._attackAreaNode.setScale(t,t,t)):(this._warnAreaNode.setScale(1,t,1),this._attackAreaNode.setScale(1,t,1))}},o.resetArea=function(e){void 0===e&&(e=!1),this._chargeTime=0,0==this._areaType?(this._warnAreaNode.setScale(0,0,0),this._attackAreaNode.setScale(0,0,0)):(this._warnAreaNode.setScale(1,0,1),this._attackAreaNode.setScale(1,0,1)),e&&(this._warnCollider.enabled=!1)},o.attack=function(e){var t=this;void 0===e&&(e=!1),this.unscheduleAllCallbacks(),this._warnCollider.enabled=!0,this.scheduleOnce((function(){(t.attackerComp instanceof d||e)&&g.Event.emit(h.EVENT_TYPE.CAMERA_PLAYER_ATTACK,t._chargeTime>=t._totalChargeTime),t._warnCollider.enabled=!1,t.resetArea()}),.1)},a(r,[{key:"attackerComp",get:function(){return this._attackerComp}},{key:"isChargeDone",get:function(){return console.log(this._chargeTime>=this._totalChargeTime),this._chargeTime>=this._totalChargeTime}}]),r}(c))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/RDPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Log.ts","./UIManager.ts","./RDPlatformType.ts","./ConstantCommon.ts","./RDPlatformParam.ts","./RDCommand.ts","./OptionsManager.ts","./Utils.ts"],(function(t){"use strict";var n,e,a,i,s,r,o,c,_,h,u,l,d;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,a=t.sys,i=t.game},function(t){s=t.EventManager},function(t){r=t.Log},function(t){o=t.UIManager},function(t){c=t.RDPlatformType},function(t){_=t.ConstantCommon},function(t){h=t.RDPlatformParam},function(t){u=t.RDCommand},function(t){l=t.default},function(t){d=t.Utils}],execute:function(){e._RF.push({},"242b8KJz+9IxZK3n7lM/mye","RDPlatform",void 0),t("RDPlatform",function(){function t(t){this._systemInfo={},this.type=c.None,this.typeName={1:"wx",2:"tt",3:"qg",4:"qg",10:"qg",11:"qg"},this._subpackageArr=[],this._loadedSubpackageCnt=0,this._bannerADInstance=null,this._bannerADInstances=[],this._bannerShowIndex=0,this._bannerShow=!1,this._gameBannerADInstance=null,this._gamePortalADInstance=null,this._isShowGamePortalAd=!1,this._videoBoxInstance=null,this._nativeID=[],this._nativeADInstance=null,this._nativeADInstances=new Map,this._nativeAdParam=[],this._nativeLastTime={},this._rewardCaback=null,this._interstitialAdInstance=null,this._nativeAdCaback=null,this._nativeInterval=null,this._hasShortcutInstalled=!1,this._shortCutInstalledCaback=null,this._unPackgeTimes=0,this._nativeIdCurrent=0,this._lastShakeTime=0,this._closeAdTimes=0,this._lastShowAdTimes=0,this._userInf={userId:"",userName:"",userHead:""},this._backDealy=0,this.type=t,this._subpackageArr=h.ADPARAM[this.type.toString()].subpackageNames,this._nativeID=h.ADPARAM[this.type.toString()].native_id,r.log("","当前运行平台"+this.type),r.log("分包信息",this._subpackageArr,JSON.stringify(this._nativeID?this._nativeID:[]))}var e=t.prototype;return e.init=function(){r.log("RDPlatform init"),this.initAD(),a.isNative||this.initInterval()},e.initAD=function(){this._createShortcutInstalled(null)},e.initInterval=function(){var t=this,n=l.getInstance().regionEnable?l.getInstance().getConfigByKey("delayShow",6e4):6e4;console.log("RDPlatform初始化",n),setTimeout((function(){t.freashNative(),r.log("initInterval",n),t._nativeInterval=setInterval((function(){t.freashNative()}),3e3),setTimeout((function(){!l.getInstance().onlyVideo&&s.getInstance().emit(_.EVENT_TYPE.SHOW_NATIVE_AD)}),3e3)}),Math.max(n-1e3,0))},e.freashNative=function(){for(var t=this,n=(new Date).getTime(),e=l.getInstance().getConfigByKey("nativeFreashTime",9e4),a=function(a){var i=t._nativeID[a];setTimeout((function(){var a=t._nativeLastTime[i]?t._nativeLastTime[i]:0;n-a>=e&&(r.log("freashNative",i),t.initNativeAd(i),s.getInstance().emit("clickNative",i,null))}),500*a)},i=0;i<this._nativeID.length;i++)a(i)},e.initNativeAd=function(t){},e.sendData=function(t,n){try{this._concent=n,t===u.CMD_SHOW_REWARD_VIDEO_AD?this._rewardCaback=n:t==u.CMD_CREATE_NATIVE_AD?this._nativeAdCaback=n.callback:t==u.CMD_ADDSHORTCUT&&(this._shortCutInstalledCaback=n),this.sendDataToPlatform(t,n)}catch(t){}},e.sendDataToPlatform=function(t,n){try{switch(t){case u.CMD_SHOW_REWARD_VIDEO_AD:this._showVideo(n);break;case u.CMD_SHOW_BANNER_AD:this._showBannerAd(n);break;case u.CMD_HIDE_BANNER_AD:this._hideBannerAd(n);break;case u.CMD_SHOW_INTERSTITIAL_VIDEO_AD:this._showIntertitalAd(n);break;case u.CMD_SHAKE:this._vibrateShort(n);break;case u.CMD_TOAST:this._showToast(n);break;case u.CMD_RECORDVIDEO:this._startRecordScreen(n);break;case u.CMD_STOPRECORDVIDEO:this._pauseRecordScreen(n);break;case u.CMD_SHAREVIDEO:this._shareVido(n);break;case u.CMD_TO_MINIPROGRAM:this._gotoMiniGameByAppid(n);break;case u.CMD_DATA_STATISTICS:this._statistics(n);break;case u.CMD_CREATE_NATIVE_AD:this._createNativeAd(n);break;case u.CMD_ClICK_NATIVE_AD:this._nativeAdClick(n);break;case u.CMD_DESTROY_NATIVE_AD:this._destoryNativeAd(n);break;case u.CMD_ADDSHORTCUT:this._installShortcut(n);break;case u.CMD_SDK_INIT:this._initSdk(n);break;case u.CMD_SDK_LOGIN:this._login(n);break;case u.CMD_SDK_LOGOUT:this._logOut(n);break;case u.CMD_SDK_SYSDATA:this._sysData(n);break;case u.CMD_SDK_EXIT:this._exitGame(n);break;case u.CMD_SDK_PAY:this._pay(n);break;case u.CMD_SHOW_BANNER_OFFICE_AD:this._showGameBannerAd(n);break;case u.CMD_HIDE_BANNER_OFFICE_AD:this._hideGameBannerAd(n);break;case u.CMD_SHOW_OFFICE_PORTAL_AD:this._showGamePortalAd(n);break;case u.CMD_HIDE_OFFICE_PORTAL_AD:this._hideGamePortalAd(n);break;case u.CMD_SDK_PRIVACY_POLICY:this.openPrivacyPolicy()}}catch(t){}},e.isReviewed=function(){return h.ADPARAM[this.type.toString()].isReviewed},e.loadStorageData=function(t,n,e){},e.flushStorageData=function(t,n){},e.LoadSubpackageTask=function(t,n,e){if(this._unPackgeTimes=0,null==this._subpackageArr||0===this._subpackageArr.length)return r.log("无需分包"),void(n&&n(100));this._loadedSubpackageCnt=0;var a=this._subpackageArr[this._loadedSubpackageCnt],i=function(s){var o=this,c=this.typeName[this.type.toString()],_=window[c].loadSubpackage({name:s,success:function(t){this._loadedSubpackageCnt>=this._subpackageArr.length-1?n&&n(t):(this._unPackgeTimes=0,this._loadedSubpackageCnt+=1,a=this._subpackageArr[this._loadedSubpackageCnt],i(a))}.bind(this),fail:function(t){r.log("分包失败"),this._unPackgeTimes<3?i(a):(e&&e(t),this._showToast("分包失败,请重启游戏")),this._unPackgeTimes+=1}.bind(this)}),h=Math.ceil(100/this._subpackageArr.length);_.onProgressUpdate((function(n){var e=o._loadedSubpackageCnt*h+n.progress/100*h;r.log("下载进度",e),t&&t({progress:e})}))}.bind(this);i(a)},e._showVideo=function(t){},e.sendVideoReward=function(t){this._rewardCaback&&("success"===t?this._rewardCaback.success(null):this._rewardCaback.fail())},e._showBannerAd=function(t){!0===t.clear&&(r.log("super重新刷新banner广告时间"),this._destoryBannerAd())},e._hideBannerAd=function(t){r.log("super开始隐藏或者删除",null===this._bannerADInstance),this._bannerADInstance&&(!1===t?(r.log("super隐藏banner"),this._bannerADInstance.hide(),this._bannerShow=!1):(r.log("super删除banner"),this._bannerShow=!1,this._destoryBannerAd()))},e._showGameBannerAd=function(t){},e._hideGameBannerAd=function(t){},e._showGamePortalAd=function(t){},e._hideGamePortalAd=function(t){},e.bannerAdIsShow=function(t){return null!=this._bannerADInstance},e._destoryBannerAd=function(){this._bannerADInstance&&(this._bannerADInstance.hide(),this._bannerADInstance.destroy&&this._bannerADInstance.destroy()),this._bannerADInstance=null},e._showIntertitalAd=function(t){this._interstitialAdInstance&&(this._interstitialAdInstance.destroy&&this._interstitialAdInstance.destroy(),this._interstitialAdInstance=null)},e._showTemplateNative=function(t){},e._createNativeAd=function(t){this._nativeADInstance&&this._destoryNativeAd(null)},e._reportAdShow=function(t){},e._nativeAdClick=function(t){},e._destoryNativeAd=function(t){for(var n=0;n<this._nativeAdParam.length;n++){if(this._nativeAdParam[n].nativeId==t.name){this._nativeAdParam.splice(n,1);break}}},e._vibrateShort=function(t){},e._showToast=function(t){},e._createShortcutInstalled=function(t){},e._installShortcut=function(t){},e._gotoMiniGameByAppid=function(t){},e._statistics=function(t){},e._startRecordScreen=function(t){},e._pauseRecordScreen=function(t){},e._shareVido=function(t){},e.HasShortcutInstalled=function(){return this._hasShortcutInstalled},e.startGameEvent=function(t){},e.endGameEvent=function(t){},e.openPrivacyPolicy=function(){o.getInstance().showDialog("adUI/privacyPolicy",null,!0,null)},e._initSdk=function(t){t&&t.success(),r.log("初始化成功")},e._login=function(t){},e._logOut=function(t){},e._sysData=function(t){},e._exitGame=function(t){},e._pay=function(t){},e.setScore=function(t){},e.getGamePortBanner=function(){return this._isShowGamePortalAd},e.isBtnFadeIn=function(t){return void 0===t&&(t=!0),t?l.getInstance().regionEnable&&l.getInstance().getConfigByKey("native_switch",!1):l.getInstance().getConfigByKey("native_switch",!1)},e.getAndroidPlatName=function(){return""},e.getVersionName=function(){return"1.0.0"},e.getPlatId=function(){return"1011"},e.getUserInfByKey=function(t){var n=this._userInf&&this._userInf[t]?this._userInf[t]:null;return r.log("用户信息",n),n},e.updateUserInf=function(t){var n=t.split("|");this._userInf[_.USER_KEY.USER_NAME]=n[0],d.IsImage(n[1])||(n[1]=n[1]+"?a=a.png"),this._userInf[_.USER_KEY.USER_HEADE]=n[1]},e.isShowNativeAd=function(t){return!1},e.isMoreGameBtn=function(){return h.ADPARAM[this.type].game_portal_id},e.isShowContact=function(){return!1},e.isShowPrivacy=function(){return!this.isBtnFadeIn()},e.isShowNativeSplash=function(){return l.getInstance().getConfigByKey("native_splash_switch",!1)&&l.getInstance().regionEnable},e.addCloseAd=function(){this._closeAdTimes++},e.canBaking=function(){return!0},e.exitGame=function(){i.end()},n(t,[{key:"closeAdTimes",get:function(){return this._closeAdTimes}}]),t}()).TAG="RDPlatform",e._RF.pop()}}}));

System.register("chunks:///_virtual/CommonUtils.ts",["cc"],(function(t){"use strict";var n,e,r,o;return{setters:[function(t){n=t.cclegacy,e=t.Button,r=t.EventHandler,o=t.math}],execute:function(){n._RF.push({},"25364zRZjhB8KFCosrEltCz","CommonUtils",void 0);t("CommonUtils",{getNodeByName:function(t,n){if(!t)return null;if(t.name===n)return t;for(var e=t.children,r=0,o=e.length;r<o;r++){var u=this.getNodeByName(e[r],n);if(null!==u)return u}return null},getParentByName:function(t,n){if(!t)return null;var e=t.parent;return e&&e.name===n?e:this.getParentByName(e,n)},getNodeComponent:function(t,n,e){var r=this.getNodeByName(t,n);return r?r.getComponent(e):null},getParentComponent:function(t,n,e){var r=this.getParentByName(t,n);return r?r.getComponent(e):null},getRandomNumber:function(t,n){return Math.random()*(n-t)+t},getRandomInteger:function(t,n){return Math.floor(Math.random()*(n-t+1)+t)},isReachProbability:function(t){return Math.random()<t},getDecimalDigits:function(t,n){return void 0===n&&(n=3),parseFloat(t.toFixed(n))},prefixInteger:function(t,n){return(Array(n).join("0")+t).slice(-n)},keepNumberPlaces:function(t,n){void 0===n&&(n=2);var e=Math.pow(10,n),r=(Math.round(t*e)/e).toString();if(r.indexOf(".")<0){r+=".";for(var o=0;o<n;o++)r+="0"}return r},getLimitDigitString:function(t,n){return void 0===n&&(n=4),t.length>n?t.substring(0,n)+"...":t},registerButtonEvent:function(t,n,r,o,u){var i=this.getNodeByName(t,n);return null==i||i.on(e.EventType.CLICK,r,o,u),i},getEventHandler:function(t,n,e,o){if(void 0===e&&(e=null),void 0===o&&(o=""),t.isValid){t.compName=t.compName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var u=new r;return u.target=e||t.node,u.component=t.compName,u.handler=n,u.customEventData=o,u}},jumpTo_v3:function(t,n){return{value:t,progress:this._jumpTo_progress(3,n)}},jumpTo_v2:function(t,n){return{value:t,progress:this._jumpTo_progress(2,n)}},_jumpTo_progress:function(t,n){var e=t,r=Math.sqrt(n);return function(u,i,a,m){e>=t?e=1:e++;var s=o.lerp(u,i,m);if(2===e){var c=Math.abs(1-2*m);s+=n-Math.pow(r*c,2)}return s}}});n._RF.pop()}}}));

System.register("chunks:///_virtual/touch-mgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./AppManager.ts"],(function(t){"use strict";var o,i,n,s,c,h,u,e,a;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,s=t.systemEvent,c=t.SystemEventType,h=t.Vec2,u=t.v2,e=t.Component},function(t){a=t.App}],execute:function(){var r;i._RF.push({},"2537dwGOotIW6yBk3Kw7Ea3","touch-mgr",void 0);var _=n.ccclass;t("TouchMgr",_("TouchMgr")(r=function(t){function i(){for(var o,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(o=t.call.apply(t,[this].concat(n))||this)._touchID=null,o._lastTouchPos=null,o._deltaPos=null,o._isTouching=!1,o}o(i,t);var n=i.prototype;return n.start=function(){this._registerEvent(!0)},n._registerEvent=function(t){var o=t?"on":"off";s[o](c.TOUCH_START,this._onTouchStart,this),s[o](c.TOUCH_MOVE,this._onTouchMove,this),s[o](c.TOUCH_END,this._onTouchEnd,this),s[o](c.TOUCH_CANCEL,this._onTouchEnd,this)},n._onTouchStart=function(t){var o=a.GameData;o.isReadyStart||o.isGameWin||o.isGameOver?o.isReadyStart&&null===this._touchID&&this._initTouchData(t):null===this._touchID&&this._initTouchData(t)},n._initTouchData=function(t){this._touchID=t.getID(),this._lastTouchPos=t.getUILocation(),this._isTouching=!0,this._deltaPos=h.ZERO},n._onTouchMove=function(t){if(this._touchID===t.getID()&&a.GameData.isInGame()&&!a.GameData.isGameWin){var o=t.getUILocation(),i=u(o.x-this._lastTouchPos.x,o.y-this._lastTouchPos.y);0!==i.x||i.y}},n._onTouchEnd=function(t){this._touchID===t.getID()&&(this._touchID=null,this._lastTouchPos=null,this._isTouching=!1,this._deltaPos=h.ZERO)},n.update=function(t){this._isTouching},n.onDestroy=function(){this._registerEvent(!1)},i}(e))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingletonBase.ts"],(function(t){"use strict";var e,o,n,i,r,a;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t.Node,i=t.NodePool,r=t.instantiate},function(t){a=t.SingletonBase}],execute:function(){o._RF.push({},"25ffcccPfRHlpz5V4R1wWaW","PoolManager",void 0);t("PoolManager",function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._poolDict={},e}e(o,t);var a=o.prototype;return a.getNode=function(t,e){void 0===e&&(e=null);for(var o,r=t instanceof n?t.name:t.data.name,a=""+r.substr(0,1).toUpperCase()+r.substr(1),s=arguments.length,c=new Array(s>2?s-2:0),l=2;l<s;l++)c[l-2]=arguments[l];if(this._poolDict.hasOwnProperty(r)){var p=this._poolDict[r];o=p.size()>0?p.get.apply(p,c):this._getInstantiateNode(t,a,c)}else this._poolDict[r]=new i(a),o=this._getInstantiateNode(t,a,c);return e&&o.setParent(e),o},a.putNode=function(t){if(t){var e,o=t.name;this._poolDict.hasOwnProperty(o)?e=this._poolDict[o]:(e=new i,this._poolDict[o]=e),e.put(t)}},a.clearPool=function(t){var e="string"==typeof t?t:t.data.name;this._poolDict.hasOwnProperty(e)&&this._poolDict[e].clear()},a._getInstantiateNode=function(t,e,o){var n=r(t),i=n.getComponent(e);return i&&i.reuse&&i.reuse(o),n},o}(a));o._RF.pop()}}}));

System.register("chunks:///_virtual/RDKGPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./UIManager.ts","./RDPlatformType.ts","./RDPlatformParam.ts","./RDPlatform.ts"],(function(t){"use strict";var i,n,a,e,o,s,r,c;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,a=t.sys},function(t){e=t.Log},function(t){o=t.UIManager},function(t){s=t.RDPlatformType},function(t){r=t.RDPlatformParam},function(t){c=t.RDPlatform}],execute:function(){n._RF.push({},"27108/V6zRBXaqUTS4A17N3","RDKGPlatform",void 0);t("RDKGPlatform",function(t){function n(i){var n;return(n=t.call(this,i)||this).vibrateInterval=null,n}i(n,t);var c=n.prototype;return c.loadStorageData=function(t,i,n){var e=JSON.parse(a.localStorage.getItem(t[0]));i&&i(e)},c.flushStorageData=function(t,i){a.localStorage.setItem(t.key,JSON.stringify(t.data))},c.initAD=function(){this._hasShortcutInstalled=!0,this._login(null)},c._showToast=function(t){window.MiniApp.showToast({title:t,icon:"none",image:"",mask:!1,duration:2e3,success:function(){},fail:function(){},complete:function(){}})},c._vibrateShort=function(t){void 0===t&&(t=50),100!=t?this.startVibrate(t):this.startPeristentVibrate(100,.01)},c.startVibrate=function(t){navigator.vibrate(t)},c.stopVibrate=function(){this.vibrateInterval&&clearInterval(this.vibrateInterval),navigator.vibrate(0)},c.startPeristentVibrate=function(t,i){this.vibrateInterval=setInterval((function(){this.startVibrate(t)}),i)},c._showBannerAd=function(t){this.isReviewed()&&e.log("审核中=====")},c._showVideo=function(t){var i=this;!this.isReviewed()&&window.MiniGame?(e.log("点击开始激励视频播放"),this._videoBoxInstance=window.MiniGame.createRewardVideoAd(),this._videoBoxInstance.onLoad((function(){e.log("激励视频加载成功"),o.getInstance().showTipMessage("激励视频加载成功"),i._videoBoxInstance.show()})),this._videoBoxInstance.onVideoStart((function(){e.log("激励视频 开始播放")})),this._videoBoxInstance.onClose((function(t){t.isReward?(e.log("激励视频广告完成，发放奖励"),o.getInstance().showTipMessage("激励视频广告完成，发放奖励"),i._rewardCaback&&i._rewardCaback.fail(),i._rewardCaback.success(null)):(i._rewardCaback&&i._rewardCaback.fail(),e.log("激励视频广告取消关闭，不发放奖励"))})),this._videoBoxInstance.onError((function(t){e.log(JSON.stringify(t))}))):this._rewardCaback.success(null)},c._showIntertitalAd=function(t){this.isReviewed()},c._login=function(t){var i=r.ADPARAM[s.KG.toString()].appid;setTimeout((function(){window.MiniGame&&window.MiniGame.userLogin&&window.MiniGame.userLogin({appid:i,loginType:1,success:function(t){e.log("用户信息:"+JSON.stringify(t.userData)),o.getInstance().showTipMessage("用户信息"+JSON.stringify(t.userData));t.userData.userName,t.userData.avatarUrl,t.userData.userId},fail:function(t){}})}),.1)},c.setScore=function(t){window.MiniGame&&window.MiniGame.gameResultReport(t)},n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/ICannonScene.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,r,s,c,o,i;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){r=n.cclegacy,s=n._decorator,c=n.PhysicsSystem,o=n.Vec3,i=n.Component}],execute:function(){var u,a,l;r._RF.push({},"2bb7cJqPINP0p5bPjArwxrQ","ICannonScene",void 0);var p=s.ccclass,h=s.executionOrder;n("ICannonScene",p("ICannonScene")(u=h(-1)((l=a=function(n){function r(){return n.apply(this,arguments)||this}return t(r,n),r.prototype.start=function(){r._inst=this;var n=c.instance.physicsWorld;this._world=n._world,c.instance.gravity=new o(0,-2,0)},e(r,[{key:"world",get:function(){return this._world}}],[{key:"inst",get:function(){return this._inst}}]),r}(i),a.TAG="CannonScene",a._inst=null,u=l))||u)||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/AssetsUtils.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2bd2bl3T49C7J9DcnnpKtDH","AssetsUtils",void 0);e("default",function(){function e(){}return e.getUuidArray=function(e){return cc.loader._assetTables.assets.getUuidArray(e)},e.getDependsRecursively=function(e){return cc.loader.getDependsRecursively(e)},e.getReferenceKey=function(e){return cc.loader._getReferenceKey(e)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/SetZIndex.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,i,o;return{setters:[function(e){t=e.inheritsLoose,n=e.applyDecoratedDescriptor,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy}],execute:function(){var c,a,s,u;o._RF.push({},"2e1bfnmaKdLd4KRAarig2J6","SetZIndex",void 0);var l=cc._decorator,p=l.ccclass,d=l.property;e("default",p((u=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,r(t,"zIndex",s,i(t)),t}return t(n,e),n.prototype.onLoad=function(){this.node.zIndex=this.zIndex},n}(cc.Component),s=n((a=u).prototype,"zIndex",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=a))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/ConfirmUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var e,i,n,a,o,s,r,l,d,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,a=t.Sprite,o=t.Label},function(t){s=t.CommonUtils},function(t){r=t.Constants},function(t){l=t.EventResult},function(t){d=t.App},function(t){c=t.UIBase}],execute:function(){var _;i._RF.push({},"31374n+cM1OgZS42WghRq+o","ConfirmUI",void 0);var u=n.ccclass,h=r.AWARD_TYPE;t("ConfirmUI",u("ConfirmUI")(_=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._titleNode=null,e._confirmNode=null,e._awardSpt=null,e._awardLbl=null,e._skinNameLbl=null,e._confirmBtnNode=null,e._multipleNode=null,e._multipleBtnNode=null,e._receiveBtnNode=null,e._awardData=0,e._isSkinAward=!1,e._playerNode=null,e}e(i,t);var n=i.prototype;return n.onLoad=function(){this._titleNode=s.getNodeByName(this.node,"title"),this._confirmNode=s.getNodeByName(this.node,"confirmNode"),this._awardSpt=s.getNodeComponent(this._confirmNode,"award",a),this._awardLbl=s.getNodeComponent(this._confirmNode,"awardLbl",o),this._skinNameLbl=s.getNodeComponent(this._confirmNode,"skinNameLbl",o);var t=this.node.getChildByName("buttonNode");this._confirmBtnNode=s.registerButtonEvent(t,"confirmBtn",this._onConfirmButton,this),this._multipleNode=s.getNodeByName(t,"multipleNode"),this._multipleBtnNode=s.registerButtonEvent(this._multipleNode,"multipleBtn",this._onMultipleButton,this),this._receiveBtnNode=s.registerButtonEvent(this._multipleNode,"receiveBtn",this._onReceiveButton,this),this._playerNode=s.getNodeByName(this._confirmNode,"playerNode"),this.initBgOpacity(),this.initOppoNativeAd(),this.alignOppoNativeAd(this._receiveBtnNode,50)},n.show=function(t,e){void 0===e&&(e=h.GOLD),this._awardData=t,this._setNodeVisible(e),this._setAwardImage(e),this.playScaleInAnim([this._titleNode,this._confirmNode,this._confirmBtnNode],this._receiveBtnNode),this.showAdvertisement(),d.Audio.playSound(r.AUDIO_SOURCE_TYPE.CONGRATULATE)},n.getUIName=function(){return"恭喜获得"},n._setNodeVisible=function(t){var e=t===h.SKIN;this._isSkinAward=e,this._awardLbl.node.active=!e,this._confirmBtnNode.active=e,this._multipleNode.active=!e,this._awardLbl.node.active&&(this._awardLbl.string=this._awardData.toString(),d.AchievementDataMgr.setStatistic(r.ACHIEVEMENT_TYPE.TOTAL_GOLD,this._awardData),d.Event.emit(r.EVENT_TYPE.UPDATE_ACHIEVE))},n._setAwardImage=function(t){var e="";switch(t){case h.GOLD:e="Confirm_Image_Diamond",this._awardSpt.spriteFrame=d.SptFrame.getSpriteFrameByName(e),this._playerNode.active=!1;break;case h.SKIN:this._awardSpt.spriteFrame=null,this._updatePlayerSkin(this._awardData.id)}},n._updatePlayerSkin=function(t){for(var e=this,i=d.SkinDataMgr.getDataById(t).skinType,n=this._playerNode.children,a=0;a<n.length;a++){n[a].active=!1}var o=s.getNodeByName(this._playerNode,"player"+i);o.active=!0,this.setPlayerSkin(o,t,(function(){e._playerNode.active=!0}))},n._onConfirmButton=function(){d.UI.isUIAnimPlaying()||(this._playScaleOutAnim(),d.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭"}))},n._onMultipleButton=function(){var t=this;if(!d.UI.isUIAnimPlaying()){var e={"当前窗口":this.getUIName(),"按钮类型":"三倍领取"};d.Stats.customEvent("按钮事件",e,l.onStarted),this.showRewardAd({success:function(){d.Stats.customEvent("按钮事件",e,l.onSuccess),t._playScaleOutAnim((function(){d.Event.emit(r.EVENT_TYPE.GOLD_ANIM,3*t._awardData)}))},fail:function(){d.Stats.customEvent("按钮事件",e,l.onFailed)}})}},n._onReceiveButton=function(){var t=this;d.UI.isUIAnimPlaying()||(this._playScaleOutAnim((function(){d.Event.emit(r.EVENT_TYPE.GOLD_ANIM,t._awardData)})),d.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"直接领取"}))},n._playScaleOutAnim=function(t){this._playerNode.active=!1;var e=[this._titleNode,this._confirmNode,this._confirmBtnNode];this.playScaleOutAnim(e,(function(){d.UI.hideDialog(r.UI_DIALOG_NAME.CONFIRM),t&&t()}))},i}(c))||_);i._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDCommand.ts","./RDPlatformManager.ts","./AppManager.ts","./TaskManager.ts","./hitColor.ts","./Common.ts","./Simulator.ts","./AttackAreaMgr.ts","./BrickCountMgr.ts","./BloodBarMgr.ts"],(function(t){"use strict";var e,i,n,o,r,a,s,l,c,u,d,h,_,g,f,m,A,v,C,k,p,E,P,T,N,M,y,D,B,R,b,S,I,U,w;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass,n=t.asyncToGenerator},function(t){o=t.cclegacy,r=t._decorator,a=t.Vec3,s=t.v3,l=t.MeshRenderer,c=t.SkeletalAnimation,u=t.tween,d=t.find,h=t.Node,_=t.systemEvent,g=t.SystemEvent,f=t.SphereCollider,m=t.KeyCode,A=t.Tween,v=t.BoxCollider,C=t.isValid,k=t.math,p=t.Component,E=t.easing},function(t){P=t.CommonUtils},function(t){T=t.Constants},function(t){N=t.RDCommand},function(t){M=t.RDPlatformManager},function(t){y=t.App},function(t){D=t.TaskManager},function(t){B=t.HitColor},function(t){R=t.Vector2,b=t.RVOMath},function(t){S=t.Simulator},function(t){I=t.AttackAreaMgr},function(t){U=t.BrickCountMgr},function(t){w=t.BloodBarMgr}],execute:function(){var O;o._RF.push({},"32473eX+B9EEYiQKkzVW8Np","PlayerMgr",void 0);var H,G=r.ccclass;!function(t){t.IDLE="Idle",t.RUN="Running",t.DEATH="Death",t.WIN="Win",t.ATTACK="Construct",t.CARRY_IDLE="carryIdle",t.CARRY_RUN="carryRunning"}(H||(H={}));t("PlayerMgr",G("PlayerMgr")(O=function(t){function o(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._characterNode=null,e._guideArrow=null,e._guideTarget=null,e._guideArrowMtl=null,e._isShowGuideArrow=!1,e._hummerNode=null,e._brickHolder=null,e._bornPos=a.ZERO,e._skeletalAnim=null,e._targetPos=s(),e._aid=-1,e._teamType=-1,e._buffArr=[],e._isUnderConstruction=!1,e._isTouching=!1,e._moveDir=a.ZERO,e._curBrickCnt=0,e._curHP=0,e._attackTargetComp=null,e._hitColorMgr=null,e.bloodBarMgr=null,e.brickCountMgr=null,e._attackAreaMgr=null,e}e(o,t);var r=o.prototype;return r.start=function(){this._characterNode=P.getNodeByName(this.node,"characterNode"),this._guideArrow=P.getNodeByName(this.node,"guideArrow"),this._guideArrowMtl=P.getNodeComponent(this._guideArrow,"arrow",l).material,this._isShowGuideArrow=!1,this._hummerNode=P.getNodeByName(this._characterNode,"hammer"),this._brickHolder=P.getNodeByName(this._characterNode,"Brick_Holder"),this._skeletalAnim=P.getNodeComponent(this._characterNode,"leader",c),this._setCharacterMtl(),this._registerEvent(!0)},r.gameOver=function(){var t,e;this.resetData(!0),this._setColliderGroup(!1),y.Audio.playSound(T.AUDIO_SOURCE_TYPE.LEADER_DEAD),null===(t=this._skeletalAnim)||void 0===t||t.stop(),null===(e=this._skeletalAnim)||void 0===e||e.crossFade(H.DEATH),this.scheduleOnce((function(){y.UI.showDialog(T.UI_DIALOG_NAME.REVIVE)}),1)},r.gameWin=function(){for(var t,e,i,n=this._brickHolder.children,o=n.length-1;o>=0;o--)y.Pool.putNode(n[o]);this.brickCountMgr&&y.Pool.putNode(this.brickCountMgr.node),this.brickCountMgr=null,null===(t=this._attackAreaMgr)||void 0===t||t.resetArea(!0),u(this._characterNode).to(.1,{eulerAngles:s(0,180,0)}).start(),null===(e=this._skeletalAnim)||void 0===e||e.stop(),null===(i=this._skeletalAnim)||void 0===i||i.crossFade(H.WIN)},r.startGame=function(){y.Event.emit(T.EVENT_TYPE.SET_RANK_ITEM,this.teamType,this.brickCnt),this._showSkinRcmd()},r.reviveGame=function(){this.init(this._bornPos)},r.pauseGame=function(){var t,e;null===(t=this._skeletalAnim)||void 0===t||t.stop(),null===(e=this._skeletalAnim)||void 0===e||e.crossFade(H.IDLE)},r.continueGame=function(){var t,e;null===(t=this._skeletalAnim)||void 0===t||t.stop(),null===(e=this._skeletalAnim)||void 0===e||e.crossFade(H.RUN)},r._showSkinRcmd=function(t){if(void 0===t&&(t=.5),!T.IS_DEBUG){var e=y.SkinDataMgr.getRandomLockId();-1!=e&&this.scheduleOnce((function(){y.Event.emit(T.EVENT_TYPE.GAME_PAUSE),y.UI.showDialog(T.UI_DIALOG_NAME.SKIN_RECOMMEND,null,e)}),t)}},r.init=function(t){var e,i;void 0===t&&(t=a.ZERO),this._bornPos=t,S.instance.setAgentDefaults(.5,10,1,1,1,99,new R(0,0)),this.node.setWorldPosition(t),this._characterNode.setWorldRotationFromEuler(0,180,0),this._targetPos=this.node.worldPosition,this._guideArrow.active=!1,this._isShowGuideArrow=!1;var n=new R(this._targetPos.x,this._targetPos.z),o=S.instance.addAgent(n);S.instance.setAgentMass(o,1),this._aid=o,this._teamType=y.RankDataMgr.getPlayerRankTeamType(),this.brickCnt=0,this._curHP=this.totalHP,this._buffArr=[],this._setCharacterMtl(),y.GameData.curLeaderArr.push(this.node),S.instance.buildAgentTree(),this._hummerNode.active=!0,null===(e=this._skeletalAnim)||void 0===e||e.stop(),null===(i=this._skeletalAnim)||void 0===i||i.crossFade(H.IDLE),this._attackTargetComp=null,this._setColliderGroup(!0),this.updateScale(),this._initBloodBar(),this._initBrickCntItem(),this._initWeapon(y.WeaponDataMgr.getCurrentWeaponData())},r._initWeapon=function(t){void 0===t&&(t=null),t||(t=y.WeaponDataMgr.getCurrentWeaponData()),console.log(t),y.WeaponDataMgr.setCurrentWeaponData(t.id),this._initAttackArea(t)},r._initAttackArea=function(t){var e=this;this._attackAreaMgr&&y.Pool.putNode(this._attackAreaMgr.node),this._attackAreaMgr=null,y.Res.loadPrefab("attackArea/attackArea_"+t.weaponType,"prefab").then((function(i){var n,o=P.getNodeByName(e._characterNode,"attackAreaNode");o.destroyAllChildren();var r=y.Pool.getNode(i,o);e._attackAreaMgr=P.getNodeComponent(r,r.name,I),null===(n=e._attackAreaMgr)||void 0===n||n.init(e,t)}))},r._initBloodBar=function(t){var e=this;void 0===t&&(t=s(0,90,0)),this.bloodBarMgr&&y.Pool.putNode(this.bloodBarMgr.node),this.bloodBarMgr=null,y.Res.loadPrefab("prefab/ui/item/bloodBarItem").then((function(i){var n=d("Canvas/BloodBarParentNode"),o=y.Pool.getNode(i,n);P.getNodeComponent(o,o.name,w).init(e,t)}))},r._initBrickCntItem=function(t,e){var i=this;void 0===t&&(t=0),void 0===e&&(e=s(0,130,0)),this.brickCountMgr&&y.Pool.putNode(this.brickCountMgr.node),this.brickCountMgr=null,y.Res.loadPrefab("prefab/ui/item/BrickCntItem_"+t).then((function(t){var n=d("Canvas/BrickCountParentNode"),o=y.Pool.getNode(t,n);P.getNodeComponent(o,o.name,U).init(i,e)}))},r._setCharacterMtl=function(t){var e=this;void 0===t&&(t=-1),this._hitColorMgr=null;var i=-1==t?y.SkinDataMgr.getCurrentSkin():t,n=i>0&&i<3;y.Res.loadTexture("skin/player_new/player_"+this.teamType+(n?"_"+i.toString():""),"texture").then((function(i){var n,o;P.getNodeComponent(e._characterNode,"js",l).material.setProperty("mainTexture",i),P.getNodeByName(e._characterNode,"shadow").setScale(2,2,2),e._skeletalAnim=P.getNodeComponent(e._characterNode,"leader",c),null===(n=e._skeletalAnim)||void 0===n||n.stop(),null===(o=e._skeletalAnim)||void 0===o||o.crossFade(H.IDLE),P.getNodeByName(e._characterNode,"leader").active=!0,e._hitColorMgr=P.getNodeComponent(e._characterNode,"js",B),e._loadCap(t)}))},r._loadCap=function(t){var e=this;void 0===t&&(t=-1);var i=-1==t?y.SkinDataMgr.getCurrentSkin():t;y.Res.loadPrefab("playerCap/cap_"+i,"prefab").then((function(t){var i=P.getNodeByName(e._characterNode,"cp Socket");i.destroyAllChildren();y.Pool.getNode(t,i)}))},r._registerEvent=function(t){var e=t?"on":"off";y.Event[e](h.EventType.TOUCH_MOVE,this._setMoveDir,this),y.Event[e](h.EventType.TOUCH_END,this._resetMoveDir,this),y.Event[e](T.EVENT_TYPE.CLEAR_MAP_INFO,this.resetData,this),y.Event[e](T.EVENT_TYPE.UPDATE_SKIN,this._setCharacterMtl,this),y.Event[e](T.EVENT_TYPE.SET_WEAPON_BTN,this._initWeapon,this),_[e](g.EventType.KEY_DOWN,this.onKeyDown,this),this.node.getComponent(f)&&this.node.getComponent(f)[e]("onTriggerStay",this._onTriggerStay,this),t&&this._setColliderGroup(!0)},r.onKeyDown=function(t){if(!(this.HP<=0))switch(t.keyCode){case m.KEY_Q:this._initWeapon(y.WeaponDataMgr.getRandomWeaponData())}},r.resetData=function(t){var e,i,n;(void 0===t&&(t=!1),this.unscheduleAllCallbacks(),A.stopAllByTarget(this.node),S.instance.removeAgent(this._aid),this._aid=-1,this.HP=0,this._teamType=-1,this.brickCnt=0,this._isTouching=!1,this._isUnderConstruction=!1,this._attackTargetComp=null,this._guideArrow.active=!1,this._isShowGuideArrow=!1,null===(e=this._attackAreaMgr)||void 0===e||e.resetArea(!0),this.brickCountMgr&&y.Pool.putNode(this.brickCountMgr.node),this.brickCountMgr=null,t)||(this.node.setWorldPosition(this._bornPos),this._characterNode.setWorldRotationFromEuler(0,180,0),null===(i=this._skeletalAnim)||void 0===i||i.stop(),null===(n=this._skeletalAnim)||void 0===n||n.crossFade(H.IDLE),this.bloodBarMgr&&y.Pool.putNode(this.bloodBarMgr.node),this.bloodBarMgr=null);for(var o=this._brickHolder.children,r=o.length-1;r>=0;r--)y.Pool.putNode(o[r]);for(var a=0;a<y.GameData.curLeaderArr.length;a++){y.GameData.curLeaderArr[a]==this.node&&y.GameData.curLeaderArr.splice(a,1)}},r._setColliderGroup=function(t){this.node.getComponent(f).radius=T.ATTACK_RANGE;var e=P.getNodeByName(this.node,"brickTrigger");e&&(e.getComponent(f).radius=T.ADD_BRICK_RANGE);var i=P.getNodeByName(this.node,"hitPoint");i&&(i.getComponent(v).enabled=t),e&&(e.getComponent(f).enabled=t)},r._setMoveDir=function(t){var e;this.HP<=0||this._isUnderConstruction||(this._moveDir=t.clone().multiplyScalar(10),this._targetPos=s(this.node.worldPosition.x-this._moveDir.x,this.node.worldPosition.y,this.node.worldPosition.z+this._moveDir.y),null===(e=this._skeletalAnim)||void 0===e||e.crossFade(H.RUN),this._isTouching=!0,y.Event.emit(T.EVENT_TYPE.CAMERA_PLAYER_RUN,!0))},r._resetMoveDir=function(){var t,e,i,n,o=this;if(!(this.HP<=0||this._isUnderConstruction)){y.Event.emit(T.EVENT_TYPE.CAMERA_PLAYER_RUN,!1),this._isTouching=!1,null===(t=this._skeletalAnim)||void 0===t||t.stop(),null===(e=this._skeletalAnim)||void 0===e||e.crossFade(H.ATTACK),null===(i=this._attackAreaMgr)||void 0===i||i.attack(),this._isUnderConstruction=!0;var r=this._skeletalAnim?null===(n=this._skeletalAnim)||void 0===n?void 0:n.getState(H.ATTACK).duration:0;this.scheduleOnce((function(){o._isUnderConstruction=!1}),r/3)}},r._onTriggerStay=function(t){var e=t.otherCollider;if(C(e)&&y.GameData.isInGame())e.node.name},r.flyBrick=function(t,e){var i=this;void 0===e&&(e=5),y.Res.loadPrefab("Brick","prefab").then((function(n){for(var o=t.worldPosition.clone(),r=o.clone().subtract(i._brickHolder.worldPosition.clone()).normalize(),a=function(t){var a=t*(T.BUILD_BARRACK_TIME/T.FLY_BARRACK_COUNT),c=y.Pool.getNode(n,i._brickHolder);P.getNodeComponent(c,"box",l).material.setProperty("mainColor",T.SOLDIER_COLOR_ARRAY[i.teamType]),c.setWorldRotationFromEuler(0,k.toDegree(Math.atan2(-r.z,r.x))+90,0),c.setWorldPosition(i._brickHolder.worldPosition),c.setScale(0,0,0),A.stopAllByTarget(c),u(c).delay(a).to(0,{scale:s(1,1,1)}).call((function(){y.Audio.playSound(T.AUDIO_SOURCE_TYPE.FLY_BRICK)})).to(.5,{worldPosition:P.jumpTo_v3(o,e)},{easing:E.sineInOut}).call((function(){y.Pool.putNode(c)})).start()},c=0;c<T.FLY_BARRACK_COUNT;c++)a(c)}))},r._setPhoneVibrate=function(t){void 0===t&&(t=!1),y.GameData.settingInfo.isVibrate&&M.getInstance().sendData(N.CMD_SHAKE,t?100:null)},r.addStartBuff=function(){for(var t=0;t<y.GameData.startBuffArr.length;t++){var e=y.GameData.startBuffArr[t];this.addBuff(e,!0)}},r.addBuff=function(t,e){var i=this;void 0===e&&(e=!1);var n=this._buffArr.indexOf(t),o=10*this._aid+t.type;-1!==n?(D.deleteTimeTaskByID(o),this.updateCameraPos(),t.type==T.BUFF_TYPE.GET&&this.addBrick(t.level),D.addTimeTask((function(){i.removeBuff(t)}),10,o)):(this._buffArr.push(t),this.updateCameraPos(),t.type==T.BUFF_TYPE.GET&&this.addBrick(t.level),D.addTimeTask((function(){i.removeBuff(t)}),e?15:10,o)),y.Event.emit(T.EVENT_TYPE.SET_BUFF_ITEM,t,!0,e),S.instance.getCurTime()>10&&y.Audio.playSound(T.AUDIO_SOURCE_TYPE.GET_DIAMOND,.5)},r.removeBuff=function(t){var e=this._buffArr.indexOf(t);-1!==e&&(this._buffArr.splice(e,1),this.updateCameraPos())},r.getBuffData=function(t){for(var e=0;e<this._buffArr.length;e++){var i=this._buffArr[e];if(i.type==t)return i}return null},r.updateCameraPos=function(){var t=Math.min(600,this.brickCnt)/20;this.updateScale(),y.Event.emit(T.EVENT_TYPE.UPDATE_CAMERA_POS,t,this.getBuffData(T.BUFF_TYPE.VIEW))},r.updateScale=function(){var t,e,i=this.brickCnt/200,n=Math.min(1+i,6),o=this.getBuffData(T.BUFF_TYPE.RANGE),r=1;o&&(r*=1==o.level?1.3:1.5),this._characterNode.setScale(n,n,n);var a=P.getNodeByName(this.node,"brickTrigger");a&&(a.getComponent(f).radius=T.ADD_BRICK_RANGE*n*r),null===(t=this.brickCountMgr)||void 0===t||t.setOffsetPos(s(0,6*n,0)),null===(e=this.bloodBarMgr)||void 0===e||e.setOffsetPos(s(0,5*n,0))},r.addBrick=function(){var t=n(regeneratorRuntime.mark((function t(e,i,n){var o,r,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=!1),o=i>0?i:this.searchBrickCnt,(r=this.getBuffData(T.BUFF_TYPE.BRICK))&&0==e&&(o+=r.level),0!=e&&(o=1==e?5:10),!this._isUnderConstruction||n){t.next=9;break}return t.abrupt("return");case 9:return i<=0&&y.Event.emit(T.EVENT_TYPE.SHOW_BRICK_COUNT,o,this.node.worldPosition),t.next=12,y.Res.loadPrefab("Brick","prefab").then((function(t){var e;a.HP<=0||!a.isCanCollect||!y.GameData.isInGame()||(y.Audio.playSound(T.AUDIO_SOURCE_TYPE.ADD_BRICK),a.brickCnt=a.brickCnt+o,null===(e=a.brickCountMgr)||void 0===e||e.updateBrickCnt(a.brickCnt),y.Event.emit(T.EVENT_TYPE.SET_RANK_ITEM,a.teamType,a.brickCnt),a.updateCameraPos())}));case 12:case"end":return t.stop()}}),t,this)})));return function(e,i,n){return t.apply(this,arguments)}}(),r._setPreferredVelocities=function(){var t=new R(this._targetPos.x,this._targetPos.z).minus(S.instance.getAgentPosition(this._aid));if(b.absSq(t)>1){var e=T.AGENT_SPEED,i=this.getBuffData(T.BUFF_TYPE.SPEED);i&&2==i.level?e*=1.6:i&&1==i.level&&(e*=1.4),e=10,t=b.normalize(t).scale(e)}if(b.absSq(t)<1)S.instance.setAgentPrefVelocity(this._aid,new R(0,0));else{S.instance.setAgentPrefVelocity(this._aid,t);var n=2*Math.random()*Math.PI,o=1e-4*Math.random();S.instance.setAgentPrefVelocity(this._aid,S.instance.getAgentPrefVelocity(this._aid).plus(new R(Math.cos(n),Math.sin(n)).scale(o)))}this._targetPos=s(this.node.worldPosition.x-this._moveDir.x,this.node.worldPosition.y,this.node.worldPosition.z+this._moveDir.y)},r.update=function(t){if(y.GameData.isInGame()&&this.HP>0&&this._isTouching&&!this._isUnderConstruction){var e;this._setPreferredVelocities(),S.instance.agentRun(this._aid,t);var i=S.instance.getAgentPosition(this._aid);this.node.setWorldPosition(i.x,0,i.y);var n=this._targetPos.clone().subtract(this._characterNode.worldPosition).normalize();this._characterNode.setWorldRotationFromEuler(0,k.toDegree(Math.atan2(-n.z,n.x))+90,0),null===(e=this._attackAreaMgr)||void 0===e||e.updateArea(t)}},r.HitByBullet=function(t,e){var i,n;void 0===e&&(e=null),this.HP<=0||(this.HP-=t,null===(i=this.bloodBarMgr)||void 0===i||i.updateBlood(-t),null===(n=this._hitColorMgr)||void 0===n||n.init(),e&&e.HP>0&&e.addBrick(0,this.brickCnt+100,!0),y.Audio.playSound(T.AUDIO_SOURCE_TYPE.GET_HIT,1),this.HP<=0&&y.Audio.playSound(T.AUDIO_SOURCE_TYPE.PLAYER_DEATH,1),this.HP<=0&&this.gameOver())},i(o,[{key:"brickHolder",get:function(){return this._brickHolder}},{key:"teamType",get:function(){return y.RankDataMgr.getPlayerRankTeamType()}},{key:"buffArr",get:function(){return this._buffArr}},{key:"isUnderConstruction",get:function(){return this._isUnderConstruction}},{key:"isRunning",get:function(){return this._isTouching}},{key:"brickCnt",get:function(){return this._curBrickCnt},set:function(t){this._curBrickCnt=t}},{key:"HP",get:function(){return this._curHP},set:function(t){this._curHP=t}},{key:"totalHP",get:function(){return y.RankDataMgr.getPlayerHP()}},{key:"isCanCollect",get:function(){return!0}},{key:"isCanShoot",get:function(){return!0}},{key:"searchBrickCnt",get:function(){var t=Math.floor(S.instance.getCurTime()/45)+2;return Math.min(5,t)}},{key:"attackTargetComp",get:function(){return this._attackTargetComp},set:function(t){this._attackTargetComp=t}},{key:"attackAreaMgr",get:function(){return this._attackAreaMgr}}]),o}(p))||O);o._RF.pop()}}}));

System.register("chunks:///_virtual/ADDrawer.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./GameListManger.ts","./ADMainPush.ts","./AdsManager.ts","./RDPlatformManager.ts"],(function(t){"use strict";var n,e,i,o,s,a,h,r,c,l,d,u,g,f,m,_;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.v3,s=t.view,a=t.tween,h=t.UITransform,r=t.loader,c=t.Prefab,l=t.instantiate,d=t.Component},function(t){u=t.Log},function(t){g=t.default},function(t){f=t.ADMainPush},function(t){m=t.AdsManager},function(t){_=t.RDPlatformManager}],execute:function(){var w;e._RF.push({},"335e353lUtKWp5WdCS4ytSQ","ADDrawer",void 0);var v=i.ccclass;t("ADDrawer",v("ADDrawer")(w=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._red=null,n._aniBtn=null,n._content=null,n._isShow=!1,n._revice=!1,n}n(e,t);var i=e.prototype;return i.onLoad=function(){this._red=this.node.getChildByName("gameList").getChildByName("aniBtn").getChildByName("red"),this._aniBtn=this.node.getChildByName("gameList").getChildByName("aniBtn"),this._content=this.node.getChildByName("gameList").getChildByName("view").getChildByName("content"),this._aniBtn.on("click",this.animationShow,this),this.node.setPosition(o(-225-s.getVisibleSize().width/2,0,0))},i.animationShow=function(){var t=this;this._isShow?this.animationHide():(this._isShow=!0,a(this.node).to(.5,{position:o(-s.getVisibleSize().width/2+175,this.node.getPosition().y,0)}).call((function(){t._red.active=!1,t.show()})).start(),this._revice=_.getInstance().bannerIsShow(),m.getInstance().hideBannerAd())},i.animationHide=function(){var t=this;this._isShow=!1,a(this.node).to(.5,{position:o(-225-s.getVisibleSize().width/2,this.node.getPosition().y,0)}).call((function(){return t._red.active=!0})).start()},i.setPositionY=function(t){this.node.setPosition(o(this.node.getPosition().x,t,this.node.getPosition().z))},i.show=function(){var t=this;this._content.children.length>0||(u.log("show======"),g.getInstance().getPushGameListByNet((function(n){n.forEach((function(n){t.createItem(n)})),t._content.getComponent(h).height=149*Math.ceil(n.length/3)+20})))},i.createItem=function(t){var n=this;r.loadRes("adUI/ADMainPush",c,null,(function(e,i){if(e)console.warn(e);else{var o=l(i);n._content.addChild(o),o.getComponent(f).freash(t)}}))},e}(d))||w);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./SingletonBase.ts","./Constants.ts","./Log.ts","./AppManager.ts"],(function(t){"use strict";var n,i,e,a,o,l,r,s,c,g,u,d,p,f,h;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t.resources,a=t.Prefab,o=t.instantiate,l=t.find,r=t.tween,s=t.v3,c=t.UIOpacity,g=t.Button},function(t){u=t.CommonUtils},function(t){d=t.SingletonBase},function(t){p=t.Constants},function(t){f=t.Log},function(t){h=t.App}],execute:function(){i._RF.push({},"371afETqF5I2YNZxrfWBeDo","UIManager",void 0);t("UIManager",function(t){function i(){for(var n,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this)._dialogDict=new Map,n._isUIAnimPlaying=!1,n}n(i,t);var d=i.prototype;return d.createAdLayer=function(t){e.load("adUI/adLayer",a,(function(n,i){if(n)console.warn("create adLayer failed!!!",n);else{var e=o(i);l("Canvas").addChild(e),null==t||t()}}))},d.showDialog=function(t,n){for(var i=this,l=arguments.length,r=new Array(l>2?l-2:0),s=2;s<l;s++)r[s-2]=arguments[s];if(this._dialogDict.has(t)){var c=this._dialogDict.get(t);this._handleDialog(c,n,r)}else{var g=-1===t.indexOf("/")?"prefab/ui/"+t:t;e.load(g,a,(function(e,a){if(e)console.error(t+" dialog prefab load failed!!!",e);else if(i._dialogDict.has(t))console.warn(t+" dialog prefab repeated loaded!!!");else if(h.GameData.isInHomePage()||!p.RCMD_UI_ARRAY.includes(t)){var l=o(a);i._dialogDict.set(t,l),i._handleDialog(l,n,r)}}))}},d._handleDialog=function(t,n,i){var e=l("Canvas"),a=t.name;u.getNodeByName(e,a)?a===p.UI_DIALOG_NAME.TOAST?this._executeScriptCb(t,i):f.log(a+" dialog already in show!"):(t.parent=e,null==n||n(),this._sortDialogs(t),this._executeScriptCb(t,i))},d._sortDialogs=function(t){var n=this,i=t.parent,e=i.children;e.length<=1||(e.sort((function(t,i){var e=n._getDialogZIndex(t)-n._getDialogZIndex(i);return 0===e?t.getSiblingIndex()-i.getSiblingIndex():e})),i._updateSiblingIndex())},d._getDialogZIndex=function(t){var n=0;if("adLayer"!==t.name&&"nativeSplashADPrefab"!==t.name&&"privacyPolicy"!==t.name){var i,e=this._getDialogScript(t);n=e&&null!==(i=e.zIndex)&&void 0!==i?i:0}else n=99999;return n},d._getDialogScript=function(t){var n=t.name,i=""+n.substr(0,1).toUpperCase()+n.substr(1);return t.getComponent(i)},d._executeScriptCb=function(t,n){var i,e=this._getDialogScript(t);e?null===(i=e.show)||void 0===i||i.apply(e,n):console.warn(t.name+" dialog don't have "+e+" component!!!")},d.hideDialog=function(t,n){if(this._dialogDict.has(t)){var i=this._dialogDict.get(t);if(i.parent){var e;i.removeFromParent();for(var a=this._getDialogScript(i),o=arguments.length,l=new Array(o>2?o-2:0),r=2;r<o;r++)l[r-2]=arguments[r];null==a||null===(e=a.hide)||void 0===e||e.apply(a,l),null==n||n()}}else f.log(t+" dialog don't in show!")},d._sortUISibling=function(t,n){var i=u.getNodeByName(t,"adLayer");i&&i.setSiblingIndex(t.children.length-1);for(var e=n.name,a=""+e.substr(0,1).toUpperCase()+e.substr(1),o=n.getComponent(a),l=t.children,r=0;r<l.length;r++){var s=o,c=u.getNodeComponent(l[r],l[r].name,""+l[r].name.substr(0,1).toUpperCase()+l[r].name.substr(1));if((s?s.priority:0)<(c?c.priority:"adLayer"==l[r].name?1e4:0)){n.getSiblingIndex()<l[r].getSiblingIndex()?n.setSiblingIndex(r-1):n.setSiblingIndex(r);break}}},d.getDialogScript=function(t){if(this.isDialogOnShow(t)){var n=this._dialogDict.get(t),i=""+t.substr(0,1).toUpperCase()+t.substr(1),e=n.getComponent(i);return e||console.warn(t+" dialog don't have "+e+" component!!!"),e}},d.isDialogOnShow=function(t){var n=this._dialogDict.get(t);return!!n&&!!n.parent},d.getDialogByName=function(t){return this._dialogDict.get(t)},d.isDialogShowed=function(t){var n=this._dialogDict.get(t);return!!n&&!!n.parent},d.showTipMessage=function(t){this.showDialog(p.UI_DIALOG_NAME.TOAST,null,t)},d.playBgAnimation=function(t){return t.setPosition(-724,-724,0),r(t).to(20,{position:s(724,724,0)}).call((function(){t.setPosition(-724,-724,0)})).union().repeatForever().start()},d.playScaleInAnim=function(t,n,i){var e=this;void 0===n&&(n=null),void 0===i&&(i=.08);for(var a=function(a,o){var l=t[a];l.setScale(1,1,1);var s=e._getOpacityComp(l);s.opacity=0;var c=l.getComponent(g);c&&(c.interactable=!1),r(l).delay(i*a).call((function(){s.opacity=255,c&&(c.interactable=!0)})).then(e.getZoomAnim(l.scale)).call((function(){var t;a===o-1&&(null===(t=n)||void 0===t||t())})).start()},o=0,l=t.length;o<l;o++)a(o,l)},d.getZoomAnim=function(t){return void 0===t&&(t=s(1,1,1)),r().to(0,{scale:s(.75,.75,1).multiply(t)}).to(.25,{scale:s(1.08,1.08,1).multiply(t)},{easing:"sineOut"}).to(.05,{scale:s(1,1,1).multiply(t)},{easing:"sineIn"})},d.playFadeInAnim=function(t,n){void 0===n&&(n=.5);var i=this._getOpacityComp(t);return i.opacity=0,t.active=!0,r(i).to(n,{opacity:255}).start()},d.isUIAnimPlaying=function(){return this._isUIAnimPlaying},d.playScaleOutAnim=function(t,n,i,e){var a=this;void 0===n&&(n=null),void 0===i&&(i=null),void 0===e&&(e=.05),this._isUIAnimPlaying=!0;for(var o=function(o,l){var s=t[o],c=s.scale.clone();r(s).delay(e*o).then(a.getScaleOutAnim(s.scale)).call((function(){a.playScaleFadeOutAnim(s,c,o===l-1,i)})).delay(.25).call((function(){var t;o===l-1&&(null===(t=n)||void 0===t||t(),a._isUIAnimPlaying=!1)})).start()},l=0,s=t.length;l<s;l++)o(l,s)},d.getScaleOutAnim=function(t){return void 0===t&&(t=s(1,1,1)),r().to(.1,{scale:s(1.1,1.1,1).multiply(t)},{easing:"sineIn"})},d.playScaleFadeOutAnim=function(t,n,i,e,a){void 0===a&&(a=.2),r(t).to(a,{scale:s(.8,.8,1).multiply(n)},{easing:"sineOut"}).to(0,{scale:s(1,1,1)}).start();var o=this._getOpacityComp(t);if(r(o).to(a,{opacity:0}).start(),i&&(null==e?void 0:e.active)){var l=this._getOpacityComp(e);r(l).to(a,{opacity:0}).start()}},d._getOpacityComp=function(t){return t.getComponent(c)||t.addComponent(c)},i}(d));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIScrollSelect.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var i,e,s,h,o,n,c,l,r,a,u,d,T,p,_;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,h=t.assertThisInitialized},function(t){o=t.cclegacy,n=t._decorator,c=t.Node,l=t.CCInteger,r=t.CCFloat,a=t.v3,u=t.UITransform,d=t.Component},function(t){T=t.CommonUtils},function(t){p=t.Constants},function(t){_=t.App}],execute:function(){var f,v,E,g,m,I,X,S,C,M,x,y,b,A,L;t("EventType",void 0),o._RF.push({},"39775ZEm6hC6bp3Y2S3B1WV","UIScrollSelect",void 0);var P,N=n.ccclass,U=n.property;!function(t){t[t.SCROLL_START=0]="SCROLL_START",t[t.SCROLL_ING=1]="SCROLL_ING",t[t.SCROLL_END=2]="SCROLL_END"}(P||(P=t("EventType",{})));t("default",(f=N("UIScrollSelect"),v=U(c),E=U({type:l,tooltip:"单个控件之间的距离"}),g=U({type:r,tooltip:"中心点的缩放比例"}),m=U({type:r,tooltip:"边缘点的缩放比例"}),I=U({type:r,tooltip:"滚动时的速度"}),f((L=A=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return i=t.call.apply(t,[this].concat(o))||this,s(i,"content",C,h(i)),s(i,"deltaX",M,h(i)),s(i,"centerScale",x,h(i)),s(i,"minScale",y,h(i)),s(i,"scrollSpeed",b,h(i)),i.currentIndex=0,i.childs=[],i.isTouching=!1,i.hasTouchMove=!1,i.isTestX=!1,i._touchId=null,i._toMoveX=1,i.dx=0,i.moveAim=0,i}e(i,t);var o=i.prototype;return o.onLoad=function(){this.childs=[];for(var t=0;t<this.content.children.length;t++)this.childs[t]=this.content.children[t],this.childs[t].setPosition(a(this.deltaX*(t-1),0,0));this.isTouching=!1,this.hasTouchMove=!1,this.isTestX=!1,this._touchId=null,this.scrollTo(0,!1)},o.scrollTo=function(t,i){if(void 0===i&&(i=!0),_.Event.emit(p.EVENT_TYPE.UPDATE_MAP_INFO,!0,t),t<0&&t>=this.childs.length)return console.error(this.node.name+"->移动超出边界面");if(this.currentIndex=t,this.moveAim=t,!i){for(var e=0;e<this.childs.length;e++)this._checkChildX(this.childs[e],(e-t)*this.deltaX);_.Event.emit(p.EVENT_TYPE.UPDATE_MAP_INFO,!1,t)}},o.scrollToLeft=function(){this.isTestX||(this.isTestX=!0,this._toMoveX=1,this.scrollTo((this.currentIndex-1+this.childs.length)%this.childs.length))},o.scrollToRight=function(){this.isTestX||(this.isTestX=!0,this._toMoveX=-1,this.scrollTo((this.currentIndex+1+this.childs.length)%this.childs.length))},o._checkChildX=function(t,i){i>this.childs.length/2*this.deltaX?i-=this.childs.length*this.deltaX:i<-this.childs.length/2*this.deltaX&&(i+=this.childs.length*this.deltaX),T.getNodeComponent(t,t.name,u).priority=0==i?1:0,t.setPosition(i,0,0);var e=(1-Math.min(Math.abs(i),this.deltaX)/this.deltaX)*(this.centerScale-this.minScale)+this.minScale;t.setScale(e,e,e)},o.start=function(){this._registerEvent(!0)},o._registerEvent=function(t){var i=t?"on":"off";this.node[i](c.EventType.TOUCH_START,this._onTouchStart,this),this.node[i](c.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node[i](c.EventType.TOUCH_END,this._onTouchEnd,this),this.node[i](c.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},o._onTouchStart=function(t){null!=this._touchId&&t.touch!=this._touchId||(this.isTouching=!0,this.hasTouchMove=!1,this.isTestX=!1,this._touchId=t.touch,this.dx=t.touch.getUILocation().x)},o._onTouchMove=function(t){if(null==this._touchId||t.touch==this._touchId){this.hasTouchMove=!0,_.Event.emit(p.EVENT_TYPE.UPDATE_MAP_INFO,!0,this.currentIndex);var i=t.touch.getUILocation().x-this.dx;this._move(i),this.dx=t.touch.getUILocation().x}},o._onTouchEnd=function(t){if(null==this._touchId||t.touch==this._touchId)if(this.isTouching=!1,this._touchId=null,this.hasTouchMove){for(var i=this.deltaX,e=0,s=0;s<this.childs.length;s++)Math.abs(this.childs[s].position.x)<=i&&(i=Math.abs(this.childs[s].position.x),e=s);this.moveAim=e,this._toMoveX=this.childs[e].position.x>=0?-1:1,this.isTestX=!0}else _.Event.emit(p.EVENT_TYPE.UPDATE_MAP_INFO,!1,this.currentIndex)},o._move=function(t){for(var i=0;i<this.childs.length;i++)this._checkChildX(this.childs[i],this.childs[i].position.x+t)},o.update=function(t){if(!this.isTouching&&this.isTestX){for(var i=this._toMoveX*t*this.scrollSpeed,e=this.childs[this.moveAim].position.x,s=0;s<this.childs.length;s++)this._checkChildX(this.childs[s],this.childs[s].position.x+i);var h=this.childs[0].position.x,o=Math.round(h/this.deltaX),n=this.deltaX*o,c=this.childs[this.moveAim].position.x;if(e*c<0&&Math.abs(c)<this.deltaX){this.isTestX=!1;for(var l=0;l<this.childs.length;l++)if(Math.abs(this.childs[l].position.x)<=Math.abs(i)){this.currentIndex=l,_.Event.emit(p.EVENT_TYPE.UPDATE_MAP_INFO,!1,this.currentIndex);break}for(s=0;s<this.childs.length;s++)this._checkChildX(this.childs[s],this.childs[s].position.x+n-h)}}},i}(d),A.EventType=P,C=i((S=L).prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(S.prototype,"deltaX",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),x=i(S.prototype,"centerScale",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=i(S.prototype,"minScale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=i(S.prototype,"scrollSpeed",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),X=S))||X));o._RF.pop()}}}));

System.register("chunks:///_virtual/ICannonRigidBody.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ICannonSharedBody.ts"],(function(o){"use strict";var n,t,d,e,r,i,s;return{setters:[function(o){n=o.inheritsLoose,t=o.createClass},function(o){d=o.cclegacy,e=o._decorator,r=o.RigidBodyComponent,i=o.Component},function(o){s=o.ICannonSharedBody}],execute:function(){var a,y,c;d._RF.push({},"3a0278egWNLmLz0RJRWsVN3","ICannonRigidBody",void 0);var h=e.ccclass;o("ICannonRigidBody",h("ICannonRigidBody")((c=y=function(o){function d(){return o.apply(this,arguments)||this}return n(d,o),d.prototype.onLoad=function(){var o=this.getComponent(r);this._body=o._body;var n=this._body._sharedBody;this._sharedBody=new s,this._sharedBody.body=n.body;n.shapes;this._sharedBody.world=n.wrappedWorld._world},t(d,[{key:"sharedBody",get:function(){return this._sharedBody}},{key:"body",get:function(){return this._sharedBody.body}}]),d}(i),y.TAG="ICannonRigidBody",a=c))||a);d._RF.pop()}}}));

System.register("chunks:///_virtual/ADWxScreen.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Log.ts","./RDAssetManager.ts","./RDCommand.ts","./GameListManger.ts","./AdsManager.ts","./PushControl.ts","./RDPlatformManager.ts"],(function(t){"use strict";var n,e,o,i,a,s,c,r,h,m,l,g,u,d,C,p,f,I,B,A;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.ButtonComponent,a=t.v3,s=t.instantiate,c=t.UITransformComponent,r=t.Size,h=t.LabelComponent,m=t.SpriteComponent,l=t.SpriteFrame,g=t.Component},function(t){u=t.CommonUtils},function(t){d=t.Log},function(t){C=t.RDAssetManager},function(t){p=t.RDCommand},function(t){f=t.default},function(t){I=t.AdsManager},function(t){B=t.PushControl},function(t){A=t.RDPlatformManager}],execute:function(){var S;e._RF.push({},"3a0d9EQ+Z9Kd7A3KEAQ+m2T","ADWxScreen",void 0);var v=o.ccclass;o.property,t("ADWxScreen",v("ADWxScreen")(S=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).backBtn=null,n.topBtn=null,n.bottomContent=null,n.game=null,n.dot=null,n._move=!1,n.count=1,n.isBanner=!1,n.isPYX=!1,n.clickContent=null,n.callback=null,n}n(e,t);var o=e.prototype;return o.start=function(){this.backBtn=this.node.getChildByName("backGame").getComponent(i),this.backBtn.node.on("click",this.onBackGame,this),this.game=this.node.getChildByName("game"),this.game.parent=null,this.dot=this.node.getChildByName("topBtn").getChildByName("dot"),this.topBtn=this.node.getChildByName("topBtn"),this.bottomContent=u.getNodeByName(this.node,"content")},o.onEnable=function(){this.initTop(),this.initBottomView(),this.scheduleOnce(function(){this.isBanner=A.getInstance().bannerIsShow(),I.getInstance().hideBannerAd()}.bind(this),.5),this.isPYX=B.getInstance().showJPYXBtn(!1),B.getInstance().showMainPush(!1)},o.onDisable=function(){this.isBanner?I.getInstance().showBannerAd():I.getInstance().hideBannerAd(),B.getInstance().showJPYXBtn(this.isPYX),B.getInstance().showMainPush(!0)},o.initTop=function(){this.topBtn.removeAllChildren();for(var t=f.getInstance().gameList,n=Math.min(t.length,8),e=0;e<n;e++){var o=t[e],i=a(e%4*160-263.89,-93.025-130*Math.floor(e/4),0);7===e?(i.y-=2,this.dot.setPosition(i)):this.createItem(this.topBtn,o,i)}},o.initBottomView=function(){this.bottomContent.removeAllChildren(),this.count=1;for(var t=f.getInstance().gameList,n=t.length,e=0;e<n;e++){var o=t[e];this.createItem(this.bottomContent,o)}},o.createItem=function(t,n,e){void 0===e&&(e=null);var o=s(this.game),a=o.getChildByName("gameMask").getChildByName("icon").getComponent(i);if(a.node.content=n,a.node.on("click",this.onJumpGame,this),t.addChild(o),e)o.setPosition(e);else{var g=o.getComponent(c).contentSize,u=new r(this.bottomContent.getComponent(c).contentSize.width,this.bottomContent.getComponent(c).contentSize.height);1===this.count&&(u.height=0),this.count+=1,this.count%4==0&&this.bottomContent.getComponent(c).setContentSize(new r(u.width,u.height+g.height))}var d=o.getChildByName("gameName").getComponent(h),p="adUI/ui/"+n.url+"/spriteFrame";n.icon?(p=n.icon,d&&(d.string=n.name),C.getInstance().loadImage(p,!0).then((function(t){if(a){var n=a.node.getComponent(m).spriteFrame;n?n.texture=t:((n=new l).texture=t,a.node.getComponent(m).spriteFrame=n)}}))):C.getInstance().loadImage(p,!0).then((function(t){if(a){var e=a.node.getComponent(m).spriteFrame;e?e.texture=t:((e=new l).texture=t,a.node.getComponent(m).spriteFrame=e)}d&&(d.string=n.name)}))},o.onBackGame=function(){this.node.destroy()},o.onContinueGame=function(){var t=f.getInstance().getRandGameConfig();A.getInstance().sendData(p.CMD_TO_MINIPROGRAM,t),A.getInstance().sendData(p.CMD_DATA_STATISTICS,{event:!0,ad_type:p.STATISTICS_GAME_ICON_SHARE})},o.onJumpGame=function(t){var n=t.node.content;d.log("调整===="+JSON.stringify(n)),A.getInstance().sendData(p.CMD_TO_MINIPROGRAM,n),A.getInstance().sendData(p.CMD_DATA_STATISTICS,{event:!0,ad_type:p.STATISTICS_GAME_ICON_SHARE})},o.setCloseCallback=function(t){this.callback=t},e}(g))||S);e._RF.pop()}}}));

System.register("chunks:///_virtual/DiamondFlyAnimation.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var n,o,i,e,a,r,s,d,l,c,u,m,f,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Prefab,d=t.instantiate,l=t.v3,c=t.Component,u=t.tween},function(t){m=t.CommonUtils},function(t){f=t.Constants},function(t){p=t.App}],execute:function(){var P,h,v,y,g;a._RF.push({},"3ad78hS5ZpFwasWs+ptfsMB","DiamondFlyAnimation",void 0);var D=r.ccclass,_=r.property;t("DiamondFlyAnimation",(P=D("DiamondFlyAnimation"),h=_({type:s}),P((g=n((y=function(t){function n(){for(var n,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,i(n,"diamondPrefab",g,e(n)),n}o(n,t);var a=n.prototype;return a.createDiamond=function(){for(var t=0;t<25;t++){var n=d(this.diamondPrefab);p.Pool.putNode(n)}},a.playAnimation=function(t,n,o){var i=this;void 0===o&&(o=!0);var e=t.getWorldPosition(),a=n.getWorldPosition(),r=m.getRandomInteger(5,10)+20,s=this._getCirclePoints(e,r).map((function(t){var n=p.Pool.getNode(i.diamondPrefab,i.node);return n.setWorldPosition(e),n.setScale(1.2,1.2,1),{diamondNode:n,midPos:t,endPos:a,distance:t.clone().subtract(a).length()}}));s.sort((function(t,n){return t.distance-n.distance})),this._playDiamondFlyAnim(s,o)},a._playDiamondFlyAnim=function(t,n){for(var o=this,i=function(i,e){var a=t[i];u(a.diamondNode).to(.3,{worldPosition:a.midPos}).delay(.01*i).to(.5,{worldPosition:a.endPos}).call((function(){p.Pool.putNode(a.diamondNode),0===i?p.Event.emit(f.EVENT_TYPE.UPDATE_GOLD,!0):i===e-1&&(n&&p.Event.emit(f.EVENT_TYPE.GOLD_ANIM_END),o.node.active=!1)})).start()},e=0,a=t.length;e<a;e++)i(e,a)},a._getCirclePoints=function(t,n,o,i){void 0===o&&(o=180),void 0===i&&(i=100);for(var e=[],a=Math.PI/180*Math.round(360/n),r=0;r<n;r++){var s=t.x+o*Math.sin(a*r),d=t.y+o*Math.cos(a*r);e.push(l(s+Math.random()*i,d+Math.random()*i,0))}return e},a.onDestroy=function(){p.Pool.clearPool(this.diamondPrefab)},n}(c)).prototype,"diamondPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/Queue.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"401e4UeveZD/onC2XtDOmxM","Queue",void 0);t("default",function(){function t(t,n){this._isRun=!1,this.fn=t,this.arg=n}var e=t.prototype;return e.cancel=function(){this._isCancel=!0},e.run=function(){if(this._isRun=!0,!this._isCancel)return this.fn.apply(null,this.arg)},n(t,[{key:"isRun",get:function(){return this._isRun}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TrajectoryBulletMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RankData.ts","./AppManager.ts","./EnemyAIMgr.ts","./FinalWeaponMgr.ts","./RocketExplosionMgr.ts","./MercenaryMgr.ts","./SoldierAgentMgr.ts","./PlayerMgr.ts"],(function(t){"use strict";var e,o,n,i,a,r,s,l,c,h,p,_,u,g,d,m,y,f,T,C;return{setters:[function(t){e=t.inheritsLoose,o=t.createClass,n=t.asyncToGenerator},function(t){i=t.cclegacy,a=t._decorator,r=t.v3,s=t.ParticleUtils,l=t.SphereCollider,c=t.isValid,h=t.Component},function(t){p=t.CommonUtils},function(t){_=t.Constants},function(t){u=t.RankData},function(t){g=t.App},function(t){d=t.EnemyAIMgr},function(t){m=t.FinalWeaponMgr},function(t){y=t.RocketExplosionMgr},function(t){f=t.MercenaryMgr},function(t){T=t.SoldierAgentMgr},function(t){C=t.PlayerMgr}],execute:function(){var M;i._RF.push({},"44a98eD44REqo9ufWNSOcDs","TrajectoryBulletMgr",void 0);var P=a.ccclass;t("TrajectoryBulletMgr",P("TrajectoryBulletMgr")(M=function(t){function i(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._damage=0,e._shootTime=0,e._shootTotalTime=.5,e._isCanShoot=!1,e._teamType=-1,e._attackerComp=null,e._particleNode=null,e._glowNode=null,e._initPos=r(),e._targetPos=r(),e}e(i,t);var a=i.prototype;return a.onLoad=function(){this._particleNode=p.getNodeByName(this.node,"shootBall"),this._glowNode=p.getNodeByName(this.node,"glow")},a.onEnable=function(){this._isCanShoot=!1,this._registerEvent(!0)},a.onDisable=function(){this._particleNode&&s.stop(this._particleNode),this._isCanShoot=!1,this._registerEvent(!1)},a._registerEvent=function(t){var e=t?"on":"off";this.node.getComponent(l)[e]("onTriggerEnter",this._onTriggerEnter,this)},a.init=function(t,e,o){void 0===e&&(e=1),void 0===o&&(o=30),this._attackerComp=t,this._teamType=t.teamType,this._damage=e;var n=o;t instanceof f&&g.RankDataMgr.getMercenaryBulletScale(t.weaponType);this.node.setScale(1,1,1),this._glowNode&&this._glowNode.setScale(1,1,1),this._shootTime=0,this._shootTotalTime=n/80,this._initPos=this.node.position.clone(),this._targetPos=this._initPos.clone().subtract(this.node.forward.multiplyScalar(n)),this._particleNode&&s.play(this._particleNode),this._isCanShoot=!0},a.update=function(t){this._isCanShoot&&(this._shootTime+=t,this._shootTime>=this._shootTotalTime||-1==this._teamType?(this._isCanShoot=!1,this.node.position=this._targetPos,g.Pool.putNode(this.node)):this.node.position=this._initPos.clone().lerp(this._targetPos,this._shootTime/this._shootTotalTime))},a._onTriggerEnter=function(t){var e=t.otherCollider,o=p.getParentComponent(e.node,"soldier",T)||p.getParentComponent(e.node,"enemyAI",d)||p.getParentComponent(e.node,"playerMgr",C)||p.getParentComponent(e.node,"mercenary",f);c(e)&&g.GameData.isInGame()&&o&&o.isCanShoot&&!(o.HP<=0)&&this._attackerComp.teamType!=o.teamType&&(this._isCanShoot=!1,this._attackerComp instanceof f&&this._attackerComp.weaponType==u.MERCENARY_TYPE.HEAVY?this._loadRocketExplosionFire(this.node.parent,o):o.HitByBullet(this._damage,this._teamType,this._attackerComp instanceof m),g.Pool.putNode(this.node))},a._loadRocketExplosionFire=function(){var t=n(regeneratorRuntime.mark((function t(e,o){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.Res.loadPrefab("RocketExplosionFire","prefab").then((function(t){var i=g.Pool.getNode(t,e),a=n.node.worldPosition.clone();a.y=o instanceof f?7:3,i.worldPosition=a;var r=p.getNodeComponent(i,i.name,y),s=g.RankDataMgr.getPlayerRankTeamType();(n._teamType==s||o.teamType==s)&&g.Audio.playSound(_.AUDIO_SOURCE_TYPE.UAV_HEAVY_BOOM),r.init(n.attackerComp,n._damage,a)}));case 2:case"end":return t.stop()}}),t)})));return function(e,o){return t.apply(this,arguments)}}(),o(i,[{key:"attackerComp",get:function(){return this._attackerComp}}]),i}(h))||M);i._RF.pop()}}}));

System.register("chunks:///_virtual/Types.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,i;return{setters:[function(t){n=t.inheritsLoose,e=t.wrapNativeSuper},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"45e99rcPVxPfIFk06Qa33hn","Types",void 0);t("Dictionary",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(e(Map))),t("NumericDictionary",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(e(Map)));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameMap.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,o,e,r;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,e=n._decorator,r=n.Component}],execute:function(){var a;o._RF.push({},"4c885yJRYJB4JpOJOSRqYs3","GameMap",void 0);var i=e.ccclass;n("GameMap",i("GameMap")(a=function(n){function o(){for(var t,o=arguments.length,e=new Array(o),r=0;r<o;r++)e[r]=arguments[r];return(t=n.call.apply(n,[this].concat(e))||this)._routeNode=null,t._routeAnim=null,t}t(o,n);var e=o.prototype;return e.onLoad=function(){},e.init=function(){this._playRouteAnimation()},e._playRouteAnimation=function(){},e.onDestroy=function(){},o}(r))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/BrickGroupMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./Utils.ts","./AppManager.ts","./EnemyAIMgr.ts","./PlayerMgr.ts"],(function(t){"use strict";var i,e,o,r,s,n,a,c,u,f,h,d,l,_,p,B,g,k,m;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass,o=t.asyncToGenerator},function(t){r=t.cclegacy,s=t._decorator,n=t.SphereCollider,a=t.MeshRenderer,c=t.color,u=t.Tween,f=t.tween,h=t.v3,d=t.isValid,l=t.Component},function(t){_=t.CommonUtils},function(t){p=t.Constants},function(t){B=t.Utils},function(t){g=t.App},function(t){k=t.EnemyAIMgr},function(t){m=t.PlayerMgr}],execute:function(){var b;r._RF.push({},"4e8c5gQC/1GXLSTdGvMNqeD","BrickGroupMgr",void 0);var N=s.ccclass;t("BrickGroupMgr",N("BrickGroupMgr")(b=function(t){function r(){for(var i,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(i=t.call.apply(t,[this].concat(o))||this)._brickGroupNode=null,i._isHasBrick=!1,i._buffNode=null,i._isHasBuff=!1,i}i(r,t);var s=r.prototype;return s.onDisable=function(){this.unscheduleAllCallbacks(),this.hideBrick(),this.hideBuff(),this._registerCustomEvent(!1)},s._registerCustomEvent=function(t){if(this.node){var i=t?"on":"off";this.node.getComponent(n)&&this.node.getComponent(n)[i]("onTriggerEnter",this._onTriggerEnter,this),g.Event[i](p.EVENT_TYPE.REMOVE_BUFF_POINT,this.hideBuff,this)}},s.loadBrickGroup=function(){var t=o(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._brickGroupNode=_.getNodeByName(this.node,"Brick"),this._loadBrickMtl(),this._brickGroupNode.active=!1,this._isHasBrick=!1,this._isHasBuff=!1,this._registerCustomEvent(!0);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s._loadBrickMtl=function(){var t=this,i="brick/boxSpt_"+_.getRandomInteger(0,4);g.Res.loadTexture(i,"texture").then((function(i){var e=_.getNodeComponent(t._brickGroupNode,"Brick",a).material;e.setProperty("mainTexture",i),e.setProperty("mainColor",c(255,255,255,255))}))},s.loadBuffPoint=function(){this._buffNode=_.getNodeByName(this.node,"buffNode"),this._buffNode.active=!1,this._isHasBrick=!1,this._isHasBuff=!1,this._registerCustomEvent(!0)},s.showBuff=function(){this._isHasBuff=!0,this._buffNode.active=!0,u.stopAllByTarget(this._buffNode),this._buffNode.setPosition(0,2,0),f(this._buffNode).by(1.5,{eulerAngles:h(0,360,0)}).repeatForever().start(),this.node.getComponent(n).enabled=!0},s.hideBuff=function(){this._buffNode&&(this._buffNode.setPosition(0,-.5,0),this._buffNode.active=!1),this._isHasBuff=!1,this.node&&!this._isHasBrick&&!this.isHasBuff&&(this.node.getComponent(n).enabled=!1)},s.showBrick=function(){u.stopAllByTarget(this._brickGroupNode),this._brickGroupNode.setPosition(0,-.5,0),this._brickGroupNode.active=!0,this._isHasBrick=!0,this.node.getComponent(n).enabled=!0},s.hideBrick=function(){this._brickGroupNode&&(this._brickGroupNode.setPosition(0,-.5,0),this._brickGroupNode.active=!1),this._isHasBrick=!1,!this._isHasBrick&&!this.isHasBuff&&(this.node.getComponent(n).enabled=!1)},s.resetData=function(){this.hideBrick(),this.hideBuff()},s._onTriggerEnter=function(t){var i=this,e=t.otherCollider;if("brickTrigger"==e.node.name){var o=_.getParentComponent(e.node,"playerMgr",m)||_.getParentComponent(e.node,"enemyAI",k);if(!d(e)||!g.GameData.isInGame()||!o)return;if(this._isHasBrick&&o&&o instanceof m&&!o.isCanCollect&&g.Event.emit(p.EVENT_TYPE.SHOW_WARN_TIP,p.WARN_TIP_TYPE.CARRY),this.isHasBuff){var r=o.brickHolder.worldPosition;f(this._buffNode).to(.15,{worldPosition:r}).call((function(){o.addBuff({type:B.random(0,p.BUFF_TYPE.LENGTH-2),level:1}),i.hideBuff()})).start()}if(!this._isHasBrick||!o.isCanCollect||o.isUnderConstruction)return;var s=o.brickHolder.worldPosition;this._isHasBrick=!1,f(this._brickGroupNode).to(.15,{worldPosition:s}).call((function(){o.addBrick(),i.hideBrick()})).delay(1).call((function(){g.Event.emit(p.EVENT_TYPE.UPDATE_BRICK,i.node.worldPosition)})).start()}},e(r,[{key:"isHasBrick",get:function(){return this._isHasBrick}},{key:"isHasBuff",get:function(){return this._isHasBuff}}]),r}(l))||b);r._RF.pop()}}}));

System.register("chunks:///_virtual/RDOppoMusicMiniPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./RDPlatformType.ts","./RDPlatformParam.ts","./OptionsManager.ts","./Utils.ts","./RDPlatform.ts"],(function(n){"use strict";var t,e,o,i,a,s,r,c,l;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n.sys},function(n){i=n.Log},function(n){a=n.RDPlatformType},function(n){s=n.RDPlatformParam},function(n){r=n.default},function(n){c=n.Utils},function(n){l=n.RDPlatform}],execute:function(){e._RF.push({},"4fcf4C4ihdB8aoapJZbtRHl","RDOppoMusicMiniPlatform",void 0);n("RDOppoMusicMiniPlatform",function(n){function e(t){var e;return(e=n.call(this,t)||this).startTime=(new Date).getTime(),e}t(e,n);var l=e.prototype;return l.loadStorageData=function(n,t,e){var i=JSON.parse(o.localStorage.getItem(n[0]));t&&t(i)},l.flushStorageData=function(n,t){o.localStorage.setItem(n.key,JSON.stringify(n.data))},l.initAD=function(){var t=this;n.prototype.initAD.call(this),this._login(null),this.createVideo(),setTimeout((function(){var n=s.ADPARAM[a.OPPOMusicGame.toString()].game_banner_id;window.qg.getSystemInfoSync().platformVersionCode>=1076?(t._gameBannerADInstance=window.qg.createGameBannerAd({adUnitId:n}),t._gameBannerADInstance&&t._gameBannerADInstance.load().then((function(){i.log("oppo横幅广告加载成功")})).catch((function(n){i.log("oppo横幅广告加载失败:"+n.errCode+","+n.errMsg)}))):i.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")}),1)},l.createVideo=function(){var n=this,t=s.ADPARAM[a.OPPOMusicGame.toString()].video_id;this._videoBoxInstance=window.qg.createRewardedVideoAd({adUnitId:t}),this._videoBoxInstance.onLoad((function(){i.log("视频广告加载成功")})),this._videoBoxInstance.onError((function(t){n._showToast("暂时没有视频了，请稍后再试"),i.log("videoAd.onError,errMsg",JSON.stringify(t)),n._rewardCaback&&n._rewardCaback.fail(),n._videoBoxInstance.destroy(),n._videoBoxInstance=null,n.createVideo()})),this._videoBoxInstance.onClose((function(t){i.log("玩家有操作",JSON.stringify(t)),t&&t.isEnded||void 0===t?(i.log("正常播放结束，可以下发游戏奖励"),n._rewardCaback&&n._rewardCaback.success(null)):n._rewardCaback&&(i.log("播放中途退出，不下发游戏奖励"),n._rewardCaback.fail()),n._rewardCaback=null}))},l.createBanner=function(){var n=window.qg.getSystemInfoSync(),t={left:0,top:n.windowHeight-45,width:n.windowWidth,height:20},e=s.ADPARAM[a.OPPOMusicGame.toString()].banner_id,o=window.qg.createBannerAd({adUnitId:e,adIntervals:30,style:t});return o.onLoad((function(){i.log("banner 广告加载成功")})),o.onError(function(n){i.log("banner 广告失败"+JSON.stringify(n))}.bind(this)),o.onResize((function(t){o.style.top=n.windowHeight-t.height,o.style.left=(n.windowWidth-t.width)/2})),o},l.shareAppMessage=function(n){},l._showToast=function(n){window.qg.showToast({title:n,icon:"none",image:"",mask:!1,duration:2e3,success:function(){},fail:function(){},complete:function(){}})},l._gotoMiniGameByAppid=function(n){i.log("跳转小游戏"+n.packName),window.qg.navigateToMiniGame({pkgName:n.packName,success:function(){i.log("跳转成功")},fail:function(n){i.log(JSON.stringify(n))},complete:function(){}})},l._vibrateShort=function(n){void 0===n&&(n=50),100!=n?this.vibrate(n):this.vibrateStrong()},l.vibrateStrong=function(){window.qg.vibrateLong({success:function(){},fail:function(){},complete:function(){}})},l.vibrate=function(n){var t=n/15,e=0,o=setInterval((function(){window.qg.vibrateShort({success:function(){},fail:function(){},complete:function(){}}),++e>t&&(clearTimeout(o),o=null)}),15)},l._showBannerAd=function(n){},l._showGameBannerAd=function(n){if(!this._gameBannerADInstance){var t=s.ADPARAM[a.OPPOMusicGame.toString()].game_banner_id;window.qg.getSystemInfoSync().platformVersionCode>=1076?(this._gameBannerADInstance=window.qg.createGameBannerAd({adUnitId:t}),this._gameBannerADInstance.load().then((function(){i.log("oppo横幅广告加载成功")})).catch((function(n){i.log("oppo横幅广告加载失败:"+n.errCode+","+n.errMsg)}))):i.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")}this._gameBannerADInstance.show().then((function(){i.log("oppo横幅广告 显示成功")})).catch((function(n){i.log("oppo横幅广告 显示失败:"+n.errCode+","+n.errMsg)}))},l._hideGameBannerAd=function(n){this._gameBannerADInstance&&this._gameBannerADInstance.hide().then((function(){i.log("隐藏oppo横幅广告 成功")})).catch((function(n){i.log("隐藏oppo横幅广告 失败:"+n.errCode+","+n.errMsg)}))},l._showGamePortalAd=function(n){if(i.log("_showGamePortalAd"),this._gamePortalADInstance=null,!this._gamePortalADInstance){var t=s.ADPARAM[a.OPPOMusicGame.toString()].game_portal_id;window.qg.getSystemInfoSync().platformVersionCode>=1076?(this._gamePortalADInstance=window.qg.createGamePortalAd({adUnitId:t}),this._gamePortalADInstance.load(),this._gamePortalADInstance.onLoad(function(){i.log("互推盒子九宫格广告加载成功"),this._gamePortalADInstance.show().then((function(){i.log("互推盒子九宫格广告展示 成功")})).catch((function(n){i.log("互推盒子九宫格广告展示 失败"+n.errCode+","+n.errMsg)}))}.bind(this)),this._gamePortalADInstance.onError(function(n){i.log("互推盒子九宫格广告 错误"+JSON.stringify(n))}.bind(this)),this._gamePortalADInstance.onClose(function(){i.log("互推盒子九宫格广告关闭")}.bind(this))):i.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")}},l._hideGamePortalAd=function(n){this._gamePortalADInstance&&(this._gamePortalADInstance.destroy().then((function(){i.log("destroy success")})).catch((function(n){i.log("destroy fail with:"+n.errCode+","+n.errMsg)})),this._gamePortalADInstance=null)},l._showVideo=function(n){if(this.isReviewed())this._rewardCaback&&this._rewardCaback.success(null);else{i.log("准备激励广告 展示开始");var t=this;this._videoBoxInstance.load(),this._videoBoxInstance.onLoad((function(){i.log("激励广告 展示开始");try{t._videoBoxInstance.show()}catch(n){i.log("激励广告 失败"+JSON.stringify(n))}}))}},l._showIntertitalAd=function(n){},l._createNativeAd=function(n){var t=this;if((new Date).getTime()-this.startTime<=r.getInstance().getConfigByKey("delay_show",2e4))return i.log("oppo前面60s不能出现原生广告"),void(this._nativeAdCaback&&this._nativeAdCaback.fail());i.log("创建原生广告11 ++"+n.keyId),i.log("创建原生广告12",JSON.stringify(this._nativeADInstances));var e=s.ADPARAM[a.OPPOGame.toString()][n.keyId][0];i.log("创建原生广告"+e);var o=e=n.nativeId?n.nativeId:e,c=window.qg.createNativeAd({adUnitId:e});c.load(),c.onLoad((function(n){i.log("创建原生广告====",JSON.stringify(n)),n.adList&&n.adList.length>0?(t._nativeADInstances[o]=c,t._nativeAdCaback.success(n.adList[0]),n.adList[0].name=o,t._reportAdShow(n.adList[0])):(i.log("没有广告内容"),t._nativeAdCaback.fail())})),c.onError((function(n){i.log("原生广告加载异常",JSON.stringify(n))}))},l._reportAdShow=function(n){c.random(0,100)<=r.getInstance().getConfigByKey("native_report",100)&&this._nativeADInstances[n.name]&&this._nativeADInstances[n.name].reportAdShow({adId:n.adId})},l._nativeAdClick=function(n){i.log("点击原生广告"+JSON.stringify(n)),this._nativeADInstances[n.name]&&(i.log("点击原生广告1"+n.name),this._nativeADInstances[n.name].reportAdClick({adId:n.adId}))},l._destoryNativeAd=function(n){i.log("销毁原生广告",JSON.stringify(this._nativeADInstances)),this._nativeADInstances[n.name]&&(this._nativeADInstances[n.name].offLoad(),this._nativeADInstances[n.name].offError(),this._nativeADInstances[n.name].destroy(),this._nativeADInstances[n.name]=void 0,i.log("销毁原生广告1",JSON.stringify(this._nativeADInstances)))},l._createShortcutInstalled=function(n){var t=this;window.qg.hasShortcutInstalled({success:function(n){i.log("判断图标未存在时，创建图标"+JSON.stringify(n)),t._hasShortcutInstalled=n},fail:function(n){},complete:function(){}})},l._installShortcut=function(n){i.log("各个平台处理");var t=this;window.qg.installShortcut({success:function(){i.log("各个平台处理==="),t._hasShortcutInstalled=!1,t._shortCutInstalledCaback&&t._shortCutInstalledCaback.success(null)},fail:function(n){i.log("各个平台处理1111111==="),t._shortCutInstalledCaback&&t._shortCutInstalledCaback.fail()},complete:function(){}})},l._login=function(n){setTimeout((function(){window.qg.login({success:function(n){var t="用户信息:"+JSON.stringify(n.data);i.log(t)},fail:function(n){i.log(JSON.stringify(n))}})}),.1)},e}(l));e._RF.pop()}}}));

System.register("chunks:///_virtual/kdtree.ts",["cc","./Common.ts","./Simulator.ts"],(function(e){"use strict";var t,i,n,s;return{setters:[function(e){t=e.cclegacy},function(e){i=e.RVOMath,n=e.Obstacle},function(e){s=e.Simulator}],execute:function(){t._RF.push({},"53c2c9wGRJDvYU0TxXbjH/B","kdtree",void 0);var r=function(){function e(e,t){this.a=e,this.b=t}var t=e.prototype;return t.lessThan=function(e){return this.a<e.a||!(e.a<this.a)&&this.b<e.b},t.lessEqualThan=function(e){return this.a==e.a&&this.b==e.b||this.lessThan(e)},t.bigThan=function(e){return!this.lessEqualThan(e)},t.bigEqualThan=function(e){return!this.lessThan(e)},e}(),a=function(){},h=function(){};e("KdTree",function(){function e(){this.MAX_LEAF_SIZE=10,this.agents=null,this.agentTree=[],this.obstacleTree=null}var t=e.prototype;return t.buildAgentTree=function(e){if(!this.agents||this.agents.length!=e){this.agents=new Array(e);for(var t=0;t<this.agents.length;t++)this.agents[t]=s.instance.getAgent(t);this.agentTree=new Array(2*this.agents.length);for(var i=0;i<this.agentTree.length;i++)this.agentTree[i]=new a}0!=this.agents.length&&this.buildAgentTreeRecursive(0,this.agents.length,0)},t.buildObstacleTree=function(){this.obstacleTree=new h;for(var e=new Array(s.instance.obstacles.length),t=0;t<e.length;t++)e[t]=s.instance.obstacles[t];this.obstacleTree=this.buildObstacleTreeRecursive(e)},t.computeAgentNeighbors=function(e,t){return this.queryAgentTreeRecursive(e,t,0)},t.computeObstacleNeighbors=function(e,t){this.queryObstacleTreeRecursive(e,t,this.obstacleTree)},t.queryVisibility=function(e,t,i){return this.queryVisibilityRecursive(e,t,i,this.obstacleTree)},t.buildAgentTreeRecursive=function(e,t,i){this.agentTree[i].begin=e,this.agentTree[i].end=t,this.agentTree[i].minX=this.agentTree[i].maxX=this.agents[e].position_.x,this.agentTree[i].minY=this.agentTree[i].maxY=this.agents[e].position_.y;for(var n=e+1;n<t;++n)this.agentTree[i].maxX=Math.max(this.agentTree[i].maxX,this.agents[n].position_.x),this.agentTree[i].minX=Math.min(this.agentTree[i].minX,this.agents[n].position_.x),this.agentTree[i].maxY=Math.max(this.agentTree[i].maxY,this.agents[n].position_.y),this.agentTree[i].minY=Math.min(this.agentTree[i].minY,this.agents[n].position_.y);if(t-e>this.MAX_LEAF_SIZE){for(var s=this.agentTree[i].maxX-this.agentTree[i].minX>this.agentTree[i].maxY-this.agentTree[i].minY,r=.5*(s?this.agentTree[i].maxX+this.agentTree[i].minX:this.agentTree[i].maxY+this.agentTree[i].minY),a=e,h=t;a<h;){for(;a<h&&(s?this.agents[a].position_.x:this.agents[a].position_.y)<r;)++a;for(;h>a&&(s?this.agents[h-1].position_.x:this.agents[h-1].position_.y)>=r;)--h;if(a<h){var o=this.agents[a];this.agents[a]=this.agents[h-1],this.agents[h-1]=o,++a,--h}}var u=a-e;0==u&&(++u,++a,++h),this.agentTree[i].left=i+1,this.agentTree[i].right=i+2*u,this.buildAgentTreeRecursive(e,a,this.agentTree[i].left),this.buildAgentTreeRecursive(a,t,this.agentTree[i].right)}},t.buildObstacleTreeRecursive=function(e){if(0==e.length)return null;for(var t=new h,a=0,o=e.length,u=o,g=0;g<e.length;++g){for(var l=0,c=0,T=e[g],f=T.next,p=0;p<e.length;p++)if(g!=p){var b=e[p],m=b.next,v=i.leftOf(T.point,f.point,b.point),q=i.leftOf(T.point,f.point,m.point);v>=-i.RVO_EPSILON&&q>=-i.RVO_EPSILON?++l:(v<=i.RVO_EPSILON&&q<=i.RVO_EPSILON||++l,++c);var x=new r(Math.max(l,c),Math.min(l,c)),y=new r(Math.max(o,u),Math.min(o,u));if(x.bigEqualThan(y))break}var R=new r(Math.max(l,c),Math.min(l,c)),O=new r(Math.max(o,u),Math.min(o,u));R.lessThan(O)&&(o=l,u=c,a=g)}for(var _=[],M=0;M<o;++M)_.push(null);for(var A=[],d=0;d<u;++d)A.push(null);for(var V=0,E=0,X=a,S=e[X],Y=S.next,w=0;w<e.length;++w)if(X!=w){var N=e[w],I=N.next,L=i.leftOf(S.point,Y.point,N.point),P=i.leftOf(S.point,Y.point,I.point);if(L>=-i.RVO_EPSILON&&P>=-i.RVO_EPSILON)_[V++]=e[w];else if(L<=i.RVO_EPSILON&&P<=i.RVO_EPSILON)A[E++]=e[w];else{var F=i.det(Y.point.minus(S.point),N.point.minus(S.point))/i.det(Y.point.minus(S.point),N.point.minus(I.point)),k=N.point.plus(I.point.minus(N.point).scale(F)),Z=new n;Z.point=k,Z.previous=N,Z.next=I,Z.convex=!0,Z.direction=N.direction,Z.id=s.instance.obstacles.length,s.instance.obstacles.push(Z),N.next=Z,I.previous=Z,L>0?(_[V++]=N,A[E++]=Z):(A[E++]=N,_[V++]=Z)}}return t.obstacle=S,t.left=this.buildObstacleTreeRecursive(_),t.right=this.buildObstacleTreeRecursive(A),t},t.queryAgentTreeRecursive=function(e,t,n){if(this.agentTree[n].end-this.agentTree[n].begin<=this.MAX_LEAF_SIZE)for(var s=this.agentTree[n].begin;s<this.agentTree[n].end;++s)t=e.insertAgentNeighbor(this.agents[s],t);else{var r=i.sqr(Math.max(0,this.agentTree[this.agentTree[n].left].minX-e.position_.x))+i.sqr(Math.max(0,e.position_.x-this.agentTree[this.agentTree[n].left].maxX))+i.sqr(Math.max(0,this.agentTree[this.agentTree[n].left].minY-e.position_.y))+i.sqr(Math.max(0,e.position_.y-this.agentTree[this.agentTree[n].left].maxY)),a=i.sqr(Math.max(0,this.agentTree[this.agentTree[n].right].minX-e.position_.x))+i.sqr(Math.max(0,e.position_.x-this.agentTree[this.agentTree[n].right].maxX))+i.sqr(Math.max(0,this.agentTree[this.agentTree[n].right].minY-e.position_.y))+i.sqr(Math.max(0,e.position_.y-this.agentTree[this.agentTree[n].right].maxY));r<a?r<t&&a<(t=this.queryAgentTreeRecursive(e,t,this.agentTree[n].left))&&(t=this.queryAgentTreeRecursive(e,t,this.agentTree[n].right)):a<t&&r<(t=this.queryAgentTreeRecursive(e,t,this.agentTree[n].right))&&(t=this.queryAgentTreeRecursive(e,t,this.agentTree[n].left))}return t},t.queryObstacleTreeRecursive=function(e,t,n){if(null==n)return t;var s=n.obstacle,r=s.next,a=i.leftOf(s.point,r.point,e.position_);return t=this.queryObstacleTreeRecursive(e,t,a>=0?n.left:n.right),i.sqr(a)/i.absSq(r.point.minus(s.point))<t&&(a<0&&e.insertObstacleNeighbor(n.obstacle,t),this.queryObstacleTreeRecursive(e,t,a>=0?n.right:n.left)),t},t.queryVisibilityRecursive=function(e,t,n,s){if(null==s)return!0;var r=s.obstacle,a=r.next,h=i.leftOf(r.point,a.point,e),o=i.leftOf(r.point,a.point,t),u=1/i.absSq(a.point.minus(r.point));if(h>=0&&o>=0)return this.queryVisibilityRecursive(e,t,n,s.left)&&(i.sqr(h)*u>=i.sqr(n)&&i.sqr(o)*u>=i.sqr(n)||this.queryVisibilityRecursive(e,t,n,s.right));if(h<=0&&o<=0)return this.queryVisibilityRecursive(e,t,n,s.right)&&(i.sqr(h)*u>=i.sqr(n)&&i.sqr(o)*u>=i.sqr(n)||this.queryVisibilityRecursive(e,t,n,s.left));if(h>=0&&o<=0)return this.queryVisibilityRecursive(e,t,n,s.left)&&this.queryVisibilityRecursive(e,t,n,s.right);var g=i.leftOf(e,t,r.point),l=i.leftOf(e,t,a.point),c=1/i.absSq(t.minus(e));return g*l>=0&&i.sqr(g)*c>i.sqr(n)&&i.sqr(l)*c>i.sqr(n)&&this.queryVisibilityRecursive(e,t,n,s.left)&&this.queryVisibilityRecursive(e,t,n,s.right)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/constant-user.ts",["cc"],(function(t){"use strict";var a;return{setters:[function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"546c1JR3XpIhYqDVQ9ShRKw","constant-user",void 0);var e=function(){};e.MUSIC="music",e.SOUND="sound",e.STAGE="stage",e.GOLD="gold",e.VOUCHER="voucher",e.SIGN_IN="signIn",e.DRAW_COUNT="drawCount",e.TURN_TABLE="turntable",e.ONLINE_REWARD="onlineReward",e.VIP_TIME="vipTime",e.VIP_VIDEO_COUNT="vipVideoCount",e.MUSIC_DATA="musicData",e.FIRST_GAME="firstGame",e.SETTING="setting",e.ACHIEVEMENT="achievement",e.MAP_DATA="mapData",e.CURRENT_MAP_ID="currentMapId",e.LOGIN_DAYS="loginDays",e.SKIN_DATA="skinData",e.CURRENT_PLAYER_SKIN_ID="currentPlayerSkinId",e.WEAPON_DATA="weaponData",e.TREASURE_BOX_DATA="treasureBoxData",e.PLAYER_RANK_DATA="playerRankData",e.GUIDE_ARROW_DATA="guideArrowData";t("ACCOUNT",e);a._RF.pop()}}}));

System.register("chunks:///_virtual/ConstantCommon.ts",["cc"],(function(E){"use strict";var A;return{setters:[function(E){A=E.cclegacy}],execute:function(){var _,n,t;A._RF.push({},"547e8IEUoNFwqMwnnEythIg","ConstantCommon",void 0),function(E){E.NATIVE_AD_SHOW="native_ad_show",E.NATIVE_AD_HIDE="native_ad_hide",E.UPDATE_AUD_MUSIC="updateAuditionMusic",E.SHOW_NATIVE_AD="showNativeAd",E.GAME_CONTINUE="gameContinue",E.ADS_INTERSTITIALAD="ads_interstitialad"}(_||(_={})),function(E){E.USER_ID="userId",E.USER_NAME="userName",E.USER_HEADE="userHead"}(n||(n={})),function(E){E[E.NONE=0]="NONE",E[E.IN_HOME_PAGE=1]="IN_HOME_PAGE",E[E.READY=2]="READY",E[E.READY_START=3]="READY_START",E[E.START=4]="START",E[E.PAUSE=5]="PAUSE",E[E.VICTORY=6]="VICTORY",E[E.GAME_OVER=7]="GAME_OVER",E[E.RESULT=8]="RESULT",E[E.FINISH=9]="FINISH",E[E.ENDLESS_TRANSIT=10]="ENDLESS_TRANSIT"}(t||(t={}));var T=E("ConstantCommon",(function(){}));T.EVENT_TYPE=_,T.USER_KEY=n,T.GAME_STATE=t,T.PRIVACY_AGREE="privacy_agree",A._RF.pop()}}}));

System.register("chunks:///_virtual/ReviveUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var n,i,e,o,s,c,u,a,_,r,h;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,o=t.Sprite,s=t.Label,c=t.tween},function(t){u=t.CommonUtils},function(t){a=t.Constants},function(t){_=t.EventResult},function(t){r=t.App},function(t){h=t.UIBase}],execute:function(){var l;i._RF.push({},"590b0jVjatHoa6EOfb0ACY+","ReviveUI",void 0);var d=e.ccclass;t("ReviveUI",d("ReviveUI")(l=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this)._countdownNode=null,n._circleSpt=null,n._countdownLbl=null,n._reviveBtnNode=null,n._giveUpBtnNode=null,n._isStartTime=!1,n._curLeftTime=0,n._circleAnim=null,n}n(i,t);var e=i.prototype;return e.onLoad=function(){this._countdownNode=u.getNodeByName(this.node,"countdownNode"),this._circleSpt=u.getNodeComponent(this._countdownNode,"circle",o),this._countdownLbl=u.getNodeComponent(this._countdownNode,"countdownLbl",s),this._topBtn=u.getNodeByName(this.node,"topBtn");var t=u.getNodeByName(this.node,"buttonNode");this._reviveBtnNode=u.registerButtonEvent(t,"reviveBtn",this._onReviveButton,this),this._giveUpBtnNode=u.registerButtonEvent(t,"thanksBtn",this._onGiveUpButton,this),this.setOppoLookAdBtn(this.node),this.initBgOpacity(),this.initAdData()},e.show=function(){this._initCountdown(),this.playScaleInAnim([this._countdownNode,this._topBtn],this._giveUpBtnNode),this.setShowAdData(),r.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},e.getUIName=function(){return"复活"},e._initCountdown=function(){this._circleSpt.fillRange=1,this._curLeftTime=a.REVIVE_COUNTDOWN_TIME,this._playCountdownAnim()},e._playCountdownAnim=function(){this._isStartTime=!0,this._circleAnim=c(this._circleSpt).to(this._curLeftTime,{fillRange:0}).start()},e._onReviveButton=function(){var t=this;this._stopCountdownAnim();var n=this._getStatisticBtnInfo("视频广告");r.Stats.customEvent("按钮事件",n,_.onStarted),this.showRewardAd({success:function(){t._gameRevive(),r.Stats.customEvent("按钮事件",n)},fail:function(){t._playCountdownAnim(),r.Stats.customEvent("按钮事件",n,_.onFailed)}})},e._stopCountdownAnim=function(){var t;this._isStartTime=!1,null===(t=this._circleAnim)||void 0===t||t.stop()},e._gameRevive=function(){this._hideDialog(),r.Event.emit(a.EVENT_TYPE.GAME_REVIVE),r.Event.emit(a.EVENT_TYPE.SHOW_BANNER_AD)},e._hideDialog=function(){this._stopCountdownAnim(),this.playScaleOutAnim([this._countdownNode,this._topBtn],(function(){r.UI.hideDialog(a.UI_DIALOG_NAME.REVIVE)}))},e._onGiveUpButton=function(){this._gameOver(),r.Stats.customEvent("按钮事件",this._getStatisticBtnInfo("关闭"))},e._gameOver=function(){this._hideDialog(),r.Event.emit(a.EVENT_TYPE.GAME_OVER)},e._getStatisticBtnInfo=function(t){return{"当前窗口":this.getUIName(),"按钮类型":t}},e.update=function(t){if(this._isStartTime){var n=this._curLeftTime;if(this._curLeftTime-=t,this._curLeftTime<=0)return this._gameOver(),void r.Stats.customEvent("按钮事件",this._getStatisticBtnInfo("超时自动关闭"));this._curLeftTime>>0!=n>>0&&(this._countdownLbl.string=Math.ceil(this._curLeftTime).toString())}},i}(h))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/Log.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"5c7adO5hChD5IgKJZfGLmWx","Log",void 0);t("Log",function(){function t(){}return t.log=function(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];t.debug.apply(t,["Default"].concat(r))},t.debug=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e]},t.warn=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e]},t.error=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e]},t.getDateString=function(){var t=new Date,n=t.getHours().toString(),r="";return r+=(1==n.length?"0"+n:n)+":",r+=(1==(n=t.getMinutes().toString()).length?"0"+n:n)+":",r+=(1==(n=t.getSeconds().toString()).length?"0"+n:n)+":",1==(n=t.getMilliseconds().toString()).length&&(n="00"+n),2==n.length&&(n="0"+n),r="["+(r+=n)+"]"},t.stack=function(t){void 0===t&&(t=2);var n=(new Error).stack.split("\n");n.shift();var r=[];n.forEach((function(t){var n,e=(t=t.substring(7)).split(" ");e.length<2?r.push(e[0]):r.push(((n={})[e[0]]=e[1],n))}));var e=[];if(t<r.length-1)for(var o in r[t])e.push(o);var i=e[0].split(".");return i[0]+".js->"+i[1]+":"},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ListView.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./ListViewItem.ts"],(function(t){"use strict";var e,i,n,s,o,a,l,r,c,_,h,d,p,u,m,g,f,y,S,v,T,I,C,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,l=t._decorator,r=t.ScrollView,c=t.Enum,_=t.Node,h=t.Prefab,d=t.EventHandler,p=t.isValid,u=t.Layout,m=t.instantiate,g=t.v3,f=t.UITransform,y=t.Widget,S=t.v2,v=t.tween,T=t.Event,I=t.Component},function(t){C=t.PoolManager},function(t){w=t.ListViewItem}],execute:function(){var z,b,D,E,L,P,G,O,R,N,A,k,M,V,x,B,H,U,F,X,Y,Z,W,j,q,J,K,Q,$,tt,et,it,nt,st,ot,at,lt,rt,ct,_t,ht;a._RF.push({},"5d920DCOqBJkJ+rOkkRzcyb","ListView",void 0);var dt,pt,ut,mt=l.ccclass,gt=l.property,ft=l.menu,yt=l.disallowMultiple,St=l.requireComponent,vt=l.executionOrder;!function(t){t[t.NODE=0]="NODE",t[t.PREFAB=1]="PREFAB"}(dt||(dt={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADHERING=1]="ADHERING",t[t.PAGE=2]="PAGE"}(pt||(pt={})),function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT"}(ut||(ut={}));t("ListView",(z=mt("ListView"),b=ft("Utils/ListView"),D=yt(),E=St(r),L=vt(-5e3),P=gt({type:c(dt),displayOrder:0,tooltip:"模板项类型"}),G=gt({type:_,visible:function(){return this.templateType==dt.NODE},displayOrder:1,tooltip:"节点模板项"}),O=gt({type:h,visible:function(){return this.templateType==dt.PREFAB},displayOrder:2,tooltip:"预制模板项"}),R=gt({type:c(pt),displayOrder:3,tooltip:"列表滑动模式"}),N=gt({range:[0,1,.1],slide:!0,visible:function(){return this._slideMode===pt.PAGE},displayOrder:4,tooltip:"翻页距离"}),A=gt({type:d,visible:function(){return this._slideMode===pt.PAGE},displayOrder:5,tooltip:"页面改变事件"}),k=gt({displayOrder:6,tooltip:"是否为虚拟列表（动态列表）"}),M=gt({visible:function(){var t=this.slideMode===pt.NORMAL;return t||(this.cyclic=!1),t},displayOrder:7,tooltip:"是否为循环列表"}),V=gt({visible:function(){return this.virtual},displayOrder:8,tooltip:"Item数量不足以填满Content时，是否居中显示Item（不支持Grid布局）"}),x=gt({visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t},displayOrder:9,tooltip:"Item数量不足以填满Content时，是否可滑动"}),B=gt({range:[0,6,1],slide:!0,displayOrder:10,tooltip:"刷新频率（值越大刷新频率越低、性能越高）"}),H=gt({range:[0,12,1],slide:!0,displayOrder:11,tooltip:"逐帧渲染时，每帧渲染的Item数量（小于等于零时关闭逐帧渲染）"}),U=gt({type:d,displayOrder:12,tooltip:"渲染事件（渲染器）"}),F=gt({type:c(ut),displayOrder:13,tooltip:"选择类型"}),X=gt({visible:function(){return this.selectedType===ut.SINGLE},displayOrder:14,tooltip:"是否重复响应单选事件"}),Y=gt({type:d,visible:function(){return this.selectedType>ut.NONE},displayOrder:15,tooltip:"触发选择事件"}),Z=gt({serializable:!1}),z(W=b(W=D(W=E(W=L((q=e((j=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"templateType",q,s(e)),n(e,"nodeItem",J,s(e)),n(e,"prefabItem",K,s(e)),n(e,"_slideMode",Q,s(e)),n(e,"pageDistance",$,s(e)),n(e,"pageChangeEvt",tt,s(e)),n(e,"_virtual",et,s(e)),n(e,"cyclic",it,s(e)),n(e,"lackCenter",nt,s(e)),n(e,"lackSlide",st,s(e)),n(e,"_updateRate",ot,s(e)),n(e,"frameRenderCount",at,s(e)),n(e,"renderEvent",lt,s(e)),n(e,"selectedType",rt,s(e)),n(e,"repeatSingleEvent",ct,s(e)),n(e,"selectedEvent",_t,s(e)),e._forceUpdate=!1,e._updateDone=!0,e._actualItemCnt=0,e._inited=!1,e._pool=null,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e._adhering=!1,e._adheringBarrier=!1,e._curPageNum=0,n(e,"_itemCnt",ht,s(e)),e._curSelectedId=-1,e._lastSelectedId=-1,e._multSelected=[],e}i(e,t);var a=e.prototype;return a.onLoad=function(){this._init()},a.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},a.onDisable=function(){this._unregisterEvent()},a.onDestroy=function(){var t,e,i=this;p(i._itemTmp)&&(null===(t=i._pool)||void 0===t||t.putNode(i._itemTmp)),p(i.nodeItem)&&(null===(e=i._pool)||void 0===e||e.putNode(i.nodeItem))},a.resetListView=function(){this._customSize=null,this._resizeContent()},a._registerEvent=function(){var t=this;t.node.on(_.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.on("touch-up",t._onTouchUp,t),t.node.on(_.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.on("scroll-began",t._onScrollBegan,t,!0),t.node.on("scroll-ended",t._onScrollEnded,t,!0),t.node.on("scrolling",t._onScrolling,t,!0),t.node.on(_.EventType.SIZE_CHANGED,t._onSizeChanged,t)},a._unregisterEvent=function(){var t=this;t.node.off(_.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.off("touch-up",t._onTouchUp,t),t.node.off(_.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.off("scroll-began",t._onScrollBegan,t,!0),t.node.off("scroll-ended",t._onScrollEnded,t,!0),t.node.off("scrolling",t._onScrolling,t,!0),t.node.off(_.EventType.SIZE_CHANGED,t._onSizeChanged,t)},a._init=function(){var t=this;if(!t._inited)if(t._scrollView=t.node.getComponent(r),t._content=t._scrollView.content,t._content){switch(t._layout=t._content.getComponent(u),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(m(t.templateType==dt.PREFAB?t.prefabItem:t.nodeItem)),t._slideMode!=pt.ADHERING&&t._slideMode!=pt.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t._displayData=[],t._pool=C.getInstance(),t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t._curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case u.Type.HORIZONTAL:switch(t._horizontalDir){case u.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case u.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case u.Type.VERTICAL:switch(t._verticalDir){case u.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case u.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case u.Type.GRID:switch(t._startAxis){case u.AxisDirection.HORIZONTAL:switch(t._verticalDir){case u.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case u.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case u.AxisDirection.VERTICAL:switch(t._horizontalDir){case u.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case u.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t._content.removeAllChildren(),t._inited=!0}else console.error(t.node.name+"'s ScrollView unset content!")},a._processAutoScrolling=function(t){var e=1e-4,i=g(),n=this._scrollView,s=n._isNecessaryAutoScrollBrake(),o=s?.05:1;n._autoScrollAccumulatedTime+=t*(1/o);var a,l=Math.min(1,n._autoScrollAccumulatedTime/n._autoScrollTotalTime);n._autoScrollAttenuate&&(a=l,l=(a-=1)*a*a*a*a+1);var c=n._autoScrollTargetDelta.clone();c.multiplyScalar(l);var _=n._autoScrollStartPosition.clone();_.add(c);var h=Math.abs(l-1)<=e;if(Math.abs(l-1)<=n.getScrollEndedEventTiming()&&!n._isScrollEndedWithThresholdEventFired&&(n._dispatchEvent(r.EventType.SCROLL_ENG_WITH_THRESHOLD),n._isScrollEndedWithThresholdEventFired=!0),n.elastic){var d=_.clone();d.subtract(n._autoScrollBrakingStartPosition),s&&d.multiplyScalar(o),_.set(n._autoScrollBrakingStartPosition),_.add(d)}else{var p=_.clone();p.subtract(n._getContentPosition());var u=n._getHowMuchOutOfBoundary(p);u.equals(i,e)||(_.add(u),h=!0)}h&&(n._autoScrolling=!1);var m=_.clone();m.subtract(n._getContentPosition()),n._clampDelta(m),n._moveContent(m,h),n._dispatchEvent(r.EventType.SCROLLING),n._autoScrolling||(n._isBouncing=!1,n._scrolling=!1,n._dispatchEvent(r.EventType.SCROLL_ENDED))},a.setTemplateItem=function(t){if(t){var e=this;if(e._itemTmp){if(t.name===e._itemTmp.name)return;for(var i=this._content.children,n=i.length-1;n>=0;n--){var s=i[n],o=s.listItem;this.selectedType===ut.SINGLE&&o.isSelected&&(o.isSelected=!1),e._pool.putNode(s)}}e._itemTmp=t,e._resizeMode==u.ResizeMode.CHILDREN?e._itemSize=e._layout.cellSize:e._itemSize=t.getComponent(f).contentSize;var a=t.getComponent(w),l=!1;switch(a||(l=!0),l&&(e.selectedType=ut.NONE),(a=t.getComponent(y))&&a.enabled&&(e._needUpdateWidget=!0),e.selectedType==ut.MULT&&(e._multSelected=[]),e._align){case u.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case u.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case u.Type.GRID:switch(e._startAxis){case u.AxisDirection.HORIZONTAL:var r=e._content.getComponent(f).width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((r+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case u.AxisDirection.VERTICAL:var c=e._content.getComponent(f).height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((c+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},a._checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&console.error("List initialization not completed!"),!1)},a._getItemById=function(t){if(this._content)for(var e=this._content.children,i=e.length-1;i>=0;i--){var n=e[i];if(n.getComponent(w).itemId===t)return n}return null},a._resizeContent=function(){var t,e=this;switch(e._align){case u.Type.HORIZONTAL:if(e._customSize){var i=e._getFixedSize(null);t=e._leftGap+i.val+e._itemSize.width*(e._itemCnt-i.count)+e._columnGap*(e._itemCnt-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._itemCnt+e._columnGap*(e._itemCnt-1)+e._rightGap;break;case u.Type.VERTICAL:if(e._customSize){var n=e._getFixedSize(null);t=e._topGap+n.val+e._itemSize.height*(e._itemCnt-n.count)+e._lineGap*(e._itemCnt-1)+e._bottomGap}else t=e._topGap+e._itemSize.height*e._itemCnt+e._lineGap*(e._itemCnt-1)+e._bottomGap;break;case u.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case u.AxisDirection.HORIZONTAL:var s=Math.ceil(e._itemCnt/e._colLineNum);t=e._topGap+e._itemSize.height*s+e._lineGap*(s-1)+e._bottomGap;break;case u.AxisDirection.VERTICAL:var o=Math.ceil(e._itemCnt/e._colLineNum);t=e._leftGap+e._itemSize.width*o+e._columnGap*(o-1)+e._rightGap}}var a=e._content.getComponent(u);if(a&&(a.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){var l=e._sizeType?e.getComponent(f).height:e.getComponent(f).width;e._cyclicPos1=0,l-=e._cyclicPos1,e._cyclicCnt=Math.ceil(l/e._allItemSizeNoEdge)+1;var r=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+r,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicCnt-1)+r*(e._cyclicCnt-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicCnt,e._cycilcAllItemSizeNoEdge+=r*(e._cyclicCnt-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e.getComponent(f).height:e.getComponent(f).width);var c=e._lack&&e.lackCenter||!e.lackSlide?.1:0,_=e._lack?(e._sizeType?e.getComponent(f).height:e.getComponent(f).width)-c:e.cyclic?e._cyclicAllItemSize:e._allItemSize;_<0&&(_=0),e._sizeType?e._content.getComponent(f).height=_:e._content.getComponent(f).width=_},a._onScrolling=function(t){if(void 0===t&&(t=null),null==this._frameCount&&(this._frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this._frameCount>0)this._frameCount--;else if(this._frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this._content.getPosition();e=this._sizeType?e.y:e.x;var i=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),n=this._sizeType?S(0,i):S(i,0);switch(this._alignCalcType){case 1:if(e>-this._cyclicPos1){var s=this._content.position;this._content.setPosition(-this._cyclicPos2,s.y,s.z),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(n))}else if(e<-this._cyclicPos2){var o=this._content.position;this._content.setPosition(-this._cyclicPos1,o.y,o.z),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))}break;case 2:if(e<this._cyclicPos1){var a=this._content.position;this._content.setPosition(this._cyclicPos2,a.y,a.z),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))}else if(e>this._cyclicPos2){var l=this._content.position;this._content.setPosition(this._cyclicPos1,l.y,l.z),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(n))}break;case 3:if(e<this._cyclicPos1){var r=this._content.position;this._content.setPosition(r.x,this._cyclicPos2,r.z),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))}else if(e>this._cyclicPos2){var c=this._content.position;this._content.setPosition(c.x,this._cyclicPos1,c.z),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(n))}break;case 4:if(e>-this._cyclicPos1){var _=this._content.position;this._content.setPosition(_.x,-this._cyclicPos2,_.z),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(n))}else if(e<-this._cyclicPos2){var h=this._content.position;this._content.setPosition(h.x,-this._cyclicPos1,h.z),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))}}}var d,p,m,g;if(this._calcViewPos(),this._sizeType?(d=this._viewTop,m=this._viewBottom):(p=this._viewRight,g=this._viewLeft),this._virtual){var f;this._displayData=[];var y=0,v=this._itemCnt-1;if(this._customSize)for(var T=!1;y<=v&&!T;y++)switch(f=this._calcItemPos(y),this._align){case u.Type.HORIZONTAL:f.right>=g&&f.left<=p?this._displayData.push(f):0!=y&&this._displayData.length>0&&(T=!0);break;case u.Type.VERTICAL:f.bottom<=d&&f.top>=m?this._displayData.push(f):0!=y&&this._displayData.length>0&&(T=!0);break;case u.Type.GRID:switch(this._startAxis){case u.AxisDirection.HORIZONTAL:f.bottom<=d&&f.top>=m?this._displayData.push(f):0!=y&&this._displayData.length>0&&(T=!0);break;case u.AxisDirection.VERTICAL:f.right>=g&&f.left<=p?this._displayData.push(f):0!=y&&this._displayData.length>0&&(T=!0)}}else{var I=this._itemSize.width+this._columnGap,C=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:y=(g-this._leftGap)/I,v=(p-this._leftGap)/I;break;case 2:y=(-p-this._rightGap)/I,v=(-g-this._rightGap)/I;break;case 3:y=(-d-this._topGap)/C,v=(-m-this._topGap)/C;break;case 4:y=(m-this._bottomGap)/C,v=(d-this._bottomGap)/C}for(y=Math.floor(y)*this._colLineNum,v=Math.ceil(v)*this._colLineNum,y<0&&(y=0),--v>=this._itemCnt&&(v=this._itemCnt-1);y<=v;y++)this._displayData.push(this._calcItemPos(y))}if(this._deleteRedundantItem(),this._displayData.length<=0||!this._itemCnt)return void(this._lastDisplayData=[]);this._firstListId=this._displayData[0].id,this._displayItemCnt=this._displayData.length;var w=this._lastDisplayData.length,z=this._displayItemCnt!=w;if(z&&(this.frameRenderCount>0&&this._lastDisplayData.sort((function(t,e){return t-e})),z=this._firstListId!=this._lastDisplayData[0]||this._displayData[this._displayItemCnt-1].id!=this._lastDisplayData[w-1]),this._forceUpdate||z)if(this.frameRenderCount>0)this._itemCnt>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var b=0;b<this._displayItemCnt;b++)this._createOrUpdateItem(this._displayData[b]);this._forceUpdate=!1}this._calcNearestItem()}}},a._calcViewPos=function(){var t=this._content.getPosition();switch(this._alignCalcType){case 1:this._elasticLeft=t.x>0?t.x:0,this._viewLeft=(t.x<0?-t.x:0)-this._elasticLeft,this._viewRight=this._viewLeft+this.getComponent(f).width,this._elasticRight=this._viewRight>this._content.getComponent(f).width?Math.abs(this._viewRight-this._content.getComponent(f).width):0,this._viewRight+=this._elasticRight;break;case 2:this._elasticRight=t.x<0?-t.x:0,this._viewRight=(t.x>0?-t.x:0)+this._elasticRight,this._viewLeft=this._viewRight-this.getComponent(f).width,this._elasticLeft=this._viewLeft<-this._content.getComponent(f).width?Math.abs(this._viewLeft+this._content.getComponent(f).width):0,this._viewLeft-=this._elasticLeft;break;case 3:this._elasticTop=t.y<0?Math.abs(t.y):0,this._viewTop=(t.y>0?-t.y:0)+this._elasticTop,this._viewBottom=this._viewTop-this.getComponent(f).height,this._elasticBottom=this._viewBottom<-this._content.getComponent(f).height?Math.abs(this._viewBottom+this._content.getComponent(f).height):0,this._viewBottom+=this._elasticBottom;break;case 4:this._elasticBottom=t.y>0?Math.abs(t.y):0,this._viewBottom=(t.y<0?-t.y:0)-this._elasticBottom,this._viewTop=this._viewBottom+this.getComponent(f).height,this._elasticTop=this._viewTop>this._content.getComponent(f).height?Math.abs(this._viewTop-this._content.getComponent(f).height):0,this._viewTop-=this._elasticTop}},a._calcItemPos=function(t){var e,i,n,s,o,a,l,r;switch(this._align){case u.Type.HORIZONTAL:switch(this._horizontalDir){case u.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var c=this._getFixedSize(t);o=this._leftGap+(this._itemSize.width+this._columnGap)*(t-c.count)+(c.val+this._columnGap*c.count);var _=this._customSize[t];e=_>0?_:this._itemSize.width}else o=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter)o-=this._leftGap,o+=this._content.getComponent(f).width/2-this._allItemSizeNoEdge/2;return{id:t,left:o,right:a=o+e,x:o+this._itemTmp.getComponent(f).anchorX*e,y:this._itemTmp.y};case u.HorizontalDirection.RIGHT_TO_LEFT:if(this._customSize){var h=this._getFixedSize(t);a=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-h.count)-(h.val+this._columnGap*h.count);var d=this._customSize[t];e=d>0?d:this._itemSize.width}else a=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter)a+=this._rightGap,a-=this._content.getComponent(f).width/2-this._allItemSizeNoEdge/2;return{id:t,right:a,left:o=a-e,x:o+this._itemTmp.getComponent(f).anchorX*e,y:this._itemTmp.y}}break;case u.Type.VERTICAL:switch(this._verticalDir){case u.VerticalDirection.TOP_TO_BOTTOM:if(this._customSize){var p=this._getFixedSize(t);n=-this._topGap-(this._itemSize.height+this._lineGap)*(t-p.count)-(p.val+this._lineGap*p.count);var m=this._customSize[t];i=m>0?m:this._itemSize.height}else n=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter)n+=this._topGap,n-=this._content.getComponent(f).height/2-this._allItemSizeNoEdge/2;return{id:t,top:n,bottom:s=n-i,x:this._itemTmp.position.x,y:s+this._itemTmp.getComponent(f).anchorY*i};case u.VerticalDirection.BOTTOM_TO_TOP:if(this._customSize){var g=this._getFixedSize(t);s=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-g.count)+(g.val+this._lineGap*g.count);var y=this._customSize[t];i=y>0?y:this._itemSize.height}else s=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter)s-=this._bottomGap,s+=this._content.getComponent(f).height/2-this._allItemSizeNoEdge/2;return{id:t,top:n=s+i,bottom:s,x:this._itemTmp.x,y:s+this._itemTmp.getComponent(f).anchorY*i}}case u.Type.GRID:var S=Math.floor(t/this._colLineNum);switch(this._startAxis){case u.AxisDirection.HORIZONTAL:switch(this._verticalDir){case u.VerticalDirection.TOP_TO_BOTTOM:r=(s=(n=-this._topGap-(this._itemSize.height+this._lineGap)*S)-this._itemSize.height)+this._itemTmp.getComponent(f).anchorY*this._itemSize.height;break;case u.VerticalDirection.BOTTOM_TO_TOP:n=(s=this._bottomGap+(this._itemSize.height+this._lineGap)*S)+this._itemSize.height,r=s+this._itemTmp.getComponent(f).anchorY*this._itemSize.height}switch(l=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case u.HorizontalDirection.LEFT_TO_RIGHT:l+=this._itemTmp.getComponent(f).anchorX*this._itemSize.width,l-=this._content.getComponent(f).anchorX*this._content.getComponent(f).width;break;case u.HorizontalDirection.RIGHT_TO_LEFT:l+=(1-this._itemTmp.getComponent(f).anchorX)*this._itemSize.width,l-=(1-this._content.getComponent(f).anchorX)*this._content.getComponent(f).width,l*=-1}return{id:t,top:n,bottom:s,x:l,y:r};case u.AxisDirection.VERTICAL:switch(this._horizontalDir){case u.HorizontalDirection.LEFT_TO_RIGHT:a=(o=this._leftGap+(this._itemSize.width+this._columnGap)*S)+this._itemSize.width,l=o+this._itemTmp.getComponent(f).anchorX*this._itemSize.width,l-=this._content.getComponent(f).anchorX*this._content.getComponent(f).width;break;case u.HorizontalDirection.RIGHT_TO_LEFT:l=(o=(a=-this._rightGap-(this._itemSize.width+this._columnGap)*S)-this._itemSize.width)+this._itemTmp.getComponent(f).anchorX*this._itemSize.width,l+=(1-this._content.getComponent(f).anchorX)*this._content.getComponent(f).width}switch(r=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case u.VerticalDirection.TOP_TO_BOTTOM:r-=(1-this._itemTmp.getComponent(f).anchorY)*this._itemSize.height,r+=(1-this._content.getComponent(f).anchorY)*this._content.getComponent(f).height;break;case u.VerticalDirection.BOTTOM_TO_TOP:r-=this._itemTmp.getComponent(f).anchorY*this._itemSize.height,r+=this._content.getComponent(f).anchorY*this._content.getComponent(f).height,r*=-1}return{id:t,left:o,right:a,x:l,y:r}}}},a._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var i={id:t,x:e.x,y:e.y};return this._sizeType?(i.top=e.y+e.height*(1-e.anchorY),i.bottom=e.y-e.height*e.anchorY):(i.left=e.x-e.width*e.anchorX,i.right=e.x+e.width*(1-e.anchorX)),i},a.getItemPos=function(t){return this._virtual||this.frameRenderCount?this._calcItemPos(t):this._calcExistItemPos(t)},a._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._itemCnt);var e=0,i=0;for(var n in this._customSize)parseInt(n)<t&&(e+=this._customSize[n],i++);return{val:e,count:i}},a._onScrollBegan=function(){this._beganPos=this._sizeType?this._viewTop:this._viewLeft},a._onScrollEnded=function(){var t=this;if(t.curScrollIsTouch=!1,null!=t._scrollToListId){var e=t.getItemByListId(t._scrollToListId);t._scrollToListId=null,e&&v(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}t._onScrolling(),t._slideMode!=pt.ADHERING||t._adhering?t._slideMode==pt.PAGE&&(null!=t._beganPos&&t.curScrollIsTouch?this._pageAdhere():t.adhere()):t.adhere()},a._onTouchStart=function(t,e){if(!this._scrollView._hasNestedViewGroup(t,e)&&(this.curScrollIsTouch=!0,!(t.eventPhase===T.AT_TARGET&&t.target===this.node))){for(var i=t.target;null==i._listId&&i.parent;)i=i.parent;this._scrollItem=null!=i._listId?i:t.target}},a._onTouchUp=function(){var t=this;t._scrollPos=null,t._slideMode==pt.ADHERING?(this._adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==pt.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null},a._onTouchCancelled=function(t,e){var i=this;i._scrollView._hasNestedViewGroup(t,e)||t.simulate||(i._scrollPos=null,i._slideMode==pt.ADHERING?(i._adhering&&(i._adheringBarrier=!0),i.adhere()):i._slideMode==pt.PAGE&&(null!=i._beganPos?i._pageAdhere():i.adhere()),this._scrollItem=null)},a._onSizeChanged=function(){this._checkInited(!1)&&this._onScrolling()},a.itemAdaptive=function(t){var e=t.getComponent(f);if(!this._sizeType&&e.width!==this._itemSize.width||this._sizeType&&e.height!==this._itemSize.height){this._customSize||(this._customSize={});var i=this._sizeType?e.height:e.width;this._customSize[t._listId]!==i&&(this._customSize[t._listId]=i,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},a._pageAdhere=function(){var t=this;if(t.cyclic||!(t._elasticTop>0||t._elasticRight>0||t._elasticBottom>0||t._elasticLeft>0)){var e=t._sizeType?t._viewTop:t._viewLeft,i=(t._sizeType?t.getComponent(f).height:t.getComponent(f).width)*t.pageDistance;if(Math.abs(t._beganPos-e)>i){var n=.5;switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(n):t.nextPage(n);break;case 2:case 3:t._beganPos<e?t.prePage(n):t.nextPage(n)}}else t._elasticTop<=0&&t._elasticRight<=0&&t._elasticBottom<=0&&t._elasticLeft<=0&&t.adhere();t._beganPos=null}},a.adhere=function(){var t=this;if(t._checkInited()&&!(t._elasticTop>0||t._elasticRight>0||t._elasticBottom>0||t._elasticLeft>0)){t._adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t.getComponent(f).height:t.getComponent(f).width);t.scrollTo(t._nearestListId,.7,e)}},a._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(g(t.x,t.y,0)),this._resetItemSize(e));else{if(e=this._pool.getNode(this._itemTmp),p(e)||(e=m(this._itemTmp)),e._listId!=t.id&&(e._listId=t.id,e.getComponent(f).setContentSize(this._itemSize)),e.setPosition(g(t.x,t.y,0)),this._resetItemSize(e),this._content.addChild(e),this._needUpdateWidget){var i=e.getComponent(y);null==i||i.updateAlignment()}e.setSiblingIndex(this._content.children.length-1);var n=e.getComponent(w);e.listItem=n,n&&(n.itemId=t.id,n.setListViewComp(this),n.registerEvent())}this._resetItemSize(e),this.renderEvent&&d.emitEvents([this.renderEvent],e,t.id%this._actualItemCnt),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},a._createOrUpdateItemNonVirtual=function(t){var e,i=this._content.children[t];i?this._forceUpdate&&this.renderEvent&&(i._listId=t,e&&(e.itemId=t)):((i=m(this._itemTmp))._listId=t,this._content.addChild(i),e=i.getComponent(w),i.listItem=e,e&&(e.itemId=t,e.setListViewComp(this),e.registerEvent())),this.renderEvent&&d.emitEvents([this.renderEvent],i,t%this._actualItemCnt),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},a._updateListItem=function(t){if(t&&this.selectedType>ut.NONE){var e=t.node;switch(this.selectedType){case ut.SINGLE:t.isSelected=this.selectedId==e._listId;break;case ut.MULT:t.isSelected=this._multSelected.indexOf(e._listId)>=0}}},a._resetItemSize=function(t){},a._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y)},a.setMultSelected=function(t,e){var i=this;if(i._checkInited()){var n,s;if(Array.isArray(t)||(t=[t]),null==e)i._multSelected=t;else if(e)for(var o=t.length-1;o>=0;o--)n=t[o],(s=i._multSelected.indexOf(n))<0&&i._multSelected.push(n);else for(var a=t.length-1;a>=0;a--)n=t[a],(s=i._multSelected.indexOf(n))>=0&&i._multSelected.splice(s,1);i._forceUpdate=!0,i._onScrolling()}},a.getMultSelected=function(){return this._multSelected},a.hasMultSelected=function(t){return this._multSelected&&this._multSelected.indexOf(t)>=0},a.updateItem=function(t){if(this._checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var n=t[e],s=this.getItemByListId(n);s&&d.emitEvents([this.renderEvent],s,n%this._actualItemCnt)}}},a.updateAll=function(){this._checkInited()&&(this.itemCnt=this._itemCnt)},a.getItemByListId=function(t){if(this._content)for(var e=this._content.children.length-1;e>=0;e--){var i=this._content.children[e];if(i._listId==t)return i}},a._getOutsideItem=function(){for(var t,e=[],i=this._content.children.length-1;i>=0;i--)t=this._content.children[i],this._displayData.find((function(e){return e.id==t._listId}))||e.push(t);return e},a._deleteRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var i=t[e];if(!this._scrollItem||i._listId!=this._scrollItem._listId){i.isCached=!0,this._pool.putNode(i);for(var n=this._lastDisplayData.length-1;n>=0;n--)if(this._lastDisplayData[n]==i._listId){this._lastDisplayData.splice(n,1);break}}}else for(;this._content.children.length>this._itemCnt;)this.deleteSingleItem(this._content.children[this._content.children.length-1])},a.deleteSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},a.aniDelItem=function(t,e,i){var n=this;if(!n._checkInited()||n.cyclic||!n._virtual)return console.error("This function is not allowed to be called!");if(!e)return console.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(n._aniDelRuning)return console.warn("Please wait for the current deletion to finish!");var s,o=n.getItemByListId(t);if(o){s=o.getComponent(w),n._aniDelRuning=!0,n._aniDelCB=e,n._aniDelItem=o,n._aniDelBeforePos=o.position,n._aniDelBeforeScale=o.scale;var a=n._displayData[n._displayData.length-1].id,l=s.isSelected;s.showAnimation(i,(function(){var i;if(a<n._itemCnt-2&&(i=a+1),null!=i){var s=n._calcItemPos(i);n._displayData.push(s),n._virtual?n._createOrUpdateItem(s):n._createOrUpdateItemNonVirtual(i)}else n._itemCnt--;if(n.selectedType==ut.SINGLE)l?n._curSelectedId=-1:n._curSelectedId-1>=0&&n._curSelectedId--;else if(n.selectedType==ut.MULT&&n._multSelected.length){var r=n._multSelected.indexOf(t);r>=0&&n._multSelected.splice(r,1);for(var c=n._multSelected.length-1;c>=0;c--){n._multSelected[c]>=t&&n._multSelected[c]--}}if(n._customSize){n._customSize[t]&&delete n._customSize[t];var _,h={};for(var d in n._customSize){_=n._customSize[d];var p=parseInt(d);h[p-(p>=t?1:0)]=_}n._customSize=h}for(var u,m,f=null!=i?i:a;f>=t+1;f--)if(o=n.getItemByListId(f)){var y=n._calcItemPos(f-1);u=v(o).to(.2333,{position:g(y.x,y.y,0)}),f<=t+1&&(m=!0,u.call((function(){n._aniDelRuning=!1,e(t),delete n._aniDelCB}))),u.start()}m||(n._aniDelRuning=!1,e(t),n._aniDelCB=null)}),!0)}else e(t)},a.scrollTo=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=null),void 0===n&&(n=!1);var s=this;if(s._checkInited(!1)){(null==e||e<0)&&(e=0),t<0?t=0:t>=s._itemCnt&&(t=s._itemCnt-1),!s._virtual&&s._layout&&s._layout.enabled&&s._layout.updateLayout();var o,a,l=s.getItemPos(t);if(!l)return console.error("pos is null",t);switch(s._alignCalcType){case 1:o=l.left,o-=null!=i?s.getComponent(f).width*i:s._leftGap,l=S(o,0);break;case 2:o=l.right-s.getComponent(f).width,o+=null!=i?s.getComponent(f).width*i:s._rightGap,l=S(o+s._content.getComponent(f).width,0);break;case 3:a=l.top,a+=null!=i?s.getComponent(f).height*i:s._topGap,l=S(0,-a);break;case 4:a=l.bottom+s.getComponent(f).height,a-=null!=i?s.getComponent(f).height*i:s._bottomGap,l=S(0,-a+s._content.getComponent(f).height)}var r=s._content.getPosition();r=Math.abs(s._sizeType?r.y:r.x);var c=s._sizeType?l.y:l.x;Math.abs((null!=s._scrollPos?s._scrollPos:r)-c)>.5&&(s._scrollView.scrollToOffset(l,e),s._scrollToListId=t,s._scrollToEndTime=(new Date).getTime()/1e3+e,s._scrollToSo=s.scheduleOnce((function(){if(s._adheringBarrier||(s._adhering=s._adheringBarrier=!1),s._scrollPos=s._scrollToListId=s._scrollToEndTime=s._scrollToSo=null,n){var e=s.getItemByListId(t);e&&v(e).to(.1,{scale:g(1.05,1.05,1.05)}).to(.1,{scale:g(1,1,1)}).union().repeat(2).start()}}),e+.1),e<=0&&s._onScrolling())}},a._calcNearestItem=function(){var t,e,i,n,s,o,a=this;a._nearestListId=null,a._virtual&&a._calcViewPos(),i=a._viewTop,n=a._viewRight,s=a._viewBottom,o=a._viewLeft;for(var l=!1,r=0;r<a._content.children.length&&!l;r+=a._colLineNum)if(t=a._virtual?a._displayData[r]:a._calcExistItemPos(r))switch(e=a._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,a._alignCalcType){case 1:t.right>=o&&(a._nearestListId=t.id,o>e&&(a._nearestListId+=a._colLineNum),l=!0);break;case 2:t.left<=n&&(a._nearestListId=t.id,n<e&&(a._nearestListId+=a._colLineNum),l=!0);break;case 3:t.bottom<=i&&(a._nearestListId=t.id,i<e&&(a._nearestListId+=a._colLineNum),l=!0);break;case 4:t.top>=s&&(a._nearestListId=t.id,s>e&&(a._nearestListId+=a._colLineNum),l=!0)}if((t=a._virtual?a._displayData[a._displayItemCnt-1]:a._calcExistItemPos(a._itemCnt-1))&&t.id==a._itemCnt-1)switch(e=a._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,a._alignCalcType){case 1:n>e&&(a._nearestListId=t.id);break;case 2:o<e&&(a._nearestListId=t.id);break;case 3:s<e&&(a._nearestListId=t.id);break;case 4:i>e&&(a._nearestListId=t.id)}},a.prePage=function(t){void 0===t&&(t=.5),this._checkInited()&&this.skipPage(this._curPageNum-1,t)},a.nextPage=function(t){void 0===t&&(t=.5),this._checkInited()&&this.skipPage(this._curPageNum+1,t)},a.skipPage=function(t,e){var i=this;if(i._checkInited())return i._slideMode!=pt.PAGE?console.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=i._itemCnt||i._curPageNum!=t&&(i._curPageNum=t,i.pageChangeEvt&&d.emitEvents([i.pageChangeEvt],t),i.scrollTo(t,e)))},a.calcCustomSize=function(t){var e=this;if(e._checkInited()){if(!e._itemTmp)return console.error("Unset template item!");if(!e.renderEvent)return console.error("Unset Render-Event!");e._customSize={};var i=m(e._itemTmp);e._content.addChild(i);for(var n=0;n<t;n++)d.emitEvents([e.renderEvent],i,n),i.height==e._itemSize.height&&i.width==e._itemSize.width||(e._customSize[n]=e._sizeType?i.height:i.width);return Object.keys(e._customSize).length||(e._customSize=null),i.removeFromParent(),i.destroy&&i.destroy(),e._customSize}},a.update=function(){if(!(this.frameRenderCount<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameRenderCount>this._displayItemCnt?this._displayItemCnt:this._updateCounter+this.frameRenderCount,e=this._updateCounter;e<t;e++){var i=this._displayData[e];i&&this._createOrUpdateItem(i)}this._updateCounter>=this._displayItemCnt-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._deleteRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==pt.PAGE&&(this._curPageNum=this._nearestListId)):this._updateCounter+=this.frameRenderCount}else if(this._updateCounter<this._itemCnt){for(var n=this._updateCounter+this.frameRenderCount>this._itemCnt?this._itemCnt:this._updateCounter+this.frameRenderCount,s=this._updateCounter;s<n;s++)this._createOrUpdateItemNonVirtual(s);this._updateCounter+=this.frameRenderCount}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==pt.PAGE&&(this._curPageNum=this._nearestListId)},o(e,[{key:"slideMode",get:function(){return this._slideMode},set:function(t){this._slideMode=t}},{key:"virtual",get:function(){return this._virtual},set:function(t){this._virtual=t,0!==this._itemCnt&&this._onScrolling()}},{key:"updateRate",get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)}},{key:"itemCnt",get:function(){return this._actualItemCnt},set:function(t){if(this._checkInited(!1))if(null==t||t<0)console.error("item Count set wrong: ",t);else if(this._actualItemCnt=this._itemCnt=t,this._forceUpdate=!0,this._virtual)this._resizeContent(),this.cyclic&&(this._itemCnt=this._cyclicCnt*this._itemCnt),this._onScrolling(),this.frameRenderCount||this.slideMode!==pt.PAGE||(this._curPageNum=this._nearestListId);else{this.cyclic&&(this._resizeContent(),this._itemCnt=this._cyclicCnt*this._itemCnt);var e=this._content.getComponent(u);if(e&&(e.enabled=!0),this._deleteRedundantItem(),this._firstListId=0,this.frameRenderCount>0){for(var i=this.frameRenderCount>this._itemCnt?this._itemCnt:this.frameRenderCount,n=0;n<i;n++)this._createOrUpdateItemNonVirtual(n);this.frameRenderCount<this._itemCnt&&(this._updateCounter=this.frameRenderCount,this._updateDone=!1)}else{for(var s=0;s<this._itemCnt;s++)this._createOrUpdateItemNonVirtual(s);this._displayItemCnt=this._itemCnt}}}},{key:"selectedId",get:function(){return this._curSelectedId},set:function(t){var e=this._getItemById(t);switch(this.selectedType){case ut.SINGLE:if(!this.repeatSingleEvent&&t===this._curSelectedId)return;if(this._curSelectedId>=0&&(this._lastSelectedId=this._curSelectedId),this._curSelectedId=t,e)e.getComponent(w).isSelected=!0;if(this._lastSelectedId>=0&&this._lastSelectedId!==this._curSelectedId){var i=this._getItemById(this._lastSelectedId);i&&(i.getComponent(w).isSelected=!1)}this.selectedEvent.target&&this.selectedEvent.handler&&d.emitEvents([this.selectedEvent],e,t%this._actualItemCnt,this._lastSelectedId<0?-1:this._lastSelectedId%this._actualItemCnt);break;case ut.MULT:if(!e)return;var n=e.getComponent(w);this._curSelectedId>=0&&(this._lastSelectedId=this._curSelectedId),this._curSelectedId=t;var s=!n.isSelected;n.isSelected=s;var o=this._multSelected.indexOf(t);s&&o<0?this._multSelected.push(t):!s&&o>=0&&this._multSelected.splice(o,1),this.selectedEvent&&d.emitEvents([this.selectedEvent],e,t%this._actualItemCnt,this._lastSelectedId<0?-1:this._lastSelectedId%this._actualItemCnt,s)}}}]),e}(I)).prototype,"templateType",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return dt.NODE}}),J=e(j.prototype,"nodeItem",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(j.prototype,"prefabItem",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(j.prototype,"_slideMode",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pt.NORMAL}}),e(j.prototype,"slideMode",[R],Object.getOwnPropertyDescriptor(j.prototype,"slideMode"),j.prototype),$=e(j.prototype,"pageDistance",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),tt=e(j.prototype,"pageChangeEvt",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d}}),et=e(j.prototype,"_virtual",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(j.prototype,"virtual",[k],Object.getOwnPropertyDescriptor(j.prototype,"virtual"),j.prototype),it=e(j.prototype,"cyclic",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nt=e(j.prototype,"lackCenter",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),st=e(j.prototype,"lackSlide",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ot=e(j.prototype,"_updateRate",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(j.prototype,"updateRate",[B],Object.getOwnPropertyDescriptor(j.prototype,"updateRate"),j.prototype),at=e(j.prototype,"frameRenderCount",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),lt=e(j.prototype,"renderEvent",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d}}),rt=e(j.prototype,"selectedType",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ut.NONE}}),ct=e(j.prototype,"repeatSingleEvent",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_t=e(j.prototype,"selectedEvent",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d}}),ht=e(j.prototype,"_itemCnt",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=j))||W)||W)||W)||W)||W));a._RF.pop()}}}));

System.register("chunks:///_virtual/AchievementData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingletonBase2.ts","./Constants.ts","./RDAssetManager.ts","./AccountData.ts"],(function(t){"use strict";var e,n,s,a,i,c,r,o;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,s=t.createClass},function(t){a=t.cclegacy},function(t){i=t.SingletonBase},function(t){c=t.Constants},function(t){r=t.RDAssetManager},function(t){o=t.default}],execute:function(){a._RF.push({},"5dd9f/e/kBB3IICotOwZxmJ","AchievementData",void 0);var h=c.ACHIEVEMENT_TYPE;t("AchievementDataMgr",function(t){function a(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))||this)._taskCanRecvObj={},e._taskCanRecvCnt=0,e}e(a,t);var i=a.prototype;return i._getAchievementTask=function(t){return this["_"+t]||(this["_"+t]=o.getInstance().getAchievement(t))},i._setAchievementTask=function(t,e){this["_"+t]=e,this._setCanRecvTask(t,e),o.getInstance().setAchievement(t,e)},i.getTaskData=function(t){return this[t]},i.setTaskData=function(t,e){this[t]=e},i.setStatistic=function(t,e){var n=this[t];n.statistic+=e,this[t]=n},i.updateCanRecvTask=function(){for(var t=0,e=Object.keys(h);t<e.length;t++){var n=e[t],s=h[n];this._setCanRecvTask(s,this[s])}},i._setCanRecvTask=function(t,e){for(var s,a=r.getInstance().getAsset("achievementList").json,i=[],c=n(a);!(s=c()).done;){var o=s.value;if(o.name===t){i=o.taskLevelArray;break}}void 0===this._taskCanRecvObj[t]&&(this._taskCanRecvObj[t]=0);for(var h=0,u=i.length;h<u;h++){var v=i[h];if(e.statistic<v.statistic)break;var _=1<<h;e.taskLevel<=h?this._taskCanRecvObj[t]&_||(this._taskCanRecvObj[t]|=_,this._taskCanRecvCnt++):this._taskCanRecvObj[t]&_&&(this._taskCanRecvObj[t]&=~_,this._taskCanRecvCnt--)}},s(a,[{key:"watchAd",get:function(){return this._getAchievementTask(h.WATCH_AD)},set:function(t){this._setAchievementTask(h.WATCH_AD,t)}},{key:"clearStage",get:function(){return this._getAchievementTask(h.CLEAR_STAGE)},set:function(t){this._setAchievementTask(h.CLEAR_STAGE,t)}},{key:"unlockMusic",get:function(){return this._getAchievementTask(h.UNLOCK_MUSIC)},set:function(t){this._setAchievementTask(h.UNLOCK_MUSIC,t)}},{key:"totalGold",get:function(){return this._getAchievementTask(h.TOTAL_GOLD)},set:function(t){this._setAchievementTask(h.TOTAL_GOLD,t)}},{key:"totalTime",get:function(){return this._getAchievementTask(h.TOTAL_TIME)},set:function(t){this._setAchievementTask(h.TOTAL_TIME,t)}}]),a}(i));a._RF.pop()}}}));

System.register("chunks:///_virtual/ICannonBoxShape.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var o,t,e,r,a;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator,r=n.BoxColliderComponent,a=n.Component}],execute:function(){var c;t._RF.push({},"5e8f9AA6zhKNY5/k1P5m4it","ICannonBoxShape",void 0);var i=e.ccclass;n("ICannonBoxShape",i("ICannonBoxShape")(c=function(n){function t(){for(var o,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(o=n.call.apply(n,[this].concat(e))||this)._boxColliderComponent=null,o}return o(t,n),t.prototype.start=function(){this._boxColliderComponent=this.getComponent(r)},t}(a))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/ADDialog.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./OptionsManager.ts","./GameListManger.ts","./ADMainPush.ts"],(function(t){"use strict";var n,o,e,i,s,a,h,c,r,l,m,u,d,g,C,f;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.ButtonComponent,s=t.macro,a=t.UITransformComponent,h=t.v3,c=t.LayoutComponent,r=t.loader,l=t.Prefab,m=t.instantiate,u=t.Component},function(t){d=t.CommonUtils},function(t){g=t.OpCommand},function(t){C=t.default},function(t){f=t.ADMainPush}],execute:function(){var p;o._RF.push({},"60986NYQGdNQb/ag37/Aa2R","ADDialog",void 0);var b=e.ccclass;e.property,t("ADDialog",b("ADDialog")(p=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).backBtn=null,n.bottomContent=null,n._move=1,n.count=1,n.dataList=[],n.adMainPrefabs=null,n.scrollView=null,n}n(o,t);var e=o.prototype;return e.start=function(){this.backBtn=this.node.getChildByName("backBtn").getComponent(i),this.backBtn.node.on("click",this.onBackGame,this),this.bottomContent=d.getNodeByName(this.node,"content"),this.scrollView=d.getNodeByName(this.node,"ScrollView"),this.dataList=C.getInstance().getPushGameList(g.CMD_OPTION_SWITCH_JSYM),this.initBottomView()},e.onEnable=function(){this.schedule(this.scrolling,1/60,s.REPEAT_FOREVER,1)},e.onDisable=function(){this.unschedule(this.scrolling)},e.scrolling=function(){1===this._move&&this.bottomContent.getPosition().y>=this.bottomContent.getComponent(a).height-this.scrollView.getComponent(a).height/2&&(this._move=-1),-1===this._move&&this.bottomContent.getPosition().y<=this.scrollView.getComponent(a).height/2&&(this._move=1),this.bottomContent.setPosition(h(this.bottomContent.getPosition().x,this.bottomContent.getPosition().y+this._move,0))},e.initBottomView=function(){this.count=0;this.createItem(this.bottomContent,1.5),this.bottomContent.getComponent(c).spacingX=(this.bottomContent.getComponent(a).width-441-20)/2,this.bottomContent.getComponent(a).setContentSize(this.bottomContent.getComponent(a).width,198.5*Math.ceil(this.dataList.length/3)+10)},e.createItem=function(t,n){var o=this;if(!(this.count>=this.dataList.length)){var e=t.children[this.count],i=this.dataList[this.count];if(e){var s=e.getComponent(f);s.freash(i),s.setScale(n),this.count+=1,this.createItem(t,n)}else this.adMainPrefabs?this.createAdMain(t,n,i,this.adMainPrefabs):r.loadRes("adUI/ADMainPush",l,null,(function(e,s){e?console.warn(e):(o.adMainPrefabs=s,o.createAdMain(t,n,i,o.adMainPrefabs))}))}},e.createAdMain=function(t,n,o,e){var i=m(e);t.addChild(i);var s=i.getComponent(f);s.freash(o),s.setScale(n),this.count+=1,this.createItem(t,n)},e.onBackGame=function(){this.node.destroy()},o}(u))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/MapBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var i,e,n,o,s,a,c,f,r,h,l,u;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.color,s=t.tween,a=t.ParticleUtils,c=t.director,f=t.BatchingUtility,r=t.Component},function(t){h=t.CommonUtils},function(t){l=t.Constants},function(t){u=t.App}],execute:function(){var E;e._RF.push({},"62fce/rxC5I8bNs8EFF85xk","MapBase",void 0);var g=n.ccclass,d=[o("#225B69"),o("#607EB4"),o("#3F1F68")];t("MapBase",g("MapBase")(E=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).dayColorInfo={},i.nightColorInfo={},i.sunrayEffect=null,i.windEffect=null,i.fogEffect=null,i.dayBgNode=null,i.dayBgMtl=null,i.nightBgNode=null,i.mapId=0,i.mtlArrayObj={},i.isNightTime=!1,i.changeMtlTime=0,i}i(e,t);var n=e.prototype;return n.onLoad=function(){var t=this.node.getChildByName("effect");this.windEffect=h.getNodeByName(t,"wind"),this.mapId=parseInt(this.node.name.slice(3)),this.registerCustomEvent(!0)},n.registerCustomEvent=function(t){var i=t?"on":"off";u.Event[i](l.EVENT_TYPE.GAME_START,this._playEffect,this),u.Event[i](l.EVENT_TYPE.GAME_RESULT,this._stopEffect,this),u.Event[i](l.EVENT_TYPE.GAME_OVER,this._stopEffect,this),u.Event[i](l.EVENT_TYPE.GAME_PAUSE,this._stopEffect,this),u.Event[i](l.EVENT_TYPE.GAME_CONTINUE,this._playEffect,this)},n.updateMapTime=function(t){void 0===t&&(t=.5),this.changeMtlTime=t,this.isNightTime=!this.isNightTime;for(var i=Object.keys(this.dayColorInfo),e=0,n=i.length;e<n;e++){var o=i[e];this.updateMapColor(o,this.mtlArrayObj[o],"mainColor",this.isNightTime)}this.setParticleEffect(!this.isNightTime),this.setBgData(this.isNightTime)},n.updateMapColor=function(t,i,e,n){var o=n?this.dayColorInfo:this.nightColorInfo,a=n?this.nightColorInfo:this.dayColorInfo,c=o[t].clone(),f=a[t];s(c).to(this.changeMtlTime,{r:f.r,g:f.g,b:f.b},{onUpdate:function(t){i.forEach((function(i){return i.setProperty(e,t)}))}}).start()},n.setParticleEffect=function(t){this.sunrayEffect.active=t,this.fogEffect.active=!t,a.play(t?this.sunrayEffect:this.fogEffect),a.stop(t?this.fogEffect:this.sunrayEffect)},n.setBgData=function(t){var i=this;t?this.nightBgNode.active=!0:this.dayBgNode.active=!0;var e=o(255,255,255,t?255:0),n=t?0:255;s(e).to(this.changeMtlTime,{a:n},{onUpdate:this.updateBgMaterial.bind(this)}).call((function(){t?i.dayBgNode.active=!1:i.nightBgNode.active=!1})).start()},n.updateBgMaterial=function(t){this.dayBgMtl.setProperty("mainColor",t)},n.setMapToDay=function(){this.isNightTime&&this.updateMapTime(0)},n._updateFogColor=function(){c.getScene().globals.fog.fogColor=d[this.mapId-1]},n._batchMapBuilding=function(){for(var t=h.getNodeByName(this.node,"routeNode"),i=0,e=t.children.length;i<e;i++){var n=h.getNodeByName(t.children[i],"decorationNode");f.batchStaticModel(n,n)}},n._playEffect=function(){u.GameData.isInGame()&&this.windEffect&&a.play(this.windEffect)},n._stopEffect=function(){this.windEffect&&a.stop(this.windEffect)},n.onDisable=function(){this.registerCustomEvent(!1)},e}(r))||E);e._RF.pop()}}}));

System.register("chunks:///_virtual/ToastUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var n,i,e,s,o,a,c,l,p,u,r,h;return{setters:[function(t){n=t.inheritsLoose,i=t.createClass},function(t){e=t.cclegacy,s=t._decorator,o=t.UIOpacity,a=t.Label,c=t.tween,l=t.v3,p=t.Component},function(t){u=t.CommonUtils},function(t){r=t.Constants},function(t){h=t.App}],execute:function(){var _;e._RF.push({},"64e48DL4qBIraHBje1vFwLg","ToastUI",void 0);var d=s.ccclass;t("ToastUI",d("ToastUI")(_=function(t){function e(){for(var n,i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];return(n=t.call.apply(t,[this].concat(e))||this)._opacityComp=null,n._tipLbl=null,n._scaleAnim=null,n._fadeOutAnim=null,n._zIndex=0,n}n(e,t);var s=e.prototype;return s.onLoad=function(){this._opacityComp=this.node.addComponent(o),this._tipLbl=u.getNodeComponent(this.node,"tipLbl",a),this.setZIndex(99999)},s.show=function(t){this.node.setScale(.75,.75,1),this._opacityComp.opacity=255,this._tipLbl.string=t,this._scaleAnim&&this._scaleAnim.stop(),this._fadeOutAnim&&this._fadeOutAnim.stop(),this._playScaleAnim(),this.setZIndex(99999)},s.setZIndex=function(t){this._zIndex=t},s._playScaleAnim=function(){this._scaleAnim=c(this.node).to(.05,{scale:l(1,1,1)},{easing:"sineIn"}).delay(1).call(this._playFadeOutAnim.bind(this)).start()},s._playFadeOutAnim=function(){this._fadeOutAnim=c(this._opacityComp).to(.5,{opacity:0}).call((function(){h.UI.hideDialog(r.UI_DIALOG_NAME.TOAST)})).start()},i(e,[{key:"zIndex",get:function(){return this._zIndex}}]),e}(p))||_);e._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingletonBase2.ts"],(function(e){"use strict";var t,n,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){a=e.SingletonBase}],execute:function(){n._RF.push({},"65c53BNWO5AsIzZDFLVCC5x","EventManager",void 0);e("EventManager",function(e){function n(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this)._evtHandle={},t}t(n,e);var a=n.prototype;return a.on=function(e,t,n,a){void 0===a&&(a=0);var r=this._evtHandle[e];if(r)for(var i=0,l=r.length;i<l;i++){var o=r[i];if(o.callback===t&&o.target===n)return void console.warn(e+" event is already register!!!")}else r=this._evtHandle[e]=[];r.push({callback:t,target:n,delay:a})},a.emit=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var r=this._evtHandle[e];if(r&&!(r.length<=0))for(var i=function(e,t){var a=r[e];if(a){var i=function(){a.callback.apply(a.target,n)},l=a.delay;l<=0?i():setTimeout(i,1e3*l)}},l=0,o=r.length;l<o;l++)i(l)},a.off=function(e,t,n){var a=this._evtHandle[e];if(a&&!(a.length<=0))for(var r=0,i=a.length;r<i;r++){var l=a[r];if(l.callback===t&&l.target===n){a.splice(r,1);break}}},n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/RDStatisticsManager.ts",["cc","./Log.ts","./RDPlatformParam.ts","./RDCommand.ts","./RDPlatformManager.ts"],(function(t){"use strict";var e,n,a,i,o,s;return{setters:[function(t){e=t.cclegacy,n=t.sys},function(t){a=t.Log},function(t){i=t.RDPlatformParam},function(t){o=t.RDCommand},function(t){s=t.RDPlatformManager}],execute:function(){var c,v,m,r,l;t({CustomEventID:void 0,EventID:void 0,EventResult:void 0,ResultID:void 0,StageEventType:void 0}),e._RF.push({},"67887ivPnxLi4NT6U/GW4bL","RDStatisticsManager",void 0),function(t){t.onStarted="onStarted",t.onSuccess="onSuccess",t.onFailed="onFailed",t.onCancelled="onCancelled"}(c||(c=t("EventResult",{}))),function(t){t.TOOLS="tools",t.AWARD="award"}(v||(v=t("StageEventType",{}))),function(t){t[t.eventID_11=11]="eventID_11",t[t.eventID_12=12]="eventID_12",t[t.eventID_13=13]="eventID_13",t[t.eventID_14=14]="eventID_14",t[t.eventID_15=15]="eventID_15",t[t.eventID_16=16]="eventID_16",t[t.eventID_17=17]="eventID_17",t[t.eventID_18=18]="eventID_18",t[t.eventID_19=19]="eventID_19",t[t.eventID_20=20]="eventID_20",t[t.eventID_201=201]="eventID_201",t[t.eventID_202=202]="eventID_202",t[t.eventID_203=203]="eventID_203",t[t.eventID_204=204]="eventID_204",t[t.eventID_205=205]="eventID_205",t[t.eventID_206=206]="eventID_206",t[t.eventID_207=207]="eventID_207",t[t.eventID_208=208]="eventID_208",t[t.eventID_209=209]="eventID_209",t[t.eventID_210=210]="eventID_210",t[t.eventID_211=211]="eventID_211"}(m||(m=t("EventID",{}))),function(t){t.custom_user_subpackages="custom_user_subpackages",t.custom_churn_load="custom_churn_load",t.custom_churn_privacy="custom_churn_privacy",t.custom_churn_native_splash="custom_churn_native_splash",t.custom_ad_video="custom_ad_video",t.custom_ad_native="custom_ad_native",t.custom_open_view="custom_open_view",t.custom_button_click="custom_button_click",t.custom_game_revive="custom_game_revive",t.custom_game_boss="custom_game_boss"}(r||(r=t("CustomEventID",{}))),function(t){t.SUCCESS="0",t.FAIL="1",t.NO="2"}(l||(l=t("ResultID",{})));var u=t("RDStatisticsManager",function(){function t(){this.isUmaInit=!1,this._platformName=""}t.getInstance=function(){return this._instance};var e=t.prototype;return e.init=function(){if(window.cocosAnalytics){this._platformName=s.getInstance().getPlatformName();var t=i.ADPARAM.cocosAnalytics;window.cocosAnalytics.init({appID:t.appID,appSecret:t.secret,channel:this._platformName,version:t.version,storeID:this._platformName,engine:"cocos3d",callNumber:""})}var e=i.ADPARAM[s.getInstance().platformType].name;if(window[e]&&window[e].uma){var n=i.ADPARAM.uma;window[e].uma.init({appKey:n.appKey,useOpenid:!1,debug:n.debug}),this.isUmaInit=!0}},e.login=function(t){void 0===t&&(t=c.onStarted);var e={channel:s.getInstance().getPlatformName(),eventResult:t};setTimeout((function(){s.getInstance().sendData(o.CMD_DATA_STATISTICS,{ad_type:o.STATISTICS_LOGIN,coin:0})}),5e3),n.isNative?n.platform===n.Platform.IOS?window.jsb.reflection.callStaticMethod("TDManager","login:",JSON.stringify(e)):window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify(e)):window.cocosAnalytics&&(!window.cocosAnalytics.isInited()&&this.init(),t===c.onStarted?window.cocosAnalytics.CAAccount.loginStart({channel:this._platformName}):t===c.onSuccess?window.cocosAnalytics.CAAccount.loginSuccess({userID:"999999",age:1,sex:1,channel:this._platformName}):t===c.onFailed&&window.cocosAnalytics.CAAccount.loginFailed({reason:"",channel:this._platformName}))},e.customEvent=function(t,e,a,v){if(void 0===a&&(a=c.onSuccess),n.isNative){var m={type:o.CMD_DATA_STATISTICS,eventId:t,info:e,eventResult:a,result:v};n.platform===n.Platform.IOS?window.jsb.reflection.callStaticMethod("TDManager","statistics:",JSON.stringify(m)):window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify(m))}else{window.cocosAnalytics&&(!window.cocosAnalytics.isInited()&&this.init(),window.cocosAnalytics.CACustomEvent[a](t,e,v));var r=i.ADPARAM[s.getInstance().platformType].name;window[r]&&window[r].uma&&(!this.isUmaInit&&this.init(),window[r].uma.trackEvent(t,e))}},e.customEventByEventName=function(t){if(n.isNative){var e={type:o.CMD_DATA_TKIOS_STATISTICS,data:t};n.platform===n.Platform.IOS?window.jsb.reflection.callStaticMethod("TrackingManager","statistics:",JSON.stringify(e)):window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify(e))}},e.customEventByEvent=function(t,e,n){s.getInstance().sendData(o.CMD_DATA_STATISTICS,{eventId:t,param1:e,param2:n})},e.logout=function(){n.isNative?n.platform===n.Platform.IOS||window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify({})):window.cocosAnalytics&&window.cocosAnalytics.CAAccount.logout()},e.stageStart=function(t,e){a.log("关卡开始"+t+e);var n=i.ADPARAM[s.getInstance().platformType].name;window[n]&&window[n].uma&&(!this.isUmaInit&&this.init(),window[n].uma.stage.onStart({stageId:t,stageName:e}))},e.stageEnd=function(t,e,n){void 0===n&&(n=c.onSuccess);var a=i.ADPARAM[s.getInstance().platformType].name;window[a]&&window[a].uma&&(!this.isUmaInit&&this.init(),window[a].uma.stage.onEnd({stageId:t,stageName:e,event:n===c.onSuccess?"complete":"fail"}))},e.stageRunning=function(t,e,n,a){void 0===n&&(n=v.TOOLS);var o=i.ADPARAM[s.getInstance().platformType].name;window[o]&&window[o].uma&&(!this.isUmaInit&&this.init(),window[o].uma.stage.onRunning({stageId:t,stageName:e,event:n===v.TOOLS?"tools":"award",params:a}))},e.onInitLevel=function(t,e){var n=i.ADPARAM[s.getInstance().platformType].name;window[n]&&window[n].uma&&(!this.isUmaInit&&this.init(),window[n].uma.level.onInitLevel({levelId:t,levelName:e}))},e.onSetLevel=function(t,e){var n=i.ADPARAM[s.getInstance().platformType].name;window[n]&&window[n].uma&&(!this.isUmaInit&&this.init(),window[n].uma.level.onSetLevel({levelId:t,levelName:e}))},e.revenue=function(t,e,n){var a=i.ADPARAM[s.getInstance().platformType].name;window[a]&&window[a].uma&&(!this.isUmaInit&&this.init(),window[a].uma.revenue({group:"default",money:t,name:e,desc:n}))},t}());u.TAG="RDStatisticsManager",u.PAGE_COUNT=100,u._instance=new u;t("RDStatisticsMgr",u.getInstance());e._RF.pop()}}}));

System.register("chunks:///_virtual/SkinUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./PlayerSkinData.ts","./AppManager.ts","./UIBase.ts","./ListView.ts","./SkinItem.ts"],(function(t){"use strict";var e,n,i,s,o,a,r,l,p,_,h,u,d;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.ScrollView,o=t.ButtonComponent,a=t.SpriteComponent},function(t){r=t.CommonUtils},function(t){l=t.Constants},function(t){p=t.PlayerSkinData},function(t){_=t.App},function(t){h=t.UIBase},function(t){u=t.ListView},function(t){d=t.SkinItem}],execute:function(){var N;n._RF.push({},"678d7LRmXFO46k7Z2oL6Wlr","SkinUI",void 0);var y=i.ccclass;t("SkinUI",y("SkinUI")(N=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._skinScrollView=null,e._skinListNode=null,e._listViewComp=null,e._btnNode=null,e._frameNode=null,e._skinType=null,e._playerNode=null,e._stageNode=null,e}e(n,t);var i=n.prototype;return i.onLoad=function(){this._skinScrollView=r.getNodeComponent(this.node,"skinListScrollView",s),this._skinListNode=r.getNodeByName(this._skinScrollView.node,"skinListContent"),this._listViewComp=this._skinScrollView.getComponent(u),this._stageNode=r.getNodeByName(this.node,"stageNode"),this._playerNode=r.getNodeByName(this.node,"playerNode"),this._btnNode=r.getNodeByName(this.node,"btnNode"),r.getNodeByName(this.node,"closeBtn").on(o.EventType.CLICK,this._onCloseButton,this),this._frameNode=r.getNodeByName(this.node,"frame"),r.registerButtonEvent(this._btnNode,"playerBtn1",this._onplayerBtn1,this),r.registerButtonEvent(this._btnNode,"playerBtn2",this._onplayerBtn2,this),r.registerButtonEvent(this._btnNode,"playerBtn3",this._onplayerBtn3,this),r.registerButtonEvent(this._btnNode,"playerBtn4",this._onplayerBtn4,this),this._skinType=p.SKIN_TYPE.PLAYER1,this.initBgOpacity(),this.initOppoNativeAd(),this.alignOppoNativeAd(this._skinScrollView.node)},i.show=function(){this.showUICnt++,_.Event.emit(l.EVENT_TYPE.PLAYER_INIT),this._updatePlayerSkin(),this._stageNode.active=!0,this._playerNode.active=!0,this.playScaleInAnim([this._playerNode,this._skinScrollView.node]),this.showAdvertisement(),this._registerCustomEvent(!0),this._updateBtnsSpt(),this._listViewComp.scrollTo(0),this._listViewComp.itemCnt=_.SkinDataMgr.getDataCount(this._skinType),_.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},i.hide=function(){this._registerCustomEvent(!1)},i.getUIName=function(){return"皮肤"},i.onSkinItemRender=function(t,e){var n=t.getComponent(d),i=_.SkinDataMgr.getDataByIndex(e,this._skinType);n.init(i)},i._registerCustomEvent=function(t){var e=t?"on":"off";_.Event[e](l.EVENT_TYPE.UPDATE_SKIN,this._updatePlayerSkin,this)},i._onCloseButton=function(){_.UI.isUIAnimPlaying()||(this.unscheduleAllCallbacks(),this._playScaleOutAnim(),_.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭"}))},i._playScaleOutAnim=function(){this._stageNode.active=!1,this._playerNode.active=!1;var t=[this._playerNode,this._skinScrollView.node];this.playScaleOutAnim(t,(function(){_.UI.hideDialog(l.UI_DIALOG_NAME.SKIN)}))},i._onBoardBtn=function(){},i._onplayerBtn1=function(){this._skinType=p.SKIN_TYPE.PLAYER1,this._updateBtnsSpt()},i._onplayerBtn2=function(){this._skinType=p.SKIN_TYPE.PLAYER2,this._updateBtnsSpt()},i._onplayerBtn3=function(){this._skinType=p.SKIN_TYPE.PLAYER3,this._updateBtnsSpt()},i._onplayerBtn4=function(){this._skinType=p.SKIN_TYPE.PLAYER4,this._updateBtnsSpt()},i._onBagBtn=function(){},i._updateBtnsSpt=function(){var t=r.getNodeComponent(this._btnNode,"playerBtn1",a),e=r.getNodeComponent(this._btnNode,"playerBtn2",a),n=r.getNodeComponent(this._btnNode,"playerBtn3",a),i=r.getNodeComponent(this._btnNode,"playerBtn4",a);t.spriteFrame=_.SptFrame.getSpriteFrameByName("Store_button"+(this._skinType==p.SKIN_TYPE.PLAYER1?"1":"2")),e.spriteFrame=_.SptFrame.getSpriteFrameByName("Store_button"+(this._skinType==p.SKIN_TYPE.PLAYER2?"1":"2")),n.spriteFrame=_.SptFrame.getSpriteFrameByName("Store_button"+(this._skinType==p.SKIN_TYPE.PLAYER3?"1":"2")),i.spriteFrame=_.SptFrame.getSpriteFrameByName("Store_button"+(this._skinType==p.SKIN_TYPE.PLAYER4?"1":"2"));for(var s=this._playerNode.children,o=0;o<s.length;o++){s[o].active=!1}r.getNodeByName(this._playerNode,"player"+this._skinType).active=!0,this._listViewComp.itemCnt=_.SkinDataMgr.getDataCount(this._skinType),this._listViewComp.scrollTo(0)},i._updatePlayerSkin=function(){var t=_.SkinDataMgr.getCurrentSkin(),e=r.getNodeByName(this._playerNode,"player"+this._skinType);this.setPlayerSkin(e,t)},n}(h))||N);n._RF.pop()}}}));

System.register("chunks:///_virtual/MusicItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var i,e,s,a,n,o,_,u,c,m,d,r,h;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,a=t.Sprite,n=t.Label,o=t.Button,_=t.v3,u=t.tween},function(t){c=t.CommonUtils},function(t){m=t.Constants},function(t){d=t.EventResult},function(t){r=t.App},function(t){h=t.UIBase}],execute:function(){var l;e._RF.push({},"6be35pLVhRBcq8GshSizFxR","MusicItem",void 0);var S,g,p=s.ccclass;!function(t){t[t.UNLOCK=1]="UNLOCK",t[t.LOCK=2]="LOCK",t[t.ENDLESS=3]="ENDLESS"}(S||(S={})),function(t){t[t.PLAY=0]="PLAY",t[t.PAUSE=1]="PAUSE",t[t.LOADING=2]="LOADING"}(g||(g={}));t("MusicItem",p("MusicItem")(l=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return(i=t.call.apply(t,[this].concat(s))||this)._musicItemBgSpt=null,i._auditionBtnSpt=null,i._musicalNoteSpt=null,i._loadingImgNode=null,i._auditionImgNode=null,i._nameLbl=null,i._nameSignSpt=null,i._scoreNode=null,i._starSptArr=[],i._scoreLbl=null,i._unlockWordSpt=null,i._playBtnSpt=null,i._watchNode=null,i._diamondNode=null,i._diamondLbl=null,i._isVideoUnlock=!1,i._isGuessItem=!1,i._cdAnim=null,i._isPlayCdAnim=!1,i._loadingAnim=null,i._musicData=null,i._itemType=0,i._musicState=0,i._audState=g.PAUSE,i}i(e,t);var s=e.prototype;return s.onLoad=function(){this._musicItemBgSpt=c.getNodeComponent(this.node,"musicItem",a);var t=c.registerButtonEvent(this.node,"auditionBtn",this._onAuditionButton,this);this._auditionBtnSpt=t.getComponent(a),this._musicalNoteSpt=c.getNodeComponent(this.node,"musicalNote",a),this._loadingImgNode=c.getNodeByName(this.node,"loadingImg"),this._auditionImgNode=c.getNodeByName(this.node,"auditionImg"),this._nameLbl=c.getNodeComponent(this.node,"nameLbl",n),this._nameSignSpt=c.getNodeComponent(this.node,"nameSign",a),this._scoreNode=c.getNodeByName(this.node,"scoreNode");var i=c.getNodeByName(this._scoreNode,"starNode");this._starSptArr=i.children.map((function(t){return t.getComponent(a)})),this._scoreLbl=c.getNodeComponent(this._scoreNode,"scoreLbl",n),this._unlockWordSpt=c.getNodeComponent(this.node,"unlockWord",a);var e=c.registerButtonEvent(this.node,"playBtn",this._onPlayButton,this);this._playBtnSpt=e.getComponent(a),this._watchNode=c.getNodeByName(this._playBtnSpt.node,"watchNode"),this._diamondNode=c.getNodeByName(this._playBtnSpt.node,"diamondNode"),this._diamondLbl=c.getNodeComponent(this._diamondNode,"diamondLbl",n)},s.init=function(t){this._musicData=t,this._isVideoUnlock=-1===this._musicData.amount,this._setCDCover(),this._setMusicName(),this.setCDAnimation(!1)},s.updateData=function(t){void 0===t&&(t=!1);var i=r.MusicDataMgr.getLocalDataById(this._musicData.id);this._musicState=i.isEndless?S.ENDLESS:i.isUnlock?S.UNLOCK:S.LOCK,this._isGuessItem=t,t&&(this._auditionBtnSpt.node.getComponent(o).interactable=!1),this._setItemSpriteFrame(),this._setMusicalNote(t),this._setAuditionImgVisible(t),this._setMusicDetail(),this._setPlayButton()},s.getMusicIndex=function(){return this._musicData.index},s.setMusicAnim=function(t){var i=t?r.GameData.isLoadingMusic?g.LOADING:g.PLAY:g.PAUSE;this._setAuditionState(i)},s.setCDAnimation=function(t,i,e){var s;(void 0===i&&(i=!1),void 0===e&&(e=_()),this._setMusicalNote(t),this._setLoadingImage(i),t)?this._isPlayCdAnim||(this._auditionBtnSpt.node.setRotationFromEuler(e.x,e.y,e.z),this._cdAnim=u(this._auditionBtnSpt.node).by(m.COVER_ANIM_TIME,{eulerAngles:_(0,0,-360)}).repeatForever().start(),this._isPlayCdAnim=!0):(this._isPlayCdAnim=!1,null===(s=this._cdAnim)||void 0===s||s.stop(),this._auditionBtnSpt.node.setRotationFromEuler(0,0,0))},s.getPlayBtnWorldPos=function(){return this._playBtnSpt.node.getWorldPosition()},s._setItemSpriteFrame=function(){},s._setCDCover=function(){this._auditionBtnSpt.spriteFrame=r.SptFrame.getSpriteFrameByName(this._musicData.getCoverFilename())},s._setMusicalNote=function(t){void 0===t&&(t=!1);var i=t?"Main_Image_MusicalNote_0":"Main_Image_CD_Play_0";this._musicalNoteSpt.spriteFrame=r.SptFrame.getSpriteFrameByName(i+"1")},s._setLoadingImage=function(t){var i;void 0===t&&(t=!1),this._loadingImgNode.active=t,null===(i=this._loadingAnim)||void 0===i||i.stop(),t&&(this._loadingAnim=u(this._loadingImgNode).by(3,{eulerAngles:_(0,0,360)}).repeatForever().start())},s._setAuditionImgVisible=function(t){this._auditionImgNode.active=!t&&this._isMusicLock()},s._setAuditionState=function(t){void 0===t&&(t=g.PAUSE)},s._isMusicLock=function(){return this._musicState===S.LOCK},s._setMusicName=function(){if(this._nameLbl.string=this._musicData.showName,this._nameSignSpt.node.active=0!==this._musicData.sign,this._nameSignSpt.node.active){var t=r.SptFrame.getSpriteFrameByName("Main_Image_Sign_0"+this._musicData.sign);this._nameSignSpt.spriteFrame=t}},s._setMusicDetail=function(){var t=this._isMusicLock();if(this._scoreNode.active=!t,this._unlockWordSpt.node.active=t,t){var i="Main_Image_Word_0"+(this._isVideoUnlock?1:2);this._unlockWordSpt.spriteFrame=r.SptFrame.getSpriteFrameByName(i)}else{var e=r.MusicDataMgr.getLocalDataById(this._musicData.id);this._scoreLbl.string=e.bestScore.toString(),this._setStarSpriteFrame(e.bestProgress)}},s._setStarSpriteFrame=function(t){for(var i=0,e=this._starSptArr.length;i<e;i++){var s="Main_Image_Star_0"+(t>=m.GAME_PROGRESS_ARRAY[i]?1:2);this._starSptArr[i].spriteFrame=r.SptFrame.getSpriteFrameByName(s)}},s._setPlayButton=function(){var t=r.SptFrame.getSpriteFrameByName("Main_Button_Play_0"+this._musicState);this._playBtnSpt.spriteFrame=t,this._isMusicLock()?(this._watchNode.active=this._isVideoUnlock,this._diamondNode.active=!this._isVideoUnlock,this._diamondNode.active&&(this._diamondLbl.string=this._musicData.amount.toString())):(this._watchNode.active=!1,this._diamondNode.active=!1)},s._onAuditionButton=function(){this._musicData.index!==r.GameData.curAuditionIdx&&(r.GameData.curAuditionIdx=this._musicData.index,r.Audition.auditionMusic(),r.Event.emit(m.EVENT_TYPE.STOP_LOOP_MUSIC),r.Stats.customEvent("按钮事件",{"当前窗口":"音乐项","按钮类型":"歌曲试听","歌曲":this._musicData.showName}))},s._onPlayButton=function(){switch(this._musicState){case S.UNLOCK:this._startGame();break;case S.LOCK:this._onLockButton();break;case S.ENDLESS:this._startGame()}},s._startGame=function(){var t=this._musicState===S.ENDLESS?m.GAME_MODE.ENDLESS:m.GAME_MODE.NORMAL;r.Event.emit(m.EVENT_TYPE.QUICK_START,this._musicData,t),r.Stats.customEvent("按钮事件",{"当前窗口":"音乐项","按钮类型":"开始","歌曲":this._musicData.showName,"音乐项类型":this._itemType})},s._onLockButton=function(){var t={"当前窗口":"音乐项","歌曲":this._musicData.showName,"音乐项类型":this._itemType};if(this._isVideoUnlock)t["按钮类型"]="视频广告",r.Stats.customEvent("按钮事件",t,d.onStarted),this.showRewardAd({success:this._videoUnlockSuccess.bind(this),fail:function(){r.Stats.customEvent("按钮事件",t,d.onFailed)}});else{t["按钮类型"]="使用钻石";var i=this._musicData.amount;r.GameData.gameGold>=i?(r.GameData.gameGold-=i,r.Account.gameGold=r.GameData.gameGold,this._unlockMusic(),r.Stats.customEvent("按钮事件",t)):(r.Event.emit(m.EVENT_TYPE.FREE_GOLD),r.Stats.customEvent("按钮事件",t,d.onFailed,"钻石不足"))}},s._videoUnlockSuccess=function(){if(this._isGuessItem){r.GameData.playMusicId=this._musicData.id,this.isOppoPlatform&&this.adsManager.hideGameBannerAd();var t=r.UI.isDialogOnShow(m.UI_DIALOG_NAME.GAME_RESULT);r.UI.hideDialog(t?m.UI_DIALOG_NAME.GAME_RESULT:m.UI_DIALOG_NAME.PK_RESULT),r.UI.hideDialog(m.UI_DIALOG_NAME.GAME),r.Event.emit(m.EVENT_TYPE.CLEAR_MAP_INFO)}this._unlockMusic(),r.Stats.customEvent("按钮事件",{"当前窗口":"音乐项","按钮类型":"视频广告","歌曲":this._musicData.showName})},s._unlockMusic=function(){var t=r.MusicDataMgr.getLocalDataById(this._musicData.id);t.isUnlock=!0,r.MusicDataMgr.setLocalDataById(this._musicData.id,t),r.MusicDataMgr.updateUnlockData(this._musicData),r.AchievementDataMgr.setStatistic(m.ACHIEVEMENT_TYPE.UNLOCK_MUSIC,1),this._startGame()},e}(h))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/OceanMap.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./MapBase.ts"],(function(e){"use strict";var n,r,a,t,c;return{setters:[function(e){n=e.inheritsLoose},function(e){r=e.cclegacy,a=e._decorator,t=e.color},function(e){c=e.MapBase}],execute:function(){var o;r._RF.push({},"6c2484mgdNNyaJApVdOu1gP","OceanMap",void 0);var s=a.ccclass;e("OceanMap",s("OceanMap")(o=function(e){function r(){for(var n,r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=e.call.apply(e,[this].concat(a))||this).dayColorInfo={rock:t(207,187,207),tree:t(139,207,0),sand:t(247,208,153),water:t(66,115,199)},n.nightColorInfo={rock:t(85,66,90),tree:t(236,181,66),sand:t(195,172,183),water:t(106,0,255)},n}return n(r,e),r}(c))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/RankData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingletonBase2.ts","./AppManager.ts"],(function(a){"use strict";var t,e,n,r,i;return{setters:[function(a){t=a.inheritsLoose,e=a.createClass},function(a){n=a.cclegacy},function(a){r=a.SingletonBase},function(a){i=a.App}],execute:function(){n._RF.push({},"6c6a29JarRPvboTkq4F5RCT","RankData",void 0);var o,c,A=.09;a("RankDataMgr",function(a){function n(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=a.call.apply(a,[this].concat(n))||this)._rankDataArr=[],t._rankDataObj={},t}t(n,a);var r=n.prototype;return r.init=function(){this._initJsonRankData()},r.getDataById=function(a){return this._rankDataObj[a]},r.getDataCount=function(){return this._rankDataArr.length},r.getRankDataArray=function(){return this._rankDataArr},r.getPlayerRankData=function(){return i.Account.getPlayerRankData()},r.getPlayerRankTeamType=function(){return i.Account.getPlayerRankData().teamType},r.setPlayerRankData=function(a){i.Account.setPlayerRankData(a)},r.getPlayerHP=function(){var a=this.getPlayerRankData().HpLevel;return 300*Math.pow(1+A,a-1)},r.getPlayerSoldierHP=function(a){var t=this.getPlayerRankData().HpLevel;return(150+30*(a-1))*Math.pow(1+A,t-1)},r.getPlayerSoldierDamage=function(a){var t=this.getPlayerRankData().damageLevel;return(5+1.5*(a-1))*Math.pow(1+A,t-1)},r.getAILeaderHpById=function(a){return 300*Math.pow(1.1,a-1)},r.getAISoliderHpById=function(a,t){return(150+30*(t-1))*Math.pow(1.1,a-1)},r.getAISoliderDamageById=function(a,t){return(5+1.5*(t-1))*Math.pow(1.1,a-1)},r.getMercenaryHP=function(a){void 0===a&&(a=s.MERCENARY_TYPE.ASSAULT);var t=this.getPlayerRankData().rankId,e=0;switch(a){case s.MERCENARY_TYPE.ASSAULT:e=170*Math.pow(1.1,t-1);break;case s.MERCENARY_TYPE.SCATTER:e=220*Math.pow(1.1,t-1);break;case s.MERCENARY_TYPE.HEAVY:e=170*Math.pow(1.1,t-1);break;case s.MERCENARY_TYPE.SMART:e=220*Math.pow(1.1,t-1)}return e},r.getMercenaryDamage=function(a){void 0===a&&(a=s.MERCENARY_TYPE.ASSAULT);var t=this.getPlayerRankData().rankId,e=0;switch(a){case s.MERCENARY_TYPE.ASSAULT:e=(10-.1*Math.floor(t/2))*Math.pow(1.1,t-1);break;case s.MERCENARY_TYPE.SCATTER:e=(20-.2*Math.floor(t/2))*Math.pow(1.1,t-1);break;case s.MERCENARY_TYPE.HEAVY:e=(15-.15*Math.floor(t/2))*Math.pow(1.1,t-1);break;case s.MERCENARY_TYPE.SMART:e=(10-.1*Math.floor(t/2))*Math.pow(1.1,t-1)}return e},r.getMercenaryShootIntervalTime=function(a){void 0===a&&(a=s.MERCENARY_TYPE.ASSAULT);var t=0;switch(a){case s.MERCENARY_TYPE.ASSAULT:case s.MERCENARY_TYPE.SCATTER:t=.5;break;case s.MERCENARY_TYPE.HEAVY:t=.6;break;case s.MERCENARY_TYPE.SMART:t=.2}return t},r.getMercenaryBulletArr=function(a){void 0===a&&(a=s.MERCENARY_TYPE.ASSAULT);var t=[0];return a==s.MERCENARY_TYPE.SCATTER&&(t=[-10,0,10]),t},r.getMercenaryBulletScale=function(a){void 0===a&&(a=s.MERCENARY_TYPE.ASSAULT);var t=1.2;return a==s.MERCENARY_TYPE.HEAVY&&(t=1.6),t},r.getFinalWeaponDamage=function(a){void 0===a&&(a=s.FINAL_WEAPON_TYPE.LASER);var t=20,e=this.getPlayerRankData().rankId;switch(a){case s.FINAL_WEAPON_TYPE.LASER:t=50*Math.pow(1.1,e-1);break;case s.FINAL_WEAPON_TYPE.SCATTER:t=90*Math.pow(1.1,e-1);break;case s.FINAL_WEAPON_TYPE.ROBOT:t=11*Math.pow(1.1,e-1)}return t},r.getFinalWeaponIntervalTime=function(a){void 0===a&&(a=s.FINAL_WEAPON_TYPE.LASER);var t=.5;switch(a){case s.FINAL_WEAPON_TYPE.LASER:t=1.5;break;case s.FINAL_WEAPON_TYPE.SCATTER:t=.5;break;case s.FINAL_WEAPON_TYPE.ROBOT:t=1}return t},r.getFinalWeaponHP=function(){var a=this.getPlayerRankData().rankId;return 7e3*Math.pow(1.1,a-1)},r.getSoldierShootIntervalTime=function(){return.4},r.getRankSptName=function(){var a=this.getPlayerRankData().rankId;return this._rankDataObj[a].name.split("_")[0]},r.getRankStarCnt=function(){var a=this.getPlayerRankData().rankId;return this._rankDataObj[a].name.split("_")[1]},r._initJsonRankData=function(){for(var a=i.RDAsset.getAsset("RankDataList").json,t=0,e=Object.keys(a).length;t<e;t++){var n=new s,r=a[t];n.initData(t,r),this._rankDataArr.push(n),this._rankDataObj[n.id]=n}},e(n,[{key:"keyCnt",get:function(){return this.getPlayerRankData().keyCnt},set:function(a){var t=this.getPlayerRankData();t.keyCnt=a,this.setPlayerRankData(t)}}]),n}(r));!function(a){a[a.ASSAULT=0]="ASSAULT",a[a.SCATTER=1]="SCATTER",a[a.HEAVY=2]="HEAVY",a[a.SMART=3]="SMART"}(o||(o={})),function(a){a[a.LASER=0]="LASER",a[a.SCATTER=1]="SCATTER",a[a.ROBOT=2]="ROBOT"}(c||(c={}));var s=a("RankData",function(){function a(){this._index=0,this._id=0,this._name="",this._pickUpPB=[],this._finalWeaponPB=[],this._mercenaryPB=[],this._barrackPB=[]}return a.prototype.initData=function(a,t){this._index=a,this._id=t.id,this._name=t.name,this._pickUpPB=t.pickUpPB,this._finalWeaponPB=t.finalWeaponPB,this._mercenaryPB=t.mercenaryPB,this._barrackPB=t.barrackPB},e(a,[{key:"index",get:function(){return this._index}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"pickUpPB",get:function(){return this._pickUpPB}},{key:"finalWeaponPB",get:function(){return this._finalWeaponPB}},{key:"mercenaryPB",get:function(){return this._mercenaryPB}},{key:"barrackPB",get:function(){return this._barrackPB}}]),a}());s.MERCENARY_TYPE=o,s.FINAL_WEAPON_TYPE=c,n._RF.pop()}}}));

System.register("chunks:///_virtual/AssetsHelper.ts",["cc","./Dictionary.ts","./AssetsPackageDefine.ts","./JsonManager.ts"],(function(t){"use strict";var e,s,n,c;return{setters:[function(t){e=t.cclegacy},function(t){s=t.Dictionary},function(t){n=t.default},function(t){c=t.default}],execute:function(){e._RF.push({},"6c6c41XXHlBnoNltVO7ajyY","AssetsHelper",void 0);var i=t("AssetsHelper",function(){function t(){}return t.init=function(){t.Language=cc.sys.language;var e=[];c.getInstance().concatJosnPathList(e),t._assetDic.set(n.INIT_RES,e)},t.initGame=function(){},t.isChinese=function(){return cc.sys.LANGUAGE_CHINESE==t.Language},t.getSceneAssets=function(t){return this._assetDic.containsKey(t)?this._assetDic.get(t):null},t}());i.COMMON_ATLAS="res/atlas/common",i.COMMON_PREFABS_TOASTMESSAGE="prefab/common/toastMessage",i._assetDic=new s,e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioDownLoader.ts",["cc","./Log.ts"],(function(t){"use strict";var n,e,o;return{setters:[function(t){n=t.cclegacy,e=t.sys},function(t){o=t.Log}],execute:function(){n._RF.push({},"6cb2539LfBAErtrDJ1NVX4u","AudioDownLoader",void 0);var i=function(){function t(){}return t.getInstance=function(){return null==t.singleInstance&&(t.singleInstance=new t),t.singleInstance},t.prototype.downloadAudio=function(t,n){if(/^https/.test(t.url)){var i=t.url.lastIndexOf("/"),l=t.url.substr(i+1),a=new window.jsb.Downloader,r=window.jsb.fileUtils.getWritablePath()+l;o.log("下载地址==",r),e.isNative&&(r=e.platform===e.Platform.IOS?window.jsb.reflection.callStaticMethod("AudioManager","getStoragePath","")+l:window.jsb.reflection.callStaticMethod("com/rdgame/app_base/audio/AudioManager","getStoragePath","(Ljava/lang/String;)Ljava/lang/String;","test")+l,o.log("原生下载地址==",r)),window.jsb.fileUtils.isFileExist(r)?(o.log("已经下载了===="+r),t.url=r,t.rawUrl=r,t.name=l,n&&n(null,t)):(o.log("下载开始===="+t.url),a.createDownloadFileTask(t.url,r),o.log("下载开始===="+r),a.setOnFileTaskSuccess((function(e){o.log("下载成功"+JSON.stringify(e)),t.rawUrl=r,t.name=l,n(null,t)})),a.setOnTaskError((function(t){o.log("下载失败"+JSON.stringify(t))})))}else n("path is error",null)},t}();i.singleInstance=null;t("AudioDMgr",i.getInstance());n._RF.pop()}}}));

System.register("chunks:///_virtual/calculate-uv.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,s,a,l,n,i;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy,a=t._decorator,l=t.Sprite,n=t.v4,i=t.Component}],execute:function(){var r;s._RF.push({},"6cd31j10PZDaLaO4bQHXnsk","calculate-uv",void 0);var o=a.ccclass,u=a.menu,c=a.requireComponent,p=a.disallowMultiple;t("CalculateUV",o("CalculateUV")(r=c(l)(r=p(!0)(r=u("Utils/CalculateUV")(r=function(t){function s(){for(var e,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))||this)._sprite=null,e._mtlPass=null,e._offsetHandle=0,e._rotatedHandle=0,e}e(s,t);var a=s.prototype;return a.start=function(){this._sprite=this.getComponent(l),this._mtlPass=this._sprite.customMaterial.passes[0],this._offsetHandle=this._mtlPass.getHandle("uvOffset"),this._rotatedHandle=this._mtlPass.getHandle("uvRotated")},a.update=function(){var t=this._sprite.spriteFrame;if(t){var e=t.uv[0],s=t.uv[6],a=t.uv[5],l=t.uv[3],i=n(e,a,s,l),r=t.rotated?1:0;this._mtlPass.setUniform(this._offsetHandle,i),this._mtlPass.setUniform(this._rotatedHandle,r)}},s}(i))||r)||r)||r)||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/GameUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./EventManager.ts","./Constants.ts","./Log.ts","./ConstantCommon.ts","./PushControl.ts","./AppManager.ts","./UIBase.ts","./Simulator.ts","./guide-tips.ts"],(function(t){"use strict";var e,i,n,o,s,a,r,d,_,u,f,h,p,N,c,m,l,T,g,E;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t._decorator,s=t.Label,a=t.Sprite,r=t.UIOpacity,d=t.Tween,_=t.tween,u=t.v3},function(t){f=t.CommonUtils},function(t){h=t.EventManager},function(t){p=t.Constants},function(t){N=t.Log},function(t){c=t.ConstantCommon},function(t){m=t.PushControl},function(t){l=t.App},function(t){T=t.UIBase},function(t){g=t.Simulator},function(t){E=t.GuideTips}],execute:function(){var v;n._RF.push({},"6ed85rprbNO6IS/UEtXVFk5","GameUI",void 0);var A=o.ccclass;t("GameUI",A("GameUI")(v=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._guideTipArr=[],e._guideTipParentNode=null,e._guideTipNode=null,e._rankNode=null,e._rankItems=[],e._rankArr=[],e._buffParentNode=null,e._buffItemNode=null,e._buffDict=new Map,e._buffTipsNode=null,e._tutorialHandNode=null,e._brickCntNode=null,e._brickLblNode=null,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this._guideTipParentNode=f.getNodeByName(this.node,"guideTipsNode"),this._guideTipNode=f.getNodeByName(this._guideTipParentNode,"guideTips"),l.Pool.putNode(this._guideTipNode),this._rankNode=f.getNodeByName(this.node,"rankNode"),this._rankItems=this._rankNode.children,this._buffParentNode=f.getNodeByName(this.node,"buffNode"),this._buffItemNode=f.getNodeByName(this._buffParentNode,"buffItem"),l.Pool.putNode(this._buffItemNode),this._buffTipsNode=f.getNodeByName(this.node,"buffTipsNode"),this._buffTipsNode.active=!1;f.registerButtonEvent(this.node,"weaponBtnNode",this._onWeaponBtn,this);this._tutorialHandNode=f.getNodeByName(this.node,"tutorialHandNode"),this._tutorialHandNode.active=!0,this._brickCntNode=f.getNodeByName(this.node,"brickCntNode"),this._brickLblNode=f.getNodeByName(this._brickCntNode,"brickLbl"),l.Pool.putNode(this._brickLblNode),this._resetRankItems(),this._createBuffItems()},o.getUIName=function(){return"战斗界面"},o.show=function(){this.showUICnt++,this._initData(),this._registerCustomEvent(!0),this._gameStart(),this.showAd();var t=l.WeaponDataMgr.getCurrentWeaponData(),e=f.getNodeByName(this.node,"weaponBtnNode");f.getNodeComponent(e,"Label",s).string=t.name+", 攻击力:"+t.maxDamage+", 范围:"+t.areaScale+", 蓄力时间:"+t.chargeTime},o.hide=function(){this.resetGuideTip(),this._registerCustomEvent(!1),m.getInstance().setGamePlaying(!1)},o._initData=function(){this._buffTipsNode.active=!1,this._setGameTutorialActive(!0),this.resetGuideTip(),this._resetBuffItems(),this._resetRankItems()},o._gameStart=function(t,e){void 0===t&&(t=0),l.Event.emit(p.EVENT_TYPE.GAME_START),this.scheduleOnce((function(){e&&e()}),t)},o.showAd=function(){var t=this;this.scheduleOnce((function(){t._showAdvertisement()}),.3)},o._onWeaponBtn=function(){var t=l.WeaponDataMgr.getRandomWeaponData(),e=f.getNodeByName(this.node,"weaponBtnNode");f.getNodeComponent(e,"Label",s).string=t.name+", 攻击力:"+t.maxDamage+", 范围:"+t.areaScale+", 蓄力时间:"+t.chargeTime,l.Event.emit(p.EVENT_TYPE.SET_WEAPON_BTN,t)},o._registerCustomEvent=function(t){var e=t?"on":"off";l.Event[e](p.EVENT_TYPE.CLEAR_MAP_INFO,this._initData,this),l.Event[e](p.EVENT_TYPE.SHOW_BANNER_AD,this._showAdvertisement,this),l.Event[e](p.EVENT_TYPE.SET_GUIDE_TIP,this._setGuideTip,this),l.Event[e](p.EVENT_TYPE.REMOVE_GUIDE_TIP,this._removeGuideTip,this),l.Event[e](p.EVENT_TYPE.GAME_WIN,this._showConfettiEffect,this),l.Event[e](p.EVENT_TYPE.SET_BUFF_ITEM,this._setBuffItem,this),l.Event[e](p.EVENT_TYPE.SET_RANK_ITEM,this._updateRankArr,this),l.Event[e](p.EVENT_TYPE.SET_GAME_TUTORIAL,this._setGameTutorialActive,this),l.Event[e](p.EVENT_TYPE.SHOW_BRICK_COUNT,this._showBrickCnt,this),l.Event[e](p.EVENT_TYPE.SHOW_WARN_TIP,this._showWarnTips,this),l.Event[e](c.EVENT_TYPE.ADS_INTERSTITIALAD,this.showInterAdCallback,this)},o.showInterAdCallback=function(t){N.log("显示插屏",t),"success"===t?h.getInstance().emit(p.EVENT_TYPE.GAME_PAUSE):h.getInstance().emit(p.EVENT_TYPE.GAME_CONTINUE)},o._showConfettiEffect=function(){l.Audio.playSound(p.AUDIO_SOURCE_TYPE.CONGRATULATE),l.Event.emit(p.EVENT_TYPE.PLAY_CONFTTI_EFFECT,this.node.parent)},o._setGameTutorialActive=function(t){void 0===t&&(t=!1),this._tutorialHandNode.active=t},o._setGuideTip=function(t,e,i){var n=this._guideTipArr[t]?this._guideTipArr[t]:l.Pool.getNode(this._guideTipNode,this._guideTipParentNode);this._guideTipArr[t]=n,n.getComponent(E).setGuideTarget(e,i)},o._removeGuideTip=function(t){void 0===t&&(t=0),this._guideTipArr[t]&&l.Pool.putNode(this._guideTipArr[t])},o.resetGuideTip=function(){for(var t=0;t<this._guideTipArr.length;t++){var e=this._guideTipArr[t];l.Pool.putNode(e)}this._guideTipArr=[]},o._createBuffItems=function(){for(var t=0;t<p.BUFF_TYPE.LENGTH;t++){var e=l.Pool.getNode(this._buffItemNode,this._buffParentNode);this._buffDict.set(t.toString(),e)}this._resetBuffItems()},o._resetBuffItems=function(){for(var t,e=i(this._buffDict);!(t=e()).done;){var n=t.value,o=n[0],s=n[1];f.getNodeByName(s,"lightSpt").active=!1;var _=f.getNodeComponent(s,"buffSpt",a),u=f.getNodeComponent(s,"valueSpt",a),h=f.getNodeComponent(s,s.name,r);d.stopAllByTarget(u),d.stopAllByTarget(h),h.opacity=255,_.spriteFrame=l.SptFrame.getSpriteFrameByName("Game_Image_Buff_"+o),u.fillRange=0,s.active=!1}},o._setBuffItem=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),(!i||t.type!=p.BUFF_TYPE.GET)&&this._buffDict.has(t.type.toString())){var n=this._buffDict.get(t.type.toString()),o=f.getNodeComponent(n,"valueSpt",a),s=f.getNodeComponent(n,n.name,r);f.getNodeByName(n,"lightSpt").active=2==t.level,d.stopAllByTarget(o),d.stopAllByTarget(s),s.opacity=255,o.fillRange=e?1:0,g.instance.getCurTime()>10&&this._showBuffTips(t),n.active=!0,n.setSiblingIndex(0),_(s).delay(i?12.5:7.5).to(.5,{opacity:0}).to(.5,{opacity:255}).to(.5,{opacity:0}).to(.5,{opacity:255}).to(.5,{opacity:0}).start(),_(o).to(i?15:10,{fillRange:0}).call((function(){n.active=!1})).start()}},o._showBuffTips=function(t){var e=this;d.stopAllByTarget(this._buffTipsNode),this._buffTipsNode.active=!1;var i=f.getNodeComponent(this._buffTipsNode,this._buffTipsNode.name,a);i.spriteFrame=null,this._buffTipsNode.position=u(0,100,0),this._buffTipsNode.active=!0,i.spriteFrame=l.SptFrame.getSpriteFrameByName("Game_Tips_Buff"+t.type),_(this._buffTipsNode).to(.2,{position:u(0,200,0)}).delay(1.5).call((function(){e._buffTipsNode.active=!1})).start()},o._showWarnTips=function(t,e){var i=this;void 0===e&&(e=1.5),d.stopAllByTarget(this._buffTipsNode),this._buffTipsNode.active=!1;var n=f.getNodeComponent(this._buffTipsNode,this._buffTipsNode.name,a);n.spriteFrame=null,this._buffTipsNode.position=u(0,100,0),this._buffTipsNode.active=!0,n.spriteFrame=l.SptFrame.getSpriteFrameByName("Game_Tips_Warn"+t),_(this._buffTipsNode).to(.2,{position:u(0,200,0)}).delay(e).call((function(){i._buffTipsNode.active=!1})).start()},o._updateRankArr=function(t,e,i,n,o){if(void 0===i&&(i=!1),void 0===n&&(n=0),void 0===o&&(o=!1),-1!=t){for(var s=!1,a=-1,r=0;r<this._rankArr.length;r++)t!=this._rankArr[r].type||(s=!0,this._rankArr[r].soldierCnt=e,this._rankArr[r].UAVCnt=n,this._rankArr[r].isTank=o,a=r);!i&&!s&&this._rankArr.push({type:t,soldierCnt:e,UAVCnt:n,isTank:o}),i&&s&&this._rankArr.splice(a,1),this._rankArr.sort((function(t,e){return t.soldierCnt+3*t.UAVCnt>e.soldierCnt+3*e.UAVCnt||t.isTank?-1:1})),this._setRankItems()}},o._setRankItems=function(){for(var t=0;t<this._rankItems.length;t++){var e=this._rankItems[t],i=this._rankArr[t];if(i){e.active=!0;var n=f.getNodeByName(e,"UAV_parent"),o=f.getNodeComponent(e,e.name,a),r=f.getNodeComponent(e,"soldierSpt",a),d=f.getNodeComponent(e,"rankLbl",s),_=f.getNodeComponent(e,"soldierCntLbl",s);d.string=t+1+".",_.string=i.soldierCnt.toString(),_.node.active=!i.isTank,r.spriteFrame=l.SptFrame.getSpriteFrameByName(i.isTank?"Game_Image_Tank":"Game_Image_Soldier"+i.type%5),o.spriteFrame=l.SptFrame.getSpriteFrameByName("Game_Image_RankFrame"+(i.type==l.RankDataMgr.getPlayerRankTeamType()?"2":"1"));for(var u=0;u<n.children.length;u++)n.children[u].active=i.UAVCnt>u}else e.active=!1}},o._resetRankItems=function(){this._rankArr=[];for(var t=0;t<this._rankItems.length;t++){var e=this._rankItems[t],i=f.getNodeComponent(e,"soldierSpt",a),n=f.getNodeComponent(e,"rankLbl",s),o=f.getNodeComponent(e,"soldierCntLbl",s);n.string=t+1+".",o.string="",i.spriteFrame=null,e.active=!1}},o._showBrickCnt=function(t,e){void 0===t&&(t=1),void 0===e&&(e=u());var i=l.GameData.curCamera,n=l.Pool.getNode(this._brickLblNode,this._brickCntNode);n.getComponent(s).string=(t>0?"+":"")+t;var o=u();i.convertToUINode(e,this._brickCntNode,o),n.setPosition(o.x,o.y+100,0),_(n).by(.5,{position:u(0,150,0)},{easing:"cubicOut"}).call((function(){l.Pool.putNode(n)})).start()},o._showAdvertisement=function(){m.getInstance().setGamePlaying(!0),this.isTTPlatform?l.Ads.hideBannerAd():l.Ads.showBannerAd()},n}(T))||v);n._RF.pop()}}}));

System.register("chunks:///_virtual/MercenaryMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RankData.ts","./AppManager.ts","./hitColor.ts","./Common.ts","./Simulator.ts","./EnemyAIMgr.ts","./LightningBulletMgr.ts","./TrajectoryBulletMgr.ts","./SoldierAgentMgr.ts","./BloodBarMgr.ts","./PlayerMgr.ts"],(function(t){"use strict";var e,o,n,i,a,r,s,l,d,h,c,u,_,g,p,m,P,T,f,y,N,M,v,A,C,R,E,S,w;return{setters:[function(t){e=t.inheritsLoose,o=t.createClass,n=t.asyncToGenerator},function(t){i=t.cclegacy,a=t._decorator,r=t.Vec3,s=t.tween,l=t.v3,d=t.find,h=t.math,c=t.Component,u=t.MeshRenderer,_=t.color,g=t.Quat,p=t.ParticleUtils},function(t){m=t.CommonUtils},function(t){P=t.Constants},function(t){T=t.RankData},function(t){f=t.App},function(t){y=t.HitColor},function(t){N=t.Vector2,M=t.RVOMath},function(t){v=t.Simulator},function(t){A=t.EnemyAIMgr},function(t){C=t.LightningBulletMgr},function(t){R=t.TrajectoryBulletMgr},function(t){E=t.SoldierAgentMgr},function(t){S=t.BloodBarMgr},function(t){w=t.PlayerMgr}],execute:function(){var B;i._RF.push({},"6f50aetXolGBZLNXd6JZkcV","MercenaryMgr",void 0);var D=a.ccclass;t("MercenaryMgr",D("MercenaryMgr")(B=function(t){function i(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._characterNode=null,e._aid=-1,e._teamType=-1,e._targetNode=null,e._shootTargetNode=null,e._isInit=!1,e._initPos=r.ZERO,e._leaderComp=null,e._isRunning=!1,e._weaponType=T.MERCENARY_TYPE.ASSAULT,e._curHP=0,e._shootTime=0,e._shootIntervalTime=0,e._hitColorMgr=null,e.bloodBarMgr=null,e}e(i,t);var a=i.prototype;return a.onLoad=function(){this._characterNode=m.getNodeByName(this.node,"characterNode")},a.onDisable=function(){this.unscheduleAllCallbacks(),this._registerCustomEvent(!1),this._resetData()},a.gameWin=function(){s(this.node).to(.1,{eulerAngles:l(0,180,0)}).start()},a.init=function(t,e,o,n,i){var a=this;void 0===i&&(i=0),this.weaponType=i,this._leaderComp=n,this._targetNode=e,this._teamType=t,this._loadMtl(),this._initPos=o,this.node.setWorldPosition(o);var r=new N(o.x,o.z),s=v.instance.addAgent(r);v.instance.setAgentMass(s,1),this._aid=s,this._isRunning=!1,this._shootTargetNode=null,this.node.setWorldRotation(this._targetNode.worldRotation),this.HP=this.totalHP,this._shootTime=0,this._shootIntervalTime=f.RankDataMgr.getMercenaryShootIntervalTime(this.weaponType),v.instance.buildAgentTree(),this._resetCollider(),this._registerCustomEvent(!0);this.node.scale=l(1.2,1.2,1.2),this._leaderComp.updateScale(),this._initBloodBar(),this.scheduleOnce((function(){v.instance.setAgentPosition(a._aid,r),a._isInit=!0}),.25)},a._initBloodBar=function(t){var e=this;void 0===t&&(t=l(0,150,0)),this.bloodBarMgr&&f.Pool.putNode(this.bloodBarMgr.node),this.bloodBarMgr=null,f.Res.loadPrefab("prefab/ui/item/bloodBarItem").then((function(o){var n=d("Canvas/BloodBarParentNode"),i=f.Pool.getNode(o,n);m.getNodeComponent(i,i.name,S).init(e,t)}))},a._loadMtl=function(){var t=this;f.Res.loadPrefab("UAV/UAV_"+this.weaponType,"prefab").then((function(e){t._characterNode.children[0]&&f.Pool.putNode(t._characterNode.children[0]);var o=f.Pool.getNode(e,t._characterNode);t._hitColorMgr=null,t._hitColorMgr=m.getNodeComponent(o,t.weaponType==T.MERCENARY_TYPE.ASSAULT?"jishen":"js",y)}))},a._resetData=function(){var t,e;this.bloodBarMgr&&f.Pool.putNode(this.bloodBarMgr.node),this.bloodBarMgr=null,this._isInit=!1,null===(t=this._leaderComp)||void 0===t||t.addMercenaryPoint(this._targetNode),null===(e=this._leaderComp)||void 0===e||e.updateMercenaryNode(this.node),v.instance.removeAgent(this._aid),this._leaderComp=null,this._targetNode=null,this._shootTargetNode=null,this._aid=-1,this._initPos=r.ZERO},a.removeSoldier=function(t,e){var o=this;if(void 0===t&&(t=!1),void 0===e&&(e=-1),this._registerCustomEvent(!1),this._resetData(),t){var n=f.RankDataMgr.getPlayerRankTeamType();(this.teamType==n||e==n)&&f.Audio.playSound(P.AUDIO_SOURCE_TYPE.SOLDIER_DEAD,.6),this.scheduleOnce((function(){f.Pool.putNode(o.node)}))}else f.Pool.putNode(this.node)},a._registerCustomEvent=function(t){m.getNodeByName(this.node,"hitPoint")},a._resetCollider=function(){this._shootTargetNode=null},a.setShootTargetNode=function(t){var e=r.squaredDistance(this.node.worldPosition,t.worldPosition);this._shootTargetNode||!this._isInit||!f.GameData.isInGame()||e>625||(this._shootTargetNode=t)},a.resetShootTargetNode=function(t){this._isInit&&f.GameData.isInGame()&&this._shootTargetNode==t&&this._resetCollider()},a._setPreferredVelocities=function(){var t,e=new N(this._targetNode.worldPosition.x,this._targetNode.worldPosition.z),o=v.instance.getAgentPosition(this._aid);this._leaderComp&&r.squaredDistance(this.node.worldPosition,null===(t=this._leaderComp)||void 0===t?void 0:t.node.worldPosition)>2500&&o.setPos(e.x,e.y),v.instance.setAgentPosition(this._aid,o);var n=e.minus(o);if(M.absSq(n)>1){var i=this._shootTargetNode?3:P.AGENT_SPEED,a=this._shootTargetNode?P.AGENT_SPEED:P.AGENT_SPEED+10,s=h.lerp(i,a+5,M.absSq(n)/100);if(this._leaderComp){var l=this._leaderComp.getBuffData(P.BUFF_TYPE.SPEED);l&&2==l.level?s*=2:l&&1==l.level&&(s*=1.5)}n=M.normalize(n).scale(s)}if(M.absSq(n)<1){if(v.instance.setAgentPrefVelocity(this._aid,new N(0,0)),this._shootTargetNode){var d=this._shootTargetNode.worldPosition.clone().subtract(this.node.worldPosition).normalize();this._characterNode.setWorldRotationFromEuler(0,h.toDegree(Math.atan2(-d.z,d.x))+90,0)}else this._characterNode.setWorldRotation(this._targetNode.worldRotation);this._isRunning&&(this._isRunning=!1)}else{v.instance.setAgentPrefVelocity(this._aid,n);var c=2*Math.random()*Math.PI,u=1e-4*Math.random();v.instance.setAgentPrefVelocity(this._aid,v.instance.getAgentPrefVelocity(this._aid).plus(new N(Math.cos(c),Math.sin(c)).scale(u)));var _=(this._shootTargetNode?this._shootTargetNode:this._targetNode).worldPosition.clone().subtract(this.node.worldPosition).normalize();this._characterNode.setWorldRotationFromEuler(0,h.toDegree(Math.atan2(-_.z,_.x))+90,0),this._isRunning||(this._isRunning=!0)}},a.update=function(t){if(f.GameData.isInGame()&&this._isInit&&this._targetNode&&v.instance.hasAgent(this._aid)){this._setPreferredVelocities(),v.instance.agentRun(this._aid,t);var e=v.instance.getAgentPosition(this._aid),o=l(e.x,0,e.y);this.node.setWorldPosition(o),this._shootTargetNode&&(this._shootTime+=t,this._shootTime>=this._shootIntervalTime&&(this._shootTime=0,this.Shoot()))}},a.Shoot=function(){var t=n(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.Res.loadPrefab(this.weaponType==T.MERCENARY_TYPE.SMART?"bullet":"shootBall_"+this.weaponType,"prefab").then((function(t){if(f.GameData.isInGame()&&e._shootTargetNode){var o=r.distance(e.node.worldPosition,e._shootTargetNode.worldPosition),n=m.getParentComponent(e._shootTargetNode,"soldier",E)||m.getParentComponent(e._shootTargetNode,"enemyAI",A)||m.getParentComponent(e._shootTargetNode,"playerMgr",w)||m.getParentComponent(e._shootTargetNode,"mercenary",i);if(!n.isCanShoot||n.HP<=0||o>25)e._resetCollider();else{var a=f.RankDataMgr.getPlayerRankTeamType(),d=e.teamType==a||n.teamType==a,h=m.getNodeByName(e._characterNode,"shootPoint"),c=e.damage;if(e.weaponType==T.MERCENARY_TYPE.SMART){d&&f.Audio.playSound(P.AUDIO_SOURCE_TYPE.UAV_SMART);var y=f.Pool.getNode(t,e.node.parent);m.getNodeComponent(y,"Cube",u).material.setProperty("mainColor",_("#000000"));var N=h.worldPosition.clone();y.setWorldPosition(N);var M=e._shootTargetNode.worldPosition.clone();M.y=n instanceof i?7:3;var v=M.subtract(N).normalize(),S=new g;g.rotationTo(S,l(0,0,1),v),y.setWorldRotation(S),y.setScale(1.5,1.5,o),n.HP-c<=0&&e._resetCollider(),n.HitByBullet(c,e.teamType),s(y).delay(.05).call((function(){return f.Pool.putNode(y)})).start()}else if(e.weaponType==T.MERCENARY_TYPE.ASSAULT){d&&f.Audio.playSound(P.AUDIO_SOURCE_TYPE.UAV_ASSAULT);var B=f.Pool.getNode(t,e.node.parent);B.setWorldPosition(h.worldPosition.clone()),B.getComponent(C).init(n,e.teamType,c)}else{d&&f.Audio.playSound(e.weaponType==T.MERCENARY_TYPE.SCATTER?P.AUDIO_SOURCE_TYPE.UAV_SCATTER:P.AUDIO_SOURCE_TYPE.UAV_HEAVY);var D=f.RankDataMgr.getMercenaryBulletArr(e.weaponType),I=l();h.worldRotation.getEulerAngles(I);for(var b=0;b<D.length;b++){var U=f.Pool.getNode(t,e.node.parent),k=h.worldPosition.clone();U.setWorldPosition(k),U.setRotationFromEuler(7,I.y+D[b],0),U.getComponent(R).init(e,c)}}p.play(h)}}}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.HitByBullet=function(t,e,o){var n,i;this.HP<=0||this._leaderComp&&this._leaderComp.getBuffData(P.BUFF_TYPE.INVINCIBLE)||(this.HP-=t,null===(n=this.bloodBarMgr)||void 0===n||n.updateBlood(-t),null===(i=this._hitColorMgr)||void 0===i||i.init(),this.HP<=0&&this.removeSoldier(!0,e))},o(i,[{key:"teamType",get:function(){return this._teamType}},{key:"weaponType",get:function(){return this._weaponType},set:function(t){this._weaponType=t}},{key:"HP",get:function(){return this._curHP},set:function(t){this._curHP=t}},{key:"totalHP",get:function(){return f.RankDataMgr.getMercenaryHP(this.weaponType)}},{key:"damage",get:function(){return f.RankDataMgr.getMercenaryDamage(this.weaponType)}},{key:"isCanShoot",get:function(){return!0}}]),i}(c))||B);i._RF.pop()}}}));

System.register("chunks:///_virtual/ICannonSharedBody.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"6fc00/W3hVOu6AMdcXlInUt","ICannonSharedBody",void 0);n("ICannonSharedBody",function(){function n(){}return t(n,[{key:"body",get:function(){return this._body},set:function(n){this._body=n}},{key:"world",get:function(){return this._world},set:function(n){this._world=n}}]),n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ADMainPush.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Log.ts","./RDCommand.ts","./GameListManger.ts","./RDPlatformManager.ts"],(function(e){"use strict";var n,t,i,a,o,s,g,m,h,r,l,c,u,d,C,f,I,p;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){i=e.cclegacy,a=e._decorator,o=e.Size,s=e.LabelComponent,g=e.tween,m=e.v3,h=e.loader,r=e.SpriteComponent,l=e.SpriteFrame,c=e.UITransformComponent,u=e.Component},function(e){d=e.CommonUtils},function(e){C=e.Log},function(e){f=e.RDCommand},function(e){I=e.default},function(e){p=e.RDPlatformManager}],execute:function(){var y;e("PUSH_TYPE",void 0),i._RF.push({},"7123dNBm59LooYL/1yy38HG","ADMainPush",void 0);var N,S=a.ccclass;!function(e){e[e.MAINPUSH=0]="MAINPUSH"}(N||(N=e("PUSH_TYPE",{})));e("ADMainPush",S("ADMainPush")(y=function(e){function i(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this).gameConfig=null,n.gameIcon=null,n.gameName=null,n.pushType=N.MAINPUSH,n._loadImage=!1,n.initSize=new o(98,119),n.initIconSize=new o(85,85),n}n(i,e);var a=i.prototype;return a.onLoad=function(){this.node.getChildByName("bg").active=!1,this.node.getChildByName("red").active=!1,this.gameName=this.node.getChildByName("gameName").getComponent(s),this.gameName.string="",this.gameIcon=d.getNodeByName(this.node,"icon"),this.gameIcon.on("click",this.toGame,this)},a.toGame=function(){C.log("点击游戏图标");var e=this.gameConfig;p.getInstance().sendData(f.CMD_TO_MINIPROGRAM,e),p.getInstance().sendData(f.CMD_DATA_STATISTICS,{event:!0,ad_type:f.STATISTICS_GAME_ICON_SHARE})},a.setPosition=function(e){this.node.setPosition(e)},a.shake2D=function(e){var n=30;g(e).delay(1.5).by(.1,{eulerAngles:m(0,0,n)},{easing:"sineOut"}).by(.05,{eulerAngles:m(0,0,-30)},{easing:"sineIn"}).by(.1,{eulerAngles:m(0,0,-30)},{easing:"sineOut"}).by(.05,{eulerAngles:m(0,0,n)},{easing:"sineIn"}).by(.1,{eulerAngles:m(0,0,15)},{easing:"sineOut"}).by(.05,{eulerAngles:m(0,0,-15)},{easing:"sineIn"}).by(.1,{eulerAngles:m(0,0,-15)},{easing:"sineOut"}).by(.05,{eulerAngles:m(0,0,15)},{easing:"sineIn"}).union().repeatForever().start()},a.freash=function(e){var n=this;if(void 0===e&&(e=null),this.node.active&&(!this.gameConfig||this._loadImage||this.gameConfig!=e)&&(this.gameConfig=e||I.getInstance().getRandGameConfig(),this.gameConfig&&(this.gameConfig.url||this.gameConfig.icon))){this.gameConfig.name=this.gameConfig.name.substr(0,Math.min(this.gameConfig.name.length,6));var t="adUI/ui/icon/"+this.gameConfig.url+"/spriteFrame";this.gameConfig.icon?(t=this.gameConfig.icon,this.gameName&&(this.gameName.string=this.gameConfig.name),h.load(t,function(e,n){if(e)return C.log("下载错误========="+e),void(this._loadImage=!1);if(this.node.getChildByName("bg").active=!0,this.node.getChildByName("red").active=!0,this.gameIcon){var t=this.gameIcon.getComponent(r).spriteFrame;t?t.texture=n._texture:((t=new l).texture=n._texture,this.gameIcon.getComponent(r).spriteFrame=t)}this._loadImage=!0}.bind(this))):(this.gameName&&(this.gameName.string=this.gameConfig.name),h.loadRes(t,l,null,(function(e,t){if(e)return console.warn(e),void(n._loadImage=!1);n.node.getChildByName("bg").active=!0,n.node.getChildByName("red").active=!0,n.gameIcon&&(n.gameIcon.getComponent(r).spriteFrame=t),n._loadImage=!0})))}},a.setScale=function(e){e&&(this.node.getComponent(c).setContentSize(this.initSize.width*e,this.initSize.height*e),this.node.getChildByName("gameName").getComponent(s).fontSize=15*e,this.node.getChildByName("gameName").getComponent(s).lineHeight=15*e,this.node.getChildByName("iconNode").getComponent(c).setContentSize(this.initIconSize.width*e,this.initIconSize.height*e))},t(i,[{key:"type",set:function(e){this.pushType=e,N.MAINPUSH}}]),i}(u))||y);i._RF.pop()}}}));

System.register("chunks:///_virtual/AppManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./PoolManager.ts","./UIManager.ts","./GameData.ts","./AudioManager.ts","./RDAssetManager.ts","./SpriteFrameManager.ts","./RDCommand.ts","./OptionsManager.ts","./RDStatisticsManager.ts","./AdsManager.ts","./PushControl.ts","./RDPlatformManager.ts","./AccountData.ts","./MapData.ts","./AchievementData.ts","./RankData.ts","./PlayerSkinData.ts","./HttpManager.ts","./WeaponData.ts"],(function(t){"use strict";var n,e,a,r,i,u,o,c,s,g,f,M,D,l,p,k,m,y,I,A,d,R;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},function(t){a=t.EventManager},function(t){r=t.PoolManager},function(t){i=t.UIManager},function(t){u=t.GameData},function(t){o=t.AudioManager},function(t){c=t.RDAssetManager},function(t){s=t.SpriteFrameManager},function(t){g=t.RDCommand},function(t){f=t.default},function(t){M=t.RDStatisticsManager},function(t){D=t.AdsManager},function(t){l=t.PushControl},function(t){p=t.RDPlatformManager},function(t){k=t.default},function(t){m=t.MapDataMgr},function(t){y=t.AchievementDataMgr},function(t){I=t.RankDataMgr},function(t){A=t.PlayerSkinDataMgr},function(t){d=t.HttpManager},function(t){R=t.WeaponDataMgr}],execute:function(){e._RF.push({},"713f1qi+69IcbZgSvd7raTv","AppManager",void 0);t("App",function(){function t(){}return t.initLocalData=function(){this.SkinDataMgr.init(),this.RankDataMgr.init(),this.WeaponDataMgr.init()},t.setPhoneVibrate=function(t){void 0===t&&(t=!1),this.Account.settingInfo.isVibrate&&this.Platform.sendData(g.CMD_SHAKE,t?100:null)},t.playBgm=function(n){void 0===n&&(n=!1);var e=t.GameData.settingInfo.musicVolume;console.log("播放音效");var a=n?"bgm_game":"bgm_main";t.Audio.playMusicByUrl(a,!1,e,0)},t.stopBgm=function(){t.Audio.stopMusic()},n(t,null,[{key:"Event",get:function(){return a.getInstance()}},{key:"Pool",get:function(){return r.getInstance()}},{key:"Res",get:function(){return c.getInstance()}},{key:"UI",get:function(){return i.getInstance()}},{key:"Http",get:function(){return d.getInstance()}},{key:"GameData",get:function(){return u.getInstance()}},{key:"Audio",get:function(){return o.getInstance()}},{key:"RDAsset",get:function(){return c.getInstance()}},{key:"SptFrame",get:function(){return s.getInstance()}},{key:"Account",get:function(){return k.getInstance()}},{key:"SkinDataMgr",get:function(){return A.getInstance()}},{key:"WeaponDataMgr",get:function(){return R.getInstance()}},{key:"RankDataMgr",get:function(){return I.getInstance()}},{key:"MapDataMgr",get:function(){return m.getInstance()}},{key:"AchievementDataMgr",get:function(){return y.getInstance()}},{key:"Platform",get:function(){return p.getInstance()}},{key:"Options",get:function(){return f.getInstance()}},{key:"Ads",get:function(){return D.getInstance()}},{key:"PushCtrl",get:function(){return l.getInstance()}},{key:"Stats",get:function(){return M.getInstance()}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/DirectoryAsset.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){r=t.cclegacy}],execute:function(){var c;r._RF.push({},"725356k66hLUK2c5VArklVN","DirectoryAsset",void 0);var s=cc._decorator,i=s.ccclass;s.property,t("default",i("DirectoryAsset")(c=function(t){function r(){return t.apply(this,arguments)||this}e(r,t),r.create=function(t){var e=new r;return e.setType(t),e},r.getType=function(t){return t instanceof r?t.getType():null},r.is=function(t){return t===r||t instanceof r};var c=r.prototype;return c.getType=function(){return this._type},c.setType=function(t){this._type=t},n(r,[{key:"name",get:function(){return r.name}}]),r}(cc.Asset))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/RDVIVOMiniPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Log.ts","./RDPlatformType.ts","./RDPlatformParam.ts","./OptionsManager.ts","./Utils.ts","./RDPlatform.ts","./PushControl.ts"],(function(n){"use strict";var t,e,a,i,o,s,r,c,l,d;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){a=n.EventManager},function(n){i=n.Log},function(n){o=n.RDPlatformType},function(n){s=n.RDPlatformParam},function(n){r=n.default},function(n){c=n.Utils},function(n){l=n.RDPlatform},function(n){d=n.PushControl}],execute:function(){e._RF.push({},"73ac7Xvz95OkK0IzPLn1hP/","RDVIVOMiniPlatform",void 0);n("RDVIVOMiniPlatform",function(n){function e(t){var e;return(e=n.call(this,t)||this).lastBannerIsShow=!1,e}t(e,n);var l=e.prototype;return l.loadStorageData=function(n,t,e){var a=n[0],i=window.qg.getStorageSync({key:a}),o=""===i?i:JSON.parse(i);t&&t(o)},l.flushStorageData=function(n,t){window.qg.setStorageSync({key:n.key,value:JSON.stringify(n.data)})},l.initAD=function(){var t=this;this._systemInfo=window.qg.getSystemInfoSync(),console.log("系统信息",JSON.stringify(this._systemInfo)),this._showGamePortalAd(null),n.prototype.initAD.call(this),this._login(null),this._hasShortcutInstalled=!0;var e=s.ADPARAM[o.VIVOGame.toString()].video_id;if(window.qg.createRewardedVideoAd&&(i.log("成交1111111111111=="),this._videoBoxInstance=window.qg.createRewardedVideoAd({posId:e}),this._videoBoxInstance.onLoad((function(){i.log("视频广告加载成功")})),this._videoBoxInstance.onError((function(n){t._showToast("暂时没有视频了，请稍后再试"),i.log("videoAd.onError,errMsg",JSON.stringify(n)),t._rewardCaback&&t._rewardCaback.fail()})),this._videoBoxInstance.onClose((function(n){n&&n.isEnded||void 0===n?(i.log("正常播放结束，可以下发游戏奖励"),t._rewardCaback&&t._rewardCaback.success(null)):t._rewardCaback&&(i.log("播放中途退出，不下发游戏奖励",n),t._rewardCaback.fail())}))),!this._bannerADInstance){var a=s.ADPARAM[o.VIVOGame.toString()].banner_id,r=window.qg.createBannerAd({posId:a,style:{}});r.onError(function(n){i.log("banner 广告失败",JSON.stringify(n))}.bind(this)),r.onLoad((function(){i.log("banner 广告加载成功")})),r.onClose((function(){i.log("banner 广告关闭"),n.prototype._showBannerAd.call(t,!0)})),this._bannerADInstance=r}},l.shareAppMessage=function(n){},l._showToast=function(n){window.qg.showToast({message:n})},l._gotoMiniGameByAppid=function(n){window.qg.navigateToMiniProgram({appId:n.packName,success:function(){},fail:function(){},complete:function(){}})},l._vibrateShort=function(n){void 0===n&&(n=50),100!=n?this.vibrate(n):this.vibrateStrong()},l.vibrateStrong=function(){window.qg.vibrateLong({success:function(){},fail:function(){},complete:function(){}})},l.vibrate=function(n){(new Date).getTime()-this._lastShakeTime<100||(this._lastShakeTime=(new Date).getTime(),window.qg.vibrateShort({success:function(){},fail:function(){},complete:function(){}}))},l._showBannerAd=function(t){var e=this;if(this.isReviewed())i.log("审核中=====");else{if(!this._bannerADInstance){var a=s.ADPARAM[o.VIVOGame.toString()].banner_id,r=window.qg.createBannerAd({posId:a,style:{}});r.onError(function(n){i.log("banner 广告失败",JSON.stringify(n))}.bind(this)),r.onLoad((function(){i.log("banner 广告加载成功")})),r.onClose((function(){i.log("banner 广告关闭"),n.prototype._showBannerAd.call(e,!0)})),this._bannerADInstance=r}this._bannerADInstance&&this._bannerADInstance.show().then((function(){i.log("banner广告展示完成"),e._bannerShow=!0})).catch((function(n){i.log("banner广告展示失败",JSON.stringify(n))}))}},l._showGameBannerAd=function(n){if(i.log("vivo横幅广告显示"),!this._gameBannerADInstance){i.log("创建oppo横幅广告");var t=s.ADPARAM[o.VIVOGame.toString()].game_banner_id;window.qg.createBoxBannerAd?(this._gameBannerADInstance=window.qg.createBoxBannerAd({posId:t}),this._gameBannerADInstance.onError((function(n){i.log("盒子横幅广告加载失败",JSON.stringify(n))}))):i.log("暂不支持互推盒子相关 API")}this._gameBannerADInstance&&this._gameBannerADInstance.show().then((function(){i.log("vivo横幅广告 显示成功"),setTimeout((function(){a.getInstance().emit("menuUp")}),.1)})).catch((function(n){i.log("vivo横幅广告 显示失败:"+n.errCode+","+n.errMsg)}))},l._hideGameBannerAd=function(n){i.log("vivo横幅广告隐藏"),null!=this._gameBannerADInstance&&(this._gameBannerADInstance.destroy(),this._gameBannerADInstance=null)},l._showGamePortalAd=function(n){var t=this;if(this._gamePortalADInstance=null,this._isShowGamePortalAd=!0,!this._gamePortalADInstance){var e=s.ADPARAM[o.VIVOGame.toString()].game_portal_id;window.qg.createBoxPortalAd?(i.log("_showGamePortalAd_"+e),this._gamePortalADInstance=window.qg.createBoxPortalAd({posId:e,marginTop:250}),this._gamePortalADInstance.onError((function(n){i.log("互推盒子九宫格广告 错误"+JSON.stringify(n)),t._isShowGamePortalAd=!1})),this._gamePortalADInstance.onClose((function(){i.log("互推盒子九宫格广告关闭"),t._isShowGamePortalAd=!1,t._gamePortalADInstance.isDestroyed||t._gamePortalADInstance.show()})),this._gamePortalADInstance.onShow((function(n){t._hideBannerAd(null)})),this._gamePortalADInstance.show().then((function(){console.log("show success")})).catch((function(n){console.log("show fail with:"+n.errCode+","+n.errMsg)}))):i.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")}},l._hideGamePortalAd=function(n){this._gamePortalADInstance&&(this._gamePortalADInstance.isDestroyed=!0,this._gamePortalADInstance.destroy(),this._gamePortalADInstance=null)},l._showVideo=function(n){var t=this;if(this.isReviewed())this._rewardCaback&&this._rewardCaback.success(null);else{i.log("准备激励广告 展示开始");var e=this;this._videoBoxInstance.load(),this._videoBoxInstance.onLoad((function(){i.log("激励广告 展示开始"),e._videoBoxInstance.show().then((function(){i.log("激励视频广告展示完成")})).catch((function(n){i.log("激励视频广告展示失败",JSON.stringify(n)),t._rewardCaback&&t._rewardCaback.fail()}))}))}},l._showIntertitalAd=function(t){var e=this;this.isReviewed()||(i.log("插屏广告开始"),this._showTemplateNative((function(){if(e.isBtnFadeIn()||1==t.type){i.log("插屏广告开始"),n.prototype._showIntertitalAd.call(e,null);var a=s.ADPARAM[o.VIVOGame.toString()].interstital_id;e._interstitialAdInstance=window.qg.createInterstitialAd({posId:a}),e._interstitialAdInstance&&(e._interstitialAdInstance.onLoad((function(){i.log("插屏 广告加载成功")})),e._interstitialAdInstance.onError((function(n){i.log("插屏失败"+n)})),e._interstitialAdInstance.onClose((function(n){i.log("插屏 广告关闭")})),e._interstitialAdInstance.show().then((function(){i.log("插屏广告展示完成")})).catch((function(n){i.log("插屏广告展示失败",JSON.stringify(n))})))}})))},l._showTemplateNative=function(n){var t=this;if(this.isBtnFadeIn()){if(window.qg.createCustomAd){console.log("原生模板广告展示",this._nativeID[this._nativeIdCurrent],this._nativeID.length);var e=window.qg.createCustomAd({posId:this._nativeID[this._nativeIdCurrent],style:{left:0,top:this._systemInfo.screenHeight/2-150}});e.onError((function(t){console.log("原生模板广告加载失败",t),null==n||n()})),e.onClose((function(){var n;console.log("原生模板广告关闭"),null===(n=e.destroy)||void 0===n||n.call(e),d.getInstance().showBgMask(!1),t.lastBannerIsShow&&t._showBannerAd(null)})),e.show().then((function(){t.lastBannerIsShow=t._bannerShow,console.log("原生模板广告展示完成"),d.getInstance().showBgMask(!0),t._hideBannerAd(null)})),this._nativeIdCurrent++,this._nativeIdCurrent>=this._nativeID.length&&(this._nativeIdCurrent=0)}}else null==n||n()},l.initInterval=function(){},l.initNativeAd=function(n){},l._createNativeAd=function(n){if(i.log("获取原生广告",JSON.stringify(n)),this._nativeAdParam.length<=0)return i.log("原生广告未加载成功，稍后重试"),n.callback.fail();i.log("获取前原生广告id",this._nativeAdParam);var t=this._nativeAdParam.shift();i.log("成功获取原生广告参数",t.nativeId,JSON.stringify(t)),n.callback&&n.callback.success(t.param),this._nativeAdParam.push(t),i.log("原生广告参数后顺序调换",t.nativeId,JSON.stringify(t))},l._reportAdShow=function(n){c.random(0,100)<=r.getInstance().getConfigByKey("native_report",100)&&this._nativeADInstances.has(n.name)&&this._nativeADInstances.get(n.name).reportAdShow({adId:n.adId})},l._nativeAdClick=function(n){i.log("点击原生广告",JSON.stringify(n)),this._nativeADInstances.has(n.name)&&(i.log("点击原生广告",n.name,n.adId),this._nativeADInstances.get(n.name).reportAdClick({adId:n.adId}),this.initNativeAd(n.name))},l._destoryNativeAd=function(t){i.log("销毁这个原生广告前列表",t.name,JSON.stringify(this._nativeAdParam)),n.prototype._destoryNativeAd.call(this,t),this._nativeADInstances.has(t.name)&&(i.log("开始销毁原生广告",t.name),this._nativeADInstances.get(t.name).offLoad(),this._nativeADInstances.delete(t.name),i.log("销毁这个原生广告后列表",JSON.stringify(this._nativeAdParam)))},l._createShortcutInstalled=function(n){var t=this;window.qg.hasShortcutInstalled({success:function(n){i.log("判断图标未存在时，创建图标"+n),t._hasShortcutInstalled=n},fail:function(){}})},l._installShortcut=function(n){var t=this;i.log("各个平台处理"),window.qg.installShortcut({success:function(){i.log("各个平台处理==="),t._hasShortcutInstalled=!1,t._shortCutInstalledCaback&&t._shortCutInstalledCaback.success(null)},fail:function(n){i.log("各个平台处理1111111==="),this._shortCutInstalledCaback&&this._shortCutInstalledCaback.fail()},complete:function(){}})},l._login=function(n){var t=this;this.loadStorageData(["userId"],(function(n){if(n)i.log("userId",JSON.stringify(n)),t._userInf.userId=n.userId;else{var e=c.getUUID();t.flushStorageData({key:"userId",data:{userId:e}},(function(){})),t._userInf.userId=e}}),(function(n){})),setTimeout((function(){t._systemInfo.platformVersionCode>=1063&&window.qg.getUserInfo().then((function(n){if(n.data){var e="用户信息:"+JSON.stringify(n.data);i.log(e),t._userInf.userName=n.data.nickName,t._userInf.userHead=n.data.biggerAvatar}}),(function(n){i.log("获取用户信息失败"+JSON.stringify(n))}))}),.1)},l.isMoreGameBtn=function(){return!1},l.isShowNativeAd=function(n){return!1},l.isShowPrivacy=function(){return!this.isBtnFadeIn()},l.exitGame=function(){window.qg.exitApplication({})},l.getPlatId=function(){return"1026"},e}(l));e._RF.pop()}}}));

System.register("chunks:///_virtual/RDCoralPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./RDPlatform.ts"],(function(a){"use strict";var l,c,t,n,o;return{setters:[function(a){l=a.inheritsLoose},function(a){c=a.cclegacy,t=a.sys},function(a){n=a.Log},function(a){o=a.RDPlatform}],execute:function(){c._RF.push({},"767cdw3GdtE370tKAFVgvPA","RDCoralPlatform",void 0);a("RDCoralPlatform",function(a){function c(l){var c;return(c=a.call(this,l)||this).vibrateInterval=null,c}l(c,a);var o=c.prototype;return o.loadStorageData=function(a,l,c){var n=JSON.parse(t.localStorage.getItem(a[0]));l&&l(n)},o.flushStorageData=function(a,l){t.localStorage.setItem(a.key,JSON.stringify(a.data))},o.initAD=function(){var a,l,c,t="//h5.gametoom.com/interface/coralH5GameSdk.js";n.log("H5 SDK接入全局只需运行一次"),a=document,l=a.getElementsByTagName("head")[0],(c=a.createElement("script")).async=!0,c.src=t,l&&l.insertBefore(c,l.firstChild)},o._initSdk=function(a){n.log("初始化参数"+JSON.stringify(a.data));var l=this;window.CoralH5GameSdk&&window.CoralH5GameSdk.setLogoutCallback({success:function(a){n.log("sdk登出成功, 可以跳转到游戏登录界面"+JSON.stringify(a)),l._login({data:{},callback:{success:function(){},fail:function(){}}})},fail:function(a){n.log("sdk登出回调"+JSON.stringify(a))}}),window.CoralH5GameSdk&&window.CoralH5GameSdk.initCoral(a.data,{success:function(l){a.callback&&a.callback.success(null),n.log("返回"+JSON.stringify(l))},fail:function(l){a.callback&&a.callback.fail()}})},o._login=function(a){n.log("登录参数"+JSON.stringify(a.data)),window.CoralH5GameSdk&&window.CoralH5GameSdk.login({success:function(l){a.callback&&a.callback.success(null),n.log("返回"+JSON.stringify(l))},fail:function(l){a.callback&&a.callback.fail()}})},o._logOut=function(a){n.log("登出参数"+JSON.stringify(a.data)),window.CoralH5GameSdk&&window.CoralH5GameSdk.logout()},o._sysData=function(a){n.log("数据参数"+JSON.stringify(a.data)),window.CoralH5GameSdk&&window.CoralH5GameSdk.syncData(a.data,{success:function(l){a.callback&&a.callback.success(null),n.log("返回"+JSON.stringify(l))},fail:function(l){a.callback&&a.callback.fail()}})},o._exitGame=function(a){n.log("退出参数"+JSON.stringify(a.data)),window.CoralH5GameSdk&&window.CoralH5GameSdk.exit(a.data,{success:function(l){a.callback&&a.callback.success(null),n.log("返回"+JSON.stringify(l))},fail:function(l){a.callback&&a.callback.fail()}})},o._pay=function(a){n.log("支付参数"+JSON.stringify(a.data)),window.CoralH5GameSdk&&window.CoralH5GameSdk.pay(a.data,{success:function(l){a.callback&&a.callback.success(null),n.log("返回"+JSON.stringify(l))},fail:function(l){a.callback&&a.callback.fail()}})},c}(o));c._RF.pop()}}}));

System.register("chunks:///_virtual/OppoNativeAdItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./UIBase.ts"],(function(t){"use strict";var e,o,n,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator},function(t){i=t.CommonUtils},function(t){s=t.UIBase}],execute:function(){var a;o._RF.push({},"780eeuQvJBPP59XPcNELqmc","OppoNativeAdItem",void 0);var c=n.ccclass;t("OppoNativeAdItem",c("OppoNativeAdItem")(a=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._uiName="",e}e(o,t);var n=o.prototype;return n.onLoad=function(){this.oppoNativeAd=this.node.getChildByName("nativeAd");for(var t=1;t<=2;t++)this.registerOppoAdButton(this.node,"lookAdBtn"+t)},n.onEnable=function(){var t=this;console.log("主页面广告显示 === "),this.scheduleOnce((function(){t.showAdvertisement(!1,!0,null,t.platformMgr.getNativeIdByIndex(1))}),.5)},n.getUIName=function(){return this._uiName},n.setUIName=function(t){this._uiName=t,i.getNodeByName(this.node,"musicalNote").active=-1===t.indexOf("成就")},o}(s))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/LightningBulletMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./AppManager.ts","./EnemyAIMgr.ts","./MercenaryMgr.ts","./SoldierAgentMgr.ts","./PlayerMgr.ts"],(function(t){"use strict";var e,o,i,s,n,r,h,l,a,c,_,u,d,g,p;return{setters:[function(t){e=t.inheritsLoose,o=t.createClass},function(t){i=t.cclegacy,s=t._decorator,n=t.v3,r=t.SphereCollider,h=t.ParticleUtils,l=t.isValid,a=t.Component},function(t){c=t.CommonUtils},function(t){_=t.App},function(t){u=t.EnemyAIMgr},function(t){d=t.MercenaryMgr},function(t){g=t.SoldierAgentMgr},function(t){p=t.PlayerMgr}],execute:function(){var T;i._RF.push({},"7a4453to0VJq6NQpgcqH8ZR","LightningBulletMgr",void 0);var m=s.ccclass;t("LightningBulletMgr",m("LightningBulletMgr")(T=function(t){function i(){for(var e,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._damage=0,e._sphereCollider=null,e._shootCnt=0,e._shootTotalCnt=3,e._shootTime=0,e._shootTotalTime=.5,e._isCanShoot=!1,e._curTargetComp=null,e._teamType=-1,e._curTarget=null,e._startPos=n(),e._particleNode=null,e._attackNodes=[],e}e(i,t);var s=i.prototype;return s.onLoad=function(){this._particleNode=c.getNodeByName(this.node,"shootBall"),this._sphereCollider=this.node.getComponent(r),this._sphereCollider.enabled=!1},s.onEnable=function(){this._isCanShoot=!1,this._curTarget=null,this._registerEvent(!0)},s.onDisable=function(){this._particleNode&&h.stop(this._particleNode),this._isCanShoot=!1,this._curTarget=null,this._registerEvent(!1)},s._registerEvent=function(t){var e=t?"on":"off";this._sphereCollider[e]("onTriggerEnter",this._onTriggerEnter,this)},s._onTriggerEnter=function(t){var e=t.otherCollider,o=c.getParentComponent(e.node,"soldier",g)||c.getParentComponent(e.node,"enemyAI",u)||c.getParentComponent(e.node,"playerMgr",p)||c.getParentComponent(e.node,"mercenary",d);l(e)&&_.GameData.isInGame()&&o&&o.isCanShoot&&!(o.HP<=0)&&this._teamType!=o.teamType&&(!(-1!=this._attackNodes.indexOf(o.node))&&this.Shoot(o,.05))},s.init=function(t,e,o){void 0===o&&(o=1),this._shootCnt=0,this._shootTotalCnt=5,this._teamType=e,this._damage=o,this._attackNodes=[],this._particleNode&&h.play(this._particleNode),this.Shoot(t)},s.Shoot=function(t,e){void 0===e&&(e=.2),this._isCanShoot||(this.unscheduleAllCallbacks(),this._sphereCollider.enabled=!1,this._curTargetComp=t,this._curTarget=t.node,this._attackNodes.push(this._curTarget),this._shootTime=0,this._shootTotalTime=e,this._startPos=this.node.worldPosition.clone(),this._isCanShoot=!0)},s.update=function(t){var e=this;if(this._isCanShoot&&this._curTarget){this._shootTime+=t;var o,i=null,s=this._curTarget.worldPosition.clone();if(s.y+=3,this._shootTime>=this._shootTotalTime)return this._shootTime=this._shootTotalTime,i=s,this.node.setWorldPosition(i),this._shootCnt++,null===(o=this._curTargetComp)||void 0===o||o.HitByBullet(this._damage,this._teamType),this._curTarget=null,this._curTargetComp=null,void(this._shootCnt>=this._shootTotalCnt?(this._isCanShoot=!1,this._sphereCollider.enabled=!1,_.Pool.putNode(this.node)):(this._isCanShoot=!1,this._sphereCollider.enabled=!0,this.unscheduleAllCallbacks(),this.scheduleOnce((function(){_.Pool.putNode(e.node)}),.1)));i=this._startPos.clone().lerp(s,this._shootTime/this._shootTotalTime),this.node.setWorldPosition(i)}},o(i,[{key:"curTarget",get:function(){return this._curTarget},set:function(t){this._curTarget=t}}]),i}(a))||T);i._RF.pop()}}}));

System.register("chunks:///_virtual/HotUpdateManager.ts",["cc"],(function(e){"use strict";var t,s,a,o;return{setters:[function(e){t=e.cclegacy,s=e.loader,a=e.sys,o=e.game}],execute:function(){t._RF.push({},"7a6d7odjLxPf6ZoY+zy4+E8","HotUpdateManager",void 0);var n=function(){function e(){this._updating=!1,this._canRetry=!1,this._am=null,this._manifestUrl=null,this._storagePath="",this._versionCompareHandle=null,this._callback=null}e.getInstance=function(){return null==e.singleInstance&&(e.singleInstance=new e),e.singleInstance};var t=e.prototype;return t.init=function(){this._storagePath=(window.jsb.fileUtils?window.jsb.fileUtils.getWritablePath():"/")+"xcyy-remote-asset",console.log("Storage path for remote asset : "+this._storagePath),this._versionCompareHandle=function(e,t){console.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var s=e.split("."),a=t.split("."),o=0;o<s.length;++o){var n=parseInt(s[o]),i=parseInt(a[o]||0);if(n!==i)return n-i}return a.length>s.length?-1:0},this._am=new window.jsb.AssetsManager("",this._storagePath,this._versionCompareHandle),console.log("init updating ...")},t.checkUpdate=function(e,t){if(this._callback=e,t)if(this._manifestUrl=t,this._updating)console.log("Checking or updating ...");else{if(this._am.getState()===window.jsb.AssetsManager.State.UNINITED){console.log("Resolve md5 url");var a=this._manifestUrl?this._manifestUrl.nativeUrl:"";console.log("Resolve md5 url"+a),s.md5Pipe&&(a=s.md5Pipe.transformURL(a)),this._am.loadLocalManifest(a);var o=this._am.getLocalManifest().getSearchPaths();console.log("检查是否有新的版本更新"+JSON.stringify(o))}this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded()?(this._am.setEventCallback(this.checkCb.bind(this)),this._am.checkUpdate(),this._updating=!0):console.log("Failed to load local manifest ...")}else this._callback.success()},t.checkCb=function(e){switch(console.log("Code: "+e.getEventCode()),this._updating=!1,e.getEventCode()){case window.jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:console.log("No local manifest file found, hot update skipped."),this._callback.success();break;case window.jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case window.jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("Fail to download manifest file, hot update skipped."),this._callback.success();break;case window.jsb.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("Already up to date with the latest remote version."),this._callback.success();break;case window.jsb.EventAssetsManager.NEW_VERSION_FOUND:console.log("New version found, please try to update. ("+this._am.getTotalBytes()+")|("+this._am.getTotalFiles()+")"),this._am.setEventCallback(null),this.hotUpdate();break;default:return}},t.hotUpdate=function(){if(console.log((this._am,"true")),console.log("updating"+this._updating),this._am&&!this._updating){if(console.log("hotUpdate111111"),this._am.setEventCallback(this.updateCb.bind(this)),this._am.getState()===window.jsb.AssetsManager.State.UNINITED){console.log("hotUpdate Resolve md5 url");var e=this._manifestUrl?this._manifestUrl.nativeUrl:"";s.md5Pipe&&(e=s.md5Pipe.transformURL(e)),this._am.loadLocalManifest(e)}this._am.update(),this._updating=!0}},t.updateCb=function(e){console.log("updateCb");var t=!1,s=!1;switch(e.getEventCode()){case window.jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:console.log("No local manifest file found, hot update skipped."),s=!0,this._callback.success();break;case window.jsb.EventAssetsManager.UPDATE_PROGRESSION:console.log("bytePercent"+e.getPercent()),console.log("filePercent"+e.getPercentByFile()),console.log("fileCount"+e.getDownloadedFiles()+" / "+e.getTotalFiles()),console.log("byteCount"+e.getDownloadedBytes()+" / "+e.getTotalBytes());var n=e.getMessage();n&&console.log("Updated file: "+n),this._callback.progress({downloadBytes:e.getDownloadedBytes(),totalBytes:e.getTotalBytes()});break;case window.jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case window.jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("Fail to download manifest file, hot update skipped."),s=!0,this._callback.success();break;case window.jsb.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("Already up to date with the latest remote version."),s=!0,this._callback.success();break;case window.jsb.EventAssetsManager.UPDATE_FINISHED:console.log("Update finished. "+e.getMessage()),t=!0;break;case window.jsb.EventAssetsManager.UPDATE_FAILED:console.log("Update failed. "+e.getMessage()),this._updating=!1,this._canRetry=!0,this._callback.fail();break;case window.jsb.EventAssetsManager.ERROR_UPDATING:console.log("Asset update error: "+e.getAssetId()+", "+e.getMessage()),this._callback.fail();break;case window.jsb.EventAssetsManager.ERROR_DECOMPRESS:console.log(e.getMessage()),this._callback.fail()}if(s&&(this._am.setEventCallback(null),this._updating=!1),t){this._callback.success(),this._am.setEventCallback(null);var i=window.jsb.fileUtils.getSearchPaths(),l=this._am.getLocalManifest().getSearchPaths();console.log("1"+JSON.stringify(l)),Array.prototype.unshift.apply(i,l),console.log("2"),a.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(i)),console.log("3"),window.jsb.fileUtils.setSearchPaths(i),console.log("4"),window.cc.audioEngine&&window.cc.audioEngine.stopAll&&window.cc.audioEngine.stopAll(),console.log("5"),setTimeout((function(){o.restart()}),1),console.log("6")}},t.retry=function(){!this._updating&&this._canRetry&&(this._canRetry=!1,console.log("Retry failed Assets..."),this._am.downloadFailedAssets())},e}();n.singleInstance=null;e("HotUpdateMgr",n.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/TurntableUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./Utils.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var e,n,i,a,o,s,r,l,u,d,h,_,c,m,g,N;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,a=t.v3,o=t.Button,s=t.SpriteComponent,r=t.tween,l=t.instantiate,u=t.Label,d=t.Sprite},function(t){h=t.CommonUtils},function(t){_=t.Constants},function(t){c=t.Utils},function(t){m=t.EventResult},function(t){g=t.App},function(t){N=t.UIBase}],execute:function(){var I;n._RF.push({},"7a918tQOwhAPJWOgBAOovr/","TurntableUI",void 0);var p=i.ccclass,f=_.AWARD_TYPE,y=[{type:f.GOLD,diamond:500,ratio:5,position:a(0,195,0),rotation:0,skinId:1004},{type:f.GOLD,diamond:100,ratio:25,position:a(142,142,0),rotation:315},{type:f.GOLD,diamond:500,ratio:5,position:a(195,0,0),rotation:270},{type:f.GOLD,diamond:200,ratio:15,position:a(142,-142,0),rotation:225},{type:f.GOLD,diamond:500,ratio:5,position:a(0,-195,0),rotation:180,skinId:1008},{type:f.GOLD,diamond:100,ratio:25,position:a(-142,-142,0),rotation:135},{type:f.GOLD,diamond:500,ratio:5,position:a(-195,0,0),rotation:90},{type:f.GOLD,diamond:200,ratio:15,position:a(-142,142,0),rotation:45}],w="免费机会已用完，观看视频可免费抽奖哦！",D="正在抽奖中...",B="正在抽奖中，不能退出哦！";t("TurntableUI",p("TurntableUI")(I=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this)._titleNode=null,e._turntableNode=null,e._turntableBgNode=null,e._awardItem=null,e._arrowNode=null,e._surplusCntNode=null,e._surplusCntLbl=null,e._curSurplusCnt=0,e._freeDrawBtnNode=null,e._watchDrawBtnNode=null,e._isPlayingAnim=!1,e._turntableInfo=null,e}e(n,t);var i=n.prototype;return i.onLoad=function(){this._titleNode=h.getNodeByName(this.node,"title"),this._turntableNode=h.getNodeByName(this.node,"turntableNode"),this._turntableBgNode=h.getNodeByName(this._turntableNode,"turntableBg"),this._awardItem=h.getNodeByName(this._turntableBgNode,"awardItem"),this._arrowNode=h.getNodeByName(this._turntableNode,"arrowNode");var t=this.node.getChildByName("buttonNode");this._freeDrawBtnNode=h.getNodeByName(t,"freeDrawBtn"),this._freeDrawBtnNode.on(o.EventType.CLICK,this._onFreeDrawButton,this),this._watchDrawBtnNode=h.getNodeByName(t,"watchDrawBtn"),this._watchDrawBtnNode.on(o.EventType.CLICK,this._onWatchDrawButton,this),this._turntableInfo=g.Account.turntableInfo,h.getNodeByName(this.node,"closeBtn").on(o.EventType.CLICK,this._onCloseButton,this),this.initBgOpacity(),this.initOppoNativeAd(),this.alignOppoNativeAd(this._freeDrawBtnNode,50),this._createAwardItem()},i.getUIName=function(){return"幸运转盘"},i.show=function(){this._turntableBgNode.setRotationFromEuler(0,0,0),this.showUICnt++,this._setDailyFreeCountLabel();var t=[this._titleNode,this._turntableNode,this._freeDrawBtnNode,this._watchDrawBtnNode];this.playScaleInAnim(t,h.getNodeByName(this.node,"closeBtn")),this.showAdvertisement(),g.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},i._setDailyFreeCountLabel=function(){var t=c.isNextDay((new Date).getTime(),this._turntableInfo.time);this._curSurplusCnt=t?_.DAILY_TURN_FREE_COUNT:this._turntableInfo.count,this._curSurplusCnt,h.getNodeComponent(this._freeDrawBtnNode,"freeDrawBtn",s).grayscale=this._curSurplusCnt<=0},i._onFreeDrawButton=function(){if(!g.UI.isUIAnimPlaying()&&!this._isTurntablePlaying(D)){var t={"当前窗口":this.getUIName(),"按钮类型":"免费抽奖"};if(g.Stats.customEvent("按钮事件",t,m.onStarted),this._curSurplusCnt<=0)return g.UI.showTipMessage(w),void g.Stats.customEvent("按钮事件",t,m.onFailed,"免费抽奖次数不足");this._turntableInfo.count=this._curSurplusCnt-=1,this._turntableInfo.time=(new Date).getTime(),g.Account.turntableInfo=this._turntableInfo,this._setDailyFreeCountLabel(),this._playTurntableAnimation(),g.Stats.customEvent("按钮事件",t)}},i._isTurntablePlaying=function(t){return this._isPlayingAnim&&g.UI.showTipMessage(t),this._isPlayingAnim},i._playTurntableAnimation=function(){var t=this;this._isPlayingAnim=!0;var e=h.getRandomInteger(1,100),n=this._getAwardIndex(e),i=this._turntableBgNode.eulerAngles.z%360+360+y[n].rotation+h.getRandomInteger(-21,21);r(this._turntableBgNode).by(5,{eulerAngles:a(0,0,-1440-i)},{easing:"sineInOut"}).call((function(){t._isPlayingAnim=!1,t._getTurntableAward(n)})).start()},i._getArrowRotateTween=function(t,e,n,i){return r().by(t,{eulerAngles:a(0,0,e)}).by(t,{eulerAngles:a(0,0,n)}).union().repeat(i)},i._getAwardIndex=function(t){for(var e=0,n=0,i=y.length;n<i;n++)if(t<=(e+=y[n].ratio))return n;return 0},i._getTurntableAward=function(t){var e=this,n=y[t];if(n.type===f.GOLD)g.UI.showDialog(_.UI_DIALOG_NAME.CONFIRM,null,n.diamond);else if(n.type===f.SKIN){var i=g.SkinDataMgr.getDataById(n.skinId);g.UI.showDialog(_.UI_DIALOG_NAME.CONFIRM,(function(){var t=g.SkinDataMgr.getLocalDataById(n.skinId);t.isUnlock=!0,g.SkinDataMgr.setLocalDataById(n.skinId,t),g.Event.emit(_.EVENT_TYPE.UPDATE_SKIN_ITEM),e._createAwardItem()}),i,f.SKIN)}},i._onWatchDrawButton=function(){var t=this;if(!g.UI.isUIAnimPlaying()){var e={"当前窗口":this.getUIName(),"按钮类型":"视频广告"};g.Stats.customEvent("按钮事件",e,m.onStarted),this.showRewardAd({success:function(){t._isTurntablePlaying(D)||(t._playTurntableAnimation(),g.Stats.customEvent("按钮事件",e))},fail:function(){g.Stats.customEvent("按钮事件",e,m.onFailed)}})}},i._onCloseButton=function(){if(!g.UI.isUIAnimPlaying()&&!this._isTurntablePlaying(B)){var t=[this._titleNode,this._turntableNode,this._freeDrawBtnNode,this._watchDrawBtnNode];this.playScaleOutAnim(t,(function(){g.UI.hideDialog(_.UI_DIALOG_NAME.TURNTABLE),g.Event.emit(_.EVENT_TYPE.UPDATE_AD)})),g.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭"})}},i._createAwardItem=function(){for(var t=0,e=y.length;t<e;t++){var n=null;if(0===t)n=this._awardItem;else{var i="awardItem"+t;(n=this._turntableBgNode.getChildByName(i))||((n=l(this._awardItem)).name=i,this._turntableBgNode.addChild(n))}n.setPosition(y[t].position),n.setRotationFromEuler(0,0,y[t].rotation),this._setAwardItemData(n,t)}},i._setAwardItemData=function(t,e){var n=y[e],i=h.getNodeComponent(t,"diamondLbl",u);if(n.type===f.GOLD)this._setAwardGoldVisible(t,!0),i.string="X "+n.diamond,i.fontSize=32;else if(n.type===f.SKIN){if(g.SkinDataMgr.getLocalDataById(n.skinId).isUnlock)n.type=f.GOLD,this._setAwardItemData(t,e);else this._setAwardGoldVisible(t,!1),h.getNodeComponent(t,"skinImg",d).spriteFrame=g.SptFrame.getSpriteFrameByName("skin_"+n.skinId),i.fontSize=25,i.string=""}},i._setAwardGoldVisible=function(t,e){h.getNodeByName(t,"awardIcon").active=e,h.getNodeByName(t,"skinImg").active=!e},n}(N))||I);n._RF.pop()}}}));

System.register("chunks:///_virtual/DesertMap.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./MapBase.ts"],(function(t){"use strict";var e,o,r,n,i,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,n=t.color,i=t.ParticleUtils},function(t){a=t.CommonUtils},function(t){c=t.MapBase}],execute:function(){var s;o._RF.push({},"7c0b1TRoi5EsJCgUCqG24XT","DesertMap",void 0);var l=r.ccclass;t("DesertMap",l("DesertMap")(s=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).dayColorInfo={rock:n(202,124,135),prop:n(240,216,219),plant:n(46,148,24),ground:n(222,196,135)},e.nightColorInfo={rock:n(145,105,211),prop:n(238,222,230),plant:n(138,93,23),ground:n(103,74,154)},e._fireflyNode=null,e}e(o,t);var r=o.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this);var e=this.node.getChildByName("environmentNode").getChildByName("bgEffect");this._fireflyNode=a.getNodeByName(e,"firefly")},r.setParticleEffect=function(e){t.prototype.setParticleEffect.call(this,e),this._fireflyNode.active=!e,i[e?"stop":"play"](this._fireflyNode)},o}(c))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/RDLeaderboardEntity.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"7c1dbsnUrhCbrriLnikmKCi","RDLeaderboardEntity",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/RocketExplosionMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./AppManager.ts","./EnemyAIMgr.ts","./MercenaryMgr.ts","./SoldierAgentMgr.ts","./PlayerMgr.ts"],(function(e){"use strict";var t,n,o,r,i,a,s,c,l,p,g,u,m,h;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){o=e.cclegacy,r=e._decorator,i=e.ParticleUtils,a=e.SphereCollider,s=e.isValid,c=e.Component},function(e){l=e.CommonUtils},function(e){p=e.App},function(e){g=e.EnemyAIMgr},function(e){u=e.MercenaryMgr},function(e){m=e.SoldierAgentMgr},function(e){h=e.PlayerMgr}],execute:function(){var d;o._RF.push({},"7c6e0PCN35O25LMQMlgW0MZ","RocketExplosionMgr",void 0);var y=r.ccclass;r.property,e("RocketExplosionMgr",y("RocketExplosionMgr")(d=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this)._damage=0,t._shootTime=0,t._teamType=-1,t._attackerComp=null,t}t(o,e);var r=o.prototype;return r.onEnable=function(){this._registerEvent(!0)},r.onDisable=function(){i.stop(this.node),this._registerEvent(!1)},r._registerEvent=function(e){var t=e?"on":"off";this.node.getComponent(a)[t]("onTriggerEnter",this._onTriggerEnter,this)},r.init=function(e,t,n){var o=this;void 0===t&&(t=1),this.node.worldPosition=n,this._attackerComp=e,this._teamType=e.teamType,this._damage=t,i.play(this.node),this.scheduleOnce((function(){p.Pool.putNode(o.node)}),1)},r._onTriggerEnter=function(e){var t=e.otherCollider,n=l.getParentComponent(t.node,"soldier",m)||l.getParentComponent(t.node,"enemyAI",g)||l.getParentComponent(t.node,"playerMgr",h)||l.getParentComponent(t.node,"mercenary",u);this.node&&s(t)&&p.GameData.isInGame()&&n&&n.isCanShoot&&!(n.HP<=0)&&this._attackerComp.teamType!=n.teamType&&n.HitByBullet(this._damage,this._teamType,!1)},n(o,[{key:"attackerComp",get:function(){return this._attackerComp}}]),o}(c))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/EventTarget.ts",["cc","./EventManager2.ts"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.default}],execute:function(){e._RF.push({},"7d2faGXsGxNQanNMhH8FUJO","EventTarget",void 0);t("default",function(){function t(t,e,n){this.event=t,this.callback=e,this.target=n}var e=t.prototype;return e.check=function(t,e){return this.target===t&&this.callback===e},e.checkByTarget=function(t){return this.target===t},e.checkByCallback=function(t){return this.callback===t},e.off=function(){n.offByEventTarget(this)},e.emit=function(t){this.callback.apply(this.target,t)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/mapSelectItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var e,n,a,o,i,s,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,o=t.Sprite,i=t.Component},function(t){s=t.CommonUtils},function(t){c=t.Constants},function(t){r=t.App}],execute:function(){var m;n._RF.push({},"7d99bZcRaxEmbJ6s91RzR4a","mapSelectItem",void 0);var p=a.ccclass;t("MapSelectItem",p("MapSelectItem")(m=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this)._mapSpt=null,e._lockImg=null,e._frameNode=null,e._mapData=null,e}e(n,t);var a=n.prototype;return a.onLoad=function(){this._mapSpt=s.getNodeComponent(this.node,"mapImg",o),this._lockImg=s.getNodeComponent(this.node,"lockImg",o),this._frameNode=s.getNodeByName(this.node,"frame")},a.onEnable=function(){this._registerCustomEvent(!0)},a.onDisable=function(){this._registerCustomEvent(!1)},a._registerCustomEvent=function(t){var e=t?"on":"off";r.Event[e](c.EVENT_TYPE.UPDATE_MAP_INFO,this._OnScrolling,this)},a.init=function(t){this._mapData=t,this._mapSpt.spriteFrame=r.SptFrame.getSpriteFrameByName("Map_Image_0"+t.id),this.updateData()},a.updateData=function(){var t=r.Account.getMapData(this._mapData.id).isUnlock?"Get":"Lock";this._lockImg.spriteFrame=r.SptFrame.getSpriteFrameByName("Map_Image_"+t)},a._OnScrolling=function(t,e){void 0===e&&(e=0),t||e+1!=this._mapData.id?(this._lockImg.node.active=!1,this._frameNode.active=!1):(this._lockImg.node.active=!0,this._frameNode.active=!0)},n}(i))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/SkinItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDPlatformType.ts","./RDStatisticsManager.ts","./RDPlatformManager.ts","./PlayerSkinData.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var n,e,i,o,s,a,c,_,u,r,l,d,k,m;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Sprite,s=t.Label},function(t){a=t.CommonUtils},function(t){c=t.Constants},function(t){_=t.RDPlatformType},function(t){u=t.EventResult,r=t.CustomEventID},function(t){l=t.RDPlatformManager},function(t){d=t.PlayerSkinData},function(t){k=t.App},function(t){m=t.UIBase}],execute:function(){var h;e._RF.push({},"7e030HnjI1M5Zjd1/0aY8w+","SkinItem",void 0);var N=i.ccclass;t("SkinItem",N("SkinItem")(h=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._skinNode=null,n._nativeBtnNode=null,n._bgSpt=null,n._skinSpt=null,n._usingNode=null,n._useNode=null,n._lockNode=null,n._lockNodeSpt=null,n._diamondLbl=null,n._nativeScript=null,n._skinData=null,n}n(e,t);var i=e.prototype;return i.onLoad=function(){this._skinNode=a.getNodeByName(this.node,"skinNode"),this._nativeBtnNode=a.getNodeByName(this.node,"nativeBtn"),this._bgSpt=a.getNodeComponent(this.node,this.node.name,o),this._skinSpt=a.getNodeComponent(this._skinNode,"skinSpt",o),this._useNode=a.getNodeByName(this._skinNode,"useNode"),this._usingNode=a.getNodeByName(this._skinNode,"usingNode"),this._lockNode=a.getNodeByName(this._skinNode,"lockNode"),this._lockNodeSpt=a.getNodeComponent(this._lockNode,"lockNode",o),this._diamondLbl=a.getNodeComponent(this._skinNode,"Label",s);a.registerButtonEvent(this._skinNode,"btnNode",this._onButton,this),a.registerButtonEvent(this._nativeBtnNode,"lookAdBtn",this._onAdButton,this);this._registerCustomEvent(!0)},i.onDisable=function(){this._nativeScript=null},i.getUIName=function(){return"皮肤解锁"},i._registerCustomEvent=function(t){var n=t?"on":"off";k.Event[n](c.EVENT_TYPE.UPDATE_SKIN_ITEM,this._updateSkinItem,this)},i.init=function(t,n,e){if(void 0===n&&(n=!1),void 0===e&&(e=null),this._skinNode.active=!n,this._nativeBtnNode.active=n,this._nativeScript=e,n)this._bgSpt.spriteFrame=k.SptFrame.getSpriteFrameByName("SkinList_ItemBg_3");else{if(!t)return;this._skinData=t;var i=k.SkinDataMgr.getCurrentSkin()==this._skinData.id,o=(l.getInstance().platformType,_.OPPOGame,"Main_Skin_"+t.id);this._skinSpt.spriteFrame=k.SptFrame.getSpriteFrameByName(o),this._usingNode.active=i;var s=k.SkinDataMgr.getLocalDataById(this._skinData.id).isUnlock,a=this._skinData.unlockType==d.UNLOCK_TYPE.VIDEO?"4":"3";this._bgSpt.spriteFrame=k.SptFrame.getSpriteFrameByName("SkinList_ItemBg_"+(s?i?"1":"2":a)),this._lockNodeSpt.spriteFrame=k.SptFrame.getSpriteFrameByName("SkinList_Button_"+(this._skinData.unlockType==d.UNLOCK_TYPE.VIDEO?"LookAd":"Lock")),this._useNode.active=!i&&s,this._lockNode.active=!s,this._diamondLbl.string=t.amount.toString(),this._diamondLbl.node.active=this._skinData.unlockType==d.UNLOCK_TYPE.DIAMOND}},i._onButton=function(){this._lockNode.active?this._onLockButton():this._selectItem()},i._onLockButton=function(){var t=this,n={currentWindow:"首页-解锁皮肤",skin:this._skinData.id};if(this._skinData.unlockType==d.UNLOCK_TYPE.VIDEO)n["按钮类型"]="视频广告",k.Stats.customEvent("按钮事件",n,u.onStarted),this.showRewardAd({success:function(){t._unLockItem(),k.Stats.customEvent("按钮事件",n,u.onSuccess)},fail:function(){k.Stats.customEvent("按钮事件",n,u.onFailed)}});else if(this._skinData.unlockType==d.UNLOCK_TYPE.DIAMOND){n.buttonType="使用钻石";var e=this._skinData.amount;k.Account.gameGold>=e?(k.Account.gameGold-=e,this._unLockItem(),k.Stats.customEvent(r.custom_button_click,n)):(k.Event.emit(c.EVENT_TYPE.FREE_GOLD),k.Stats.customEvent(r.custom_button_click,n,u.onFailed,"钻石不足"))}},i._onAdButton=function(){var t={currentWindow:"首页",buttonType:"查看广告"};this._nativeScript?(this._nativeScript.onNativeAdClick(),k.Stats.customEvent(r.custom_button_click,t)):(k.UI.showTipMessage("暂无广告"),k.Stats.customEvent(r.custom_button_click,t,u.onFailed,"暂无广告"))},i._unLockItem=function(){var t=k.SkinDataMgr.getLocalDataById(this._skinData.id);t.isUnlock=!0,k.SkinDataMgr.setLocalDataById(this._skinData.id,t),k.Event.emit(c.EVENT_TYPE.UPDATE_SKIN_ITEM),this._selectItem()},i._selectItem=function(){k.SkinDataMgr.setCurrentSkin(this._skinData.id),k.Event.emit(c.EVENT_TYPE.UPDATE_SKIN_ITEM),k.Event.emit(c.EVENT_TYPE.UPDATE_SKIN)},i._updateSkinItem=function(){this._nativeBtnNode.active||this._skinData&&this.init(this._skinData)},e}(m))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/RDPCPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Log.ts","./ConstantCommon.ts","./OptionsManager.ts","./Utils.ts","./RDPlatform.ts","./PushControl.ts"],(function(t){"use strict";var n,e,i,a,s,o,r,l,c,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t.sys},function(t){a=t.EventManager},function(t){s=t.Log},function(t){o=t.ConstantCommon},function(t){r=t.default},function(t){l=t.Utils},function(t){c=t.RDPlatform},function(t){u=t.PushControl}],execute:function(){e._RF.push({},"7e754VRiLRAmoZCR7CKA3ek","RDPCPlatform",void 0);t("RDPCPlatform",function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var c=e.prototype;return c._showBannerAd=function(t){},c._showVideo=function(t){t&&t.success(null)},c.initAD=function(){t.prototype.initAD.call(this)},c.initInterval=function(){var t=this,n=r.getInstance().regionEnable?r.getInstance().getConfigByKey("delayShow",6e4):1e3;s.log("RDPlatform初始化",n),setTimeout((function(){t.freashNative(),s.log("initInterval",n),t._nativeInterval=setInterval((function(){t.freashNative()}),3e3),setTimeout((function(){!r.getInstance().onlyVideo&&a.getInstance().emit(o.EVENT_TYPE.SHOW_NATIVE_AD)}),3e3)}),Math.max(n-1e3,0))},c.initNativeAd=function(t){s.log("加载原生广告成功====",t),this._destoryNativeAd({name:t}),this._nativeADInstances.set(t,"dafdfads"),this._nativeAdParam.push({nativeId:t,param:{}}),this._nativeLastTime[t]=(new Date).getTime()},c._createNativeAd=function(t){if(s.log("获取原生广告",JSON.stringify(t)),this._nativeAdParam.length<=0||this.closeAdTimes>=1&&!r.getInstance().regionEnable)return s.log("原生广告未加载成功，稍后重试"),t.callback.fail();s.log("获取前原生广告id",this._nativeAdParam);var n=this._nativeAdParam.shift();s.log("成功获取原生广告参数",n.nativeId,JSON.stringify(n)),t.callback&&t.callback.success(n.param),this._nativeAdParam.push(n),s.log("原生广告参数后顺序调换",n.nativeId,JSON.stringify(n))},c._destoryNativeAd=function(t){s.log("销毁这个原生广告前列表",JSON.stringify(t),JSON.stringify(this._nativeADInstances.keys()));for(var n=0;n<this._nativeAdParam.length;n++){if(this._nativeAdParam[n].nativeId==t.name){this._nativeAdParam.splice(n,1);break}}this._nativeADInstances.has(t.name)&&(this._nativeADInstances.delete(t.name),s.log("销毁这个原生广告后列表",JSON.stringify(this._nativeADInstances.keys())))},c.loadStorageData=function(t,n,e){var a=JSON.parse(i.localStorage.getItem(t[0]));n&&n(a)},c.flushStorageData=function(t,n){i.localStorage.setItem(t.key,JSON.stringify(t.data))},c._showIntertitalAd=function(t){if(!this.isReviewed())if(2!==t.type||this.isBtnFadeIn()){var n=r.getInstance().getConfigByKey("gameEndNativePercent_"+t.type,100),e=l.random(1,100);!t.mustNormal&&e<n?(s.log("原生插屏广告开始"),u.getInstance().showNatvieInterstitialAd({type:t.type})):s.log("普通插屏广告开始")}else s.log("vivo原生插屏关闭")},c._showGameBannerAd=function(t){s.log("pc横幅广告显示")},c._hideGameBannerAd=function(t){s.log("pc横幅广告隐藏")},c._login=function(t){var n=this;this.loadStorageData(["userId"],(function(t){if(t)s.log("userId",JSON.stringify(t)),n._userInf.userId=t.userId;else{var e=l.getUUID();n.flushStorageData({key:"userId",data:{userId:e}},(function(){})),n._userInf.userId=e}}),(function(t){})),this.updateUserInf("sddf|http://thirdqq.qlogo.cn/g?b=oidb&k=1m7aF5pOxjJWEWTClPibzMQ&s=40&t=1630771690"),r.getInstance().login("TN_Skc2RmlEME5hd0Vac2tuLzkrblFWZ1pGNHVDdEdMZE52dHBWRzlGQ2dSYUoxNlFxL0pneGdhVkw2cTBDMWN4Lw","OPPO","A1")},c.isShowNativeAd=function(t){return void 0===t&&(t=!1),!t||this.isBtnFadeIn(!0)},c.isMoreGameBtn=function(){return!0},e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/FlamethrowerMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RankData.ts","./AppManager.ts","./EnemyAIMgr.ts","./MercenaryMgr.ts","./SoldierAgentMgr.ts","./PlayerMgr.ts"],(function(t){"use strict";var e,n,i,a,o,r,s,l,c,m,_,h,u,p,g,C;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,a=t._decorator,o=t.BoxCollider,r=t.Animation,s=t.isValid,l=t.Component},function(t){c=t.CommonUtils},function(t){m=t.Constants},function(t){_=t.RankData},function(t){h=t.App},function(t){u=t.EnemyAIMgr},function(t){p=t.MercenaryMgr},function(t){g=t.SoldierAgentMgr},function(t){C=t.PlayerMgr}],execute:function(){var d;i._RF.push({},"8041c5pPzRMca+pxUzXLmfw","FlamethrowerMgr",void 0);var f=a.ccclass;t("FlamethrowerMgr",f("FlamethrowerMgr")(d=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this)._anim=null,e._boxColider=null,e._damage=h.RankDataMgr.getFinalWeaponDamage(_.FINAL_WEAPON_TYPE.ROBOT),e._attackerComp=null,e._isInit=!1,e._attackTime=0,e._isInCD=!1,e.teamType=-1,e}e(i,t);var a=i.prototype;return a.onDisable=function(){this._registerEvent(!1),this.reset()},a.init=function(t){var e;this._attackerComp=t,this.teamType=t.teamType,this._boxColider=this.node.getComponent(o),this._anim=this.node.getComponent(r),null===(e=this._anim)||void 0===e||e.stop(),this._registerEvent(!0),this._boxColider.enabled=!1,this._isInCD=!0,this._attackTime=0,this._isInit=!0},a.reset=function(){var t;this._isInit=!1,null===(t=this._anim)||void 0===t||t.stop(),this._boxColider.enabled=!1},a._registerEvent=function(t){var e=t?"on":"off";this._boxColider[e]("onTriggerEnter",this._onTriggerEnter,this)},a._onTriggerEnter=function(t){var e=t.otherCollider;if(s(e)&&h.GameData.isInGame()){var n=c.getParentComponent(e.node,"soldier",g)||c.getParentComponent(e.node,"enemyAI",u)||c.getParentComponent(e.node,"playerMgr",C)||c.getParentComponent(e.node,"mercenary",p);s(e)&&h.GameData.isInGame()&&n&&n.isCanShoot&&!(n.HP<=0)&&this._attackerComp.teamType!=n.teamType&&n.HitByBullet(this._damage,this.teamType,!0)}},a.update=function(t){if(this._isInit&&(this._attackTime+=t,this._attackTime>=(this._isInCD?1:3))){var e,n;if(this._isInCD=!this._isInCD,this._isInCD)null===(e=this._anim)||void 0===e||e.stop();else null===(n=this._anim)||void 0===n||n.play(),this._attackerComp instanceof C&&h.Audio.playSound(m.AUDIO_SOURCE_TYPE.FINAL_WEAPON_ROBOT);this._attackTime=0}},a.SetFlamethrower=function(t){this._boxColider.enabled=t,t&&h.Event.emit(m.EVENT_TYPE.PLAY_FIRE_EFFECT,this.node)},n(i,[{key:"attackerComp",get:function(){return this._attackerComp}}]),i}(l))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/RDPlatformParam.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"80e82EvpzpAaKD0RwGDQf+7","RDPlatformParam",void 0),e("RDPlatformParam",(function(){})).ADPARAM={"-1":{name:"none",gameId:"10015",matrixAdOpen:!1,native_id:["123456","123457","123458"],add_native_id:["348075","348074","348073"],eventId:{101:"1001501",102:"1001502",103:"1001503",104:"1001504",105:"1001505"}},1:{name:"wx",appid:"wxe06ff4edcaaccee5",banner_id:"adunit-f9d9d368d82af056",video_id:"adunit-94145f75293a0d29",interstital_id:"adunit-f864c381660ae74d",isReviewed:!1,share_text:["",""],share_image_url:[],share_image_id:[],gameId:"10015",eventId:{101:"1001501",102:"1001502",103:"1001503",104:"1001504",105:"1001505"},matrixAdOpen:!0,banner_preload_count:4,subpackageNames:["sub1","music"]},2:{name:"tt",appid:"ttb5fcc3412ac75e18",banner_id:"2djiq0xevt11j7mhfc",video_id:"kb2hdij7kh4d98o94g",interstital_id:"203a00fe9i79hdfk01",share_text:["",""],share_image_url:[],share_image_id:[],matrixAdOpen:!1},3:{name:"qg",appid:"105530900",banner_id:"f1f994fc4d3a4bc2bec9d16aa77ed29f",video_id:"1f86d0685f5944c08c98a25f6c324839",interstital_id:"61c9edb0a034485283f1f0d16c96de8d",native_id:["49328b7cbad8427289d48167db29d2b3","596c44b90ed5430588cd200089f516ee","135f1447c3da45b9911fd6375bf3ce2c"],share_text:["",""],subpackageNames:["usr_audio","usr_prefab","usr_texture"],game_portal_id:"f01d3d7a5b87494baf69e8fc92c5061c",share_image_url:[],share_image_id:[],matrixAdOpen:!1},4:{name:"qg",appid:"30715743",banner_id:"439441",video_id:"439454",interstital_id:"290083",native_id:["439448","439449","439450","439451"],isReviewed:!1,share_text:["",""],share_image_url:[],share_image_id:[],matrixAdOpen:!0,subpackageNames:["usr_audio","usr_prefab","usr_texture"],game_banner_id:"439457",game_portal_id:"439455",banner_preload_count:3,oppo_music:!1},10:{name:"qg",appid:"30449645",banner_id:"214337",video_id:"275209",interstital_id:"",native_id:[],isReviewed:!1,share_text:["214341","220157"],share_image_url:[],share_image_id:[],matrixAdOpen:!0,subpackageNames:["model","texture"],game_banner_id:"275217",game_portal_id:"275228",banner_preload_count:3},5:{name:"yhl",appid:"1110573079",banner_id:"",video_id:"2001110950164206",interstital_id:"",share_text:["",""],share_image_url:[],share_image_id:[],matrixAdOpen:!1,subpackageNames:[],isReviewed:!1},6:{name:"sh",appid:"1110573079",banner_id:"",video_id:"2001110950164206",interstital_id:"",share_text:["",""],share_image_url:[],share_image_id:[],matrixAdOpen:!1,subpackageNames:[],isReviewed:!1},7:{name:"android",appid:"1537358826",banner_id:"945573456",video_id:"945573458",interstital_id:"945573461",share_text:["",""],share_image_url:[],share_image_id:[],matrixAdOpen:!1,game_portal_id:"android",subpackageNames:[],isReviewed:!1,platformName:"office"},8:{name:"ios",appid:"1537358826",banner_id:"945994355",video_id:"945994334",interstital_id:"945994348",share_text:["",""],share_image_url:[],share_image_id:[],matrixAdOpen:!1,subpackageNames:[],isReviewed:!1},9:{name:"kg",appid:"1769",banner_id:"",video_id:"",interstital_id:"",share_text:["",""],share_image_url:[],share_image_id:[],matrixAdOpen:!1,subpackageNames:[],isReviewed:!1},11:{name:"xm",appid:"1769",banner_id:"12345",video_id:"12345",interstital_id:"12345",share_text:["",""],share_image_url:[],share_image_id:[],matrixAdOpen:!1,subpackageNames:[],isReviewed:!1,banner_preload_count:3},12:{name:"4399",appid:"",banner_id:"",video_id:"",interstital_id:"",share_text:["",""],share_image_url:[],share_image_id:[],matrixAdOpen:!1,subpackageNames:[],isReviewed:!1},cocosAnalytics:{appID:"123",secret:"123",version:"1.0.0"},uma:{appKey:"61b2fbbde0f9bb492b8dded8",debug:!1}},a._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDStatisticsManager.ts","./AdsManager.ts","./AppManager.ts"],(function(e){"use strict";var t,a,n,o,s,p,i,r,c,d,h;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,n=e._decorator,o=e.Sprite,s=e.v3,p=e.Component},function(e){i=e.CommonUtils},function(e){r=e.Constants},function(e){c=e.EventResult},function(e){d=e.AdsManager},function(e){h=e.App}],execute:function(){var m;a._RF.push({},"81dd9SJbUNNgrorhfSEehRe","WeaponItem",void 0);var u=n.ccclass;e("WeaponItem",u("WeaponItem")(m=function(e){function a(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._selectNode=null,t._lockNode=null,t._hadNode=null,t._usedNode=null,t._rcmdNode=null,t._itemSpt=null,t._weaponItemSpt=null,t._weaponMaskItemSpt=null,t._weaponData=null,t}t(a,e);var n=a.prototype;return n.onLoad=function(){this._itemSpt=i.getNodeComponent(this.node,this.node.name,o);i.registerButtonEvent(this.node,this.node.name,this._onButton,this);this._weaponItemSpt=i.getNodeComponent(this.node,"weaponSpt",o),this._weaponMaskItemSpt=i.getNodeComponent(this.node,"weaponMaskSpt",o),this._selectNode=i.getNodeByName(this.node,"selectNode"),this._lockNode=i.getNodeByName(this.node,"lockNode"),this._hadNode=i.getNodeByName(this.node,"hadNode"),this._usedNode=i.getNodeByName(this.node,"usedNode"),this._rcmdNode=i.getNodeByName(this.node,"rcmdNode")},n.onEnable=function(){this._registerCustomEvent(!0),this._updateWeaponItem()},n.onDisable=function(){this._registerCustomEvent(!1)},n._registerCustomEvent=function(e){var t=e?"on":"off";h.Event[t](r.EVENT_TYPE.UPDATE_WEAPON_ITEM,this._updateWeaponItem,this)},n.init=function(e){this._weaponData=e,this._weaponItemSpt.spriteFrame=h.SptFrame.getSpriteFrameByName("weapon_"+e.weaponType),this._weaponMaskItemSpt.spriteFrame=h.SptFrame.getSpriteFrameByName("weapon_mask_"+e.weaponType),this._updateWeaponItem()},n._updateWeaponItem=function(){if(this._weaponData){var e=h.WeaponDataMgr.getLocalDataByType(this._weaponData.weaponType);this._itemSpt.grayscale=-1==h.GameData.weaponsArr.indexOf(this._weaponData.weaponType)&&h.GameData.curWeaponType!==this._weaponData.weaponType,this.node.scale=h.GameData.curWeaponType==this._weaponData.weaponType?s(1.05,1.05,1.05):s(1,1,1),this._selectNode.active=h.GameData.curWeaponType==this._weaponData.weaponType,this._weaponMaskItemSpt.node.active=!e.isUnlock,this._lockNode.active=!e.isUnlock,this._hadNode.active=e.isUnlock&&-1==h.GameData.weaponsArr.indexOf(this._weaponData.weaponType),this._usedNode.active=-1!==h.GameData.weaponsArr.indexOf(this._weaponData.weaponType),this._rcmdNode.active=this._weaponData.weaponType==h.GameData.curMaxLevelWeapon,e.isUnlock||(this._weaponMaskItemSpt.fillRange=1-e.unlockProgress)}},n._onButton=function(){var e=this,t=h.WeaponDataMgr.getLocalDataByType(this._weaponData.weaponType);if(!t.isUnlock){var a={"当前窗口":"游戏界面","解锁武器":h.WeaponDataMgr.getDataByType(this._weaponData.weaponType).name,"按钮类型":"视频广告"};return h.Stats.customEvent("按钮事件",a,c.onStarted),void d.getInstance().showRewardAd({success:function(){t.isUnlock=!0,t.unlockProgress=1,h.WeaponDataMgr.setLocalDataByType(e._weaponData.weaponType,t),e._updateWeaponItem()},fail:function(){h.Stats.customEvent("按钮事件",a,c.onFailed)}})}!this._weaponData||h.GameData.curWeaponType==this._weaponData.weaponType||-1!==h.GameData.weaponsArr.indexOf(this._weaponData.weaponType)||h.GameData.totalWeaponCnt<=h.GameData.curWeaponCnt||(h.GameData.curWeaponType=this._weaponData.weaponType,h.Event.emit(r.EVENT_TYPE.UPDATE_WEAPON_ITEM))},a}(p))||m);a._RF.pop()}}}));

System.register("chunks:///_virtual/MusicRcmdUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var i,n,e,s,o,a,c,u,r,l,d,m,h;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,s=t.Sprite,o=t.Label,a=t.tween,c=t.v3,u=t.UIOpacity},function(t){r=t.CommonUtils},function(t){l=t.Constants},function(t){d=t.EventResult},function(t){m=t.App},function(t){h=t.UIBase}],execute:function(){var _;n._RF.push({},"8206aINtZBPyZxlGr5nXg66","MusicRcmdUI",void 0);var p=e.ccclass;t("MusicRcmdUI",p("MusicRcmdUI")(_=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this)._titleNode=null,i._musicNode=null,i._ringNode=null,i._cdCoverSpt=null,i._nameLbl=null,i._unlockBtnNode=null,i._closeBtnNode=null,i._rcmdMusicData=null,i._cdAnim=null,i._ringAnimArr=null,i}i(n,t);var e=n.prototype;return e.onLoad=function(){this._titleNode=r.getNodeByName(this.node,"title"),this._musicNode=r.getNodeByName(this.node,"musicRcmd"),this._ringNode=r.getNodeByName(this._musicNode,"ring"),this._cdCoverSpt=r.getNodeComponent(this._musicNode,"cdCover",s),this._nameLbl=r.getNodeComponent(this._musicNode,"nameLbl",o);var t=r.getNodeByName(this.node,"buttonNode");this._unlockBtnNode=r.registerButtonEvent(t,"unlockBtn",this._onUnlockButton,this),this._closeBtnNode=r.registerButtonEvent(this.node,"closeBtn",this._onCloseButton,this),this.initBgOpacity(),this.initOppoNativeAd(),this.alignOppoNativeAd(this._unlockBtnNode,50)},e.show=function(){this.showUICnt++,this._setRcmdMusicInfo(),this._playRingAnimation(),this.playScaleInAnim([this._titleNode,this._musicNode,this._unlockBtnNode]),this.showAdvertisement(),m.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},e.hide=function(){var t;null===(t=this._cdAnim)||void 0===t||t.stop(),this._ringAnimArr.forEach((function(t){return t.stop()})),this._cdCoverSpt.node.setRotationFromEuler(0,0,0),this.unschedule(this._loopAuditionMusic)},e.getUIName=function(){return"好歌推荐"},e._setRcmdMusicInfo=function(){var t=this._rcmdMusicData=m.MusicDataMgr.getDataById(m.GameData.randLockMusicId);t&&(this._cdCoverSpt.spriteFrame=m.SptFrame.getSpriteFrameByName(t.getCoverFilename()),this._nameLbl.string=t.showName,this._cdAnim=a(this._cdCoverSpt.node).by(l.COVER_ANIM_TIME,{eulerAngles:c(0,0,-360)}).repeatForever().start(),this._loopAuditionMusic(),this.schedule(this._loopAuditionMusic,t.audEndTime-t.audStartTime))},e._loopAuditionMusic=function(){m.Audio.playMusicByUrl(this._rcmdMusicData.filename,this._rcmdMusicData.isUrl(),1,this._rcmdMusicData.audStartTime)},e._playRingAnimation=function(){var t=a(this._ringNode).to(1,{scale:c(2,2,1)}).to(0,{scale:c(1,1,1)}).union().repeatForever().start(),i=a(this._ringNode.getComponent(u)).to(0,{opacity:255}).to(1,{opacity:0},{easing:"quartIn"}).union().repeatForever().start();this._ringAnimArr=[t,i]},e._onUnlockButton=function(){var t=this;if(!m.UI.isUIAnimPlaying()){var i={"当前窗口":this.getUIName(),"按钮类型":"视频广告","歌曲":this._nameLbl.string};m.Stats.customEvent("按钮事件",i,d.onStarted),this.showRewardAd({success:function(){var n=t._rcmdMusicData.id,e=m.MusicDataMgr.getLocalDataById(n);e.isUnlock=!0,m.MusicDataMgr.setLocalDataById(n,e),m.MusicDataMgr.updateUnlockData(t._rcmdMusicData),m.AchievementDataMgr.setStatistic(l.ACHIEVEMENT_TYPE.UNLOCK_MUSIC,1),t._playScaleOutAnim(!0),m.Stats.customEvent("按钮事件",i)},fail:function(){m.Stats.customEvent("按钮事件",i,d.onFailed)}})}},e._onCloseButton=function(){m.UI.isUIAnimPlaying()||(this._playScaleOutAnim(!1),m.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭","歌曲":this._nameLbl.string}))},e._playScaleOutAnim=function(t){var i=this,n=[this._titleNode,this._musicNode,this._unlockBtnNode];this.playScaleOutAnim(n,(function(){if(m.UI.hideDialog(l.UI_DIALOG_NAME.MUSIC_RECOMMEND),t)m.Event.emit(l.EVENT_TYPE.QUICK_START,i._rcmdMusicData);else{var n=m.MapDataMgr.getRandomlockMap();1==i.showUICnt&&n?m.UI.showDialog(l.UI_DIALOG_NAME.MAP_RECOMMEND):m.Event.emit(l.EVENT_TYPE.LOOP_MUSIC)}}))},n}(h))||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/RDBundleManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingletonBase.ts"],(function(e){"use strict";var n,r,t,u;return{setters:[function(e){n=e.inheritsLoose},function(e){r=e.cclegacy,t=e.assetManager},function(e){u=e.SingletonBase}],execute:function(){r._RF.push({},"8356dOx36FEAYm09Zl6hmME","RDBundleManager",void 0);e("RDBundleManager",function(e){function r(){return e.apply(this,arguments)||this}n(r,e);var u=r.prototype;return u.loadBundle=function(e){var n=t.getBundle(e);return n?Promise.resolve(n):new Promise((function(n,r){t.loadBundle(e,(function(e,t){if(e)return console.error("加载Bundle出错"),void r(e);n(t)}))}))},u.releaseRes=function(e,n){void 0===n&&(n="resources");var r=t.getBundle(n);null==r||r.release(e)},u.releaseDirRes=function(e,n){void 0===n&&(n="resources");var r=t.getBundle(n),u=null==r?void 0:r.getDirWithPath(e);null==u||u.forEach((function(e){null==r||r.release(e.path)}))},u.removeBundle=function(e,n){void 0===n&&(n=!1);var r=t.getBundle(e);r&&(n&&r.releaseAll(),t.removeBundle(r))},r}(u));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameInit.ts",["cc","./Utils.ts","./GameListManger.ts","./AppManager.ts"],(function(t){"use strict";var n,i,a,e;return{setters:[function(t){n=t.cclegacy},function(t){i=t.Utils},function(t){a=t.default},function(t){e=t.App}],execute:function(){n._RF.push({},"85cb2FLyKlKxKVnBaujkmaI","GameInit",void 0);t("GameInit",function(){function t(t){var n=this;e.Options.init((function(){e.Platform.init(),e.Audio.init(),a.getInstance(),null==t||t(),e.GameData.curMapId=e.Account.curMapId,n._initLoginData()}))}return t.prototype._initLoginData=function(){var t=e.Account,n=t.loginDays,a=(new Date).getTime();i.isSameDay(a,n.time)||(n.count+=1,n.time=a,t.loginDays=n,t.drawCount=0,t.initOnlineReward())},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Constants.ts",["cc"],(function(E){"use strict";var _,A;return{setters:[function(E){_=E.cclegacy,A=E.color}],execute:function(){var e,T,I,R,a,O,t,C,N,U;_._RF.push({},"87fd2z0CvlLbZBkckGBGfI0","Constants",void 0),function(E){E.GUIDE="guideUI",E.MAIN="mainUI",E.LOADING="loadingUI",E.GAME="gameUI",E.GAME_WINNING="gameWinningUI",E.GAME_OVER="gameOverUI",E.GAME_RESULT="resultUI",E.REVIVE="reviveUI",E.COMMON="commonUI",E.TOAST="toastUI",E.CONFIRM="confirmUI",E.MODE_SELECT="modeSelectUI",E.LEVELUI="levelUI",E.SIGN_IN="signInUI",E.TURNTABLE="turntableUI",E.TREASURE_BOX="treasureBoxUI",E.MAP_SELECT="mapSelectUI",E.SETTING="settingUI",E.ACHIEVEMENT="achievementUI",E.SONGBOOK="songbookUI",E.RANKING="rankingUI",E.MUSIC_TRAVEL="musicTravelUI",E.CHALLENGE="challengeUI",E.COMPETITION="competitionUI",E.SKIN="skinUI",E.ONLINE_REWARD="onlineRewardUI",E.GARAGE="garageUI",E.VIP="vipUI",E.GET_VOUCHER="getVoucherUI",E.GET_SKIN="getSkinUI",E.UNLOCK_ENDLESS="unlockEndlessUI",E.MUSIC_RECOMMEND="musicRcmdUI",E.SKIN_RECOMMEND="skinRcmdUI",E.BUFF_RECOMMEND="buffRcmdUI",E.MAP_RECOMMEND="mapRcmdUI",E.UNLOCK_MUSIC="unlockMusicUI",E.SHARE_VIDEO="shareVideoUI",E.SHARE_HOT="shareHotUI",E.PK_MATCH="pkMatchUI",E.PK_RESULT="pkResultUI"}(e||(e={})),function(E){E.GAME_INIT="gameInit",E.GAME_READY_START="gameReadyStart",E.GAME_START="gameStart",E.GAME_RESULT="gameResult",E.GAME_PAUSE="gamePause",E.GAME_CONTINUE="gameContinue",E.GAME_WIN="gameWin",E.GAME_REVIVE="gameRevive",E.NEXT_LEVEL="nextLevel",E.RESTART="gameRestart",E.GAME_OVER="gameOver",E.QUICK_START="quickStart",E.MAP_LOAD_FINISH="mapLoadFinish",E.SHOW_UNLOCK_SKIN="showUnlockSkin",E.UPDATE_COMBAT_SHOW="updateCombatValShow",E.ADD_COMBAT_VALUE="addCombatValue",E.UPDATE_TIME="updateOnlineTime",E.RECEIVE_AWARD="receiveOnlineAward",E.UPDATE_MUSIC="updateMusic",E.PLAY_COVER_ANIM="playCoverAnim",E.LOOP_MUSIC="loopMusic",E.STOP_LOOP_MUSIC="stopLoopMusic",E.CAMERA_ZOOM="cameraZoom",E.COLLECT_PROP="collectProp",E.UPDATE_SKIN="updateSkin",E.INVINCIBLE="invincible",E.UPDATE_AD="updateAd",E.UPDATE_SIGN_BTN="updateSignInBtn",E.SET_GAME_PROGRESS="setGameProgress",E.UPDATE_SCORE="updateScore",E.SHOW_STAR_PROGRESS="showStarProgress",E.CHANGE_MAP="changeMap",E.CHANGE_MAP_SUCCESS="changeMapSuccess",E.SHOW_SPEED_UP="showSpeedUp",E.UPDATE_ACHIEVE="updateAchievementItem",E.SHOW_BANNER_AD="showBannerAd",E.UPDATE_MAP_TOG="updateMapTogContainer",E.UPDATE_MAP_INFO="updateMapInfo",E.UPDATE_RED_DOT="updateRedDot",E.CLOSE_ACHIEVE="closeAchievementUI",E.JUMP_TASK_MUSIC="jumpToTaskMusic",E.SHOW_TASK_GUIDE="showTaskGuide",E.SET_MAIN_BOTTOM="setMainBottom",E.JUMP_TO_ITEM="jumpToItem",E.SET_PLATFORM_COLOR="setPlatformColor",E.Ball_Skin_Show="ballSkinShow",E.Ball_Skin_Hide="ballSkinHide",E.Ball_Skin_Change="ballSkinChange",E.Ball_Auto_Move="ballAutoMove",E.CREATE_BEAT_ITEM="createBeatItem",E.UPDATE_GAME_SCORE="updateGameScore",E.TOUCH_BEAT_ITEM="touchBeatItem",E.ENTER_GAME="enterGame",E.CLEAR_MAP_INFO="clearMapInfo",E.SHOW_MAP_PREVIEW="showMapPreview",E.SET_PREVIEW_CAMERA="setPreviewCamera",E.UPDATE_CAR_PREVIEW="updateCarPreview",E.UPDATE_TIRE_MARKS="updateTireMarks",E.UPDATE_CAR_SPEED="updateCarSpeed",E.UPDATE_GARAGE_ITEM="updateGarageItem",E.UPDATE_MAP_TIME="updateMapTime",E.SHOW_NATIVE_AD="showNativeAd",E.CREATE_START_BOARD="createStartBoard",E.CREATE_START_POINT="createStartPoint",E.PLAYER_JUMP="playerJump",E.PLAYER_HIT_BLOCK="playerHitBlock",E.PLAY_SLASH_EFFECT="playSlashEffect",E.PLAY_EXPLODE_EFFECT="playExplodeEffect",E.PLAY_RING_EFFECT="playRingEffect",E.PLAY_DIAMOND_EFFECT="playDiamondEffect",E.PLAY_CONFTTI_EFFECT="playConfttiEffect",E.PLAY_LIGHTING_EFFECT="playLightingEffect",E.PLAY_FIRE_EFFECT="playFireEffect",E.PLAY_EFFECT="playEffect",E.PLAY_HUMMER_EFFECT="playHummerEffect",E.PLAY_POOP_EFFECT="playPoopEffect",E.PLAY_UPGRADE_EFFECT="playUpgradeEffect",E.PLAY_GATEFX_EFFECT="playGateFXEffect",E.PLAY_SPARK_EFFECT="playSparkEffect",E.REMOVE_AGENT="removeAgent",E.ADD_OBSTACLE="addObstacle",E.SET_GUIDE_TIP="setGuideTip",E.REMOVE_GUIDE_TIP="removeGuideTip",E.UPDATE_WEAPON_ITEM="updateWeaponItem",E.UPDATE_ENEMY_COUNT="updateEnemyCount",E.SET_AGENT_TARGET="setAgentTarget",E.UPDATE_AGENT_TARGET="updateAgentTarget",E.UPDATE_BRICK="updateBrick",E.UPDATE_SOLDIER_POINT="updateSoldierPoint",E.UPDATE_OBSTACLE_ID="updateObstacleId",E.REMOVE_BUFF_POINT="removeBUffPoint",E.INHERIT_SOLDIER="inheritSoldier",E.SET_BUFF_ITEM="setBuffItem",E.SET_RANK_ITEM="setRankItem",E.BUILD_BARRACK="buildBarrack",E.SET_WEAPON_BTN="setBuildBtn",E.SET_GAME_TUTORIAL="setGameTutorial",E.SHOW_BRICK_COUNT="showBrickCount",E.SHOW_WARN_TIP="showWarnTip",E.FREE_GOLD="showFreeGold",E.UPDATE_GOLD="updateGold",E.GOLD_ANIM="goldAnim",E.GOLD_ANIM_END="goldAnimEnd",E.UPDATE_VOUCHER="updateVoucher",E.CLEAR_STORAGE="clearLocalStorage",E.SHOW_BOARD_SCORE="showBoardScore",E.SET_BOARD_COLOR="setBoardColor",E.UPDATE_CAMERA_POS="updateCameraPos",E.CAMERA_WIN_POS1="cameraWinPos1",E.CAMERA_WIN_POS2="cameraWinPos2",E.CAMERA_WIN_DANCE="cameraWinDance",E.SHAKE_CAMERA="shakeCamera",E.CREATE_FINISH_ITEM="createFinishItem",E.SET_BIG_PRICKLE="setBigPrickle",E.PLAYER_INIT="playerInit",E.JUDGE_TURN="judgeTurn",E.UPDATE_SKIN_ITEM="updateSkinItem",E.CAMERA_PLAYER_RUN="cameraPlayerRun",E.CAMERA_PLAYER_ATTACK="cameraPlayerAttack",E.NATIVE_AD_SHOW="native_ad_show",E.NATIVE_AD_HIDE="native_ad_hide"}(T||(T={})),function(E){E.NORMAL="normal",E.ENDLESS="endless",E.PK="pk"}(I||(I={})),function(E){E.BGM="music",E.CLICK="click",E.COLLECT_COIN="collectCoin",E.CONGRATULATE="congratulate",E.RESULT="result",E.GET="get",E.HIT="hit",E.GET_DIAMOND="getDiamond",E.GET_DIAMOND_ANIM="getDiamondAnim",E.ADD_BRICK="addBrick",E.BUILD_BARRACK="buildBarrack",E.SHOOT="shoot",E.TANK_SHOOT="tankShoot",E.LEADER_DEAD="leaderDead",E.SOLDIER_DEAD="soldierDead",E.FLY_BRICK="flyBrick",E.HAMMER="hammer",E.UNDER_CONSTRUCTION="underConstruction",E.FINAL_WEAPON_LASER="finalWeapon_0",E.FINAL_WEAPON_SCATTER="finalWeapon_1",E.FINAL_WEAPON_ROBOT="finalWeapon_2",E.FINAL_WEAPON_SHOW="finalWeapon_show",E.UAV_ASSAULT="UAV_0",E.UAV_SCATTER="UAV_1",E.UAV_HEAVY="UAV_2",E.UAV_HEAVY_BOOM="UAV_2_boom",E.UAV_SMART="UAV_3",E.UAV_SHOW="UAV_show",E.GET_HIT="sfx_getHit",E.PLAYER_DEATH="sfx_death"}(R||(R={})),function(E){E[E.NORMAL=0]="NORMAL",E[E.RECOMMEND=1]="RECOMMEND",E[E.GUESS_YOU_LIKE=2]="GUESS_YOU_LIKE"}(a||(a={})),function(E){E.ALL="all",E.VIP="vip",E.UNLOCK="unlock"}(O||(O={})),function(E){E.WATCH_AD="watchAd",E.CLEAR_STAGE="clearStage",E.UNLOCK_MUSIC="unlockMusic",E.TOTAL_GOLD="totalGold",E.TOTAL_TIME="totalTime"}(t||(t={})),function(E){E.KEY="key"}(C||(C={})),function(E){E[E.GOLD=0]="GOLD",E[E.SKIN=1]="SKIN",E[E.COMBAT_VALUE=2]="COMBAT_VALUE",E[E.VOUCHER=3]="VOUCHER"}(N||(N={})),function(E){E[E.NORMAL=0]="NORMAL",E[E.NORMAL_NEW=1]="NORMAL_NEW",E[E.RECEIVE=2]="RECEIVE"}(U||(U={}));var S;!function(E){E[E.GREAT=10]="GREAT",E[E.PERFECT=15]="PERFECT"}(S||(S={}));var n,M=[e.MUSIC_RECOMMEND,e.MAP_RECOMMEND,e.UNLOCK_ENDLESS,e.TREASURE_BOX];!function(E){E.POPUP="显示窗口",E.BUTTON="按钮事件"}(n||(n={}));var o,L,D,P,i,c=[A("#ffc800"),A("#0fc2ff"),A("#ec266c"),A("#5ac132"),A("#ff7530"),A("#e144fc")];!function(E){E[E.BRICK=2]="BRICK",E[E.BRICK_COLLIDER=4]="BRICK_COLLIDER",E[E.SOLDIERS=8]="SOLDIERS",E[E.HIT_POINT=16]="HIT_POINT",E[E.BARRACK=32]="BARRACK"}(o||(o={})),function(E){E[E.SPEED=0]="SPEED",E[E.INVINCIBLE=1]="INVINCIBLE",E[E.BRICK=2]="BRICK",E[E.VIEW=3]="VIEW",E[E.RANGE=4]="RANGE",E[E.GET=5]="GET",E[E.LENGTH=6]="LENGTH"}(L||(L={})),function(E){E[E.POWER=0]="POWER",E[E.CARRY=1]="CARRY",E[E.RANGE=2]="RANGE",E[E.BUILD_BARRACK=3]="BUILD_BARRACK",E[E.BUILD_TANK=4]="BUILD_TANK",E[E.BUILD_UAV=5]="BUILD_UAV"}(D||(D={})),function(E){E[E.NONE=0]="NONE",E[E.FINAL_WEAPON=1]="FINAL_WEAPON",E[E.MERCENARY=2]="MERCENARY",E[E.BARRACK=3]="BARRACK"}(P||(P={})),function(E){E.USER_ID="userId",E.USER_NAME="userName",E.USER_HEADE="userHead"}(i||(i={}));var r=E("Constants",(function(){}));r.UI_DIALOG_NAME=e,r.EVENT_TYPE=T,r.GAME_MODE=I,r.AUDIO_SOURCE_TYPE=R,r.MUSIC_ITEM_TYPE=a,r.MUSIC_TYPE=O,r.ACHIEVEMENT_TYPE=t,r.PROP_TYPE=C,r.AWARD_TYPE=N,r.ONLINE_AWARD_UI_TYPE=U,r.LOCAL_MUSIC={bgm_game:!0,bgm_main:!0},r.SCORE_TYPE=S,r.RCMD_UI_ARRAY=M,r.STATISTICS_EVENT=n,r.COLLIDER_GROUP=o,r.BUFF_TYPE=L,r.ENEMY_TARGET_TYPE=P,r.WARN_TIP_TYPE=D,r.USER_KEY=i,r.IS_DEBUG=!0,r.REVIVE_COUNTDOWN_TIME=5,r.FREE_GET_GOLD_COUNT=600,r.SHARE_DIAMOND_COUNT=600,r.FADE_IN_DELAY_TIME=.8,r.TOTAl_SIGN_IN_DAYS=7,r.ONLINE_REWARD_COUNT=10,r.ONLINE_INTERVAL_TIME=120,r.DAILY_TURN_FREE_COUNT=1,r.GAME_WIN_GOLD=50,r.MAX_SOLDIER_LEVEL=4,r.AGENT_SPEED=8,r.ATTACK_RANGE=40,r.FLY_BARRACK_COUNT=10,r.BUILD_BARRACK_TIME=1,r.ADD_BRICK_COUNT=3,r.ADD_BRICK_RANGE=4,r.TOTAL_SOLDIER_COUNT=36,r.SOLDIER_COLOR_ARRAY=c,r.SOLDIER_SPACE=3,r.SOLDIER_LENGTH=3,r.SOLDIER_WIDTH=3,r.FINAL_WEAPON_BRICK_COUNT=130,r.MERCENARY_BRICK_COUNT=40,r.MERCENARY_BRICK_CD=15,_._RF.pop()}}}));

System.register("chunks:///_virtual/Handler.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"883773qEp9ElrgvVVh0Kbg2","Handler",void 0);t("Handler",(function(t,e){this._target=t,this._handler=e}));e._RF.pop()}}}));

System.register("chunks:///_virtual/musicBarAni.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,t,n,o,i,a,l,c,u,s,h,p,f,b,m,d;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,n=r.initializerDefineProperty,o=r.assertThisInitialized},function(r){i=r.cclegacy,a=r._decorator,l=r.Color,c=r.loader,u=r.Prefab,s=r.instantiate,h=r.Vec3,p=r.lerp,f=r.SpriteComponent,b=r.director,m=r.UITransformComponent,d=r.Component}],execute:function(){var g,v,y,w,A,B,M;i._RF.push({},"8873dajxVNK26k7urqsRbJm","musicBarAni",void 0);var C,z=a.ccclass,L=a.property,P=(r("Perlin",z("musicBarAni")((y=e((v=function(r){function e(){for(var e,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=r.call.apply(r,[this].concat(i))||this,n(e,"colorA",y,o(e)),n(e,"colorB",w,o(e)),n(e,"number",A,o(e)),n(e,"barLength",B,o(e)),n(e,"aniSpeed",M,o(e)),e.nodes=[],e.targets=[],e.time=.1,e.timer=0,e}t(e,r);var i=e.prototype;return i.start=function(){var r=this;c.loadRes("prefab/ui/item/musicBar",u,(function(e,t){for(var n=r.colorA.clone(),o=360/r.number,i=1/r.number*2+.01,a=0;a<r.number/2;a++){var l=s(t);l.parent=r.node,l.eulerAngles=new h(0,0,o*a),r.nodes.push(l),n.r=p(n.r,r.colorB.r,i),n.g=p(n.g,r.colorB.g,i),n.b=p(n.b,r.colorB.b,i),l.children[0].children[0].getComponent(f).color=n}n=r.colorB.clone();for(var c=r.number/2;c<r.number;c++){var u=s(t);u.parent=r.node,u.eulerAngles=new h(0,0,o*c),r.nodes.push(u),n.r=p(n.r,r.colorA.r,i),n.g=p(n.g,r.colorA.g,i),n.b=p(n.b,r.colorA.b,i),u.children[0].children[0].getComponent(f).color=n}}))},i.update=function(r){if(this.timer+=b.getDeltaTime(),this.timer>=this.time){this.timer=0,this.targets=[];for(var e=0;e<this.nodes.length;e++){var t=_(1e4*(Math.random()-.5)),n=Math.abs(t-.2)*this.barLength;this.targets.push(n)}}for(var o=0;o<this.targets.length;o++){var i=this.nodes[o].children[0].children[0].getComponent(m).width;i=p(i,this.targets[o],this.aniSpeed),this.nodes[o].children[0].children[0].getComponent(m).width=i}},e}(d)).prototype,"colorA",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),w=e(v.prototype,"colorB",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),A=e(v.prototype,"number",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),B=e(v.prototype,"barLength",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),M=e(v.prototype,"aniSpeed",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),g=v))||g),4095),S=function(r){return.5*(1-Math.cos(r*Math.PI))};function _(r,e,t){if(e=e||0,t=t||0,null==C){C=new Array(4096);for(var n=0;n<4096;n++)C[n]=Math.random()}r<0&&(r=-r),e<0&&(e=-e),t<0&&(t=-t);for(var o,i,a,l,c,u=Math.floor(r),s=Math.floor(e),h=Math.floor(t),p=r-u,f=e-s,b=t-h,m=0,d=.5,g=0;g<4;g++){var v=u+(s<<4)+(h<<8);o=S(p),i=S(f),a=C[v&P],a+=o*(C[v+1&P]-a),l=C[v+16&P],a+=i*((l+=o*(C[v+16+1&P]-l))-a),l=C[(v+=256)&P],l+=o*(C[v+1&P]-l),c=C[v+16&P],l+=i*((c+=o*(C[v+16+1&P]-c))-l),m+=(a+=S(b)*(l-a))*d,d*=.5,u<<=1,s<<=1,h<<=1,(p*=2)>=1&&(u++,p--),(f*=2)>=1&&(s++,f--),(b*=2)>=1&&(h++,b--)}return m}i._RF.pop()}}}));

System.register("chunks:///_virtual/Common.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"8c8ec5/ElBNFLgEmjbQZMCs","Common",void 0);t("Vector2",function(){function t(t,n){this.x=0,this.y=0,this.x=t,this.y=n}var n=t.prototype;return n.setPos=function(t,n){this.x=t,this.y=n},n.plus=function(n){return new t(this.x+n.x,this.y+n.y)},n.minus=function(n){return new t(this.x-n.x,this.y-n.y)},n.multiply=function(t){return this.x*t.x+this.y*t.y},n.scale=function(n){return new t(this.x*n,this.y*n)},n.copy=function(t){return this.x=t.x,this.y=t.y,this},n.clone=function(){return new t(this.x,this.y)},n.substract=function(t,n){return t.x-=n.x,t.y-=n.y,t},n.lengthSqr=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t}()),t("Obstacle",(function(){})),t("Line",(function(){})),t("KeyValuePair",(function(t,n){this.key=t,this.value=n}));t("RVOMath",function(){function t(){}return t.absSq=function(t){return t.multiply(t)},t.normalize=function(n){return n.scale(1/t.abs(n))},t.distSqPointLineSegment=function(n,i,u){var s=u.minus(n),e=i.minus(n),r=s.multiply(e)/t.absSq(e);return r<0?t.absSq(s):r>1?t.absSq(u.minus(i)):t.absSq(u.minus(n.plus(e.scale(r))))},t.sqr=function(t){return t*t},t.det=function(t,n){return t.x*n.y-t.y*n.x},t.abs=function(n){return Math.sqrt(t.absSq(n))},t.leftOf=function(n,i,u){return t.det(n.minus(u),i.minus(n))},t}()).RVO_EPSILON=1e-5,n._RF.pop()}}}));

System.register("chunks:///_virtual/RDTencentGDTPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./RDPlatformType.ts","./RDPlatformParam.ts","./RDPlatform.ts"],(function(t){"use strict";var e,n,a,i,o,r,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t.sys},function(t){i=t.Log},function(t){o=t.RDPlatformType},function(t){r=t.RDPlatformParam},function(t){c=t.RDPlatform}],execute:function(){n._RF.push({},"8f8877aEVhKQ7GXyvDB2UQu","RDTencentGDTPlatform",void 0);t("RDTencentGDTPlatform",function(t){function n(e){var n;return(n=t.call(this,e)||this).vibrateInterval=null,n}e(n,t);var c=n.prototype;return c.loadStorageData=function(t,e,n){var i=JSON.parse(a.localStorage.getItem(t[0]));e&&e(i)},c.flushStorageData=function(t,e){a.localStorage.setItem(t.key,JSON.stringify(t.data))},c.initAD=function(){window.TencentGDT=window.TencentGDT||[];var t,e,n,a=this,c=r.ADPARAM[o.TencentGTD7377.toString()].video_id,s=r.ADPARAM[o.TencentGTD7377.toString()].appid;i.log("开始创建广告位==="),window.TencentGDT.push({placement_id:c,app_id:s,type:"rewardVideo",onComplete:function(t){i.log("开始创建广告位==="+JSON.stringify(t)),0==t.code?a._videoBoxInstance=new window.TencentGDT.NATIVE.rewardVideoAd((function(t){var e=JSON.parse(t);i.log("成功回调2222222333   "+JSON.stringify(e)),0==e.code?(i.log("成功回调1"+e.data.action),"onReward"==e.data.action?a._rewardCaback&&a._rewardCaback.success(null):"onADClose"==e.data.action?(i.log("激励视频关闭"),a._rewardCaback&&a._rewardCaback.fail()):"onADLoad"==e.data.action?(i.log("加载视频成功"),a._videoBoxInstance&&a._videoBoxInstance.showAd()):"onError"==e.data.action&&(i.log("加载广告失败"),a._rewardCaback&&a._rewardCaback.fail())):a._rewardCaback&&a._rewardCaback.fail()})):i.log("失败")}}),t=document,e=t.getElementsByTagName("head")[0],(n=t.createElement("script")).async=!0,n.src="//qzs.qq.com/qzone/biz/res/i.js",e&&e.insertBefore(n,e.firstChild)},c._vibrateShort=function(t){void 0===t&&(t=50),100!=t?this.startVibrate(t):this.startPeristentVibrate(100,.01)},c.startVibrate=function(t){navigator.vibrate(t)},c.stopVibrate=function(){this.vibrateInterval&&clearInterval(this.vibrateInterval),navigator.vibrate(0)},c.startPeristentVibrate=function(t,e){this.vibrateInterval=setInterval((function(){this.startVibrate(t)}),e)},c._showBannerAd=function(t){if(this.isReviewed())i.log("审核中=====");else{var e=r.ADPARAM[o.TencentGTD7377.toString()].banner_id,n=r.ADPARAM[o.TencentGTD7377.toString()].appid;window.TencentGDT.push({placement_id:e,app_id:n,type:"native",display_type:"banner",carousel:6e3,containerid:"banner_2_0",onComplete:function(t){0==t.ret?i.log("广告播放成功"):i.log("广告播放失败")}})}},c._showVideo=function(t){this.isReviewed()?this._rewardCaback.success(null):(i.log("点击开始激励视频播放"),this._videoBoxInstance.loadAd())},c._showIntertitalAd=function(t){if(!this.isReviewed()){var e=r.ADPARAM[o.TencentGTD7377.toString()].interstital_id,n=r.ADPARAM[o.TencentGTD7377.toString()].appid;window.TencentGDT.push({placement_id:e,app_id:n,type:"native",display_type:"interstitial",count:1,onComplete:function(t){t&&0===t.ret?window.TencentGDT.NATIVE.renderAd(t.data[0]):i.log(t.ret)}})}},n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/TimeTask.ts",["cc"],(function(s){"use strict";var t,i;return{setters:[function(s){t=s.cclegacy,i=s._decorator}],execute:function(){var e;t._RF.push({},"92729kA48BJDbwlkukOQa/v","TimeTask",void 0);var c=i.ccclass;i.property,s("TimeTask",c("TimeTask")(e=function(s,t,i,e,c){void 0===c&&(c=-1),this.taskID=-1,this.delay=0,this.isPause=!1,this.destTime=0,this.curTime=0,this.callback=s,this.taskID=c,this.delay=t,this.destTime=i,this.curTime=e})||e);t._RF.pop()}}}));

System.register("chunks:///_virtual/RDXMMiniPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./RDPlatformType.ts","./RDPlatformParam.ts","./RDPlatform.ts"],(function(t){"use strict";var n,i,o,e,a,s,r;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t.sys},function(t){e=t.Log},function(t){a=t.RDPlatformType},function(t){s=t.RDPlatformParam},function(t){r=t.RDPlatform}],execute:function(){i._RF.push({},"948dbaY6AJBj4L5oi246QP1","RDXMMiniPlatform",void 0);t("RDXMMiniPlatform",function(t){function i(n){var i;return(i=t.call(this,n)||this).startTime=(new Date).getTime(),i.nativeLastTime=(new Date).getTime(),i}n(i,t);var r=i.prototype;return r.loadStorageData=function(t,n,i){var e=JSON.parse(o.localStorage.getItem(t[0]));n&&n(e)},r.flushStorageData=function(t,n){o.localStorage.setItem(t.key,JSON.stringify(t.data))},r.initAD=function(){var n=this;t.prototype.initAD.call(this),this._login(null);var i=s.ADPARAM[a.XMGame.toString()].video_id;this._videoBoxInstance=window.qg.createRewardedVideoAd({adUnitId:i}),this._videoBoxInstance.load(),this._videoBoxInstance.onLoad((function(){e.log("视频广告加载成功")})),this._videoBoxInstance.onError((function(t){n._showToast("暂时没有视频了，请稍后再试"),e.log("videoAd.onError,errMsg",JSON.stringify(t)),n._rewardCaback&&n._rewardCaback.fail()})),this._videoBoxInstance.onClose((function(t){e.log("玩家有操作",JSON.stringify(t)),t&&t.isEnded||void 0===t?(e.log("正常播放结束，可以下发游戏奖励"),n._rewardCaback&&n._rewardCaback.success(null)):n._rewardCaback&&(e.log("播放中途退出，不下发游戏奖励"),n._rewardCaback.fail()),n._rewardCaback=null}))},r.createBanner=function(){var t=s.ADPARAM[a.XMGame.toString()].banner_id;return e.log("广告bannerID===="+t),window.qg.createBannerAd({adUnitId:t})},r.shareAppMessage=function(t){},r._showToast=function(t){window.qg.showToast({title:t,icon:"none",image:"",mask:!1,duration:2e3,success:function(){},fail:function(){},complete:function(){}})},r._gotoMiniGameByAppid=function(t){e.log("跳转小游戏"+t.packName),window.qg.navigateToMiniGame({pkgName:t.packName,success:function(){e.log("跳转成功")},fail:function(t){e.log(JSON.stringify(t))},complete:function(){}})},r._vibrateShort=function(t){void 0===t&&(t=50),100!=t?this.vibrate(t):this.vibrateStrong()},r.vibrateStrong=function(){window.qg.vibrateLong({success:function(){},fail:function(){},complete:function(){}})},r.vibrate=function(t){var n=t/15,i=0,o=setInterval((function(){window.qg.vibrateShort({success:function(){},fail:function(){},complete:function(){}}),++i>n&&(clearTimeout(o),o=null)}),15)},r._showBannerAd=function(t){this.isReviewed()?e.log("审核中====="):(this._bannerADInstance&&this._bannerADInstance.hide(),this._bannerADInstance=null,this._bannerShow=!1,this._bannerADInstance=this.createBanner(),this._bannerADInstance.onError(function(t){e.log("banner 广告失败"+JSON.stringify(t))}.bind(this)),this._bannerADInstance.onLoad((function(){e.log("load success")})),this._bannerADInstance.show().then((function(){return e.log("banner 广告显示")})))},r._showVideo=function(t){this.isReviewed()?this._rewardCaback&&this._rewardCaback.success(null):(e.log("准备激励广告 展示开始"),this._videoBoxInstance.show())},r._showIntertitalAd=function(n){if(!this.isReviewed()&&(t.prototype._showIntertitalAd.call(this,null),!this._interstitialAdInstance)){e.log("開始广告加载成功");var i=s.ADPARAM[a.XMGame.toString()].interstital_id;this._interstitialAdInstance=window.qg.createInterstitialAd({adUnitId:i}),this._interstitialAdInstance&&(this._interstitialAdInstance.onLoad((function(){e.log("插屏 广告加载成功")})),this._interstitialAdInstance.onError((function(t){e.log("插屏失败"+JSON.stringify(t))})),this._interstitialAdInstance.onClose((function(t){e.log("插屏 广告关闭")})),this._interstitialAdInstance.onShow((function(){e.log("插屏视频广告展示")})),this._interstitialAdInstance.show())}},r._createShortcutInstalled=function(t){if(window.qg.getProvider()){var n=this;window.qg.getShortcut().hasInstalled({success:function(t){e.log("判断图标未存在时，创建图标"+JSON.stringify(t)),n._hasShortcutInstalled=t},fail:function(t){},complete:function(){}})}},r._installShortcut=function(t){e.log("各个平台处理");var n=this;window.qg.getShortcut().install({success:function(){e.log("各个平台处理==="),n._hasShortcutInstalled=!1,n._shortCutInstalledCaback&&n._shortCutInstalledCaback.success(null)},fail:function(t){e.log("各个平台处理1111111==="),n._shortCutInstalledCaback&&n._shortCutInstalledCaback.fail()},complete:function(){}})},r._login=function(t){},i}(r));i._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.construct},function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"95625H0cslDu5hNxqDbAauE","SingletonBase",void 0);n("SingletonBase",function(){function n(){}return n.getInstance=function(){for(var n=this,e=arguments.length,c=new Array(e),s=0;s<e;s++)c[s]=arguments[s];return n._instance||(n._instance=t(n,c))},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingletonBase2.ts","./Utils.ts","./AppManager.ts"],(function(t){"use strict";var a,n,e,i,o,r;return{setters:[function(t){a=t.inheritsLoose,n=t.createClass},function(t){e=t.cclegacy},function(t){i=t.SingletonBase},function(t){o=t.Utils},function(t){r=t.App}],execute:function(){e._RF.push({},"958b0aTZ7FGNpspjnvEkX/C","WeaponData",void 0);var s,c;t("WeaponDataMgr",function(t){function n(){for(var a,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(a=t.call.apply(t,[this].concat(e))||this)._weaponDataArr=[],a._weaponDataObj={},a}a(n,t);var e=n.prototype;return e.init=function(){this._initJsonSkinData(),this._initLocalSkinData()},e.getCurrentWeaponData=function(){return this.getDataById(r.RankDataMgr.getPlayerRankData().weaponId)},e.setCurrentWeaponData=function(t){var a=r.RankDataMgr.getPlayerRankData();a.weaponId=t,r.RankDataMgr.setPlayerRankData(a)},e.getDataById=function(t){return this._weaponDataObj[t]},e.getLocalDataById=function(t){return r.Account.getWeaponData(t)},e.setLocalDataById=function(t,a){r.Account.setWeaponData(t,a)},e.getDataCount=function(){return this._weaponDataArr.length},e.getWeaponDataArray=function(){return this._weaponDataArr},e.getRandomWeaponData=function(){return this._weaponDataArr[o.random(0,this._weaponDataArr.length-1)]},e.getUnlockWeaponTypeArray=function(){for(var t=[],a=0;a<this._weaponDataArr.length;a++){this.getLocalDataById(this._weaponDataArr[a].weaponType).isUnlock&&t.push(this._weaponDataArr[a].weaponType)}return t},e.unlockWeapon=function(t){var a=this.getLocalDataById(t);a.isUnlock=!0,this.setLocalDataById(t,a)},e._initJsonSkinData=function(){for(var t=r.RDAsset.getAsset("WeaponDataList").json,a=0,n=Object.keys(t).length;a<n;a++){var e=new u,i=t[a];e.initData(a,i),this._weaponDataArr.push(e),this._weaponDataObj[e.id]=e}},e._initLocalSkinData=function(){for(var t=0,a=this._weaponDataArr.length;t<a;t++){var n=this._weaponDataArr[t];if(n.unlockType==c.NONE){var e=this.getLocalDataById(n.id);e.isUnlock=!0,this.setLocalDataById(n.id,e)}}},n}(i));!function(t){t[t.HUMMER=0]="HUMMER",t[t.KNIFE=1]="KNIFE",t[t.GUN=2]="GUN"}(s||(s={})),function(t){t[t.NONE=0]="NONE",t[t.DIAMOND=1]="DIAMOND",t[t.VIDEO=2]="VIDEO",t[t.SIGN_IN=3]="SIGN_IN",t[t.TURNTABLE=4]="TURNTABLE"}(c||(c={}));var u=t("WeaponData",function(){function t(){this._index=0,this._id=0,this._name="",this._weaponType=s.GUN,this._unlockType=c.NONE,this._amount=0,this._areaScale=0,this._minDamage=0,this._maxDamage=0,this._chargeTime=0}return t.prototype.initData=function(t,a){this._index=t,this._id=a.id,this._name=a.name,this._weaponType=a.weaponType,this._unlockType=a.unlockType,this._amount=a.amount,this._areaScale=a.areaScale,this._minDamage=a.minDamage,this._maxDamage=a.maxDamage,this._chargeTime=a.chargeTime},n(t,[{key:"index",get:function(){return this._index}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"weaponType",get:function(){return this._weaponType}},{key:"unlockType",get:function(){return this._unlockType}},{key:"amount",get:function(){return this._amount}},{key:"areaScale",get:function(){return this._areaScale}},{key:"minDamage",get:function(){return this._minDamage}},{key:"maxDamage",get:function(){return this._maxDamage}},{key:"chargeTime",get:function(){return this._chargeTime}}]),t}());u.WEAPON_TYPE=s,u.UNLOCK_TYPE=c,e._RF.pop()}}}));

System.register("chunks:///_virtual/RDSocialManager.ts",["cc","./Log.ts","./RDPlatformType.ts","./RDCommand.ts","./RDPlatformManager.ts"],(function(n){"use strict";var t,a,e,i,r;return{setters:[function(n){t=n.cclegacy},function(n){a=n.Log},function(n){e=n.RDPlatformType},function(n){i=n.RDCommand},function(n){r=n.RDPlatformManager}],execute:function(){t._RF.push({},"96328mDz9lKDaIgwWZ1uvWO","RDSocialManager",void 0);var s=n("RDSocialManager",function(){function n(){this.lastRank=0,this.currentRank=0}n.getInstance=function(){return this._instance};var t=n.prototype;return t.init=function(){a.debug(n.TAG,"[RDSocialManager] Init"),this.updateRankInfo()},t.setLastRank=function(n){n>0&&(this.lastRank=n)},t.setCurrentRank=function(n){n>0&&(this.currentRank=n)},t.getRankUp=function(){return this.lastRank<=0?this.currentRank:this.lastRank-this.currentRank},t.getCurrentRank=function(){return this.currentRank},t.updateRankInfo=function(){r.getInstance().sendData(i.CMD_GET_RANK,null)},t.share=function(n){r.getInstance().sendData(i.CMD_SHARE,n),r.getInstance().sendData(i.CMD_DATA_STATISTICS,{event:!0,ad_type:i.STATISTICS_SHARE})},t.isShowVideo=function(){return r.getInstance().platformType==e.TTMinGame},t.startRecordVideo=function(n){r.getInstance().sendData(i.CMD_RECORDVIDEO,n)},t.pauseRecordVideo=function(){r.getInstance().sendData(i.CMD_STOPRECORDVIDEO,null)},t.shareVideo=function(n){r.getInstance().sendData(i.CMD_SHAREVIDEO,n)},n}());s.TAG="RDSocialManager",s.PAGE_COUNT=100,s._instance=new s,t._RF.pop()}}}));

System.register("chunks:///_virtual/FinalWeaponMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDStatisticsManager.ts","./RankData.ts","./AppManager.ts","./EnemyAIMgr.ts","./BrickCountMgr.ts","./FireBallMgr.ts","./TrajectoryBulletMgr.ts","./MercenaryMgr.ts","./SoldierAgentMgr.ts","./PlayerMgr.ts"],(function(e){"use strict";var t,o,i,n,r,s,a,l,c,h,u,_,d,p,g,m,C,N,T,y,P,A,E,f,k,B;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass},function(e){i=e.cclegacy,n=e._decorator,r=e.SphereCollider,s=e.v3,a=e.find,l=e.isValid,c=e.math,h=e.Tween,u=e.tween,_=e.MeshRenderer,d=e.color,p=e.Component},function(e){g=e.CommonUtils},function(e){m=e.Constants},function(e){C=e.StageEventType},function(e){N=e.RankData},function(e){T=e.App},function(e){y=e.EnemyAIMgr},function(e){P=e.BrickCountMgr},function(e){A=e.FireBallMgr},function(e){E=e.TrajectoryBulletMgr},function(e){f=e.MercenaryMgr},function(e){k=e.SoldierAgentMgr},function(e){B=e.PlayerMgr}],execute:function(){var R;i._RF.push({},"97470NcMxlCRouHb0vZmKM/","FinalWeaponMgr",void 0);var S=n.ccclass;e("FinalWeaponMgr",S("FinalWeaponMgr")(R=function(e){function i(){for(var t,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this)._colliderComp=null,t._muzzleNode=null,t._shootPointNode=null,t._attackCircleNode=null,t._collectCircleNode=null,t._isCanShoot=!1,t._teamType=-1,t._curBirckCnt=0,t._curBirckTeamType=-1,t._animObj={sectorAngle:0},t._onTriggerNodes=[],t._boxNode=null,t.isBuildSuccess=!1,t.weaponType=N.FINAL_WEAPON_TYPE.LASER,t.brickCountMgr=null,t}t(i,e);var n=i.prototype;return n.onLoad=function(){this._shootPointNode=g.getNodeByName(this.node,"shootPoint"),this._attackCircleNode=g.getNodeByName(this.node,"attackCircle"),this._collectCircleNode=g.getNodeByName(this.node,"collectCircle"),this._boxNode=g.getNodeByName(this.node,"finalBox"),this._colliderComp=this.node.getComponent(r);var e=2*this._colliderComp.radius;this._attackCircleNode.setScale(e,e,e),this.resetList()},n.onEnable=function(){this._registerEvent(!0)},n.onDisable=function(){this.brickCountMgr&&T.Pool.putNode(this.brickCountMgr.node),this.brickCountMgr=null,this._registerEvent(!1)},n._registerEvent=function(e){var t=e?"on":"off";T.Event[t](m.EVENT_TYPE.CLEAR_MAP_INFO,this.resetList,this),this._colliderComp[t]("onTriggerStay",this._onTriggerStay,this),this._colliderComp[t]("onTriggerExit",this._onTriggerExit,this)},n.init=function(){this.resetList();var e=T.RankDataMgr.getPlayerRankData().showWeaponCnt;this.weaponType=e<=2?e:g.getRandomInteger(0,2),this._initBrickCntItem(2,s(0,300,0)),console.log("-------------FinalWeapon:",this.weaponType)},n._initBrickCntItem=function(e,t){var o=this;void 0===e&&(e=0),void 0===t&&(t=s(0,120,0)),this.brickCountMgr&&T.Pool.putNode(this.brickCountMgr.node),this.brickCountMgr=null,T.Res.loadPrefab("prefab/ui/item/BrickCntItem_"+e).then((function(e){var i=a("Canvas/BrickCountParentNode"),n=T.Pool.getNode(e,i);g.getNodeComponent(n,n.name,P).init(o,t)}))},n._onTriggerStay=function(e){var t=e.otherCollider;if(this.isBuildSuccess&&this.weaponType!=N.FINAL_WEAPON_TYPE.ROBOT&&T.GameData.isInGame()&&l(t)&&"hitPoint"==t.node.name){var o=g.getParentComponent(t.node,"soldier",k)||g.getParentComponent(t.node,"mercenary",f)||g.getParentComponent(t.node,"enemyAI",y)||g.getParentComponent(t.node,"playerMgr",B);if(!o||this.teamType==o.teamType||o.HP<=0)return;if(o instanceof k&&o.isForSynthesis)return;if((o instanceof B||o instanceof y)&&!o.isCanShoot)return;if(this._addTirggerNode(t.node),!this._isCanShoot)return;if(this._muzzleNode){var i=t.node.worldPosition.clone().subtract(this._muzzleNode.worldPosition.clone()).normalize();this._muzzleNode.setWorldRotationFromEuler(0,c.toDegree(Math.atan2(-i.z,i.x))+90,0)}this._playShootAnim(o,t.node)}},n._onTriggerExit=function(e){var t=e.otherCollider;this.isBuildSuccess&&this.weaponType==N.FINAL_WEAPON_TYPE.LASER&&T.GameData.isInGame()&&l(t)&&("hitPoint"==t.node.name&&this._removeTriggerNode(t.node))},n._addTirggerNode=function(e){this.weaponType==N.FINAL_WEAPON_TYPE.LASER&&e&&(-1==this._onTriggerNodes.indexOf(e)&&this._onTriggerNodes.push(e))},n._removeTriggerNode=function(e){var t=this._onTriggerNodes.indexOf(e);-1!==t&&this._onTriggerNodes.splice(t,1)},n.buildWeapon=function(e,t){var o;if(!this.isBuildSuccess){if(-1==this._curBirckTeamType)this._curBirckCnt=t,this._curBirckTeamType=e.teamType;else if(this._curBirckTeamType==e.teamType)this._curBirckCnt+=t;else{var i=t>=this._curBirckCnt;this._curBirckTeamType=i?e.teamType:this._curBirckTeamType,this._curBirckCnt=i?t-this._curBirckCnt:this._curBirckCnt-t}this._setCollectMtl(this._curBirckTeamType,this._curBirckCnt/m.FINAL_WEAPON_BRICK_COUNT*360),this._checkBuildSuccess(e),null===(o=this.brickCountMgr)||void 0===o||o.updateBrickCnt(this._curBirckCnt,this._curBirckTeamType)}},n.resetList=function(){this.isBuildSuccess=!1,this._onTriggerNodes=[],this._teamType=-1,this._curBirckTeamType=-1,this._curBirckCnt=0,this._isCanShoot=!1,this._setWeaponMtl(),this._resetCircleMtl();var e=g.getNodeByName(this._boxNode,"6");null==e||e.setPosition(0,0,.2),this._boxNode&&(this._boxNode.active=!0),this.brickCountMgr&&T.Pool.putNode(this.brickCountMgr.node),this.brickCountMgr=null},n._setWeaponMtl=function(){var e=this,t=g.getNodeByName(this.node,"finalWeaponParent");null==t||t.destroyAllChildren(),this._muzzleNode=null,-1!=this.teamType&&this.weaponType!=N.FINAL_WEAPON_TYPE.ROBOT&&t&&T.Res.loadPrefab("finalWeapon/finalWeapon_"+this.weaponType,"prefab").then((function(o){var i=T.Pool.getNode(o,t);e._shootPointNode=g.getNodeByName(i,"shootPoint"),e._muzzleNode=g.getNodeByName(i,"weapon_top"),h.stopAllByTarget(i),i.setScale(0,0,0),u(i).to(.3,{scale:s(1.2,1.2,1.2)}).to(.2,{scale:s(1,1,1)}).start()}))},n._resetCircleMtl=function(){var e=g.getNodeComponent(this._attackCircleNode,this._attackCircleNode.name,_).material;e.setProperty("mainColor",this.isBuildSuccess?m.SOLDIER_COLOR_ARRAY[this.teamType]:d(255,255,255,255)),e.setProperty("outerWidth",1.1);var t=g.getNodeComponent(this._collectCircleNode,this._collectCircleNode.name,_).material;t.setProperty("mainColor",this.isBuildSuccess?m.SOLDIER_COLOR_ARRAY[this.teamType]:d(255,255,255,255)),t.setProperty("outerWidth",.95),t.setProperty("sectorAngle",0)},n._setCollectMtl=function(e,t){var o=this,i=g.getNodeComponent(this._collectCircleNode,this._collectCircleNode.name,_).material;i.setProperty("mainColor",m.SOLDIER_COLOR_ARRAY[e]),h.stopAllByTarget(this._animObj),this._animObj.sectorAngle=i.getProperty("sectorAngle"),u(this._animObj).to(.3,{sectorAngle:t},{easing:"quadOut",onUpdate:function(){i&&i.setProperty("sectorAngle",o._animObj.sectorAngle?o._animObj.sectorAngle:0)}}).start()},n._checkBuildSuccess=function(e){var t=this;if(!this.isBuildSuccess)if(this._curBirckCnt>=m.FINAL_WEAPON_BRICK_COUNT){this.isBuildSuccess=!0,this._teamType=e.teamType,T.Event.emit(m.EVENT_TYPE.PLAY_GATEFX_EFFECT,this.teamType);var o=T.RankDataMgr.getPlayerRankData();T.Stats.stageRunning(o.rankId.toString(),T.RankDataMgr.getDataById(o.rankId).name,C.TOOLS,{finalWeapon:e instanceof B?"玩家":"AI"});var i=T.Account.getPlayerRankData();if(i.showWeaponCnt++,T.Account.setPlayerRankData(i),this.brickCountMgr&&T.Pool.putNode(this.brickCountMgr.node),this.brickCountMgr=null,T.Audio.playSound(m.AUDIO_SOURCE_TYPE.FINAL_WEAPON_SHOW),this._boxNode&&(this._boxNode.active=!1),this.weaponType==N.FINAL_WEAPON_TYPE.ROBOT)e.turnIntoFinalWeapon(),this.scheduleOnce((function(){var e=g.getNodeComponent(t._collectCircleNode,t._collectCircleNode.name,_).material;e&&e.setProperty("sectorAngle",0),e.setProperty("outerWidth",1.1)}),.5);else{var n=g.getNodeComponent(this._attackCircleNode,this._attackCircleNode.name,_).material;n.setProperty("mainColor",m.SOLDIER_COLOR_ARRAY[this.teamType]),n.setProperty("outerWidth",.99),this._setWeaponMtl(),this.scheduleOnce((function(){t._isCanShoot=!0}),1.25)}}else T.Event.emit(m.EVENT_TYPE.PLAY_SPARK_EFFECT,e.teamType,this.node.worldPosition,3)},n._playShootAnim=function(e,t){var o=this;this._isCanShoot=!1,this.scheduleOnce((function(){o._isCanShoot=!0}),T.RankDataMgr.getFinalWeaponIntervalTime(this.weaponType)),T.GameData.isInGame()&&t&&e.isCanShoot&&!(e.HP<=0)&&(this._muzzleNode?u(this._muzzleNode).to(.05,{position:s(0,3,-.5)}).call((function(){o._shoot(e,t)})).to(.02,{position:s(0,3,0)}).start():this._shoot(e,t))},n._shoot=function(e,t){var o=this;T.Res.loadPrefab(this.weaponType==N.FINAL_WEAPON_TYPE.LASER?"fireBall":"shootBall_Boss","prefab").then((function(i){if(T.GameData.isInGame()&&t&&e.isCanShoot&&!(e.HP<=0)){var n=T.RankDataMgr.getFinalWeaponDamage(o.weaponType);if(o.weaponType==N.FINAL_WEAPON_TYPE.LASER)T.Audio.playSound(m.AUDIO_SOURCE_TYPE.FINAL_WEAPON_LASER),T.Event.emit(m.EVENT_TYPE.PLAY_EFFECT,"magicLight",o._shootPointNode),T.Pool.getNode(i,o.node.parent).getComponent(A).init(o,n,e.node.worldPosition.clone());else if(o.weaponType==N.FINAL_WEAPON_TYPE.SCATTER){T.Event.emit(m.EVENT_TYPE.PLAY_EFFECT,"shootSmoke",o._shootPointNode),T.Audio.playSound(m.AUDIO_SOURCE_TYPE.FINAL_WEAPON_SCATTER);var r=o._shootPointNode,a=[-8,0,8],l=s();o._shootPointNode.worldRotation.getEulerAngles(l);for(var c=0;c<a.length;c++){var h=T.Pool.getNode(i,o.node.parent);h.setWorldPosition(r.worldPosition.clone()),h.setRotationFromEuler(0,l.y+a[c],0),h.getComponent(E).init(o,n,o._colliderComp.radius)}}}}))},o(i,[{key:"teamType",get:function(){return this._teamType}}]),i}(p))||R);i._RF.pop()}}}));

System.register("chunks:///_virtual/PushControl.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./EventManager.ts","./Log.ts","./RDCommand.ts","./OptionsManager.ts","./ADMainPush.ts","./AdsManager.ts","./RDPlatformManager.ts"],(function(t){"use strict";var n,i,e,s,a,h,o,r,d,c,l,u,v,_;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,s=t.ButtonComponent,a=t.v3,h=t.Component},function(t){o=t.CommonUtils},function(t){r=t.EventManager},function(t){d=t.Log},function(t){c=t.RDCommand},function(t){l=t.default},function(t){u=t.ADMainPush},function(t){v=t.AdsManager},function(t){_=t.RDPlatformManager}],execute:function(){var g;i._RF.push({},"9881bsORXlB3rDVA9EYaABp","PushControl",void 0);var P=e.ccclass;t("PushControl",P("PushControl")(g=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];return(n=t.call.apply(t,[this].concat(e))||this)._mainPush=[],n._oldMainPush=[],n._bannerList=null,n._drawList=null,n.addIcon=null,n.wxBtn=null,n._adBanner=null,n._adBannerScript=null,n._interstitialNativeAd=null,n._interstitialScript=null,n._isGamePlaying=!1,n._splashNativeAd=null,n._bannerListCreate=!1,n._drawCreate=!1,n._bgMask=null,n}n(i,t),i.getInstance=function(){return this._instance};var e=i.prototype;return e.start=function(){var t=this;i._instance=this,this._mainPush.push(this.node.getChildByName("mainPush1")),this._mainPush.push(this.node.getChildByName("mainPush2")),this._mainPush.push(this.node.getChildByName("mainPush3")),this._mainPush.push(this.node.getChildByName("mainPush4")),this._bannerList=this.node.getChildByName("bannerList"),this._drawList=this.node.getChildByName("drawList"),this._adBanner=this.node.getChildByName("nativeBanner"),this._adBanner.active=!1,this._bgMask=this.node.getChildByName("bgMask"),this._bgMask.active=!1,this._interstitialNativeAd=this.node.getChildByName("nativeInterstitial"),this._interstitialNativeAd.active=!1,this._splashNativeAd=this.node.getChildByName("splash"),this.addIcon=this.node.getChildByName("addIcon").getComponent(s),this.addIcon.node.on("click",this.onAddClick,this),this.addIcon.node.active=!1,this.wxBtn=this.node.getChildByName("wxBtn").getComponent(s),this.wxBtn.node.on("click",this.onOpenAdScreen,this),this.showJPYXBtn(!1),r.getInstance().on("showBannerListByPos",this.showBannerListByPos,this),this.scheduleOnce(function(){for(var t=0;t<this._mainPush.length;t++){var n=this._mainPush[t];v.getInstance().showMainPush(n,a(0,0,0),8e3),n.active=!1}}.bind(this),.1),this.scheduleOnce((function(){t.showDrawListByNode(),t.showBannerListByNode(),t.showMainPushByNodes()}),.2),this.scheduleOnce((function(){t.initNative()}),3)},e.showBgMask=function(t){void 0===t&&(t=!1),this._bgMask.active=t},e.onDestroy=function(){r.getInstance().off("showBannerListByPos",this.showBannerListByPos,this)},e.refreshSingleMainPush=function(t){void 0===t&&(t=null);var n=this._mainPush[0];t?n.active||(n.setWorldPosition(t.getWorldPosition()),n.active=!0,this.scheduleOnce((function(){v.getInstance().updateMainPush()}),.1)):n.active=!1},e.showMainPushByNodes=function(t){void 0===t&&(t=[]);for(var n=0;n<this._mainPush.length;n++){this._mainPush[n].active=!1}for(var i=0;i<t.length;i++){this._mainPush[i].active=!0;var e=this._mainPush[i].getChildByName("ADMainPush");e&&e.getComponent(u).freash();var s=t[i];this._mainPush[i]&&this._mainPush[i].setWorldPosition(s.getWorldPosition())}},e.showMainPush=function(t){if(t){for(var n=0;n<this._oldMainPush.length;n++){this._oldMainPush[n].active=!0}this._oldMainPush=[]}else for(var i=0;i<this._mainPush.length;i++)this._mainPush[i].active&&(this._mainPush[i].active=!1,this._oldMainPush.push(this._mainPush[i]))},e.showBannerListByNode=function(t){void 0===t&&(t=null),t?(this._bannerList.active=!0,this._bannerListCreate||(v.getInstance().showADBannerList(this._bannerList,a(0,0,0)),this._bannerListCreate=!0),this._bannerList.setPosition(t.getPosition())):this._bannerList.active=!1},e.showBannerListByPos=function(t){void 0===t&&(t=null),t?(this._bannerList.active=!0,this._bannerListCreate||(v.getInstance().showADBannerList(this._bannerList,a(0,0,0)),this._bannerListCreate=!0),t||this._bannerList.setPosition(a(0,t,0))):this._bannerList.active=!1},e.showDrawListByNode=function(t){void 0===t&&(t=null),t?(this._drawList.active=!0,this._drawCreate||(this._drawCreate=!0,v.getInstance().showADDraw(this._drawList,0)),this._drawList.setPosition(a(0,t.getPosition().y,0))):this._drawList.active=!1},e.showShutIcon=function(t){void 0===t&&(t=null),_.getInstance().HasShortcutInstalled()&&(t=null),t?(this.addIcon.node.active=!0,this.addIcon.node.setWorldPosition(t.getWorldPosition())):this.addIcon.node.active=!1},e.showJPYXBtn=function(t){void 0===t&&(t=!0);var n=this.wxBtn.node.active;return this.wxBtn.node.active=t,n},e.onAddClick=function(){var t=this;_.getInstance().sendData(c.CMD_ADDSHORTCUT,{success:function(){t.showShutIcon()},fail:function(){}})},e.onOpenAdScreen=function(){v.getInstance().showAdScreen()},e.showNativeBanner=function(){var t=this;this._adBanner.active=!0,this._adBanner.removeAllChildren(),this._adBannerScript=null,d.log("Push創建展示原生banner1"),v.getInstance().showNativeBannerAd(this._adBanner,(function(){}),null,(function(n){t._adBannerScript=n,t._adBannerScript.setPopupName("原生banner")}))},e.hideNativeBanner=function(){this._adBanner.children.length>0&&(this._adBanner.active=!1)},e.showNatvieInterstitialAd=function(t){var n=this;void 0===t&&(t={}),this._interstitialNativeAd.active=!0,d.log("Push創建展示原生插屏广告"),v.getInstance().showNativeInterstitial(this._interstitialNativeAd,(function(){v.getInstance().hideNativeAd(n._interstitialNativeAd,"nativeInterstitialADPrefab"),n._interstitialNativeAd.active=!1}),_.getInstance().getNativeIdByIndex(3),(function(i){n._interstitialScript=i,n._interstitialScript.setCloseType(t.type)}))},e.hideNatvieInterstitialAd=function(){this._interstitialNativeAd.children.length>0&&(this._interstitialNativeAd.active=!1)},e.showNatvieSplashAd=function(){var t=this;this._splashNativeAd.removeAllChildren(),d.log("Push創建展示原生开屏广告"),v.getInstance().showNativeSplash(this._splashNativeAd,(function(){t.hideSplashAd()}),null,(function(t){}))},e.hideSplashAd=function(){this._splashNativeAd.removeAllChildren()},e.setGamePlaying=function(t){var n=this;this._isGamePlaying!==t&&(this._isGamePlaying=t,this.scheduleOnce((function(){n._adBannerScript&&n._adBannerScript.setGamePlaying(t)}),this._adBannerScript?.1:1))},e.initNative=function(){if(l.getInstance().regionEnable&&l.getInstance().getConfigByKey("native_switch",!1)){var t=l.getInstance().getConfigByKey("addNative",0);t=Math.min(t,2);for(var n=1;n<=t;n++){var i=o.getNodeByName(this.node,"nativeBannerAdd"+n);if(!i)return;i.setPosition(a(0,8e3,0)),v.getInstance().showNativeBannerAd(i,(function(){}),null,(function(t){t.isAddNative=!0,t.setPopupName("原生添加")}))}}},i}(h))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameListManger.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts"],(function(t){"use strict";var a,e,i,n,s;return{setters:[function(t){a=t.createClass},function(t){e=t.cclegacy,i=t.loader,n=t.JsonAsset},function(t){s=t.Log}],execute:function(){e._RF.push({},"994cfXyCvJOwYLWKogiLKil","GameListManger",void 0),t("default",function(){function t(){this._gameListData=[],this._pushGameList={}}t.getInstance=function(){return null==t.singleInstance&&(t.singleInstance=new t,t.singleInstance.init()),t.singleInstance};var e=t.prototype;return e.init=function(){var t=this;s.log("加载数据"),t._gameListData.length>0||i.loadRes("adUI/gameList",n,null,(function(a,e){if(!a)for(var i in e.json){var n=e.json[i];t._gameListData.push(n)}}))},e.setGameListData=function(t){this._gameListData=[];for(var a=0;a<t.length;a++){var e=t[a],i=e;i.id=a+1,i.name=e.togame_name,i.appid=e.to_appid,i.packName="",this._gameListData.push(i)}},e.setLWGameListData=function(t){this._gameListData=[];for(var a=0;a<t.length;a++){var e=t[a],i=e;i.id=a+1,i.appid=e.appid,i.packName="",this._gameListData.push(i)}},e.getGameListData=function(){return this._gameListData},e.getStageDataByStageID=function(t){return this.getGameListData()[t]},e.getRandGameConfig=function(){var t=this.getGameListData(),a=t.length,e=t[Math.floor(Math.random()*(a+1))]||{};return e||(e=t[0]),e},e.getPushGameList=function(t){if(this._pushGameList[t]&&this._pushGameList[t].length>0)return this._pushGameList[t];if(window.sdk){var a=window.sdk.getAdDataToShow(t,0,0);this._pushGameList[t]=[];for(var e=0;e<a.data.length;e++){var i=a.data[e],n=i;n.id=e+1,n.appid=i.appid,n.packName="",this._pushGameList[t].push(n)}return this._pushGameList[t]}return this.gameList||[]},e.getRandGameConfigByKey=function(t){var a=null;if(this._pushGameList[t]&&this._pushGameList[t].length>0){var e=(a=this._pushGameList[t]).length,i=a[Math.floor(Math.random()*(e+1))];return i||(i=a[0]),i}return null},e.getPushGameByNet=function(t){s.log("动态获取===="),window.mpsdk?window.mpsdk.Ad.getRecommendInfo(100).then((function(a){var e=a,i=e;i.id=1,i.appid=e.appid,i.name=e.title,i.packName="",t([i])})):t([])},e.getPushGameListByNet=function(t){if(window.mpsdk)window.mpsdk.Ad.getSuggestList(!1,16,100).then((function(a){s.log("广告列表",a);a.forEach((function(t){t.id=1,t.name=t.title,t.packName=""})),t&&t(a)}))},a(t,[{key:"gameList",get:function(){return this.getGameListData()}}]),t}()).singleInstance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/ResManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingletonBase2.ts"],(function(e){"use strict";var n,r,o,t,s,i,a,l,u,f;return{setters:[function(e){n=e.inheritsLoose},function(e){r=e.cclegacy,o=e.resources,t=e.Prefab,s=e.ImageAsset,i=e.assetManager,a=e.Texture2D,l=e.JsonAsset,u=e.TextureCube},function(e){f=e.SingletonBase}],execute:function(){r._RF.push({},"9ba2fJiFnhE1JtELJvpEEkB","ResManager",void 0);e("ResManager",function(e){function r(){for(var n,r=arguments.length,o=new Array(r),t=0;t<r;t++)o[t]=arguments[t];return(n=e.call.apply(e,[this].concat(o))||this)._resInfo=Object.create(null),n._loadingResInfo=Object.create(null),n}n(r,e);var f=r.prototype;return f.add=function(e,n){void 0===n&&(n=""),n=n||(e.name?e.name:e.data.name),e&&e.isValid?(this._resInfo[n]&&console.error("资源名字冲突:"+n+",删除旧资源使用新资源替换"),this._resInfo[n]=e):console.error("##添加资源失败, 资源不可用:"+n)},f.get=function(e){var n=e,r=e.lastIndexOf("/");if(-1!=r&&(n=e.substring(r+1,e.length)),this._resInfo[n])return this._resInfo[n]},f.loadPrefab=function(e){var n=this,r=this.get(e);if(null!=r)return Promise.resolve(r);if(this._loadingResInfo[e])return this._loadingResInfo[e];var s=new Promise((function(r,s){o.load(e,t,(function(o,t){if(o)return console.error("加载Prefab出错",o),void s(o);n.add(t),r(t),delete n._loadingResInfo[e]}))}));return this._loadingResInfo[e]=s},f.loadImage=function(e){var n=this,r=this.get(e);if(null!=r)return Promise.resolve(r);if(this._loadingResInfo[e])return this._loadingResInfo[e];var t=new Promise((function(r,t){o.load(e,s,(function(o,s){if(o)return console.error("加载ImageAsset出错",o),void t(o);var i=e,a=e.lastIndexOf("/");-1!==a&&(i=e.slice(a+1)),n.add(s,i),r(s)}))}));return this._loadingResInfo[e]=t},f.loadTexture=function(e){var n=this,r=this.get(e);if(null!=r)return Promise.resolve(r);if(this._loadingResInfo[e])return this._loadingResInfo[e];var t=new Promise((function(r,t){var s=i.getBundle("testBundle")?i.getBundle("testBundle"):o;console.log("-----------------myBundle:",i.getBundle("testBundle")?"testBundle":"resources"),s.load(e+"/texture",a,(function(o,s){if(o)return console.error("加载Texture2D出错",e,JSON.stringify(o)),void t(o);var i=e,a=e.lastIndexOf("/");-1!==a&&(i=e.slice(a+1)),n.add(s,i),r(s)}))}));return this._loadingResInfo[e]=t},f.loadJsonAsset=function(e){var n=this,r=this.get(e);if(null!=r)return Promise.resolve(r);if(this._loadingResInfo[e])return this._loadingResInfo[e];var t=new Promise((function(r,t){o.load(e,l,(function(e,o){if(e)return console.error("加载Json数据出错",e),void t(e);n.add(o),r(o)}))}));return this._loadingResInfo[e]=t},f.loadSkybox=function(e){var n=this,r=this.get(e);if(null!=r)return Promise.resolve(r);if(this._loadingResInfo[e])return this._loadingResInfo[e];var t=new Promise((function(r,t){o.load(e+"/textureCube",u,(function(o,s){if(o)return console.error("加载skybox出错",o),void t(o);var i=e,a=e.lastIndexOf("/");-1!==a&&(i=e.slice(a+1)),n.add(s,i),r(s)}))}));return this._loadingResInfo[e]=t},f.getSpriteFrame=function(e){return this._resInfo[e]?this._resInfo[e]:null},f.loadResDir=function(e,n,r,t){var s=this;o.loadDir(e,n,r,(function(e,n){e?console.warn(e):(n.forEach((function(e){return s.add(e)})),t&&t())}))},f.loadResArray=function(e,n,r,t){var s=this;o.load(e,n,r,(function(e,n){e?console.warn(e):(n.forEach((function(e){return s.add(e)})),t&&t())}))},r}(f));r._RF.pop()}}}));

System.register("chunks:///_virtual/Encode.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9f6cazC8a1BBJrcjToPRiZ5","Encode",void 0);var n=function(){function e(){}var t=e.prototype;return t.to=function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;"):""},t.from=function(e){return e?e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&#39;/g,"'").replace(/&quot;/g,'"'):""},e}(),r=function(){function e(){}var t=e.prototype;return t.to=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=("00"+e.charCodeAt(n).toString(16)).slice(-4);return"\\u"+t.join("\\u")},t.from=function(e){return unescape(e.replace(/\\/g,"%"))},e}(),c=function(){function e(){}var t=e.prototype;return t.to=function(e){},t.from=function(e){},e}(),o=e("default",(function(){}));o.base64=c,o.html=n,o.unicode=r,t._RF.pop()}}}));

System.register("chunks:///_virtual/NativeAds.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./EventManager.ts","./Log.ts","./UIManager.ts","./RDPlatformType.ts","./ConstantCommon.ts","./RDAssetManager.ts","./OptionsManager.ts","./Utils.ts","./RDStatisticsManager.ts","./AdsManager.ts","./RDPlatformManager.ts"],(function(t){"use strict";var e,i,a,n,s,c,o,h,l,r,d,g,u,N,I,p,v,_,T,m,A,f,y,E,B,C;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){a=t.cclegacy,n=t._decorator,s=t.LabelComponent,c=t.SpriteComponent,o=t.ButtonComponent,h=t.v3,l=t.UITransform,r=t.view,d=t.Label,g=t.SpriteFrame,u=t.Component},function(t){N=t.CommonUtils},function(t){I=t.EventManager},function(t){p=t.Log},function(t){v=t.UIManager},function(t){_=t.RDPlatformType},function(t){T=t.ConstantCommon},function(t){m=t.RDAssetManager},function(t){A=t.default},function(t){f=t.Utils},function(t){y=t.RDStatisticsMgr,E=t.CustomEventID},function(t){B=t.AdsManager},function(t){C=t.RDPlatformManager}],execute:function(){var D;t("NativeType",void 0),a._RF.push({},"9fec7n+GY9HbZU0NeFbblFV","NativeAds",void 0);var b,k=n.ccclass;!function(t){t[t.NATIVE_IMAGE=1]="NATIVE_IMAGE",t[t.NATIVE_INTERSTITIAL=2]="NATIVE_INTERSTITIAL",t[t.NATIVE_BANNER=3]="NATIVE_BANNER",t[t.NATIVE_NEW_IMAGEN=4]="NATIVE_NEW_IMAGEN",t[t.NATIVE_SPLASH=5]="NATIVE_SPLASH",t[t.NATIVE_ICON=6]="NATIVE_ICON"}(b||(b=t("NativeType",{})));t("default",k("NativeAds")(D=function(t){function a(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).bac=null,e.currentBac=null,e.adData=null,e.adTitle=null,e.adImg=null,e.adLogo=null,e.adDesc=null,e.adBtn=null,e.adIcon=null,e.adClose=null,e.closeBack=null,e.skipBtn=null,e.skipTips=null,e._type=b.NATIVE_IMAGE,e._closeType=-1,e._loadTimes=0,e._popupName="",e._closeShowBanner=!0,e._isGamePlaying=!1,e._nativeBannerInterval=null,e.startTime=(new Date).getTime(),e._reTyCount=0,e._splashDelayTime=2,e._splashSkipTime=5,e._isAddNative=!1,e}e(a,t);var n=a.prototype;return n.start=function(){var t=this;!this._nativeBannerInterval&&this._type!=b.NATIVE_SPLASH&&C.getInstance().isBtnFadeIn()&&(this._nativeBannerInterval=setInterval((function(){p.log("是否游戏中==="+t._isGamePlaying),p.log("是否游戏中==="+t._isGamePlaying),t._isGamePlaying&&(t.bac.active=!0,B.getInstance().hideBannerAd(!1,!0)),t.bac&&t.node.parent.active&&(p.log("刷新原生banner"),t.reTry(!0))}),1e3*A.getInstance().getConfigByKey("nativeFreash",35)))},n.onLoad=function(){I.getInstance().on("clickNative",this.clickNative,this)},n.clickNative=function(t,e){var i=this;if(this.adData)if(p.log("处理多点原生",t,this.adData.name,this._isAddNative),e)if(this._isAddNative){var a=A.getInstance().getConfigByKey("twoClickRand",0),n=f.random(1,100);n<a&&(p.log("原生广告isAddNative触发",t,this.adData.name,a,n),this.reTry(!0),setTimeout((function(){i.onNativeAdClick()})))}else t===this.adData.name&&e!=this.node&&this.scheduleOnce((function(){i.reTry(!0)}),1);else t===this.adData.name&&this.scheduleOnce((function(){i.reTry(!0)}),1)},n.initView=function(){var t=this;p.log("输出广告111"),this.currentBac||(p.log("输出广告"),this.bac=this.node.getChildByName("bac"),this.bac.getChildByName("bg1").active=!1,this.bac.getChildByName("bg2").active=!1,this.bac.getChildByName("bg3").active=!1,this.bac.getChildByName("bg4").active=!1,this.bac.getChildByName("bg5").active=!1,this.bac.getChildByName("bg6")&&(this.bac.getChildByName("bg6").active=!1),this.currentBac=this.bac.getChildByName("bg"+this._type),C.getInstance().platformType===_.None&&(this.currentBac.active=!0),this.currentBac.on("click",(function(){t.onNativeAdClick()}),this),this.adTitle=N.getNodeByName(this.currentBac,"adTitle").getComponent(s),this.adTitle.string="",this.adDesc=N.getNodeByName(this.currentBac,"adDesc").getComponent(s),this.adDesc.string="",this.adImg=N.getNodeByName(this.currentBac,"adImg").getComponent(c),this.adBtn=N.getNodeByName(this.currentBac,"adBtn").getComponent(o),this.adBtn.node.on("click",(function(){t.onNativeAdClick()}),this),this.adBtn&&!C.getInstance().isBtnFadeIn()&&(this.adBtn.node.active=!1),this.adIcon=N.getNodeByName(this.currentBac,"adIcon").getComponent(c),this.adIcon.node.active=!1,this.adLogo=N.getNodeByName(this.currentBac,"adLogo").getComponent(c),this.adClose=N.getNodeByName(this.currentBac,"btnClose").getComponent(o),this.adClose.node.on("click",this.onClose,this),this._type===b.NATIVE_BANNER?this._isAddNative?this.currentBac.setPosition(h(0,5*r.getVisibleSize().height,0)):this.currentBac.setPosition(h(0,-this.node.getParent().getComponent(l).height/2,0)):this._type==b.NATIVE_SPLASH?(this._splashSkipTime=5,this.skipBtn=N.getNodeByName(this.currentBac,"skip"),this.skipBtn.on("click",(function(){t.onClose()}),this),this.skipTips=N.getNodeComponent(this.currentBac,"tips",d),this.skipBtn.active=!1,this.scheduleOnce((function(){t.startSkip()}),this._splashDelayTime)):this._type==b.NATIVE_ICON&&(this.adBtn.node.active=!1))},n.onEnable=function(){this._registerEvent(!0)},n.onDisable=function(){this._registerEvent(!1),p.log("原生广告关闭======"),this.bac&&this.node.parent&&this.node.parent.getChildByName("nativeADPrefab")&&this.node.parent.getChildByName("nativeADPrefab").isValid&&this.node.parent.getChildByName("nativeADPrefab").destroy(),I.getInstance().off("clickNative",this.clickNative,this),this._closeShowBanner&&B.getInstance().hideBannerAd(!1,!0),this._nativeBannerInterval&&clearInterval(this._nativeBannerInterval)},n._registerEvent=function(t){var e=t?"on":"off";I.getInstance()[e](T.EVENT_TYPE.NATIVE_AD_SHOW,this.showNative,this),I.getInstance()[e](T.EVENT_TYPE.NATIVE_AD_HIDE,this.hideNative,this)},n.showNative=function(){this.currentBac.active=!0},n.hideNative=function(){this.currentBac.active=!1},n.onDestroy=function(){p.log("销毁广告关闭======")},n.startSkip=function(){var t=this;this.skipBtn.active=!0,this.skipTips.string="跳过 "+this._splashSkipTime+"s",this.schedule((function(){t._splashSkipTime--,t.skipTips.string="跳过 "+t._splashSkipTime+"s",0===t._splashSkipTime&&(t.unscheduleAllCallbacks(),t.closeBack())}),1)},n.reTry=function(t){void 0===t&&(t=!1),this.node.parent.active&&(p.log("reTry"+this._type),this._reTyCount++,this.setNativeType(this._type,null,this._closeShowBanner,t))},n.setPopupName=function(t){this._popupName=t},n.setCloseCallback=function(t){this.closeBack=t},n.setCloseType=function(t){this._closeType=t},n.setNativeType=function(t,e,i,a){var n=this;void 0===i&&(i=!0),void 0===a&&(a=!1),this._closeShowBanner=i,this._type=t,this.initView(),p.log("initView6"),this.showNativeAd({success:function(t){var e;if(n.adData=t,null==n.adData){if(p.log("原生广告获取广告参数为空"),n.bac.active=!1,n._type===b.NATIVE_INTERSTITIAL)I.getInstance().emit("offTouch"),null===(e=n.closeBack)||void 0===e||e.call(n),B.getInstance().showInterstitialAd({mustNormal:!0,type:0});else if(n._type===b.NATIVE_SPLASH){var i;null===(i=n.closeBack)||void 0===i||i.call(n)}}else p.log("原生广告获取广告参数成功"+n.adData.name),n.showAd()},fail:function(){var t;if(p.log("原生广告获取广告参数失败"),n.bac.active=!1,n._type===b.NATIVE_INTERSTITIAL)I.getInstance().emit("offTouch"),null===(t=n.closeBack)||void 0===t||t.call(n);else if(n._type===b.NATIVE_SPLASH){var e;console.log("sdfasdfsafdsdaf"),null===(e=n.closeBack)||void 0===e||e.call(n)}}},a)},n.showNativeAd=function(t,e){p.log("展示============"),B.getInstance().createNative({callback:{success:function(e){t.success(e)},fail:function(){t.fail()}},keyId:"native_id",isCreate:e,type:this._type})},n.showAd=function(){var t=this;if(C.getInstance().platformType===_.None&&this._type!=b.NATIVE_ICON&&this._type!=b.NATIVE_INTERSTITIAL&&I.getInstance().emit("menuUp",this._popupName),this.adData&&!this._isAddNative){p.log("开始展示原生广告",this.adData.name,JSON.stringify(this.adData)),B.getInstance().hideBannerAd(!1,!0),this.bac.active=!0,this.currentBac.active=!0,this.adTitle.string="",this.adDesc.string="",this._type!=b.NATIVE_IMAGE&&this._type!=b.NATIVE_ICON&&(this.adTitle.string=this.adData.title,this.adDesc.string=this.adData.desc),this._type!==b.NATIVE_IMAGE&&this._type!==b.NATIVE_NEW_IMAGEN||0!==this._reTyCount||I.getInstance().emit("menuUp",this._popupName),this._type===b.NATIVE_INTERSTITIAL&&I.getInstance().emit(T.EVENT_TYPE.ADS_INTERSTITIALAD,"success");var e=this.adData.icon?this.adData.icon:this.adData.iconUrlList?this.adData.iconUrlList[0]:"";this._type!=b.NATIVE_BANNER&&this._type!=b.NATIVE_ICON&&(this.adIcon.node.active=!1,f.isEmpty(e)||f.IsImage(e)||(e+="?a=a.png"),e&&m.getInstance().loadImage(e,!0).then((function(i){p.log("广告图片加载时间adIcon======",e),t.adIcon.node.active=!0;var a=new g;a.texture=i,t.adIcon.spriteFrame=a}))),this.adImg.node.active=!0,this.startTime=(new Date).getTime();var i=this.adData.imgUrlList&&this.adData.imgUrlList.length>0?this.adData.imgUrlList[0]:e;f.isEmpty(i)||f.IsImage(i)||(i+="?a=a.png"),i&&m.getInstance().loadImage(i,!0).then((function(e){if(p.log("广告图片加载时间adImg======",(new Date).getTime()-t.startTime,i),t.adImg){t._loadTimes=0,t.adImg.node.active=!0;var a=new g;a.texture=e,t.adImg.spriteFrame=a}}))}},n.onNativeAdClick=function(t){var e,i=this;void 0===t&&(t=!1),p.log("是否为关闭原生广告状态=",t,this._isAddNative,this._popupName,null===(e=this.adData)||void 0===e?void 0:e.name);var a={currentWindow:this._popupName};return this.adData?(p.log("点击============",JSON.stringify(this.adData)),B.getInstance().onNativeClick(this.adData),this._isAddNative||this._type==b.NATIVE_SPLASH||I.getInstance().emit("clickNative",this.adData.name,this.node),y.customEvent(E.custom_ad_native,a),this.scheduleOnce((function(){!t&&i.reTry(!0)}),.2),!0):(p.log("暂无广告=",this._isAddNative),!this._isAddNative&&v.getInstance().showTipMessage("暂无广告"),!1)},n.getAdData=function(){return this.adData},n.onClose=function(){this.closeBack&&this.closeBack(),this.bac.active=!1,this._type===b.NATIVE_INTERSTITIAL&&(I.getInstance().emit(T.EVENT_TYPE.ADS_INTERSTITIALAD,"fail"),this.showNativeVisuble(!1)),this._type!=b.NATIVE_INTERSTITIAL&&this._type!=b.NATIVE_SPLASH&&C.getInstance().addCloseAdd()},n.showNativeVisuble=function(t){void 0===t&&(t=!0),this.bac.active=t},n.isVisible=function(){return this.bac&&this.bac.active&&this.currentBac.active},n.setGamePlaying=function(t){p.log("游戏玩法状态==="+t),this._isGamePlaying=t},n.getGamePlaying=function(){return this._isGamePlaying},i(a,[{key:"isAddNative",set:function(t){this._isAddNative=t}}]),a}(u))||D);a._RF.pop()}}}));

System.register("chunks:///_virtual/BrickCountMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts","./MercenaryCampMgr.ts","./FinalWeaponMgr.ts"],(function(t){"use strict";var n,o,e,s,i,r,a,c,u,l,f,_,h,p;return{setters:[function(t){n=t.inheritsLoose,o=t.createClass},function(t){e=t.cclegacy,s=t._decorator,i=t.v3,r=t.Sprite,a=t.Label,c=t.Color,u=t.Component},function(t){l=t.CommonUtils},function(t){f=t.Constants},function(t){_=t.App},function(t){h=t.MercenaryCampMgr},function(t){p=t.FinalWeaponMgr}],execute:function(){var C;e._RF.push({},"a160eWPItZCnpALHSlr2sW0","BrickCountMgr",void 0);var d=s.ccclass;s.property,t("BrickCountMgr",d("BrickCountMgr")(C=function(t){function e(){for(var n,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return(n=t.call.apply(t,[this].concat(e))||this)._frameSpt=null,n._numLbl=null,n._totalCnt=0,n._curPos=i(0,0,0),n._offsetPos=i(0,0,0),n._targetScript=null,n._targetNode=null,n}n(e,t);var s=e.prototype;return s.onLoad=function(){this._frameSpt=l.getNodeComponent(this.node,"frame",r),this._numLbl=l.getNodeComponent(this.node,"Label",a)},s.onDisable=function(){this._targetScript=null,this._targetNode=null},s.init=function(t,n){void 0===t&&(t=null),void 0===n&&(n=i()),this._targetScript=t,this._targetNode=t.node,this._offsetPos=n,this._totalCnt=0,this._frameSpt.color=c.WHITE,t.brickCountMgr=this,t instanceof h?this._totalCnt=f.MERCENARY_BRICK_COUNT:t instanceof p&&(this._totalCnt=f.FINAL_WEAPON_BRICK_COUNT),this.updateBrickCnt(0)},s.updateBrickCnt=function(t,n){void 0===n&&(n=-1),this._numLbl.string=this._totalCnt>0?t+"/"+this._totalCnt:""+t,this._frameSpt.color=-1==n?c.WHITE:f.SOLDIER_COLOR_ARRAY[n]},s.setOffsetPos=function(t){this._offsetPos=t},s.lateUpdate=function(t){this.node.parent&&this.node.active&&this._targetScript&&(_.GameData.curCamera.convertToUINode(this._targetNode.worldPosition.clone().add(this.offsetPos),this.node.parent,this._curPos),this.node.setPosition(this._curPos))},o(e,[{key:"offsetPos",get:function(){return this._offsetPos},set:function(t){this._offsetPos=t}}]),e}(u))||C);e._RF.pop()}}}));

System.register("chunks:///_virtual/ICannonSphereShape.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts"],(function(e){"use strict";var n,t,o,r,p,a;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,r=e.SphereColliderComponent,p=e.Component},function(e){a=e.Log}],execute:function(){var c,s,i;t._RF.push({},"a1664YWOeBI8rZKkx85U/gh","ICannonSphereShape",void 0);var u=o.ccclass;e("ICannonSphereShape",u("ICannonSphereShape")((i=s=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.start=function(){var e=this.getComponent(r);a.debug(t.TAG,e)},t}(p),s.TAG="ICannonSphereShape",c=i))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/RDWeiXinMiniPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./RDPlatformType.ts","./RDPlatformParam.ts","./RDCommand.ts","./Utils.ts","./RDPlatform.ts"],(function(n){"use strict";var t,i,e,a,o,s,r,c;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){e=n.Log},function(n){a=n.RDPlatformType},function(n){o=n.RDPlatformParam},function(n){s=n.RDCommand},function(n){r=n.Utils},function(n){c=n.RDPlatform}],execute:function(){i._RF.push({},"a1826ASomVDtJO2GaF2Ghzf","RDWeiXinMiniPlatform",void 0);n("RDWeiXinMiniPlatform",function(n){function i(t){return n.call(this,t)||this}t(i,n);var c=i.prototype;return c.loadStorageData=function(n,t,i){var e=window.wx.getStorageSync(n[0]);t&&t(e)},c.flushStorageData=function(n,t){window.wx.setStorageSync(n.key,n.data)},c.initAD=function(){var t=this;this._initSdk(null),n.prototype.initAD.call(this),this._hasShortcutInstalled=!0;var i=o.ADPARAM[a.WeixinMinGame.toString()].video_id;this._videoBoxInstance=window.wx.createRewardedVideoAd({adUnitId:i,multiton:!1}),this._videoBoxInstance.onLoad((function(){e.log("微信激励广告加载成功")})),this._videoBoxInstance.onError((function(n){t._showToast("暂时没有视频了，请稍后再试"),e.log("videoAd.onError,errMsg",JSON.stringify(n)),t._rewardCaback&&(t._rewardCaback.fail(),t._statistics({eventId:t._rewardCaback.eventId,param1:"2"}))})),this._videoBoxInstance.onClose((function(n){n&&n.isEnded||void 0===n?(e.debug("正常播放结束，可以下发游戏奖励"),t._rewardCaback&&(t._rewardCaback.success(null),t._statistics({eventId:t._rewardCaback.eventId,param1:"0"}))):t._rewardCaback&&(e.debug("播放中途退出，不下发游戏奖励",n),t._rewardCaback.fail(),t._statistics({eventId:t._rewardCaback.eventId,param1:"1"}))}));var s=o.ADPARAM[a.WeixinMinGame.toString()].banner_preload_count||1;e.log("banner===="+s);for(var r=0;r<s;r++){var c=this.createBanner();this._bannerADInstances.push(c)}e.log("bannesssssr===="+this._bannerADInstances.length),this.showShareMenu(!0),this._onshareAppMessage()},c.createBanner=function(){var n=window.wx.getSystemInfoSync(),t={left:0,top:n.windowHeight-45,width:300,height:20},i=o.ADPARAM[a.WeixinMinGame.toString()].banner_id,e=window.wx.createBannerAd({adUnitId:i,style:t});return e.onError((function(){})),e.onResize((function(t){e.style.top=n.windowHeight-t.height-(r.isIphoneX()?20:0),e.style.left=(n.windowWidth-t.width)/2})),e},c.clickBanner=function(n){null!=n&&(8==n.targetAction||9==n.targetAction||10==n.targetAction)&&n.targetPagePath.length>50&&this._statistics({event:!0,ad_type:s.STATISTICS_CLICK_BANNER})},c.authUserInf=function(){},c.showShareMenu=function(n){n?window.wx.showShareMenu({withShareTicket:!1,success:function(){},fail:function(){},complete:function(){}}):window.wx.hideShareMenu({success:function(){},fail:function(){},complete:function(){}})},c.shareAppMessage=function(n){window.wx.shareAppMessage({title:"转发标题"})},c._showToast=function(n){window.wx.showToast({title:n,icon:"none",image:"",mask:!1,duration:2e3,success:function(){},fail:function(){},complete:function(){}})},c._gotoMiniGameByAppid=function(n){window.wx.navigateToMiniProgram({appId:n.appid,success:function(n){e.log("跳转成功")},fail:function(){e.log("跳转失败")}})},c._vibrateShort=function(n){void 0===n&&(n=50),100!=n?this.vibrate(n):this.vibrateStrong()},c.vibrateStrong=function(){window.wx.vibrateLong({success:function(){},fail:function(){},complete:function(){}})},c.vibrate=function(n){var t=n/15,i=0,e=setInterval((function(){window.wx.vibrateShort({success:function(){},fail:function(){},complete:function(){}}),++i>t&&(clearTimeout(e),e=null)}),15)},c._showBannerAd=function(n){var t=this;if(this.isReviewed())e.log("审核中=====");else{e.log("调用banner"+this._bannerADInstances.length+" ==== "+this._bannerShowIndex);var i=o.ADPARAM[a.OPPOGame.toString()].banner_preload_count||1;this._bannerShowIndex>=i&&(this._bannerShowIndex=0),e.log("调用banner"+this._bannerADInstances.length+" ==== "+this._bannerShowIndex),this._bannerADInstance&&this._bannerADInstance.hide(),this._bannerADInstance=null,this._bannerShow=!1;var s=this._bannerADInstances[this._bannerShowIndex];s?(e.log("调用banner"),s.show().then((function(){e.log("banner 广告显示"),t._bannerShow=!0})).catch((function(n){e.log("banner 广告显示失败"+n)})),this._bannerADInstance=s):e.log("banner 广告显示失败"),this._bannerShowIndex+=1}},c._showVideo=function(n){var t=this;this.isReviewed()?this._rewardCaback.success(null):(e.log("准备激励广告 展示开始"),this._videoBoxInstance.show().catch((function(n){e.log("重新拉起视频广告"),t._videoBoxInstance.load().then((function(){e.log("重新拉起视频广告成功 开始展示"),t._videoBoxInstance.show()}))})))},c._showIntertitalAd=function(t){if(!this.isReviewed()&&(n.prototype._showIntertitalAd.call(this,null),!this._interstitialAdInstance)){var i=o.ADPARAM[a.WeixinMinGame.toString()].interstital_id;this._interstitialAdInstance=window.wx.createInterstitialAd({adUnitId:i}),this._interstitialAdInstance&&(this._interstitialAdInstance.onLoad((function(){e.debug("插屏 广告加载成功")})),this._interstitialAdInstance.onError((function(n){e.debug("插屏失败"+n)})),this._interstitialAdInstance.onClose((function(n){e.debug("插屏 广告关闭")})),this._interstitialAdInstance.show().then((function(){e.debug("插屏广告开始显示")})).catch((function(n){e.debug("插屏广告展示失败",n)})))}},c._onshareAppMessage=function(){window.wx.onShareAppMessage((function(n){var t=o.ADPARAM[a.WeixinMinGame.toString()].share_text,i=Math.floor(Math.random()*t.length),e=t[i]?t[i]:"",s=o.ADPARAM[a.WeixinMinGame.toString()].share_image_url,r=s[i]?s[i]:"",c=o.ADPARAM[a.WeixinMinGame.toString()].share_image_id;return{title:e,imageUrl:r,imageUrlId:c[i]?c[i]:""}}))},c._statistics=function(n){if(e.log("数据统计",JSON.stringify(n)),n.eventId){if(!window.mpsdk)return;window.mpsdk.Report.reportEvent(n.eventId,n.param1,n.param2)}else n.ad_type==s.STATISTICS_LOGIN&&window.mpsdk&&window.mpsdk.Report.reportLogin(n.coin,1)},c._initSdk=function(n){window.mpsdk.init(7394,"7394","",!1).then((function(t){e.log("初始化成功",t),n&&n.success()})).catch((function(t){e.log("初始化失败.",t),n&&n.fail()}))},i}(c));i._RF.pop()}}}));

System.register("chunks:///_virtual/Dictionary.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"a31fbJ9bs5K5piA/9F445Gx","Dictionary",void 0);e("Dictionary",function(){function e(){this.m_keys=[],this.m_values=[]}var n=e.prototype;return n.indexOfKey=function(e){return this.m_keys.indexOf(e)},n.indexOfValue=function(e){return this.m_values.indexOf(e)},n.getKeyByValue=function(e){return this.m_keys[this.indexOfValue(e)]},n.add=function(e,t){var n=this.indexOfKey(e);n>=0?this.m_values[n]=t:(this.m_keys.push(e),this.m_values.push(t))},n.get=function(e){var t=this.indexOfKey(e);return t>=0?this.m_values[t]:null},n.set=function(e,t){var n=this.indexOfKey(e);n>=0?this.m_values[n]=t:this.add(e,t)},n.remove=function(e){var t=this.indexOfKey(e);return t>=0?(this.m_keys.splice(t,1),this.m_values.splice(t,1)[0]):null},n.containsKey=function(e){return this.indexOfKey(e)>=0},n.clear=function(){this.m_keys.length=0,this.m_values.length=0},n.setLength=function(e){this.m_keys.length=e,this.m_values.length=e},n.getRandomData=function(){var e=Math.random()*this.keys.length<<0;return this.m_values[e]},t(e,[{key:"length",get:function(){return this.m_keys.length}},{key:"values",get:function(){return this.m_values.concat()}},{key:"keys",get:function(){return this.m_keys.concat()}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AchievementItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var e,a,s,n,i,o,r,c,_,l,h,v,m;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,s=t._decorator,n=t.Sprite,i=t.Label,o=t.Button,r=t.tween,c=t.v3},function(t){_=t.CommonUtils},function(t){l=t.Constants},function(t){h=t.EventResult},function(t){v=t.App},function(t){m=t.UIBase}],execute:function(){var u;a._RF.push({},"a49c4H9X2tEU7j8Lxbm4jQ9","AchievementItem",void 0);var E=s.ccclass;t("AchievementItem",E("AchievementItem")(u=function(t){function a(){for(var e,a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this)._logoSpt=null,e._diamondLbl=null,e._starSptArr=[],e._recvBtnNode=null,e._conditionLbl=null,e._taskData=null,e._curTaskLevel=-1,e}e(a,t);var s=a.prototype;return s.onLoad=function(){this._logoSpt=_.getNodeComponent(this.node,"logo",n),this._diamondLbl=_.getNodeComponent(this.node,"diamondLbl",i);var t=_.getNodeByName(this.node,"starNode");this._starSptArr=t.children.map((function(t){return t.getComponent(n)})),this._recvBtnNode=_.getNodeByName(this.node,"receiveBtn"),this._recvBtnNode.on(o.EventType.CLICK,this._onReceiveButton,this),this._conditionLbl=_.getNodeComponent(this.node,"conditionLbl",i)},s.onEnable=function(){v.Event.on(l.EVENT_TYPE.UPDATE_ACHIEVE,this.updateData,this)},s.onDisable=function(){v.Event.off(l.EVENT_TYPE.UPDATE_ACHIEVE,this.updateData,this)},s.init=function(t){this._taskData=t,this._logoSpt.spriteFrame=v.SptFrame.getSpriteFrameByName("Achievement_Image_Logo_0"+t.id)},s.updateData=function(){var t=v.AchievementDataMgr.getTaskData(this._taskData.name),e=this._taskData.taskLevelArray.length;if(t.taskLevel>this._curTaskLevel){var a=t.taskLevel<e?t.taskLevel:e-1,s=this._taskData.taskLevelArray[a];this._diamondLbl.string=s.reward.toString(),this._conditionLbl.string=s.taskDesc,this._setStarSpriteFrame(t.taskLevel)}this._curTaskLevel<e&&(this._curTaskLevel=t.taskLevel,this._setReceiveButton(t))},s._setStarSpriteFrame=function(t){for(var e=0,a=this._starSptArr.length;e<a;e++){var s="Main_Image_Star_0"+(t>e?1:2);this._starSptArr[e].spriteFrame=v.SptFrame.getSpriteFrameByName(s)}},s._setReceiveButton=function(t){var e="";if(t.taskLevel<this._taskData.taskLevelArray.length){var a=this._taskData.taskLevelArray[t.taskLevel];e=t.statistic>=a.statistic?"Achievement_Button_Receive":"Achievement_Button_Proceed"}else e="Achievement_Button_Complete",this._recvBtnNode.getComponent(o).interactable=!1;this._recvBtnNode.getComponent(n).spriteFrame=v.SptFrame.getSpriteFrameByName(e)},s._onReceiveButton=function(){if(!v.UI.isUIAnimPlaying()){var t=v.AchievementDataMgr.getTaskData(this._taskData.name),e=this._taskData.taskLevelArray[t.taskLevel];t.statistic>=e.statistic?this._receiveReward(t):this._proceedFinishTask()}},s._receiveReward=function(t){var e=this._taskData.taskLevelArray[t.taskLevel];v.UI.showDialog(l.UI_DIALOG_NAME.CONFIRM,null,e.reward),t.taskLevel+=1,v.AchievementDataMgr.setTaskData(this._taskData.name,t);var a=t.taskLevel<this._taskData.taskLevelArray.length?.25:0;r(this.node).by(a,{position:c(800,0,0)}).call(this.updateData.bind(this)).by(0,{position:c(-1600,0,0)}).by(a,{position:c(800,0,0)}).start(),v.Stats.customEvent("按钮事件",{"当前窗口":"成就","按钮类型":"领取奖励","任务名字":this._taskData.name,"任务等级":t.taskLevel})},s._proceedFinishTask=function(){var t=this;switch(this._taskData.name){case l.ACHIEVEMENT_TYPE.CLEAR_STAGE:case l.ACHIEVEMENT_TYPE.UNLOCK_MUSIC:case l.ACHIEVEMENT_TYPE.TOTAL_TIME:v.Event.emit(l.EVENT_TYPE.CLOSE_ACHIEVE,this._taskData.name);break;case l.ACHIEVEMENT_TYPE.WATCH_AD:var e={"当前窗口":"成就","按钮类型":"视频广告"};v.Stats.customEvent("按钮事件",e,h.onStarted),this.showRewardAd({success:function(){t.updateData(),v.Stats.customEvent("按钮事件",e)},fail:function(){v.Stats.customEvent("按钮事件",e,h.onFailed)}});break;case l.ACHIEVEMENT_TYPE.TOTAL_GOLD:v.Event.emit(l.EVENT_TYPE.FREE_GOLD)}},a}(m))||u);a._RF.pop()}}}));

System.register("chunks:///_virtual/SignInUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./Utils.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var e,n,i,s,o,a,g,I,m,_,d,l,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.ButtonComponent,o=t.instantiate,a=t.LabelComponent,g=t.Sprite},function(t){I=t.CommonUtils},function(t){m=t.Constants},function(t){_=t.Utils},function(t){d=t.EventResult},function(t){l=t.App},function(t){c=t.UIBase}],execute:function(){var r;n._RF.push({},"a4da7PX8BVFXZyEQsPaKxud","SignInUI",void 0);var h=i.ccclass,N=m.AWARD_TYPE,u=[{type:N.GOLD,gold:600,skinId:-1},{type:N.GOLD,gold:650,skinId:-1},{type:N.GOLD,gold:700,skinId:-1},{type:N.GOLD,gold:750,skinId:-1},{type:N.GOLD,gold:800,skinId:-1},{type:N.GOLD,gold:850,skinId:-1},{type:N.GOLD,gold:900,skinId:-1}];t("SignInUI",h("SignInUI")(r=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._titleNode=null,e._signInNode=null,e._signItem=null,e._multipleGetBtnNode=null,e._recvBtnNode=null,e._signInfo=null,e._signItemArr=[],e._isCanSignIn=!1,e}e(n,t);var i=n.prototype;return i.onLoad=function(){this._titleNode=I.getNodeByName(this.node,"title"),this._signInNode=I.getNodeByName(this.node,"signInNode"),this._signItem=I.getNodeByName(this._signInNode,"signItem"),this._multipleGetBtnNode=I.getNodeByName(this.node,"multipleGetBtn"),this._multipleGetBtnNode.on(s.EventType.CLICK,this._onMultipleGetButton,this),this._recvBtnNode=I.getNodeByName(this.node,"receiveBtn"),this._recvBtnNode.on(s.EventType.CLICK,this._onReceiveButton,this),this._signInfo=l.Account.signInfo,I.getNodeByName(this.node,"closeBtn").on(s.EventType.CLICK,this._onCloseButton,this),this.initBgOpacity(),this.initAdData(),this._isCanSignIn=_.isNextDay((new Date).getTime(),this._signInfo.time),this._createSignItem(),this.setZIndex(1)},i.getUIName=function(){return"每日签到"},i.show=function(){this._isCanSignIn=_.isNextDay((new Date).getTime(),this._signInfo.time),this.showUICnt++;var t=I.getNodeByName(this.node,"closeBtn");this.playScaleInAnim([this._titleNode,this._signInNode].concat(this._signInNode.children,[this._recvBtnNode,this._multipleGetBtnNode]),t,.05),this.setShowAdData(),l.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},i._onMultipleGetButton=function(){var t=this;if(!l.UI.isUIAnimPlaying()&&this._isCanSignIn){var e={"当前窗口":this.getUIName(),"按钮类型":"视频广告","签到天数":this._signInfo.count};l.Stats.customEvent("按钮事件",e,d.onStarted),this.showRewardAd({success:function(){var n=t._isCanSignIn?d.onSuccess:d.onFailed;l.Stats.customEvent("按钮事件",e,n,t._isCanSignIn?"":"今日已签到"),t._receiveSignAward(2)},fail:function(){l.Stats.customEvent("按钮事件",e,d.onFailed)}})}else l.UI.showTipMessage("今日已签到！")},i._receiveSignAward=function(t){if(this._isCanSignIn){this._isCanSignIn=!1,l.Event.emit(m.EVENT_TYPE.UPDATE_RED_DOT,this._isCanSignIn);var e=this._signInfo.count;if(!(e>=m.TOTAl_SIGN_IN_DAYS)){this._signInfo.count+=1,this._signInfo.time=(new Date).getTime(),l.Account.signInfo=this._signInfo,this._setSignedImgVisible(this._signItemArr[e],!0,e,u[e].type);var n=u[e];n.type===N.GOLD?l.Event.emit(m.EVENT_TYPE.GOLD_ANIM,n.gold*t):(n.type,N.SKIN)}}else l.UI.showTipMessage("今日已签到！")},i._onReceiveButton=function(){if(!l.UI.isUIAnimPlaying()){var t={"当前窗口":this.getUIName(),"按钮类型":"立即领取","签到天数":this._signInfo.count},e=this._isCanSignIn?d.onSuccess:d.onFailed;l.Stats.customEvent("按钮事件",t,e,this._isCanSignIn?"":"今日已签到"),this._receiveSignAward(1)}},i._onCloseButton=function(){l.UI.isUIAnimPlaying()||(this.unscheduleAllCallbacks(),this._playScaleOutAnim(),l.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭"}))},i._playScaleOutAnim=function(){var t=this,e=I.getNodeByName(this.node,"closeBtn"),n=[this._titleNode].concat(this._signInNode.children,[this._signInNode,this._recvBtnNode,this._multipleGetBtnNode,e]);this.playScaleOutAnim(n,(function(){t.getOpacityComponent(t._signInNode).opacity=255,l.UI.hideDialog(m.UI_DIALOG_NAME.SIGN_IN),l.Event.emit(m.EVENT_TYPE.UPDATE_SIGN_BTN),l.Event.emit(m.EVENT_TYPE.UPDATE_AD)}),.05)},i._createSignItem=function(){for(var t=0;t<m.TOTAl_SIGN_IN_DAYS;t++){var e=null;0===t?e=this._signItem:(e=o(this._signItem),this._signInNode.addChild(e));var n=t===m.TOTAl_SIGN_IN_DAYS-1?0:165*(t%3-1);e.setPosition(n,-185*((t/3>>0)-1),0),this._setSignItemData(e,t),this._signItemArr.push(e)}},i._setSignItemData=function(t,e){var n=this._signInfo.count>e,i=u[e];if(this._setSignedImgVisible(t,n,e,i.type),i.type===N.GOLD)I.getNodeComponent(t,"diamondLbl",a).string=i.gold.toString();else if(i.type===N.SKIN){I.getNodeComponent(t,"skinImg",g).spriteFrame=l.SptFrame.getSpriteFrameByName("skin_"+i.skinId)}},i._setSignedImgVisible=function(t,e,n,i){void 0===i&&(i=0);var s=I.getNodeComponent(t,"dayImg",g),o=this._signInfo.count==n&&this._isCanSignIn||this._signInfo.count-1==n&&!this._isCanSignIn;s.spriteFrame=l.SptFrame.getSpriteFrameByName("Sign_Day_0"+(n+1)),I.getNodeComponent(t,t.name,g).spriteFrame=l.SptFrame.getSpriteFrameByName("Sign_Image_Frame1"+(6==n?"_d7":"")),I.getNodeByName(t,"signedIn").active=e;var a=I.getNodeByName(t,"lightFrame");if(I.getNodeComponent(t,"lightFrame",g).spriteFrame=l.SptFrame.getSpriteFrameByName("Sign_Image_LightFrame"+(6==n?"_d7":"")),a.active=o&&!e,I.getNodeComponent(t,"signedInImg",g).spriteFrame=l.SptFrame.getSpriteFrameByName("Sign_Image_SignIn"+(6==n?"_d7":"")),6==n){var m=I.getNodeByName(a,"light"),_=I.getNodeByName(t,"diamondFrame");m.active=!1,_.setPosition(162,-33.5,0)}I.getNodeByName(t,"diamondNode").active=i===N.GOLD,I.getNodeByName(t,"diamondLbl").active=i===N.GOLD,I.getNodeByName(t,"skinImg").active=i===N.SKIN},n}(c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/RDTTMiniPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Log.ts","./RDPlatformType.ts","./RDPlatformParam.ts","./OptionsManager.ts","./Utils.ts","./RDPlatform.ts","./AdsManager.ts"],(function(t){"use strict";var n,e,i,o,a,s,r,c,d,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.EventManager},function(t){o=t.Log},function(t){a=t.RDPlatformType},function(t){s=t.RDPlatformParam},function(t){r=t.default},function(t){c=t.Utils},function(t){d=t.RDPlatform},function(t){u=t.AdsManager}],execute:function(){e._RF.push({},"a500egMaWZL37HYBpErASHX","RDTTMiniPlatform",void 0);t("RDTTMiniPlatform",function(t){function e(n){var e;return(e=t.call(this,n)||this)._recorder=null,e._videoPath=null,e}n(e,t);var d=e.prototype;return d.loadStorageData=function(t,n,e){var i=window.tt.getStorageSync(t[0]);n&&n(i)},d.flushStorageData=function(t,n){window.tt.setStorageSync(t.key,t.data)},d.initAD=function(){var n=this;t.prototype.initAD.call(this),this._hasShortcutInstalled=!0;var e=s.ADPARAM[a.TTMinGame.toString()].video_id;this._videoBoxInstance=window.tt.createRewardedVideoAd({adUnitId:e,multiton:!1}),this._videoBoxInstance.onLoad((function(){o.debug("视频广告加载成功")})),this._videoBoxInstance.onError((function(t){n._showToast("暂时没有视频了，请稍后再试"),o.debug("videoAd.onError,errMsg",t),n._rewardCaback&&n._rewardCaback.fail(),n._videoBoxInstance=null})),this._videoBoxInstance.onClose((function(t){t&&t.isEnded||void 0===t?(o.debug("正常播放结束，可以下发游戏奖励"),n._rewardCaback&&n._rewardCaback.success(null)):n._rewardCaback&&(o.debug("播放中途退出，不下发游戏奖励",t),n._rewardCaback.fail())})),this.showShareMenu(!0),this._onshareAppMessage()},d.showShareMenu=function(t){t?window.tt.showShareMenu({withShareTicket:!1,success:function(){},fail:function(){},complete:function(){}}):window.tt.hideShareMenu({success:function(){},fail:function(){},complete:function(){}})},d.shareAppMessage=function(t){},d._showToast=function(t){window.tt.showToast({title:t,icon:"none",image:"",mask:!1,duration:2e3,success:function(){},fail:function(){},complete:function(){}})},d._gotoMiniGameByAppid=function(t){window.tt.navigateToMiniProgram({appId:t.appid,success:function(){},fail:function(){},complete:function(){}})},d._vibrateShort=function(t){void 0===t&&(t=50),100!=t?this.vibrate(t):this.vibrateStrong()},d.vibrateStrong=function(){window.tt.vibrateLong({success:function(){},fail:function(){},complete:function(){}})},d.vibrate=function(t){var n=t/15,e=0,i=setInterval((function(){window.tt.vibrateShort({success:function(){},fail:function(){},complete:function(){}}),++e>n&&(clearTimeout(i),i=null)}),15)},d._showBannerAd=function(t){var n=this;if(this.isReviewed())o.log("审核中=====");else if(this._bannerADInstance)this.showBanner();else{o.log("刷新广告内容");var e=window.tt.getSystemInfoSync(),i=e.windowWidth,r=e.windowHeight,c={width:200,top:r-112.5},d=s.ADPARAM[a.TTMinGame.toString()].banner_id,u=window.tt.createBannerAd({adUnitId:d,adIntervals:30,style:c});u.style.left=(i-200)/2,u.onLoad((function(){o.log("banner 广告加载成功"),n.showBanner()})),u.onError(function(t){o.log("banner 广告失败",t)}.bind(this)),u.onResize((function(t){u.style.top=r-t.height,u.style.left=(i-t.width)/2})),this._bannerADInstance=u}},d.showBanner=function(){var t=this;this._bannerADInstance&&this._bannerADInstance.show().then((function(){o.debug("banner 广告显示"),t._bannerShow=!0,i.getInstance().emit("menuUp")}))},d._showVideo=function(t){var n=this;if(this.isReviewed())this._rewardCaback.success(null);else{var e=this;if(!this._videoBoxInstance){var i=s.ADPARAM[a.TTMinGame.toString()].video_id;this._videoBoxInstance=window.tt.createRewardedVideoAd({adUnitId:i,multiton:!1}),this._videoBoxInstance.onLoad((function(){o.debug("广告加载成功")})),this._videoBoxInstance.onError((function(t){e._showToast("暂时没有视频了，请稍后再试"),o.debug("videoAd.onError,errMsg",t),n._videoBoxInstance=null})),this._videoBoxInstance.onClose((function(t){t&&t.isEnded||void 0===t?(o.debug("正常播放结束，可以下发游戏奖励"),n._rewardCaback&&n._rewardCaback.success(null)):n._rewardCaback&&(o.debug("播放中途退出，不下发游戏奖励",t),n._rewardCaback.fail())}))}this._videoBoxInstance&&this._videoBoxInstance.show().then((function(){o.debug("激励广告开始播放")})).catch((function(t){o.debug("激励广告拉取失败"+t),e._showToast("激励广告拉取失败")}))}},d._showIntertitalAd=function(t){if(!this.isReviewed()){o.debug("tt开始插屏广告");var n=t.type;1==n?this.isBtnFadeIn(!0)?this.startGameEvent(t.levelId):this.showInter():2==n?this.isBtnFadeIn(!0)&&this.endGameEvent(t.levelId):this.isBtnFadeIn(!0)&&this.showInter()}},d.showInter=function(){var n=this;if(t.prototype._showIntertitalAd.call(this,null),o.log("开始展示插屏广告"),!this._interstitialAdInstance){var e=s.ADPARAM[a.TTMinGame.toString()].interstital_id;this._interstitialAdInstance=window.tt.createInterstitialAd({adUnitId:e}),this._interstitialAdInstance.load().then((function(){o.log("加载成功, 开始暂时插屏广告"),n._interstitialAdInstance.show()})).catch((function(t){o.log("插屏失败"+t)}))}},d._onshareAppMessage=function(){window.tt.onShareAppMessage((function(t){var n=s.ADPARAM[a.TTMinGame.toString()].share_text,e=Math.floor(Math.random()*n.length),i=n[e]?n[e]:"",o=s.ADPARAM[a.TTMinGame.toString()].share_image_url,r=o[e]?o[e]:"",c=s.ADPARAM[a.TTMinGame.toString()].share_image_id;return{title:i,imageUrl:r,imageUrlId:c[e]?c[e]:""}}))},d._startRecordScreen=function(t){if(o.log("startRecordScreen",t),this._recorder)o.log("已经开始录屏了");else{this._pauseRecordScreen(null),this._recorder=window.tt.getGameRecorderManager();var n=this;this._recorder&&(this._recorder.onStart((function(t){o.log("开始录屏")})),this._recorder.start({duration:t||15}),this._recorder.onStop((function(t){o.log("录屏结束"),n._videoPath=t.videoPath,o.log(n._videoPath)})),this._recorder.onError((function(t){o.log("录屏失败 "+t)})))}},d._pauseRecordScreen=function(t){this._recorder&&(this._recorder.stop(),this._recorder=null)},d._shareVido=function(t){if(o.log("分享视频尝试",this._videoPath),!this._videoPath)return!1;var n=this;return!!window.tt.shareAppMessage&&(window.tt.shareAppMessage({channel:"video",title:"",imageUrl:"",query:"",extra:{videoPath:this._videoPath,videoTopics:[]},success:function(){o.log("分享视频成功"),t&&t.success(null)},fail:function(t){o.log("分享视频失败",t),-1!=t.errMsg.search("shareAppMessage:fail")&&n._showToast("录屏时长小于三秒，无法分享")}}),!0)},d.isShowPrivacy=function(){return!1},d.getPlatId=function(){return"1020"},d.startGameEvent=function(t){var n=c.random(1,100),e=r.getInstance().getConfigByKey("gameEndNativePercent_2",0);o.log("startGameEvent",n,e),n<=e?u.getInstance().showRewardAd({success:function(){},fail:function(){}},"开始游戏"):this.showInter()},d.endGameEvent=function(t){var n=c.random(1,100),e=r.getInstance().getConfigByKey("gameEndNativePercent_1",0);o.log("endGameEvent",n,e),n<=e?u.getInstance().showRewardAd({success:function(){},fail:function(){}},"结算游戏"):this.showInter()},e}(d));e._RF.pop()}}}));

System.register("chunks:///_virtual/AnimEventTest.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var n,e,i,a,s,r,l;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,a=t.SkeletalAnimation,s=t.Component},function(t){r=t.Constants},function(t){l=t.App}],execute:function(){var o;e._RF.push({},"a57feARLSlDcoPE+G3Jnj3w","AnimEventTest",void 0);var c,u=i.ccclass;i.property;!function(t){t.IDLE="idle",t.TURN_AROUND="turnAround",t.START_RUN="startRun",t.LEFT_HIT="leftHit",t.RIGHT_HIT="rightHit",t.LEFT_RUN="leftRun",t.RIGHT_RUN="rightRun",t.GYRATE="gyrate",t.SMALL_FLIP="smallFlip",t.BIG_FLIP="bigFlip",t.ROLL="roll",t.ROLL_TO_LANDING="rollTolanding",t.ATTACK="attack",t.VICTORY="victory",t.FALL="fall"}(c||(c={}));t("AnimEventTest",u("AnimEventTest")(o=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this)._skeletalAnim=null,n}n(e,t);var i=e.prototype;return i.start=function(){this._skeletalAnim=this.node.getComponent(a),this._addHitAnimEvent()},i._addHitAnimEvent=function(){var t=this._skeletalAnim.getState(c.LEFT_HIT).clip;t&&(t.events.push({frame:0,func:"AnimCB",params:["left"]}),t.updateEventDatas());var n=this._skeletalAnim.getState(c.RIGHT_HIT).clip;n&&(n.events.push({frame:0,func:"AnimCB",params:["right"]}),n.updateEventDatas())},i.AnimCB=function(t){l.Event.emit(r.EVENT_TYPE.PLAYER_HIT_BLOCK)},e}(s))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/Agent.ts",["cc","./Common.ts"],(function(i){"use strict";var t,e,s,n,o;return{setters:[function(i){t=i.cclegacy},function(i){e=i.RVOMath,s=i.Vector2,n=i.KeyValuePair,o=i.Line}],execute:function(){t._RF.push({},"a813ayGOvNAqafu2W3fpKn/","Agent",void 0);i("Agent",function(){function i(){this.agentNeighbors_=[],this.obstaclNeighbors_=[],this.orcaLines_=[],this.position_=new s(0,0),this.prefVelocity_=new s(0,0),this.velocity_=new s(0,0),this.id=0,this.maxNeighbors_=0,this.maxSpeed_=0,this.neighborDist=0,this.radius_=0,this.timeHorizon=0,this.timeHorizonObst=0,this.newVelocity_=new s(0,0),this.mass=1,this.defaultPos=new s(0,0)}var t=i.prototype;return t.computeNeighbors=function(i){this.obstaclNeighbors_.length=0;var t=Math.pow(this.timeHorizonObst*this.maxSpeed_+this.radius_,2);i.kdTree.computeObstacleNeighbors(this,t),this.agentNeighbors_.length=0,this.maxNeighbors_>0&&(t=Math.pow(this.neighborDist,2),t=i.kdTree.computeAgentNeighbors(this,t))},t.computeNewVelocity=function(i){this.orcaLines_.length=0;for(var t=this.orcaLines_,n=1/this.timeHorizonObst,r=0;r<this.obstaclNeighbors_.length;++r){for(var a=this.obstaclNeighbors_[r].value,c=a.next,h=a.point.minus(this.position_),l=c.point.minus(this.position_),u=!1,p=0;p<t.length;++p)if(e.det(h.scale(n).minus(t[p].point),t[p].direction)-n*this.radius_>=-e.RVO_EPSILON&&e.det(l.scale(n).minus(t[p].point),t[p].direction)-n*this.radius_>=-e.RVO_EPSILON){u=!0;break}if(!u){var d=e.absSq(h),_=e.absSq(l),m=e.sqr(this.radius_),y=c.point.minus(a.point),g=h.scale(-1).multiply(y)/e.absSq(y),v=e.absSq(h.scale(-1).minus(y.scale(g))),b=new o;if(g<0&&d<=m)a.convex&&(b.point=new s(0,0),b.direction=e.normalize(new s(-h.y,h.x)),t.push(b));else if(g>1&&_<=m)c.convex&&e.det(l,c.direction)>=0&&(b.point=new s(0,0),b.direction=e.normalize(new s(-l.y,l.x)),t.push(b));else if(g>=0&&g<=1&&v<=m)b.point=new s(0,0),b.direction=a.direction.scale(-1),t.push(b);else{var f=void 0,x=void 0;if(g<0&&v<=m){if(!a.convex)continue;c=a;var w=Math.sqrt(d-m);f=new s(h.x*w-h.y*this.radius_,h.x*this.radius_+h.y*w).scale(1/d),x=new s(h.x*w+h.y*this.radius_,-h.x*this.radius_+h.y*w).scale(1/d)}else if(g>1&&v<=m){if(!c.convex)continue;a=c;var N=Math.sqrt(_-m);f=new s(l.x*N-l.y*this.radius_,l.x*this.radius_+l.y*N).scale(1/_),x=new s(l.x*N+l.y*this.radius_,-l.x*this.radius_+l.y*N).scale(1/_)}else{if(a.convex){var q=Math.sqrt(d-m);f=new s(h.x*q-h.y*this.radius_,h.x*this.radius_+h.y*q).scale(1/d)}else f=a.direction.scale(-1);if(c.convex){var S=Math.sqrt(_-m);x=new s(l.x*S+l.y*this.radius_,-l.x*this.radius_+l.y*S).scale(1/_)}else x=a.direction}var V=a.previous,O=!1,M=!1;a.convex&&e.det(f,V.direction.scale(-1))>=0&&(f=V.direction.scale(-1),O=!0),c.convex&&e.det(x,c.direction)<=0&&(x=c.direction,M=!0);var P=a.point.minus(this.position_).scale(n),z=c.point.minus(this.position_).scale(n),L=z.minus(P),k=a==c?.5:this.velocity_.minus(P).multiply(L)/e.absSq(L),R=this.velocity_.minus(P).multiply(f),A=this.velocity_.minus(z).multiply(x);if(k<0&&R<0||a==c&&R<0&&A<0){var H=e.normalize(this.velocity_.minus(P));b.direction=new s(H.y,-H.x),b.point=P.plus(H.scale(this.radius_*n)),t.push(b)}else if(k>1&&A<0){var E=e.normalize(this.velocity_.minus(z));b.direction=new s(E.y,-E.x),b.point=z.plus(E.scale(this.radius_*n)),t.push(b)}else{var I=k<0||k>1||a==c?1/0:e.absSq(this.velocity_.minus(L.scale(k).plus(P))),D=R<0?1/0:e.absSq(this.velocity_.minus(f.scale(R).plus(P))),F=A<0?1/0:e.absSq(this.velocity_.minus(x.scale(A).plus(z)));if(I<=D&&I<=F){b.direction=a.direction.scale(-1);var K=new s(-b.direction.y,b.direction.x);b.point=K.scale(this.radius_*n).plus(P),t.push(b)}else if(D<=F){if(O)continue;b.direction=f;var T=new s(-b.direction.y,b.direction.x);b.point=T.scale(this.radius_*n).plus(P),t.push(b)}else if(!M){b.direction=x.scale(-1);var C=new s(-b.direction.y,b.direction.x);b.point=C.scale(this.radius_*n).plus(z),t.push(b)}}}}}for(var G=t.length,W=1/this.timeHorizon,j=0;j<this.agentNeighbors_.length;++j){var B=this.agentNeighbors_[j].value,J=B.position_.minus(this.position_),Q=B.mass/(this.mass+B.mass),U=this.mass/(this.mass+B.mass),X=Q>=.5?this.velocity_.minus(this.velocity_.scale(Q)).scale(2):this.prefVelocity_.plus(this.velocity_.minus(this.prefVelocity_).scale(2*Q)),Y=U>=.5?B.velocity_.scale(2).scale(1-U):B.prefVelocity_.plus(B.velocity_.minus(B.prefVelocity_).scale(2*U)),Z=X.minus(Y),$=e.absSq(J),ii=this.radius_+B.radius_,ti=e.sqr(ii),ei=new o,si=void 0;if($>ti){var ni=Z.minus(J.scale(W)),oi=e.absSq(ni),ri=ni.multiply(J);if(ri<0&&e.sqr(ri)>ti*oi){var ai=Math.sqrt(oi),ci=ni.scale(1/ai);ei.direction=new s(ci.y,-ci.x),si=ci.scale(ii*W-ai)}else{var hi=Math.sqrt($-ti);if(e.det(J,ni)>0){var li=new s(J.x*hi-J.y*ii,J.x*ii+J.y*hi);ei.direction=li.scale(1/$)}else{var ui=new s(J.x*hi+J.y*ii,-J.x*ii+J.y*hi);ei.direction=ui.scale(-1/$)}var pi=Z.multiply(ei.direction);si=ei.direction.scale(pi).minus(Z)}}else{var di=1/i,_i=Z.minus(J.scale(di)),mi=e.abs(_i),yi=_i.scale(1/mi);ei.direction=new s(yi.y,-yi.x),si=yi.scale(ii*di-mi)}ei.point=X.plus(si.scale(Q)),t.push(ei)}var gi=this.linearProgram2(t,this.maxSpeed_,this.prefVelocity_,!1,this.newVelocity_);gi<t.length&&this.linearProgram3(t,G,gi,this.maxSpeed_,this.newVelocity_)},t.insertAgentNeighbor=function(i,t){if(this!=i){var s=e.absSq(this.position_.minus(i.position_));if(s<t){this.agentNeighbors_.length<this.maxNeighbors_&&this.agentNeighbors_.push(new n(s,i));for(var o=this.agentNeighbors_.length-1;0!=o&&s<this.agentNeighbors_[o-1].key;)this.agentNeighbors_[o]=this.agentNeighbors_[o-1],--o;this.agentNeighbors_[o]=new n(s,i),this.agentNeighbors_.length==this.maxNeighbors_&&(t=this.agentNeighbors_[this.agentNeighbors_.length-1].key)}}return t},t.insertObstacleNeighbor=function(i,t){var s=i.next,o=e.distSqPointLineSegment(i.point,s.point,this.position_);if(o<t){this.obstaclNeighbors_.push(new n(o,i));for(var r=this.obstaclNeighbors_.length-1;0!=r&&o<this.obstaclNeighbors_[r-1].key;)this.obstaclNeighbors_[r]=this.obstaclNeighbors_[r-1],--r;this.obstaclNeighbors_[r]=new n(o,i)}},t.update=function(i){this.velocity_.copy(this.newVelocity_),this.position_.copy(this.position_.plus(this.velocity_.scale(i)))},t.linearProgram1=function(i,t,s,n,o,r){var a=i[t].point.multiply(i[t].direction),c=e.sqr(a)+e.sqr(s)-e.absSq(i[t].point);if(c<0)return!1;for(var h=Math.sqrt(c),l=-a-h,u=-a+h,p=0;p<t;++p){var d=e.det(i[t].direction,i[p].direction),_=e.det(i[p].direction,i[t].point.minus(i[p].point));if(Math.abs(d)<=e.RVO_EPSILON){if(_<0)return!1}else{var m=_/d;if(d>=0?u=Math.min(u,m):l=Math.max(l,m),l>u)return!1}}if(o)n.multiply(i[t].direction)>0?r.copy(i[t].point.plus(i[t].direction.scale(u))):r.copy(i[t].point.plus(i[t].direction.scale(l)));else{var y=i[t].direction.multiply(n.minus(i[t].point));y<l?r.copy(i[t].point.plus(i[t].direction.scale(l))):y>u?r.copy(i[t].point.plus(i[t].direction.scale(u))):r.copy(i[t].point.plus(i[t].direction.scale(y)))}return!0},t.linearProgram2=function(i,t,s,n,o){n?o.copy(s.scale(t)):e.absSq(s)>e.sqr(t)?o.copy(e.normalize(s).scale(t)):o.copy(s);for(var r=0;r<i.length;++r)if(e.det(i[r].direction,i[r].point.minus(o))>0){var a=o.clone();if(!this.linearProgram1(i,r,t,s,n,o))return o.copy(a),r}return i.length},t.linearProgram3=function(i,t,n,r,a){for(var c=0,h=n;h<i.length;++h)if(e.det(i[h].direction,i[h].point.minus(a))>c){for(var l=[],u=0;u<t;++u)l.push(i[u]);for(var p=t;p<h;++p){var d=new o,_=e.det(i[h].direction,i[p].direction);if(Math.abs(_)<=e.RVO_EPSILON){if(i[h].direction.multiply(i[p].direction)>0)continue;d.point=i[h].point.plus(i[p].point).scale(.5)}else d.point=i[h].point.plus(i[h].direction.scale(e.det(i[p].direction,i[h].point.minus(i[p].point))/_));d.direction=e.normalize(i[p].direction.minus(i[h].direction)),l.push(d)}var m=a.clone();this.linearProgram2(l,r,new s(-i[h].direction.y,i[h].direction.x),!0,a)<l.length&&a.copy(m),c=e.det(i[h].direction,i[h].point.minus(a))}},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/MapRcmdUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var n,a,e,i,o,s,m,c,p,r,l,u,d,h;return{setters:[function(t){n=t.inheritsLoose},function(t){a=t.cclegacy,e=t._decorator,i=t.SpriteComponent,o=t.LabelComponent,s=t.ButtonComponent,m=t.tween,c=t.v3,p=t.UIOpacityComponent},function(t){r=t.CommonUtils},function(t){l=t.Constants},function(t){u=t.EventResult},function(t){d=t.App},function(t){h=t.UIBase}],execute:function(){var _;a._RF.push({},"a84c7pJfv5GAJO5fXKpTnEm","MapRcmdUI",void 0);var N=e.ccclass;t("MapRcmdUI",N("MapRcmdUI")(_=function(t){function a(){for(var n,a=arguments.length,e=new Array(a),i=0;i<a;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this)._titleNode=null,n._mapNode=null,n._frameNode=null,n._frameAnimArr=null,n._mapImgSpt=null,n._mapNameLbl=null,n._unlockBtnNode=null,n._rcmdMapData=null,n}n(a,t);var e=a.prototype;return e.onLoad=function(){this._titleNode=r.getNodeByName(this.node,"title"),this._mapNode=r.getNodeByName(this.node,"mapRcmd"),this._frameNode=r.getNodeByName(this._mapNode,"frame"),this._mapImgSpt=r.getNodeComponent(this._mapNode,"mapImg",i),this._mapNameLbl=r.getNodeComponent(this._mapNode,"mapNameLbl",o),this._unlockBtnNode=r.getNodeByName(this.node,"unlockBtn"),this._unlockBtnNode.on(s.EventType.CLICK,this._onUnlockButton,this),r.getNodeByName(this.node,"closeBtn").on(s.EventType.CLICK,this._onCloseButton,this),this.initBgOpacity(),this.initOppoNativeAd(),this.alignOppoNativeAd(this._unlockBtnNode)},e.getUIName=function(){return"场景推荐"},e.show=function(){this._setRcmdMapInfo(),this._playFrameAnimation(),this._playScaleInAnim(),this.showAdvertisement(),d.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},e.hide=function(){this._frameAnimArr.forEach((function(t){return t.stop()})),this._frameAnimArr=[],this.adsManager.hideBannerAd()},e._setRcmdMapInfo=function(){this._rcmdMapData=d.MapDataMgr.getRandomlockMap(),this._rcmdMapData&&(this._mapImgSpt.spriteFrame=d.SptFrame.getSpriteFrameByName("Map_Image_0"+this._rcmdMapData.id),this._mapNameLbl.string=this._rcmdMapData.showName)},e._playFrameAnimation=function(){var t=m(this._frameNode).to(1,{scale:c(1.2,1.2,1)}).to(0,{scale:c(.85,.85,1)}).union().repeatForever().start(),n=m(this._frameNode.getComponent(p)).to(1,{opacity:0},{easing:"quartIn"}).to(0,{opacity:255}).union().repeatForever().start();this._frameAnimArr=[t,n]},e._playScaleInAnim=function(){var t=[this._titleNode,this._mapNode,this._unlockBtnNode];this.playScaleInAnim(t)},e._onUnlockButton=function(){var t=this;if(!d.UI.isUIAnimPlaying()){var n={"当前窗口":this.getUIName(),"按钮类型":"视频广告","场景":this._mapNameLbl.string};d.Stats.customEvent("按钮事件",n,u.onStarted),this.showRewardAd({success:function(){var a=t._rcmdMapData.id,e=d.Account.getMapData(a);e.isUnlock=!0,d.Account.setMapData(a,e),t._updateMap(),t._playScaleOutAnim(),d.Stats.customEvent("按钮事件",n)},fail:function(){d.Stats.customEvent("按钮事件",n,u.onFailed)}})}},e._updateMap=function(){var t=this._rcmdMapData.id;d.GameData.curMapId=t,d.Account.curMapId=t,d.Event.emit(l.EVENT_TYPE.CHANGE_MAP)},e._onCloseButton=function(){d.UI.isUIAnimPlaying()||(this._playScaleOutAnim(),d.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭","场景":this._mapNameLbl.string}))},e._playScaleOutAnim=function(){var t=[this._titleNode,this._mapNode,this._unlockBtnNode];this.playScaleOutAnim(t,(function(){d.Event.emit(l.EVENT_TYPE.LOOP_MUSIC),d.UI.hideDialog(l.UI_DIALOG_NAME.MAP_RECOMMEND)}))},a}(h))||_);a._RF.pop()}}}));

System.register("chunks:///_virtual/PrivacyPolicy.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./UIManager.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var e,n,i,s,o,c,a,r,h,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.Label},function(t){o=t.CommonUtils},function(t){c=t.UIManager},function(t){a=t.RDStatisticsManager,r=t.CustomEventID},function(t){h=t.App},function(t){u=t.UIBase}],execute:function(){var l;n._RF.push({},"a9ba6IGh3RL17Qdo8U1Atbm","PrivacyPolicy",void 0);var _=i.ccclass;t("PrivacyPolicy",_("PrivacyPolicy")(l=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._showContent=!1,e._texts=[],e._currentIndex=0,e}e(n,t);var i=n.prototype;return i.onLoad=function(){this._privacy_dialog=o.getNodeByName(this.node,"centerUI"),this._privacy_dialog.active=!1,this._privacy_content=o.getNodeByName(this.node,"centerUI1"),this._privacy_content.active=!1,this._text=o.getNodeComponent(this.node,"text",s),o.registerButtonEvent(this.node,"sureContentBtn",this.sureContentBtn,this),o.registerButtonEvent(this.node,"sureBtn",this.sureBtn,this),o.registerButtonEvent(this.node,"exitGameBtn",this.exitGameBtn,this),this._back=o.registerButtonEvent(this.node,"back",this.back,this),this._next=o.registerButtonEvent(this.node,"next",this.next,this),o.registerButtonEvent(this.node,"title1",this.onUserProtocolClicked,this)},i.show=function(t,e){this._callback=e,this._showContent=t,this._privacy_dialog.active=!this._showContent,this._privacy_content.active=this._showContent,this.playScaleInAnim([o.getNodeByName(this.node,"uiNode"),this._privacy_content]),console.log("隐私政策"),this._showContent&&this.loadText()},i.next=function(){this._currentIndex++,this._currentIndex=Math.min(this._currentIndex,this._texts.length-1),this._text.string=this._texts[this._currentIndex]},i.back=function(){this._currentIndex--,this._currentIndex=Math.max(this._currentIndex,0),this._text.string=this._texts[this._currentIndex]},i.getUIName=function(){return"隐私政策"},i.onUserProtocolClicked=function(){this._privacy_dialog.active=!1,this._privacy_content.active=!0,this.playScaleInAnim([this._privacy_content]),this.loadText()},i.loadText=function(){var t=this;h.RDAsset.loadTextAsset("adUI/privacy/privacy").then((function(e){t._texts=[];for(var n=1;n<=45;n++){var i=e.text.slice(e.text.length/45*(n-1),e.text.length/45*n);t._texts.push(i)}t._text.string=t._texts[0],console.log("隐私政策")}))},i.sureContentBtn=function(){var t=this;console.log("隐私政策11"),this._showContent?this.playScaleOutAnim([o.getNodeByName(this.node,"uiNode")],(function(){c.getInstance().hideDialog("adUI/privacyPolicy")})):(this._privacy_dialog.active=!0,this.playScaleOutAnim([this._privacy_content],(function(){t._privacy_content.active=!1})))},i.sureBtn=function(){var t=this;this.playScaleOutAnim([o.getNodeByName(this.node,"uiNode")],(function(){var e;c.getInstance().hideDialog("adUI/privacyPolicy"),h.Account.isPrivacyAgree=!0,null===(e=t._callback)||void 0===e||e.call(t),a.getInstance().customEvent(r.custom_churn_privacy,{steps:"同意隐私协议"})}))},i.exitGameBtn=function(){a.getInstance().customEvent(r.custom_churn_privacy,{steps:"拒绝隐私协议"}),h.Platform.exitGame()},n}(u))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/cocosAnalytics.min.js",["./cjs-loader.mjs"],(function(t,e){"use strict";var n;return{setters:[function(t){n=t.default}],execute:function(){t("default",void 0),n.define(e.meta.url,(function(e,r,i,o,s){n.createRequireWithReqMap({},r);!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/",n(n.s=3)}([function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e,n){(function(t,r){var i,o;!function(s,a,u){var h={function:!0,object:!0},l=h[typeof window]&&window||this,c=h[typeof e]&&e,f=h[typeof t]&&t&&!t.nodeType&&t,p=c&&f&&"object"==typeof r&&r;!p||p.global!==p&&p.window!==p&&p.self!==p||(l=p),void 0===(o="function"==typeof(i=u)?i.call(e,n,e,t):i)||(t.exports=o),l.cocosAnalytics=u()}(0,window,(function(){return n(4)}))}).call(this,n(1)(t),n(0))},function(t,e,n){var r=n(5),i=n(11),o=n(12),s=n(15),a=n(16),u=n(17),h=n(18),l=n(19),c=n(20),f=n(21),p=n(22),d=n(23),g=n(24),v={data:{msgPlus:0,isInit:!1,isShowLog:!1,msgPool:[],apiURL:"https://logstorage.cocos.com/log/v2",apiURLReserved:"http://logstorage.cocos.com/log/v2",versionCode:"v2"},version:"2.2.0",browserVersion:void 0,isActive:!0,init:function(t){this.CAAccount=new a(this),this.CAEvent=new u(this),this.CAPayment=new h(this),this.CALevels=new l(this),this.CATask=new c(this),this.CAItem=new f(this),this.CAVirtual=new p(this),this.CATaskType=new d(this),this.CACustomEvent=new s(this),this.CAAdvertising=new g(this),i.manufacturer=i.manufacturer||"",this.data.appVersion=t.version,this.data.appBuild=t.build,this.data.engine=t.engine||"",this.data.resolution=this._getScreenResolution(),this.data.uniqueID=this._getUniqueID(),this.data.CCID=this._getCCID(),this.data.age=0,this.data.sex=0,this._runInterval(),this._bindPageVisibilityEvent(),this.data.isInit=!0,console.log("cocos analytics version :"+this.version);var e=this._getLocalStorage("_SDK_APPID_")||"",n=this._getLocalStorage("_SDK_STORE_")||"",r=this._getLocalStorage("_SDK_CALLNUMBER_")||"";if(e.length>0&&e!=t.appID||n.length>0&&n!=t.storeID||r.length>0&&r!=t.callNumber){var o=this._getLocalStorage("onlineDuration"),v=this._getLocalStorage("_UID_"+e)||"";v.length>0&&parseInt(o)>0&&(this.data.appID=e,this.data.userID=v,this.data.storeID=n,this.data.callNumber=r,this.CAAccount.logout())}return t.appID?(this.data.appID=t.appID,t.storeID=t.storeID,t.storeID&&0!=t.storeID.replace(/\s/g,"").length?(this.data.storeID=t.storeID,this.data.callNumber=t.callNumber||"",this.data.userID="",this.data.channel="",this._addLocalStorage("_SDK_STORE_",this.data.storeID),this._addLocalStorage("_SDK_APPID_",t.appID),this._addLocalStorage("_SDK_CALLNUMBER_",this.data.callNumber),void this._sendInitEvent()):(console.log("storeID 不能为空!"),void(this.data.isInit=!1))):(console.log("appID 不能为空!"),void(this.data.isInit=!1))},isInited:function(){return this.data.isInit},onPause:function(){this.isActive=!1,this.data.end=((new Date).getTime()+"").substr(0,10);var t=this.data.end-this.data.start;this.log("duration..."+t+"s");var e=this._generatePostData({eventValue:{action:"background",start:this.data.start,end:this.data.end},eventTag:"successed",eventID:"view"});this._upload(e)},onResume:function(){this.isActive=!0,this.data.start=((new Date).getTime()+"").substr(0,10),this.data.end&&this.data.start-this.data.end>3600&&this._sendInitEvent()},enableDebug:function(t){this.data.isShowLog=t},_sendInitEvent:function(){if(i.runtimeMask){var t=null;t=setInterval(function(){if(!i.runtimeMask){clearInterval(t);var e=this._generatePostData({eventTag:"successed",eventID:"init"});this._upload(e)}}.bind(this),10)}else{var e=this._generatePostData({eventTag:"successed",eventID:"init"});this._upload(e)}},_runInterval:function(){var t=this;this.isInited()||(setInterval((function(){t.log("cocos analytics check and upload log...");for(var e=t._getLocalStorage("_MSG_"+t.data.appID),n=JSON.parse(e||"[]")||t.data.msgPool;0!==n.length;)if(n.length<=100)n.forEach((function(e){t._submit(e)})),n=[],t.data.msgPool=n,t._addLocalStorage("_MSG_"+t.data.appID,t._toJson(t.data.msgPool));else{var r=n.splice(0,100);t._submit(r),t.data.msgPool=n,t._addLocalStorage("_MSG_"+t.data.appID,t._toJson(t.data.msgPool))}}),3e4),setInterval((function(){t.isActive&&t.data.heartBeat&&(t.data.onlineTime=parseInt(t.data.onlineTime||0)+1,t._addLocalStorage("onlineDuration",t.data.onlineTime))}),1e3))},_bindPageVisibilityEvent:function(){var t="hidden";t in document?document.addEventListener("visibilitychange",n):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",n):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",n):(t="msHidden")in document?document.addEventListener("msvisibilitychange",n):"onfocusin"in document?document.onfocusin=document.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n;var e=this;function n(){var t=document.visibilityState;"visible"===t&&e.onResume(),"hidden"===t&&e.onPause()}void 0!==document[t]&&n()},_generatePostData:function(t){var e=this._generateBasePostData();if(null==t)return e;for(var n in t)null!=t[n]&&e[n]!==t[n]&&(e[n]=t[n]);return e},_lastMsgID:function(){return this.data.saveMsgID||""},_msgID:function(){return this.data.saveMsgID=o(this.data.CCID+((new Date).getTime()+this.data.msgPlus)),this.data.msgPlus=this.data.msgPlus+1,this.data.saveMsgID},_generateBasePostData:function(){var t=((new Date).getTime()+"").substr(0,10),e={appVersion:this.data.appVersion,versionCode:this.data.versionCode,uniqueID:this.data.uniqueID,appID:this.data.appID,channelID:this.data.channel,platform:"H5",engine:this.data.engine,chargeTime:t,userID:this.data.userID,resolution:this.data.resolution,osVersion:i.os.version,language:this._getLanguage(),manufacturer:i.manufacturer||"",store:this.data.storeID,age:this.data.age,sex:this.data.sex,callNumber:this.data.callNumber,model:i.product};return e.lastMsgID=this._lastMsgID(),e.msgID=this._msgID(),e},_toJson:function(t){return JSON.stringify(t)},_fromJson:function(t){return JSON.parse(t)},_upload:function(t){this.data.isInit?this._submit(t):console.log("Please init first!")},log:function(){if(!0===this.data.isShowLog)for(var t in arguments)console.log(arguments[t])},_submit:function(t){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var n=this;e.onreadystatechange=function(){if(4==e.readyState){if(0==e.status&&n.data.apiURL!=n.data.apiURLReserved)return n.data.apiURL=n.data.apiURLReserved,void n._msgPersist(t);200==e.status&&n.log(n._toJson(t))}},e.onerror=function(e){n._msgPersist(t)};var i=r.encryptPostData(this._toJson(t));e.open("POST",this.data.apiURL,!0),e.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),e.send(i)},_msgPersist:function(t){this.data.msgPool.push(t),this._addLocalStorage("_MSG_"+this.data.appID,this._toJson(this.data.msgPool))},_getUniqueID:function(){var t="_SDK_UNIQUE_ID_",e=this._getLocalStorage(t);return e||(e=r.random32Str(),this._addLocalStorage(t,e)),e},_getCCID:function(){var t=r.x64hash128(),e=this._getLocalStorage(t);return e||(e=r.random32Str(),this._addLocalStorage(t,e)),e},extends:function(t){t.data=this.data,t.log=this.log,t._toJson=this._toJson,t._upload=this._upload,t._submit=this._submit,t._msgPersist=this._msgPersist,t._generatePostData=this._generatePostData,t._generateBasePostData=this._generateBasePostData,t._addLocalStorage=this._addLocalStorage,t._delLocalStorage=this._delLocalStorage,t._getLocalStorage=this._getLocalStorage,t._getLanguage=this._getLanguage,t._setHeartBeat=this._setHeartBeat,t._lastMsgID=this._lastMsgID,t._msgID=this._msgID},_addLocalStorage:function(t,e){e=e.toString(),window.localStorage&&("sessionId"==t&&window.sessionStorage?sessionStorage.setItem("__CA_"+t,e):window.wx&&wx.setStorage?wx.setStorage({key:"__CA_"+t,data:e}):localStorage.setItem("__CA_"+t,e))},_delLocalStorage:function(t){window.localStorage&&("sessionId"==t&&window.sessionStorage?sessionStorage.removeItem("__CA_"+t):window.wx&&wx.removeStorageSync?wx.removeStorageSync("__CA_"+t):localStorage.removeItem("__CA_"+t))},_getLocalStorage:function(t){if(window.localStorage)return"sessionId"==t&&window.sessionStorage?sessionStorage.getItem("__CA_"+t):window.wx&&wx.getStorageSync?wx.getStorageSync("__CA_"+t):localStorage.getItem("__CA_"+t)},_getScreenResolution:function(){if(null!=window.BK&&null!=window.BK.Director){var t=window.BK.Director.renderSize;return t.width+"*"+t.height}return null==window.screen.width?window.screen.availWidth+"*"+window.screen.availHeight:window.screen.width+"*"+window.screen.height},_getBrowserVersion:function(){if(!this.browserVersion){var t=window.navigator.userAgent.toLowerCase(),e=/micromessenger|qqbrowser|sogou|qzone|liebao|ucbrowser|360 aphone|360browser|edge|baiduboxapp|bidubrowser|baidubrowser|maxthon|mxbrowser|trident|miuibrowser/i.exec(t);e||(e=/chrome|safari|firefox|opr|oupeng|opera/i.exec(t));var n=e?e[0]:"unknown";"micromessenger"===n?n="wechat":"safari"===n&&t.match(/android.*applewebkit/)?n="androidbrowser":"trident"===n?n="ie":"360 aphone"===n?n="360browser":"mxbrowser"===n?n="maxthon":"opr"===n?n="opera":"bidubrowser"===n&&(n="baidubrowser");var r=t.match(/(micromessenger|qq|mx|maxthon|edge|bidu|baidu|sogou)(mobile)?(browserType)?\/?([\d.]+)/i);r||(r=t.match(/(msie |rv:|firefox|chrome|ucbrowser|oupeng|opera|opr|safari|miui)(mobile)?(browserType)?\/?([\d.]+)/i));var i=r?r[4]:"";this.browserVersion=n,i&&(this.browserVersion+="-"+i)}return this.browserVersion},_getLanguage:function(){var t=window.navigator.language;return(t=t||window.navigator.browserLanguage)?t.split("-")[0]:"en"},_setHeartBeat:function(t){this.data.heartBeat=t||!1,this.data.onlineTime=this._getLocalStorage("onlineDuration")||0}};t.exports=v},function(t,e,n){(function(e){function r(t,e){var n=0,r=t.length;if(!t)return 0;for(;e<r;){var i=e,o=t.charCodeAt(e);if((n+=o<=127?1:o<=2047?2:o<=65535?3:o<=2097151?4:o<=67108863?5:6)>117){e=i;break}e++}return e}function i(t){var e=new JSEncrypt;return e.setPublicKey("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC9LCzyypg24REurnyflGy2LdFj\nc63hBk/69r84TAJHlE7x92kUpZBF+7cRf0bFRIRA52OsKlF/ljzCjfOPBE9JfNIq\n+dwF/rSqns+eyQHPQFd5lY692loz9Mo1pNgElpHuJbfydju7F5KTnQYqviCWompm\nLKKdzAPcY1AVJfWd+QIDAQAB\n-----END PUBLIC KEY-----"),e.key.encrypt(t)}n(10);var o={urlsafe_b64encode:function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},encryptPostData:function(t){for(var n=new e(0),o=0,s=t.length;s-o>0;){var a=o,u=r(t,o),h="";do{h=i(t.substr(a,u-a))}while(256!=h.length);n+=h,o=u}var l=e.from(n,"hex").toString("base64");return this.urlsafe_b64encode(l)},x64Add:function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},x64Multiply:function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},x64Rotl:function(t,e){return 32==(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])},x64LeftShift:function(t,e){return 0==(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]},x64Xor:function(t,e){return[t[0]^e[0],t[1]^e[1]]},x64Fmix:function(t){return t=this.x64Xor(t,[0,t[0]>>>1]),t=this.x64Multiply(t,[4283543511,3981806797]),t=this.x64Xor(t,[0,t[0]>>>1]),t=this.x64Multiply(t,[3301882366,444984403]),this.x64Xor(t,[0,t[0]>>>1])},x64hash128:function(t,e){e=e||0;for(var n=(t=t||"0").length%16,r=t.length-n,i=[0,e],o=[0,e],s=[0,0],a=[0,0],u=[2277735313,289559509],h=[1291169091,658871167],l=0;l<r;l+=16)s=[255&t.charCodeAt(l+4)|(255&t.charCodeAt(l+5))<<8|(255&t.charCodeAt(l+6))<<16|(255&t.charCodeAt(l+7))<<24,255&t.charCodeAt(l)|(255&t.charCodeAt(l+1))<<8|(255&t.charCodeAt(l+2))<<16|(255&t.charCodeAt(l+3))<<24],a=[255&t.charCodeAt(l+12)|(255&t.charCodeAt(l+13))<<8|(255&t.charCodeAt(l+14))<<16|(255&t.charCodeAt(l+15))<<24,255&t.charCodeAt(l+8)|(255&t.charCodeAt(l+9))<<8|(255&t.charCodeAt(l+10))<<16|(255&t.charCodeAt(l+11))<<24],s=this.x64Multiply(s,u),s=this.x64Rotl(s,31),s=this.x64Multiply(s,h),i=this.x64Xor(i,s),i=this.x64Rotl(i,27),i=this.x64Add(i,o),i=this.x64Add(this.x64Multiply(i,[0,5]),[0,1390208809]),a=this.x64Multiply(a,h),a=this.x64Rotl(a,33),a=this.x64Multiply(a,u),o=this.x64Xor(o,a),o=this.x64Rotl(o,31),o=this.x64Add(o,i),o=this.x64Add(this.x64Multiply(o,[0,5]),[0,944331445]);switch(s=[0,0],a=[0,0],n){case 15:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+14)],48));case 14:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+13)],40));case 13:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+12)],32));case 12:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+11)],24));case 11:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+10)],16));case 10:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+9)],8));case 9:a=this.x64Xor(a,[0,t.charCodeAt(l+8)]),a=this.x64Multiply(a,h),a=this.x64Rotl(a,33),a=this.x64Multiply(a,u),o=this.x64Xor(o,a);case 8:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+7)],56));case 7:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+6)],48));case 6:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+5)],40));case 5:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+4)],32));case 4:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+3)],24));case 3:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+2)],16));case 2:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+1)],8));case 1:s=this.x64Xor(s,[0,t.charCodeAt(l)]),s=this.x64Multiply(s,u),s=this.x64Rotl(s,31),s=this.x64Multiply(s,h),i=this.x64Xor(i,s)}return i=this.x64Xor(i,[0,t.length]),o=this.x64Xor(o,[0,t.length]),i=this.x64Add(i,o),o=this.x64Add(o,i),i=this.x64Fmix(i),o=this.x64Fmix(o),i=this.x64Add(i,o),o=this.x64Add(o,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)},random32Str:function(){var t,e=Date.now().toString(32).toUpperCase();return t=Date.now(),(e||"")+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n;return n=(t+16*Math.random())%16|0,t=Math.floor(t/16),"x"===e?n.toString(16):(7&n|8).toString(16)})).replace(/-/g,"").toUpperCase()}};t.exports=o}).call(this,n(6).Buffer)},function(t,e,n){(function(t){var r=n(7),i=n(8),o=n(9);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return h(this,t,e,n)}function h(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return E(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(h(t,o)===h(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var c=!0,f=0;f<u;f++)if(h(t,o+f)!==h(e,f)){c=!1;break}if(c)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return X(F(e,t.length-n),t,n,r)}function S(t,e,n,r){return X(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return S(t,e,n,r)}function x(t,e,n,r){return X(j(e),t,n,r)}function D(t,e,n,r){return X(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,h=t[i],l=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=n)switch(c){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&h)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,c=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=V(t[o]);return i}function B(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function O(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(t,e,n,r,o){return o||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,o){return o||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return h(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return c(null,t)},u.allocUnsafeSlow=function(t){return c(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(r,i),l=t.slice(e,n),c=0;c<a;++c)if(h[c]!==l[c]){o=h[c],s=l[c];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:F(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function X(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(0))},function(t,e,n){e.byteLength=function(t){var e=h(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=h(t),s=r[0],a=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),l=0,c=a>0?s-4:s;for(n=0;n<c;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,h=u>>1,l=-7,c=n?i-1:0,f=n?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=h}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,h=8*o-i-1,l=(1<<h)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[n+p]=255&s,p+=d,s/=256,h-=8);t[n+p-d]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){!function(t){function e(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function n(t,e){return t&e}function r(t,e){return t|e}function i(t,e){return t^e}function o(t,e){return t&~e}function s(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function a(t){for(var e=0;0!=t;)t&=t-1,++e;return e}var u,h,l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},c={decode:function(t){var e;if(void 0===u){for(u=Object.create(null),e=0;e<64;++e)u["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)]=e;for(e=0;e<"= \f\n\r\t \u2028\u2029".length;++e)u["= \f\n\r\t \u2028\u2029".charAt(e)]=-1}var n=[],r=0,i=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(-1!=(o=u[o])){if(void 0===o)throw new Error("Illegal character at offset "+e);r|=o,++i>=4?(n[n.length]=r>>16,n[n.length]=r>>8&255,n[n.length]=255&r,r=0,i=0):r<<=6}}switch(i){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:n[n.length]=r>>10;break;case 3:n[n.length]=r>>16,n[n.length]=r>>8&255}return n},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=c.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw new Error("RegExp out of sync");t=e[2]}return c.decode(t)}},f=function(){function t(e,n){this.hexDigits="0123456789ABCDEF",e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=n)}return t.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset "+t+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e,n){for(var r="",i=t;i<e;++i)if(r+=this.hexByte(this.get(i)),!0!==n)switch(15&i){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},t}(),p=function(){function t(t,e,n,r,i){if(!(r instanceof d))throw new Error("Invalid tag value.");this.stream=t,this.header=e,this.length=n,this.tag=r,this.sub=i}return t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},t.decodeLength=function(t){var e=t.get(),n=127&e;if(n==e)return n;if(n>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(0===n)return null;e=0;for(var r=0;r<n;++r)e=256*e+t.get();return e},t.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,n=2*this.length;return t.substr(e,n)},t.decode=function(e){var n;n=e instanceof f?e:new f(e,0);var r=new f(n),i=new d(n),o=t.decodeLength(n),s=n.pos,a=s-r.pos,u=null,h=function(){var e=[];if(null!==o){for(var r=s+o;n.pos<r;)e[e.length]=t.decode(n);if(n.pos!=r)throw new Error("Content size is not correct for container starting at offset "+s)}else try{for(;;){var i=t.decode(n);if(i.tag.isEOC())break;e[e.length]=i}o=s-n.pos}catch(t){throw new Error("Exception while decoding undefined length content: "+t)}return e};if(i.tagConstructed)u=h();else if(i.isUniversal()&&(3==i.tagNumber||4==i.tagNumber))try{if(3==i.tagNumber&&0!=n.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");u=h();for(var l=0;l<u.length;++l)if(u[l].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(t){u=null}if(null===u){if(null===o)throw new Error("We can't skip over an invalid tag with undefined length at offset "+s);n.pos=s+Math.abs(o)}return new t(r,a,o,i,u)},t}(),d=function(){function t(t){var e=t.get();this.tagClass=e>>6,this.tagConstructed=0!=(32&e),this.tagNumber=31&e,31==this.tagNumber&&null.error(0)}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),g=function(){function t(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}return t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return this.toRadix(t);n=2}var r,i=(1<<n)-1,o=!1,s="",a=this.t,u=this.DB-a*this.DB%n;if(a-- >0)for(u<this.DB&&(r=this[a]>>u)>0&&(o=!0,s=e(r));a>=0;)u<n?(r=(this[a]&(1<<u)-1)<<n-u,r|=this[--a]>>(u+=this.DB-n)):(r=this[a]>>(u-=n)&i,u<=0&&(u+=this.DB,--a)),r>0&&(o=!0),o&&(s+=e(r));return o?s:"0"},t.prototype.negate=function(){var e=m();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+A(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var n=m();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(t.ZERO)>0&&e.subTo(n,n),n},t.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new y(e):new b(e),this.exp(t,n)},t.prototype.clone=function(){var t=m();return this.copyTo(t),t},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return this.compareTo(t)<0?this:t},t.prototype.max=function(t){return this.compareTo(t)>0?this:t},t.prototype.and=function(t){var e=m();return this.bitwiseTo(t,n,e),e},t.prototype.or=function(t){var e=m();return this.bitwiseTo(t,r,e),e},t.prototype.xor=function(t){var e=m();return this.bitwiseTo(t,i,e),e},t.prototype.andNot=function(t){var e=m();return this.bitwiseTo(t,o,e),e},t.prototype.not=function(){for(var t=m(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var e=m();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},t.prototype.shiftRight=function(t){var e=m();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+s(this[t]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=a(this[n]^e);return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,r)},t.prototype.clearBit=function(t){return this.changeBit(t,o)},t.prototype.flipBit=function(t){return this.changeBit(t,i)},t.prototype.add=function(t){var e=m();return this.addTo(t,e),e},t.prototype.subtract=function(t){var e=m();return this.subTo(t,e),e},t.prototype.multiply=function(t){var e=m();return this.multiplyTo(t,e),e},t.prototype.divide=function(t){var e=m();return this.divRemTo(t,e,null),e},t.prototype.remainder=function(t){var e=m();return this.divRemTo(t,null,e),e},t.prototype.divideAndRemainder=function(t){var e=m(),n=m();return this.divRemTo(t,e,n),[e,n]},t.prototype.pow=function(t){return this.exp(t,new v)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(e,n);r=2}this.t=0,this.s=0;for(var i=e.length,o=!1,s=0;--i>=0;){var a=8==r?255&+e[i]:D(e,i);a<0?"-"==e.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){for(var n=t%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(t/this.DB),s=this.s<<n&this.DM,a=this.t-1;a>=0;--a)e[a+o+1]=this[a]>>r|s,s=(this[a]&i)<<n;for(a=o-1;a>=0;--a)e[a]=0;e[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<i,e[s-n]=this[s]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},t.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},t.prototype.multiplyTo=function(e,n){var r=this.abs(),i=e.abs(),o=r.t;for(n.t=o+i.t;--o>=0;)n[o]=0;for(o=0;o<i.t;++o)n[o+r.t]=r.am(0,i[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)},t.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(e,n,r){var i=e.abs();if(!(i.t<=0)){var o=this.abs();if(o.t<i.t)return null!=n&&n.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=m());var s=m(),a=this.s,u=e.s,h=this.DB-A(i[i.t-1]);h>0?(i.lShiftTo(h,s),o.lShiftTo(h,r)):(i.copyTo(s),o.copyTo(r));var l=s.t,c=s[l-1];if(0!=c){var f=c*(1<<this.F1)+(l>1?s[l-2]>>this.F2:0),p=this.FV/f,d=(1<<this.F1)/f,g=1<<this.F2,v=r.t,y=v-l,b=null==n?m():n;for(s.dlShiftTo(y,b),r.compareTo(b)>=0&&(r[r.t++]=1,r.subTo(b,r)),t.ONE.dlShiftTo(l,b),b.subTo(s,s);s.t<l;)s[s.t++]=0;for(;--y>=0;){var w=r[--v]==c?this.DM:Math.floor(r[v]*p+(r[v-1]+g)*d);if((r[v]+=s.am(0,w,r,y,0,l))<w)for(s.dlShiftTo(y,b),r.subTo(b,r);r[v]<--w;)r.subTo(b,r)}null!=n&&(r.drShiftTo(l,n),a!=u&&t.ZERO.subTo(n,n)),r.t=l,r.clamp(),h>0&&r.rShiftTo(h,r),a<0&&t.ZERO.subTo(r,r)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,n){if(e>4294967295||e<1)return t.ONE;var r=m(),i=m(),o=n.convert(this),s=A(e)-1;for(o.copyTo(r);--s>=0;)if(n.sqrTo(r,i),(e&1<<s)>0)n.mulTo(i,o,r);else{var a=r;r=i,i=a}return n.revert(r)},t}(),v=function(){function t(){}return t.prototype.convert=function(t){return t},t.prototype.revert=function(t){return t},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},t.prototype.sqrTo=function(t,e){t.squareTo(e)},t}(),y=function(){function t(t){this.m=t}return t.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),b=function(){function t(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return t.prototype.convert=function(t){var e=m();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(g.ZERO)>0&&this.m.subTo(e,e),e},t.prototype.revert=function(t){var e=m();return t.copyTo(e),this.reduce(e),e},t.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}();function m(){return new g(null)}function w(t,e){return new g(t,e)}"Microsoft Internet Explorer"==window.navigator.appName?(g.prototype.am=function(t,e,n,r,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],h=this[t++]>>15,l=a*u+h*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*h+(i>>>30),n[r++]=1073741823&u}return i},h=30):"Netscape"!=window.navigator.appName?(g.prototype.am=function(t,e,n,r,i,o){for(;--o>=0;){var s=e*this[t++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},h=26):(g.prototype.am=function(t,e,n,r,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],h=this[t++]>>14,l=a*u+h*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*h,n[r++]=268435455&u}return i},h=28),g.prototype.DB=h,g.prototype.DM=(1<<h)-1,g.prototype.DV=1<<h,g.prototype.FV=Math.pow(2,52),g.prototype.F1=52-h,g.prototype.F2=2*h-52;var S,_,x=[];for(S="0".charCodeAt(0),_=0;_<=9;++_)x[S++]=_;for(S="a".charCodeAt(0),_=10;_<36;++_)x[S++]=_;for(S="A".charCodeAt(0),_=10;_<36;++_)x[S++]=_;function D(t,e){var n=x[t.charCodeAt(e)];return null==n?-1:n}function I(t){var e=m();return e.fromInt(t),e}function A(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}g.ZERO=I(0),g.ONE=I(1);var T,E,P=function(){function t(){this.i=0,this.j=0,this.S=[]}return t.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0},t.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},t}(),B=null;if(null==B){B=[],E=0;var C=void 0;if(window.crypto&&window.crypto.getRandomValues){var R=new Uint32Array(256);for(window.crypto.getRandomValues(R),C=0;C<R.length;++C)B[E++]=255&R[C]}var M=function t(e){if(this.count=this.count||0,this.count>=256||E>=256)window.removeEventListener?window.removeEventListener("mousemove",t,!1):window.detachEvent&&window.detachEvent("onmousemove",t);else try{var n=e.x+e.y;B[E++]=255&n,this.count+=1}catch(e){}};window.addEventListener?window.addEventListener("mousemove",M,!1):window.attachEvent&&window.attachEvent("onmousemove",M)}function O(){if(null==T){for(T=new P;E<256;){var t=Math.floor(65536*Math.random());B[E++]=255&t}for(T.init(B),E=0;E<B.length;++E)B[E]=0;E=0}return T.next()}var L=function(){function t(){}return t.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=O()},t}(),k=function(t){function e(n){var r=t.call(this)||this;return n&&("string"==typeof n?r.parseKey(n):(e.hasPrivateKeyProperty(n)||e.hasPublicKeyProperty(n))&&r.parsePropertiesFrom(n)),r}return function(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.parseKey=function(t){try{var e=0,n=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?Hex.decode(t):c.unarmor(t),i=p.decode(r);if(3===i.sub.length&&(i=i.sub[2].sub[0]),9===i.sub.length){e=i.sub[1].getHexStringValue(),this.n=w(e,16),n=i.sub[2].getHexStringValue(),this.e=parseInt(n,16);var o=i.sub[3].getHexStringValue();this.d=w(o,16);var s=i.sub[4].getHexStringValue();this.p=w(s,16);var a=i.sub[5].getHexStringValue();this.q=w(a,16);var u=i.sub[6].getHexStringValue();this.dmp1=w(u,16);var h=i.sub[7].getHexStringValue();this.dmq1=w(h,16);var l=i.sub[8].getHexStringValue();this.coeff=w(l,16)}else{if(2!==i.sub.length)return!1;var f=i.sub[1].sub[0];e=f.sub[0].getHexStringValue(),this.n=w(e,16),n=f.sub[1].getHexStringValue(),this.e=parseInt(n,16)}return!0}catch(t){return!1}},e}(function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=w(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},t.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;for(var n=[],r=t.length-1;r>=0&&e>0;){var i=t.charCodeAt(r--);i<128?n[--e]=i:i>127&&i<2048?(n[--e]=63&i|128,n[--e]=i>>6|192):(n[--e]=63&i|128,n[--e]=i>>6&63|128,n[--e]=i>>12|224)}n[--e]=0;for(var o=new L,s=[];e>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);n[--e]=s[0]}return n[--e]=2,n[--e]=0,new g(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},t}()),N=function(){function t(t){t=t||{},this.default_key_size=parseInt(t.default_key_size,10)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return t.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new k(t)},t.prototype.setPublicKey=function(t){this.setKey(t)},t.version="3.0.0-rc.1",t}();window.JSEncrypt=N,t.JSEncrypt=N,t.default=N,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){(function(t,r){var i;(function(){var o={function:!0,object:!0},s=o[typeof window]&&window||this,a=o[typeof e]&&e,u=o[typeof t]&&t&&!t.nodeType&&t,h=a&&u&&"object"==typeof r&&r;!h||h.global!==h&&h.window!==h&&h.self!==h||(s=h);var l=Math.pow(2,53)-1,c=/\bOpera/,f=Object.prototype,p=f.hasOwnProperty,d=f.toString;function g(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function v(t){return t=S(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:g(t)}function y(t,e){for(var n in t)p.call(t,n)&&e(t[n],n,t)}function b(t){return null==t?g(t):d.call(t).slice(8,-1)}function m(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function w(t,e){var n=null;return function(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=l)for(;++n<r;)e(t[n],n);else y(t,e)}(t,(function(r,i){n=e(n,r,i,t)})),n}function S(t){return String(t).replace(/^ +| +$/g,"")}var _=function t(e){var n=s,r=e&&"object"==typeof e&&"String"!=b(e);r&&(n=e,e=null);var i=n.navigator||{},o=i.userAgent||"";e||(e=o);var a,u,h,l,f,p=r?!!i.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(d.toString()),g=r?"Object":"ScriptBridgingProxyObject",_=r?"Object":"Environment",x=r&&n.java?"JavaPackage":b(n.java),D=r?"Object":"RuntimeObject",I=/\bJava/.test(x)&&n.java,A=I&&b(n.environment)==_,T=I?"a":"α",E=I?"b":"β",P=n.document||{},B=n.operamini||n.opera,C=c.test(C=r&&B?B["[[Class]]"]:b(B))?C:B=null,R=e,M=[],O=null,L=e==o,k=L&&B&&"function"==typeof B.version&&B.version(),N=w([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,n){return t||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(e)&&(n.label||n)})),U=w(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(t,n){return t||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(e)&&(n.label||n)})),V=Y([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),F=w({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},(function(t,n,r){return t||(n[V]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(V)]||RegExp("\\b"+m(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})),j=w(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(t,n){var r=n.pattern||m(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),v(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,n.label||n)),t}));if(window.BK){var X=BK.getSystemInfoSync();-1!=(V=X.platform).indexOf("ios")?(V=V.replace(/ios/,"iPhone"),e=" OS "+X.osVersion+") "):(V=V.replace(/ios/,"Android"),e=" Android "+X.osVersion+"; ",j="Android "+X.osVersion),k=X.osVersion}function Y(t){return w(t,(function(t,n){var r=n.pattern||m(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=v(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}if(N&&(N=[N]),F&&!V&&(V=Y([F])),(a=/\bGoogle TV\b/.exec(V))&&(V=a[0]),/\bSimulator\b/i.test(e)&&(V=(V?V+" ":"")+"Simulator"),"Opera Mini"==U&&/\bOPiOS\b/.test(e)&&M.push("running in Turbo/Uncompressed mode"),"IE"==U&&/\blike iPhone OS\b/.test(e)?(F=(a=t(e.replace(/like iPhone OS/,""))).manufacturer,V=a.product):/^iP/.test(V)?(U||(U="Safari"),j="iOS"+((a=/ OS ([\d_]+)/i.exec(e))||(a=/ OS[^]+?([\d\.]+?) /i.exec(e))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"!=U||/buntu/i.test(j)?F&&"Google"!=F&&(/Chrome/.test(U)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(V))||/\bAndroid\b/.test(j)&&/^Chrome/.test(U)&&/\bVersion\//i.test(e)?(U="Android Browser",j=/\bAndroid\b/.test(j)?j:"Android"):"Silk"==U?(/\bMobi/i.test(e)||(j="Android",M.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&M.unshift("accelerated")):"PaleMoon"==U&&(a=/\bFirefox\/([\d.]+)\b/.exec(e))?M.push("identifying as Firefox "+a[1]):"Firefox"==U&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(j||(j="Firefox OS"),V||(V=a[1])):!U||(a=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(U))?(U&&!V&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(a+"/")+8))&&(U=null),(a=V||F||j)&&(V||F||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(j))&&(U=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(j)?j:a)+" Browser")):"Electron"==U&&(a=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&M.push("Chromium "+a):j="Kubuntu",k||(j&&-1!=j.indexOf("Android")&&(V=V||"Android",(a=/ Android[^]+?([\d\.]+?)[\)|;]/i.exec(e))&&(j="Android "+((k=a[1].replace(/_/g,"."))||""))),k||(k=w(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",m(U),"(?:Firefox|Minefield|NetFront)"],(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})))),(a=("iCab"==N&&parseFloat(k)>3?"WebKit":/\bOpera\b/.test(U)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(N)&&"WebKit"||!N&&/\bMSIE\b/i.test(e)&&("Mac OS"==j?"Tasman":"Trident")||"WebKit"==N&&/\bPlayStation\b(?! Vita\b)/i.test(U)&&"NetFront")&&(N=[a]),"IE"==U&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(U+=" Mobile",j="Windows Phone "+(/\+$/.test(a)?a:a+".x"),M.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(U="IE Mobile",j="Windows Phone 8.x",M.unshift("desktop mode"),k||(k=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=U&&"Trident"==N&&(a=/\brv:([\d.]+)/.exec(e))&&(U&&M.push("identifying as "+U+(k?" "+k:"")),U="IE",k=a[1]),L){if(l="global",f=null!=(h=n)?typeof h[l]:"number",/^(?:boolean|number|string|undefined)$/.test(f)||"object"==f&&!h[l])b(a=n.runtime)==g?(U="Adobe AIR",j=a.flash.system.Capabilities.os):b(a=n.phantom)==D?(U="PhantomJS",k=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof P.documentMode&&(a=/\bTrident\/(\d+)/i.exec(e))?(k=[k,P.documentMode],(a=+a[1]+4)!=k[1]&&(M.push("IE "+k[1]+" mode"),N&&(N[1]=""),k[1]=a),k="IE"==U?String(k[1].toFixed(1)):k[0]):"number"==typeof P.documentMode&&/^(?:Chrome|Firefox)\b/.test(U)&&(M.push("masking as "+U+" "+k),U="IE",k="11.0",N=["Trident"],j="Windows");else if(I&&(R=(a=I.lang.System).getProperty("os.arch"),j=j||a.getProperty("os.name")+" "+a.getProperty("os.version")),A){try{k=n.require("ringo/engine").version.join("."),U="RingoJS"}catch(t){(a=n.system)&&a.global.system==n.system&&(U="Narwhal",j||(j=a[0].os||null))}U||(U="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(M.push("Node "+a.versions.node),U="Electron",k=a.versions.electron):"string"==typeof a.versions.nw&&(M.push("Chromium "+k,"Node "+a.versions.node),U="NW.js",k=a.versions.nw)),U||(U="Node.js",R=a.arch,j=a.platform,k=(k=/[\d.]+/.exec(a.version))?k[0]:null));j=j&&v(j)}if(k&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(k)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(L&&i.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(O=/b/i.test(a)?"beta":"alpha",k=k.replace(RegExp(a+"\\+?$"),"")+("beta"==O?E:T)+(/\d+\+?/.exec(a)||"")),"Fennec"==U||"Firefox"==U&&/\b(?:Android|Firefox OS)\b/.test(j))U="Firefox Mobile";else if("Maxthon"==U&&k)k=k.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(V))"Xbox 360"==V&&(j=null),"Xbox 360"==V&&/\bIEMobile\b/.test(e)&&M.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(U)&&(!U||V||/Browser|Mobi/.test(U))||"Windows CE"!=j&&!/Mobi/i.test(e))if("IE"==U&&L)try{null===n.external&&M.unshift("platform preview")}catch(t){M.unshift("embedded")}else(/\bBlackBerry\b/.test(V)||/\bBB10\b/.test(e))&&(a=(RegExp(V.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||k)?(j=((a=[a,/BB10/.test(e)])[1]?(V=null,F="BlackBerry"):"Device Software")+" "+a[0],k=null):this!=y&&"Wii"!=V&&(L&&B||/Opera/.test(U)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==U&&/\bOS X (?:\d+\.){2,}/.test(j)||"IE"==U&&(j&&!/^Win/.test(j)&&k>5.5||/\bWindows XP\b/.test(j)&&k>8||8==k&&!/\bTrident\b/.test(e)))&&!c.test(a=t.call(y,e.replace(c,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),c.test(U)?(/\bIE\b/.test(a)&&"Mac OS"==j&&(j=null),a="identify"+a):(a="mask"+a,U=C?v(C.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(j=null),L||(k=null)),N=["Presto"],M.push(a));else U+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==U&&"+"==a[1].slice(-1)?(U="WebKit Nightly",O="alpha",k=a[1].slice(0,-1)):k!=a[1]&&k!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(k=null),a[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==N&&(N=["Blink"]),L&&(p||a[1])?(N&&(N[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=N?"27":"28")):(N&&(N[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:"8"),N&&(N[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==U&&(!k||parseInt(k)>45)&&(k=a)),"Opera"==U&&(a=/\bzbov|zvav$/.exec(j))?(U+=" ",M.unshift("desktop mode"),"zvav"==a?(U+="Mini",k=null):U+="Mobile",j=j.replace(RegExp(" *"+a+"$"),"")):"Safari"==U&&/\bChrome\b/.exec(N&&N[1])&&(M.unshift("desktop mode"),U="Chrome Mobile",k=null,/\bOS X\b/.test(j)?(F="Apple",j="iOS 4.3+"):j=null),k&&0==k.indexOf(a=/[\d.]+$/.exec(j))&&e.indexOf("/"+a+"-")>-1&&(j=S(j.replace(a,""))),N&&!/\b(?:Avant|Nook)\b/.test(U)&&(/Browser|Lunascape|Maxthon/.test(U)||"Safari"!=U&&/^iOS/.test(j)&&/\bSafari\b/.test(N[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(U)&&N[1])&&(a=N[N.length-1])&&M.push(a),M.length&&(M=["("+M.join("; ")+")"]),F&&V&&V.indexOf(F)<0&&M.push("on "+F),V&&M.push((/^on /.test(M[M.length-1])?"":"on ")+V),j&&(a=/ ([\d.+]+)$/.exec(j),u=a&&"/"==j.charAt(j.length-a[0].length-1),j={architecture:32,family:a&&!u?j.replace(a[0],""):j,version:a?a[1]:null,toString:function(){var t=this.version;return this.family+(t&&!u?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(j&&(j.architecture=64,j.family=j.family.replace(RegExp(" *"+a),"")),U&&(/\bWOW64\b/i.test(e)||L&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(e))&&M.unshift("32-bit")):j&&/^OS X/.test(j.family)&&"Chrome"==U&&parseFloat(k)>=39&&(j.architecture=64),e||(e=null);var K={};K.description=e,K.layout=N&&N[0],K.manufacturer=F,K.name=U,K.prerelease=O,K.product=V,K.ua=e,K.version=U&&k,K.os=j||{architecture:null,family:null,version:null,toString:function(){return"null"}};var W=window.hbs||window.qg||window.wx||window.tt||window.loadRuntime&&window.loadRuntime();return W&&W.getSystemInfo&&(K.runtimeMask=!0,K.product="",K.manufacturer="",K.os.version="",W.getSystemInfo({success:function(t){K.product=t.model,K.manufacturer=t.brand||"";var e=/Android[^]+?([\d\.]+?)\s/i.exec(t.system+" ");e&&e.length>1?K.os.version=e[1].replace(/_/g,"."):K.os.version=t.system,K.runtimeMask=!1},fail:function(){K.runtimeMask=!1},complete:function(){K.runtimeMask=!1}})),K.parse=t,K.toString=function(){return this.description||""},K.version&&M.unshift(k),K.name&&M.unshift(U),j&&U&&(j!=String(j).split(" ")[0]||j!=U.split(" ")[0]&&!V)&&M.push(V?"("+j+")":"on "+j),M.length&&(K.description=M.join(" ")),K}();s.platform=_,void 0===(i=function(){return _}.call(e,n,e,t))||(t.exports=i)}).call(this)}).call(this,n(1)(t),n(0))},function(t,e,n){var r,i,o,s,a;r=n(13),i=n(2).utf8,o=n(14),s=n(2).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var n=r.bytesToWords(t),u=8*t.length,h=1732584193,l=-271733879,c=-1732584194,f=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var d=a._ff,g=a._gg,v=a._hh,y=a._ii;for(p=0;p<n.length;p+=16){var b=h,m=l,w=c,S=f;h=d(h,l,c,f,n[p+0],7,-680876936),f=d(f,h,l,c,n[p+1],12,-389564586),c=d(c,f,h,l,n[p+2],17,606105819),l=d(l,c,f,h,n[p+3],22,-1044525330),h=d(h,l,c,f,n[p+4],7,-176418897),f=d(f,h,l,c,n[p+5],12,1200080426),c=d(c,f,h,l,n[p+6],17,-1473231341),l=d(l,c,f,h,n[p+7],22,-45705983),h=d(h,l,c,f,n[p+8],7,1770035416),f=d(f,h,l,c,n[p+9],12,-1958414417),c=d(c,f,h,l,n[p+10],17,-42063),l=d(l,c,f,h,n[p+11],22,-1990404162),h=d(h,l,c,f,n[p+12],7,1804603682),f=d(f,h,l,c,n[p+13],12,-40341101),c=d(c,f,h,l,n[p+14],17,-1502002290),h=g(h,l=d(l,c,f,h,n[p+15],22,1236535329),c,f,n[p+1],5,-165796510),f=g(f,h,l,c,n[p+6],9,-1069501632),c=g(c,f,h,l,n[p+11],14,643717713),l=g(l,c,f,h,n[p+0],20,-373897302),h=g(h,l,c,f,n[p+5],5,-701558691),f=g(f,h,l,c,n[p+10],9,38016083),c=g(c,f,h,l,n[p+15],14,-660478335),l=g(l,c,f,h,n[p+4],20,-405537848),h=g(h,l,c,f,n[p+9],5,568446438),f=g(f,h,l,c,n[p+14],9,-1019803690),c=g(c,f,h,l,n[p+3],14,-187363961),l=g(l,c,f,h,n[p+8],20,1163531501),h=g(h,l,c,f,n[p+13],5,-1444681467),f=g(f,h,l,c,n[p+2],9,-51403784),c=g(c,f,h,l,n[p+7],14,1735328473),h=v(h,l=g(l,c,f,h,n[p+12],20,-1926607734),c,f,n[p+5],4,-378558),f=v(f,h,l,c,n[p+8],11,-2022574463),c=v(c,f,h,l,n[p+11],16,1839030562),l=v(l,c,f,h,n[p+14],23,-35309556),h=v(h,l,c,f,n[p+1],4,-1530992060),f=v(f,h,l,c,n[p+4],11,1272893353),c=v(c,f,h,l,n[p+7],16,-155497632),l=v(l,c,f,h,n[p+10],23,-1094730640),h=v(h,l,c,f,n[p+13],4,681279174),f=v(f,h,l,c,n[p+0],11,-358537222),c=v(c,f,h,l,n[p+3],16,-722521979),l=v(l,c,f,h,n[p+6],23,76029189),h=v(h,l,c,f,n[p+9],4,-640364487),f=v(f,h,l,c,n[p+12],11,-421815835),c=v(c,f,h,l,n[p+15],16,530742520),h=y(h,l=v(l,c,f,h,n[p+2],23,-995338651),c,f,n[p+0],6,-198630844),f=y(f,h,l,c,n[p+7],10,1126891415),c=y(c,f,h,l,n[p+14],15,-1416354905),l=y(l,c,f,h,n[p+5],21,-57434055),h=y(h,l,c,f,n[p+12],6,1700485571),f=y(f,h,l,c,n[p+3],10,-1894986606),c=y(c,f,h,l,n[p+10],15,-1051523),l=y(l,c,f,h,n[p+1],21,-2054922799),h=y(h,l,c,f,n[p+8],6,1873313359),f=y(f,h,l,c,n[p+15],10,-30611744),c=y(c,f,h,l,n[p+6],15,-1560198380),l=y(l,c,f,h,n[p+13],21,1309151649),h=y(h,l,c,f,n[p+4],6,-145523070),f=y(f,h,l,c,n[p+11],10,-1120210379),c=y(c,f,h,l,n[p+2],15,718787259),l=y(l,c,f,h,n[p+9],21,-343485551),h=h+b>>>0,l=l+m>>>0,c=c+w>>>0,f=f+S>>>0}return r.endian([h,l,c,f])})._ff=function(t,e,n,r,i,o,s){var a=t+(e&n|~e&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._gg=function(t,e,n,r,i,o,s){var a=t+(e&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._hh=function(t,e,n,r,i,o,s){var a=t+(e^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._ii=function(t,e,n,r,i,o,s){var a=t+(n^(e|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(a(t,e));return e&&e.asBytes?n:e&&e.asString?s.bytesToString(n):r.bytesToHex(n)}},function(t,e){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?e.push(n.charAt(i>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(t.charAt(r))>>>6-2*i);return e}},t.exports=r},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={onStarted:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"started",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onSuccess:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"successed",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onCancelled:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"cancelled",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onFailed:function(t,e,n){if(e&&t&&0!=t.replace(/\s/g,"").length){var r=this._generatePostData({eventTag:"failed",eventID:t,eventFailDesc:n,eventValue:e});this._upload(r)}else console.log("eventID 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={loginStart:function(t){this.data.channel=t&&t.channel||"";var e=this._generatePostData({eventTag:"started",eventID:"login"});this._upload(e)},loginSuccess:function(t){if(t&&t.userID){this.data.age=t.age||0,this.data.sex=t.sex||0;var e=t.channel||this.data.channel,n=this._getLocalStorage("onlineDuration"),r=this._getLocalStorage("_UID_"+this.data.appID)||"";r.length>0&&parseInt(n)>0&&(this.data.userID=r,this.logout()),this.data.channel=e,this.data.userID=t.userID,this._addLocalStorage("_UID_"+this.data.appID,this.data.userID),this._addLocalStorage("__SDK_CHANNEL_",this.data.channel);var i=this._generatePostData({onlineDuration:0,eventTag:"successed",eventID:"login"});this._upload(i),this._addLocalStorage("onlineDuration",0),this._setHeartBeat(!0)}else console.log("userID 不能为空!")},loginFailed:function(t){if(t){var e=t;"string"!=typeof t&&(this.data.channel=t.channel,e=t.reason);var n=this._generatePostData({exitFailDesc:e||"",eventTag:"failed",eventID:"login"});this._upload(n)}else console.log("loginFailed 参数不能为空!")},logout:function(){this.data.channel=this._getLocalStorage("__SDK_CHANNEL_")||"";var t=this._getLocalStorage("onlineDuration")||0,e=this._generatePostData({onlineDuration:t,exitTag:"successed",eventID:"logout"});this._upload(e),this.data.userID="",this._setHeartBeat(!1),this._addLocalStorage("onlineDuration",0),this._addLocalStorage("__SDK_CHANNEL_",""),this._addLocalStorage("_UID_"+this.data.appID,"")},setAccountType:function(t){var e=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:{action:"update",accountType:t}});this._upload(e)},setAge:function(t){t&&(this.data.age=t)},setGender:function(t){0==t||1==t||2==t?t&&(this.data.aex=t):console.log("gender 为 int 类型：0 未知、1 男性、 2 女性")},createRole:function(t){var e={action:"createRole",roleID:t.roleID,userName:t.userName,race:t.race,class:t.class,gameServer:t.gameServer},n=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:e});this._upload(n)},setLevel:function(t){var e=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:{action:"update",level:t}});this._upload(e)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={onEvent:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"successed",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")},onEventStart:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"started",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")},onEventEnd:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"successed",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={payBegin:function(t){var e=this._generatePostData({expendTag:"started",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},paySuccess:function(t){var e=this._generatePostData({expendTag:"successed",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},payFailed:function(t){var e=this._generatePostData({expendTag:"failed",eventID:"pay",expendFailDesc:t.reason||"",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},payCanceled:function(t){var e=this._generatePostData({expendTag:"cancelled",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.level){var e=this._generatePostData({eventTag:"started",eventID:"barrier",eventValue:{level:t.level}});this._upload(e)}else console.log("level 不能为空!")},complete:function(t){if(t&&t.level){var e=this._generatePostData({eventTag:"successed",eventID:"barrier",eventValue:{level:t.level}});this._upload(e)}else console.log("level 不能为空!")},failed:function(t,e){if(t&&t.level){var n=this._generatePostData({eventTag:"failed",eventID:"barrier",eventFailDesc:t.reason||e,eventValue:{level:t.level}});this._upload(n)}else console.log("level 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"started",eventID:"task",eventValue:{taskID:t.taskID,taskType:t.type}});this._upload(e)}else console.log("taskID 不能为空!")},complete:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"successed",eventID:"task",eventValue:{taskID:t.taskID}});this._upload(e)}else console.log("taskID 不能为空!")},failed:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"failed",eventID:"task",eventFailDesc:t.reason||"",eventValue:{taskID:t.taskID}});this._upload(e)}else console.log("taskID 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={buy:function(t){var e={action:"buy",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,virtualCoin:t.virtualCoin,virtualType:t.virtualType,consumePoint:t.consumePoint},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)},get:function(t){var e={action:"get",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)},consume:function(t){var e={action:"consume",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={setVirtualNum:function(t){var e={action:"set",type:t.type,count:t.count},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)},get:function(t){var e={action:"get",type:t.type,count:t.count,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)},consume:function(t){var e={action:"consume",type:t.type,count:t.count,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)}},t.exports=r},function(t,e,n){var r=function(t){};r.prototype={GuideLine:1,MainLine:2,BranchLine:3,Daily:4,Activity:5,Other:100},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.adID){var e=this._generatePostData({eventTag:"started",eventID:"advertising",eventValue:{ID:t.adID}});this._upload(e)}else console.log("adID 不能为空!")},complete:function(t){if(t&&t.adID&&t.timeLong&&t.profit){var e=this._generatePostData({eventTag:"successed",eventID:"advertising",eventValue:{ID:t.adID,timeLong:t.timeLong,profit:t.profit}});this._upload(e)}else console.log("adID 不能为空!")},failed:function(t){if(t&&t.adID){var e=this._generatePostData({eventTag:"failed",eventID:"advertising",eventFailDesc:t.reason||"",eventValue:{ID:t.adID}});this._upload(e)}else console.log("adID 不能为空!")}},t.exports=r}]),t("default",i.exports)}));t("__cjsMetaURL",e.meta.url)}}}));

System.register("chunks:///_virtual/ListViewItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,s,o,r,l,a,c,p,u,d,m,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized,o=e.createClass},function(e){r=e.cclegacy,l=e._decorator,a=e.Enum,c=e.Sprite,p=e.SpriteFrame,u=e.Button,d=e.Node,m=e.UITransform,h=e.Component}],execute:function(){var f,_,C,S,y,I,b,g,v,w,E,T,V,z;r._RF.push({},"ab0begfektNrrTh9j/QXi8S","ListViewItem",void 0);var L,N=l.ccclass,O=l.property,F=l.menu,D=l.disallowMultiple,G=l.executionOrder;!function(e){e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH"}(L||(L={}));e("ListViewItem",(f=N("ListViewItem"),_=F("Utils/ListViewItem"),C=D(),S=G(-5001),y=O({type:a(L),displayOrder:0,tooltip:"选择模式"}),I=O({type:c,visible:function(){return this.selectedMode>L.NONE},displayOrder:1,tooltip:"选择精灵"}),b=O({type:p,visible:function(){return this.selectedMode===L.SWITCH},displayOrder:2,tooltip:"选中精灵帧"}),g=O({displayOrder:3,tooltip:"自适应尺寸"}),f(v=_(v=C(v=S((E=t((w=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"selectedMode",E,s(t)),n(t,"selectSprite",T,s(t)),n(t,"selectedFrame",V,s(t)),n(t,"adaptiveSize",z,s(t)),t._isSelected=!1,t._itemId=-1,t._btnComp=null,t._unselectedFrame=null,t._listViewComp=null,t._customItemComp=null,t._isRegisterEvt=!1,t}i(t,e);var r=t.prototype;return r.onLoad=function(){this._btnComp=this.getComponent(u);var e=this.node.name;this._customItemComp=this.node.getComponent(""+e.substr(0,1).toUpperCase()+e.substr(1)),this.selectedMode===L.SWITCH&&(this._unselectedFrame=this.selectSprite.spriteFrame)},r.getBtnComponent=function(){return this._btnComp},r.setListViewComp=function(e){this._listViewComp=e},r.registerEvent=function(){this._isRegisterEvt||(this._isRegisterEvt=!0,this._btnComp&&this._listViewComp.selectedType,this.adaptiveSize&&this.node.on(d.EventType.SIZE_CHANGED,this._onSizeChange,this))},r.onItemButton=function(){this._listViewComp.selectedId=this._itemId},r.showAnimation=function(e,t,i){var n,s=this;this.node.getComponent(m);(t||i)&&n.call((function(){if(i){s._listViewComp.deleteSingleItem(s.node);for(var e=s._listViewComp._displayData,n=e.length-1;n>=0;n--)if(e[n].id==s._itemId){e.splice(n,1);break}}t()})),n.start()},r._onSizeChange=function(){this._listViewComp.itemAdaptive(this.node)},r.onDestroy=function(){this.node.off(d.EventType.SIZE_CHANGED,this._onSizeChange,this)},o(t,[{key:"isSelected",get:function(){return this._isSelected},set:function(e){if(this._isSelected=e,this.selectSprite)switch(this.selectedMode){case L.TOGGLE:this.selectSprite.node.active=e;break;case L.SWITCH:this.selectSprite.spriteFrame=e?this.selectedFrame:this._unselectedFrame;var t=this._customItemComp;t&&t.updateData&&t.updateData()}}},{key:"itemId",get:function(){return this._itemId},set:function(e){this._itemId=e}}]),t}(h)).prototype,"selectedMode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.NONE}}),T=t(w.prototype,"selectSprite",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(w.prototype,"selectedFrame",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(w.prototype,"adaptiveSize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=w))||v)||v)||v)||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/TextureManager.ts",["cc","./RDAssetManager.ts"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.RDAssetManager}],execute:function(){t._RF.push({},"ab49fOVMk9Ki42CbjpD5VGg","TextureManager",void 0);var r=e("TextureManager",function(){function e(){}return e.getInstance=function(){return this._instance},e.prototype.getTextureByName=function(e){var t=n.getInstance().getAsset(e);return t||null},e}());r._instance=new r,t._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvents.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ab916zlqBtLpaCmt/rWhsWo","GameEvents",void 0);var O=t("GameEvents",(function(){}));O.UPDATE_COIN="UPDATE_COIN",O.COIN_NOTENOUGH="COIN_NOTENOUGH",O.UPDATE_POWER="UPDATE_COIN",O.POWER_NOTENOUGH="COIN_NOTENOUGH",e._RF.pop()}}}));

System.register("chunks:///_virtual/QueueManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Queue.ts"],(function(e){"use strict";var t,n,s;return{setters:[function(e){t=e.asyncToGenerator},function(e){n=e.cclegacy},function(e){s=e.default}],execute:function(){n._RF.push({},"abe0ceMvZ9Nh7NH4bg0l26R","QueueManager",void 0),e("default",function(){function e(){this._queueList=[],this._isRun=!1,this._isDestroy=!1}e.getInstance=function(){return this.getQueueManagerInstance("default")},e.getQueueManagerInstance=function(t){return this._instances.has(t)||this._instances.set(t,new e),this._instances.get(t)},e.destroyQueueManagerInstance=function(e){this._instances.has(e)&&(this._instances.get(e).destroy(),this._instances.delete(e))};var n=e.prototype;return n.get=function(e){return this._queueList[e]},n.indexOf=function(e){return this._queueList.indexOf(e)},n.push=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),u=1;u<t;u++)n[u-1]=arguments[u];var i=new s(e,n),r=this._queueList.push(i);return this._run(),r},n._run=function(){var e=t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isRun&&!this._isDestroy&&this._queueList[0]){e.next=2;break}return e.abrupt("return");case 2:return this._isRun=!0,e.next=5,this._queueList[0].run();case 5:this._queueList.splice(0,1),this._isRun=!1,this._run();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.destroy=function(){this._queueList=null},e}())._instances=new Map,n._RF.pop()}}}));

System.register("chunks:///_virtual/BloodBarMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./AppManager.ts","./SoldierAgentMgr.ts"],(function(t){"use strict";var e,o,i,a,s,r,n,l,d,h,c,_,p;return{setters:[function(t){e=t.inheritsLoose,o=t.createClass},function(t){i=t.cclegacy,a=t._decorator,s=t.v3,r=t.Sprite,n=t.Tween,l=t.tween,d=t.Vec3,h=t.Component},function(t){c=t.CommonUtils},function(t){_=t.App},function(t){p=t.SoldierAgentMgr}],execute:function(){var u;i._RF.push({},"ad7dfRuE4VNLLShRoP+LzbM","BloodBarMgr",void 0);var f=a.ccclass;a.property,t("BloodBarMgr",f("BloodBarMgr")(u=function(t){function i(){for(var e,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this)._activeNode=null,e._bloodBarNode=null,e._whiteBarSpt=null,e._bloodBarSpt=null,e._soldierLevelSpt=null,e._curPos=s(0,0,0),e._offsetPos=s(0,0,0),e._targetScript=null,e._targetNode=null,e._isInUpdateBlood=!1,e._showBloodBarTime=0,e}e(i,t);var a=i.prototype;return a.onLoad=function(){this._activeNode=c.getNodeByName(this.node,"activeNode"),this._soldierLevelSpt=c.getNodeComponent(this.node,"soldierLevelSpt",r),this._bloodBarNode=c.getNodeByName(this._activeNode,"bloodBar"),this._bloodBarSpt=c.getNodeComponent(this._bloodBarNode,"Bar",r),this._whiteBarSpt=c.getNodeComponent(this._bloodBarNode,"whiteBar",r)},a.onDisable=function(){this._activeNode.active=!1,this._targetScript=null,this._targetNode=null},a.init=function(t,e){void 0===t&&(t=null),void 0===e&&(e=s()),this._isInUpdateBlood=!1,this._activeNode.active=!0,this._soldierLevelSpt.node.active=t instanceof p,this._targetScript=t,this._targetNode=t.node,this._offsetPos=e,this._targetScript.bloodBarMgr=this,this.updateSoldierLevel(),this.updateBlood(0,!0)},a.updateBlood=function(t,e){var o=this;void 0===t&&(t=0),void 0===e&&(e=!1);var i=this._targetScript.HP/this._targetScript.totalHP;if(t<0){this._isInUpdateBlood=!0,i=i<=0?0:i,this._bloodBarSpt.fillRange=i,n.stopAllByTarget(this._whiteBarSpt);this._whiteBarSpt.fillRange;l(this._whiteBarSpt).to(.3,{fillRange:i}).call((function(){o._isInUpdateBlood=!1})).start()}else n.stopAllByTarget(this._whiteBarSpt),this._bloodBarSpt.fillRange=i,this._whiteBarSpt.fillRange=i;this._showBloodBarTime=e?0:3},a.updateSoldierLevel=function(t){void 0===t&&(t=1),this._soldierLevelSpt.spriteFrame=_.SptFrame.getSpriteFrameByName("Game_Soldier_Level"+t)},a.setOffsetPos=function(t){this._offsetPos=t},a.lateUpdate=function(t){if(this._showBloodBarTime-=t,this.node.parent&&this.node.active&&this._targetScript){var e=this._targetScript.HP>0&&_.GameData.isInGame(),o=this._soldierLevelSpt.node.active;if(this._activeNode.active=e,this._isInUpdateBlood&&(this._activeNode.active=!0),!e&&!o)return;var i=_.GameData.curCamera;i.convertToUINode(this._targetNode.worldPosition.clone().add(this.offsetPos),this.node.parent,this._curPos),this.node.setPosition(this._curPos),d.transformMat4(this._curPos,this._targetNode.worldPosition,i._camera.matView);var a=_.GameData.cameraDis/Math.abs(this._curPos.z),s=Math.min(Math.floor(100*a)/100,1);this.node.setScale(s,s,s)}},o(i,[{key:"offsetPos",get:function(){return this._offsetPos},set:function(t){this._offsetPos=t}}]),i}(h))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/ADBannerList.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./OptionsManager.ts","./GameListManger.ts","./ADMainPush.ts"],(function(t){"use strict";var n,e,o,i,s,c,h,a,r,l,u,d,m,_,g;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.UITransformComponent,s=t.view,c=t.macro,h=t.v3,a=t.loader,r=t.Prefab,l=t.instantiate,u=t.Component},function(t){d=t.CommonUtils},function(t){m=t.OpCommand},function(t){_=t.default},function(t){g=t.ADMainPush}],execute:function(){var f;e._RF.push({},"aef01t/+4BGL7Cnkct2EXhF","ADBannerList",void 0);var p=o.ccclass;t("ADBannerList",p("ADBannerList")(f=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this)._content=null,n._index=0,n._move=-1,n._dataList=null,n.scrollView=null,n}n(e,t);var o=e.prototype;return o.onLoad=function(){this.node.getComponent(i).setContentSize(s.getVisibleSize().width,this.node.getComponent(i).height),this._content=d.getNodeByName(this.node,"content"),this.scrollView=d.getNodeByName(this.node,"gameList"),this._dataList=_.getInstance().getPushGameList(m.CMD_OPTION_SWITCH_HYRWGD),this.show()},o.onEnable=function(){this.schedule(this.scrolling,1/60,c.REPEAT_FOREVER,1)},o.onDisable=function(){this.unschedule(this.scrolling)},o.scrolling=function(){-1===this._move&&this._content.getPosition().x<=-this.scrollView.getComponent(i).width/2-(this._content.getComponent(i).width-this.scrollView.getComponent(i).width)&&(this._move=1),1===this._move&&this._content.getPosition().x>=-this.scrollView.getComponent(i).width/2&&(this._move=-1),this._content.setPosition(h(this._content.getPosition().x+this._move,this._content.getPosition().y,0))},o.show=function(){var t=this;this._content.children.length>0||this._dataList.forEach((function(n){t.createItem(n)}))},o.createItem=function(t){var n=this;a.loadRes("adUI/ADMainPush",r,null,(function(e,o){if(e)console.warn(e);else{var s=l(o);n._content.addChild(s),n._content.getComponent(i).width=s.getComponent(i).width*(.5+n._index)+10*(n._index+1)+.6*s.getComponent(i).width,s.getComponent(g).freash(t),n._index=n._index+1}}))},o.setPosition=function(t){this.node.setPosition(t)},e}(u))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/GuideMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var i,e,s,o,n,r,a,d,h,_,u,g,p,l,m,c;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,o=t.UITransform,n=t.Widget,r=t.Sprite,a=t.Node,d=t.tween,h=t.v3,_=t.v2,u=t.Rect,g=t.size,p=t.Component},function(t){l=t.CommonUtils},function(t){m=t.Constants},function(t){c=t.App}],execute:function(){var f;e._RF.push({},"afa8b8MaV5NzK4bHtSRxRbU","GuideMgr",void 0);var N=s.ccclass;t("GuideMgr",N("GuideMgr")(f=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(i=t.call.apply(t,[this].concat(s))||this)._guideNode=null,i._maskTransform=null,i._blackBgWidget=null,i._fingerNode=null,i._fingerAnim=null,i._fingerMovePosY=30,i._maskWorldPosArr=[],i._maskSizeArr=[],i._tipSptNameArr=[],i._tipNode=null,i._tipSpt=null,i}i(e,t);var s=e.prototype;return s.onLoad=function(){this._guideNode=l.getNodeByName(this.node,"guideNode"),this._maskTransform=l.getNodeComponent(this._guideNode,"mask",o),this._blackBgWidget=l.getNodeComponent(this.node,"blackBg",n),this._tipNode=l.getNodeByName(this._guideNode,"tipNode"),this._fingerNode=l.getNodeByName(this._guideNode,"finger"),this._tipSpt=l.getNodeComponent(this._guideNode,"tipSpt",r),this._guideNode.on(a.EventType.TOUCH_START,this._onTouchGuide,this,!1),this._guideNode.eventProcessor.touchListener.swallowTouches=!1,this._guideNode.active=!1,c.Event.on(m.EVENT_TYPE.SHOW_TASK_GUIDE,this._showTaskGuide,this)},s._setFingerAnim=function(t){if(t){this._fingerAnim=d(this._fingerNode).by(.5,{position:h(0,this._fingerMovePosY,0)}).by(.5,{position:h(0,-this._fingerMovePosY,0)}).union().repeatForever().start()}else this._fingerAnim&&this._fingerAnim.stop()},s._onTouchGuide=function(t){var i=this._getMaskWorldRect().contains(t.getUILocation());t.propagationImmediateStopped=!i,i&&(this._setGuideVisible(!1),this._maskWorldPosArr.length>0&&this._showNextTaskGuide())},s._getMaskWorldRect=function(){var t=this._maskTransform.node.getWorldPosition(),i=this._maskTransform.contentSize,e=_(t.x-i.width/2,t.y-i.height/2);return new u(e.x,e.y,i.width,i.height)},s._setGuideVisible=function(t){this._guideNode.active=t,this._tipNode.active=t,this._setFingerAnim(t)},s._showTaskGuide=function(t,i,e){var s=t.shift();this._maskWorldPosArr=t;var o=i.shift();this._maskSizeArr=i;var n=e.shift();this._tipSptNameArr=e,this._tipSpt.spriteFrame=c.SptFrame.getSpriteFrameByName(n);var r=s.clone();"Guide_Tip1"==n&&(r.y=s.y+o.y,r.x=s.x+o.x/2),this._tipNode.setWorldPosition(r),this._maskTransform.contentSize=g(o.x,o.y),this._maskTransform.node.setWorldPosition(s),this._fingerNode.setWorldPosition(s.x,s.y-this._fingerMovePosY,s.z),this._blackBgWidget.updateAlignment(),this._setGuideVisible(!0)},s._showNextTaskGuide=function(){var t=this._maskWorldPosArr.shift(),i=this._maskSizeArr.shift(),e=this._tipSptNameArr.shift(),s=h("Guide_Tip1"==e?t.x+i.x/2:t.x,t.y+i.y,0);this._tipNode.setWorldPosition(s),this._maskTransform.contentSize=g(i.x,i.y),this._maskTransform.node.setWorldPosition(t),this._fingerNode.setWorldPosition(t.x,t.y-this._fingerMovePosY,t.z),this._blackBgWidget.updateAlignment(),this._setGuideVisible(!0),this._tipSpt.spriteFrame=null,this._tipSpt.spriteFrame=c.SptFrame.getSpriteFrameByName(e)},s.onDestroy=function(){this._guideNode.off(a.EventType.TOUCH_START,this._onTouchGuide,this),c.Event.off(m.EVENT_TYPE.SHOW_TASK_GUIDE,this._showTaskGuide,this)},e}(p))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/LevelItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var e,n,i,a,s,o,l,u,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,a=t.Label,s=t.SpriteComponent},function(t){o=t.CommonUtils},function(t){l=t.Constants},function(t){u=t.App},function(t){r=t.UIBase}],execute:function(){var c;n._RF.push({},"b1246X8YfpLfoLn2yK9hzre","LevelItem",void 0);var m=i.ccclass;t("LevelItem",m("LevelItem")(c=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this)._levelLbl=null,e._nameLbl=null,e._playBtnNode=null,e._musicData=null,e}e(n,t);var i=n.prototype;return i.onLoad=function(){this._playBtnNode=o.registerButtonEvent(this.node,"playBtn",this._onPlayButton,this),this._nameLbl=o.getNodeComponent(this.node,"nameLabel",a),this._levelLbl=o.getNodeComponent(this.node,"levelLabel",a)},i.init=function(t){this._musicData=t,this._levelLbl.string="第"+this._musicData.id.toString()+"关",this._nameLbl.string=this._musicData.showName.toString(),o.getNodeComponent(this._playBtnNode,this._playBtnNode.name,s).spriteFrame=u.SptFrame.getSpriteFrameByName("Level_Button_Start"+(this._musicData.id<=u.Account.level?"1":"2"))},i.getMusicIndex=function(){return this._musicData.index},i._onPlayButton=function(){this._startGame()},i._startGame=function(){u.GameData.curLevel=this._musicData.id;var t=l.GAME_MODE.NORMAL;u.UI.hideDialog(l.UI_DIALOG_NAME.LEVELUI),u.Event.emit(l.EVENT_TYPE.QUICK_START,this._musicData,t),u.Stats.customEvent("按钮事件",{"当前窗口":"关卡项","按钮类型":"开始","歌曲":this._musicData.showName})},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/ADBombGame.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./OptionsManager.ts","./GameListManger.ts","./ADMainPush.ts","./AdsManager.ts","./PushControl.ts","./RDPlatformManager.ts"],(function(t){"use strict";var n,e,o,i,s,a,c,h,r,l,u,m,d,g,b,f,C,B,p,P,I,M,v;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.ButtonComponent,s=t.v3,a=t.view,c=t.tween,h=t.macro,r=t.UITransformComponent,l=t.LayoutComponent,u=t.Size,m=t.loader,d=t.Prefab,g=t.instantiate,b=t.Component},function(t){f=t.CommonUtils},function(t){C=t.default,B=t.OpCommand},function(t){p=t.default},function(t){P=t.ADMainPush},function(t){I=t.AdsManager},function(t){M=t.PushControl},function(t){v=t.RDPlatformManager}],execute:function(){var w;e._RF.push({},"b2d6duErcdAg6Yhxhnx6vLY","ADBombGame",void 0);var _=o.ccclass;o.property,t("ADBombGame",_("ADBombGame")(w=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).backBtn=null,n.topBtn=null,n.bottomContent=null,n._move=1,n.count=1,n.isBanner=!1,n.isPYX=!1,n.callback=null,n.dataList=[],n.adMainPrefabs=null,n.scrollView=null,n}n(e,t);var o=e.prototype;return o.onLoad=function(){this.backBtn=f.getNodeByName(this.node,"backGame").getComponent(i),this.backBtn.node.on("click",this.onBackGame,this),this.bottomContent=f.getNodeByName(this.node,"content"),this.scrollView=f.getNodeByName(this.node,"ScrollView")},o.onEnable=function(){this.isBanner=v.getInstance().bannerIsShow(),C.getInstance().getOptionSwitchByKey(B.CMD_OPTION_SWITCH_WDKG)?(I.getInstance().hideBannerAd(),this.backBtn.node.position=s(this.backBtn.node.position.x,-a.getVisibleSize().height/2+80,0),this.backBtn.interactable=!1,this.scheduleOnce(function(){I.getInstance().showBannerAd()}.bind(this),C.getInstance().getConfigByKey(B.CMD_OPTION_BUTTONSHOWTIME,1)),this.scheduleOnce((function(){var t=this;c(this.backBtn.node).to(.5,{position:s(this.backBtn.node.position.x,-335,0)}).call((function(){t.backBtn.interactable=!0})).start()}),C.getInstance().getConfigByKey(B.CMD_OPTION_BUTTONMOVETIME,1))):(this.backBtn.node.position=s(this.backBtn.node.position.x,-335,0),this.isBanner||I.getInstance().showBannerAd()),this.dataList=p.getInstance().getPushGameList(B.CMD_OPTION_SWITCH_BKYXTC);for(var t=0;t<20;t++){var n=this.dataList[t];this.dataList.push(n)}this.initBottomView(),this.scheduleOnce((function(){this.isPYX=M.getInstance().showJPYXBtn(!1),M.getInstance().showMainPush(!1)}),.5),this.schedule(this.scrolling,1/60,h.REPEAT_FOREVER,1)},o.onDisable=function(){this.isBanner?I.getInstance().showBannerAd():I.getInstance().hideBannerAd(),M.getInstance().showJPYXBtn(this.isPYX),M.getInstance().showMainPush(!0),this.unschedule(this.scrolling)},o.scrolling=function(){1===this._move&&this.bottomContent.getPosition().y>=this.bottomContent.getComponent(r).height-this.scrollView.getComponent(r).height/2&&(this._move=-1),-1===this._move&&this.bottomContent.getPosition().y<=this.scrollView.getComponent(r).height/2&&(this._move=1),this.bottomContent.setPosition(s(this.bottomContent.getPosition().x,this.bottomContent.getPosition().y+this._move,0))},o.initBottomView=function(){this.count=0;this.bottomContent.getComponent(l).spacingX=(this.bottomContent.getComponent(r).width-127.4*3-40)/2,this.bottomContent.getComponent(r).setContentSize(new u(this.bottomContent.getComponent(r).width,(119*1.3+30)*Math.ceil(this.dataList.length/3)+10)),this.createItem(this.bottomContent,1.3)},o.createItem=function(t,n){var e=this;if(!(this.count>=this.dataList.length)){var o=t.children[this.count],i=this.dataList[this.count];if(o){var s=o.getComponent(P);s.freash(i),s.setScale(n),this.count+=1,this.scheduleOnce((function(){e.createItem(t,n)}),0)}else this.adMainPrefabs?this.createAdMain(t,n,i,this.adMainPrefabs):m.loadRes("adUI/ADMainPush",d,null,(function(o,s){o?console.warn(o):(e.adMainPrefabs=s,e.createAdMain(t,n,i,e.adMainPrefabs))}))}},o.createAdMain=function(t,n,e,o){var i=g(o);t.addChild(i);var s=i.getComponent(P);s.freash(e),s.setScale(n),this.count+=1,this.createItem(t,n)},o.setCloseCallback=function(t){this.callback=t},o.onBackGame=function(){this.callback&&this.callback(),this.node.active=!1},e}(b))||w);e._RF.pop()}}}));

System.register("chunks:///_virtual/JsonManager.ts",["cc","./Dictionary.ts","./RDAssetManager.ts"],(function(t){"use strict";var s,n,a,i;return{setters:[function(t){s=t.cclegacy,n=t.JsonAsset},function(t){a=t.Dictionary},function(t){i=t.RDAssetManager}],execute:function(){s._RF.push({},"b574fI4ichO4JjBmhYDOj7n","JsonManager",void 0),t("default",function(){function t(){this._josnPathList=["res/res_json/stage"],this._staticData=new a}t.getInstance=function(){return null==t.singleInstance&&(t.singleInstance=new t),t.singleInstance};var s=t.prototype;return s.concatJosnPathList=function(t){for(var s in this._josnPathList)if(this._josnPathList.hasOwnProperty(s)){var a={filePath:this._josnPathList[s],type:n,isAutoRelease:!1};t.push(a)}},s.initJsonData=function(){for(var t=0;t<this._josnPathList.length;t++){var s=this._josnPathList[t],n=i.getInstance().getAsset(s);this._staticData[s]=n.json,this.dealWithSpecialData(name)}},s.getJsonDataBy=function(t){if(this._staticData.get(t))return this._staticData.get(t);var s=i.getInstance().getAsset(t);return this._staticData[t]=s.json,this.dealWithSpecialData(t),this._staticData[t]},s.getJosnPathList=function(){return this._josnPathList},s.dealWithSpecialData=function(t){},t}()).singleInstance=null,s._RF.pop()}}}));

System.register("chunks:///_virtual/MercenaryCampMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts","./BrickCountMgr.ts","./PlayerMgr.ts"],(function(t){"use strict";var e,i,n,r,o,c,s,l,u,a,h,_,C,d,p,m;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,r=t._decorator,o=t.v3,c=t.Tween,s=t.MeshRenderer,l=t.color,u=t.find,a=t.tween,h=t.Component},function(t){_=t.CommonUtils},function(t){C=t.Constants},function(t){d=t.App},function(t){p=t.BrickCountMgr},function(t){m=t.PlayerMgr}],execute:function(){var y;n._RF.push({},"b726cWwdZBBCqLf87RpPoBf","MercenaryCampMgr",void 0);var g=r.ccclass;t("MercenaryCampMgr",g("MercenaryCampMgr")(y=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this)._collectCircleNode=null,e._type=-1,e._curBirckCnt=0,e._curBirckTeamType=-1,e.isBuildSuccess=!1,e.isUnderConstruction=!1,e._animObj={sectorAngle:0},e._opacityAnimObj={opacity:0},e._mercenaryBornPos=o(),e._UAVParent=null,e._curUAV=null,e.brickCountMgr=null,e}e(n,t);var r=n.prototype;return r.onLoad=function(){this._mercenaryBornPos=_.getNodeByName(this.node,"bornPos").worldPosition.clone(),this._collectCircleNode=_.getNodeByName(this.node,"collectCircle"),this._UAVParent=_.getNodeByName(this.node,"UAV_Parent"),this.resetList()},r.onDisable=function(){c.stopAllByTarget(this._opacityAnimObj),this.resetList()},r.resetList=function(){this.unscheduleAllCallbacks(),this.isUnderConstruction=!1,this._type=-1,this._curUAV=null,this._curBirckTeamType=-1,this._curBirckCnt=0,this.isBuildSuccess=!1,c.stopAllByTarget(this._animObj);var t=_.getNodeComponent(this._collectCircleNode,this._collectCircleNode.name,s).material;null==t||t.setProperty("mainColor",l("#ffffff")),null==t||t.setProperty("sectorAngle",0),null==t||t.setProperty("outerWidth",.9),this.brickCountMgr&&d.Pool.putNode(this.brickCountMgr.node),this.brickCountMgr=null},r.remove=function(){this.brickCountMgr&&d.Pool.putNode(this.brickCountMgr.node),this.brickCountMgr=null,d.Pool.putNode(this.node)},r.init=function(){this.resetList(),this._type=_.getRandomInteger(0,3),this._loadUAV(),this._initBrickCntItem(1,o(0,180,0))},r._initBrickCntItem=function(t,e){var i=this;void 0===t&&(t=0),void 0===e&&(e=o(0,120,0)),this.brickCountMgr&&d.Pool.putNode(this.brickCountMgr.node),this.brickCountMgr=null,d.Res.loadPrefab("prefab/ui/item/BrickCntItem_"+t).then((function(t){var n=u("Canvas/BrickCountParentNode"),r=d.Pool.getNode(t,n);_.getNodeComponent(r,r.name,p).init(i,e)}))},r.setUnderConstruction=function(){var t=this;this.isUnderConstruction=!0,this.scheduleOnce((function(){t.isUnderConstruction=!1}),C.BUILD_BARRACK_TIME)},r._loadUAV=function(){var t=this;d.Res.loadPrefab("UAV/UAV_"+this.type,"prefab").then((function(e){t._UAVParent=_.getNodeByName(t.node,"UAV_Parent"),t._UAVParent.children[0]&&d.Pool.putNode(t._UAVParent.children[0]),t._curUAV=d.Pool.getNode(e,t._UAVParent)}))},r.buildCamp=function(t,e){var i;if(!this.isBuildSuccess){if(this.isUnderConstruction=!1,-1==this._curBirckTeamType)this._curBirckCnt=e,this._curBirckTeamType=t.teamType;else if(this._curBirckTeamType==t.teamType)this._curBirckCnt+=e;else{var n=e>=this._curBirckCnt;this._curBirckTeamType=n?t.teamType:this._curBirckTeamType,this._curBirckCnt=n?e-this._curBirckCnt:this._curBirckCnt-e}this._setCollectMtl(this._curBirckTeamType,this._curBirckCnt/C.MERCENARY_BRICK_COUNT*360),this._checkBuildSuccess(t),null===(i=this.brickCountMgr)||void 0===i||i.updateBrickCnt(this._curBirckCnt,this._curBirckTeamType)}},r._setCollectMtl=function(t,e){var i=this,n=_.getNodeComponent(this._collectCircleNode,this._collectCircleNode.name,s).material;n.setProperty("mainColor",C.SOLDIER_COLOR_ARRAY[t]),c.stopAllByTarget(this._animObj),this._animObj.sectorAngle=n.getProperty("sectorAngle"),a(this._animObj).to(.3,{sectorAngle:e},{easing:"quadOut",onUpdate:function(){null==n||n.setProperty("sectorAngle",i._animObj.sectorAngle?i._animObj.sectorAngle:0)}}).start()},r._checkBuildSuccess=function(t){this._curBirckCnt>=C.MERCENARY_BRICK_COUNT&&(t.loadMercenary(this.type,this._mercenaryBornPos),this.isBuildSuccess=!0,d.Pool.putNode(this._curUAV),this._curUAV=null,t instanceof m&&d.Audio.playSound(C.AUDIO_SOURCE_TYPE.UAV_SHOW),d.Event.emit(C.EVENT_TYPE.PLAY_SPARK_EFFECT,t.teamType,this.node.worldPosition,1.8),this._revive(),this.brickCountMgr&&d.Pool.putNode(this.brickCountMgr.node),this.brickCountMgr=null)},r._revive=function(){var t=this;c.stopAllByTarget(this._opacityAnimObj);var e=_.getNodeComponent(this._collectCircleNode,this._collectCircleNode.name,s).material;null==e||e.getProperty("mainColor");this._opacityAnimObj.opacity=255,a(this._opacityAnimObj).delay(3).to(C.MERCENARY_BRICK_CD-3,{opacity:255},{onUpdate:function(t,i){null==e||e.setProperty("sectorAngle",360*(1-i))}}).call((function(){d.GameData.isInGame()&&t.init()})).start()},i(n,[{key:"type",get:function(){return this._type}},{key:"curBirckCnt",get:function(){return this._curBirckCnt}},{key:"curBirckTeamType",get:function(){return this._curBirckTeamType}}]),n}(h))||y);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingletonBase2.ts"],(function(e){"use strict";var t,n,a,i;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){a=e.cclegacy},function(e){i=e.SingletonBase}],execute:function(){a._RF.push({},"b775foZZGtLsYco53Qtyd0l","GameData",void 0);e("GameData",function(e){function a(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).gameCount=0,t.isReadyStart=!1,t.isStartGame=!1,t.isGameOver=!1,t.isGameWin=!1,t.isInFinsh=!1,t.isPause=!1,t.isInHome=!0,t.reviveCnt=0,t.gameGold=0,t.onlineAwardTimer=0,t.isCompetitionWin=!1,t.curAuditionIdx=0,t.curAuditionName="",t.isLoadingMusic=!1,t.curBallSkinId=0,t.curMapId=0,t.playMusicId=0,t.curBeatCnt=0,t.totalBeatCnt=0,t.totalFrameTime=0,t.curGetGold=0,t.settingInfo=null,t.unlockMusicId=-1,t.unlockEndlessId=-1,t.musicLoopCnt=0,t.randLockMusicId=-1,t.randLockBallId=-1,t.randLockMapId=-1,t.isCanShowAd=!1,t.curMusicType="",t.playerInitSpd=25,t.playerSpd=0,t.curMusicTime=0,t.curBeatTime=0,t.gameMode="",t.endlessMusicIdx=0,t.endlessDistAhead=0,t.isEndlessTransit=!1,t.curBeatScale=0,t.hitCentreCount=0,t.hitLevel3Count=10,t.hitLevel2Count=5,t.hitLevel1Count=1,t.platformColorIdx=0,t.curBoardType=1,t.scoreMultiple=1,t.curLevel=1,t.bigPrickleHight=0,t.boardHight=1.05,t.totemHP=3,t.curWeaponType=-1,t.curWeaponCnt=0,t.weaponsArr=[],t.totalWeaponCnt=2,t.curEnemyCnt=0,t.totalEnemyCnt=30,t.curMaxLevelWeapon=0,t.weaponAttackTime=1,t.curCamera=null,t.curAICnt=0,t.playerAllSoldierLevel=0,t.startBuffArr=[],t.curLeaderArr=[],t.mercenaryCampArr=[],t.isInMenuScene=!0,t.cameraDis=0,t.battleCircleDis=0,t.battleCircleMaxDis=300,t.contractionCnt=0,t.contractionMaxCnt=0,t.curAudName="",t.musicIsLoop=!0,t}t(a,e);var i=a.prototype;return i.isInGame=function(){return this.isStartGame&&!this.isPause&&!this.isGameWin&&!this.isGameOver},i.isInHomePage=function(){return this.isInHome},n(a,null,[{key:"instance",get:function(){return a.getInstance()}}]),a}(i));a._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonUtils.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"b83e21S4MtAyKOob9EayD64","ButtonUtils",void 0);t("default",function(){function t(){}return t.getButton=function(t){return t instanceof cc.Node?t.getComponent(cc.Button):t},t.getRatio=function(t){var i=1;return t.duration>0&&(i=t.time/t.duration),i>=1&&(i=1),i},t.buttonColorTransition=function(i){var n=(i=this.getButton(i)).update.bind(i);Object.assign(i,{_applyTransition:function(t){var i=this.transition;this._updateColorTransition(t),i===cc.Button.Transition.SPRITE?this._updateSpriteTransition(t):i===cc.Button.Transition.SCALE&&this._updateScaleTransition(t)},update:function(i){if(n(i),this._fromColor){var o=t.getRatio(this);this._setTargetColor(this._fromColor.lerp(this._toColor,o))}}})},t.buttonScaleTransition=function(i){var n=(i=this.getButton(i)).update.bind(i);Object.assign(i,{_applyTransition:function(t){var i=this.transition;i===cc.Button.Transition.SPRITE?this._updateSpriteTransition(t):i===cc.Button.Transition.COLOR&&this._updateColorTransition(t)},update:function(i){if(n(i),this._fromScale){var o=t.getRatio(this);this._getTarget().scale=this._fromScale.lerp(this._toScale,o)}}})},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/HttpManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingletonBase.ts","./Log.ts"],(function(e){"use strict";var t,r,s,n,o,a;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,s=e.loader,n=e.sys},function(e){o=e.SingletonBase},function(e){a=e.Log}],execute:function(){r._RF.push({},"b87ffPg6eRCj7FiiwusZLyw","HttpManager",void 0);e("HttpManager",function(e){function r(){for(var t,r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))||this)._defaultUrl="http://124.70.160.248:8888/",t}t(r,e);var o=r.prototype;return o.get=function(e,t,r,o){var u=s.getXMLHttpRequest();u.timeout=5e3;var i=e+t;return r&&(i=i+"?"+r),a.log("url:"+i),u.open("GET",i,!0),n.isNative&&(u.setRequestHeader("Accept","text/html"),u.setRequestHeader("Accept-Charset","utf-8"),u.setRequestHeader("Accept-Encoding","gzip,deflate")),u.onreadystatechange=function(){if(4===u.readyState&&u.status>=200&&u.status<300){a.log("http res("+u.responseText.length+"):"+u.responseText);try{var e=u.responseText;return void(o&&o(null,e))}catch(e){o(e,null)}}else o(u.readyState+":"+u.status,null)},u.send(),u},o.post=function(e,t,r){void 0===t&&(t={}),a.log("请求数据===");var n=s.getXMLHttpRequest(),o=JSON.stringify(t);e=this._defaultUrl+e,n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.onreadystatechange=function(){if(4===n.readyState){var e=n.responseText;if(n.status>=200&&n.status<300)try{if(0===(e=JSON.parse(e)).code)return void(r&&r(e.data||e));a.log("返回错误",e.code,e.message)}catch(e){a.log("请求错误",e)}else a.log("请求错误",n.status)}},n.send(o)},o.download=function(e,t,r,o){var a=s.getXMLHttpRequest();a.timeout=5e3;var u=e+t;return r&&(u=u+"?"+r),a.responseType="arraybuffer",a.open("GET",u,!0),n.isNative&&(a.setRequestHeader("Accept","text/html"),a.setRequestHeader("Accept-Charset","utf-8"),a.setRequestHeader("Accept-Encoding","gzip,deflate")),a.onreadystatechange=function(){if(4===a.readyState&&a.status>=200&&a.status<300){for(var e=a.response,t=new DataView(e),r=new Uint8Array(e.byteLength),s=0;s<r.length;s++)r[s]=t.getUint8(s);o(null,r)}else o(a.readyState+":"+a.status,null)},a.send(),a},o.request=function(e,t,r){return new Promise((function(s,n){var o=new XMLHttpRequest;if(console.log("http request init"),o.timeout=5e3,o.open(r,e,!0),o.withCredentials=!0,o.ontimeout=function(e){console.log("request error:"+JSON.stringify(e)),n(Error("Network Error"))},o.onerror=function(){n(Error("Network Error"))},o.onreadystatechange=function(){console.log("request readyState="+o.readyState+";status="+o.status);var e=o.responseText;if(4===o.readyState)if(o.status>=200&&o.status<300||304==o.status){var t={};try{t=JSON.parse(e),s(t)}catch(t){console.log("request json parse error:"+e),n(Error(o.statusText))}}else n(Error(o.statusText))},"POST"===r){o.setRequestHeader("Content-Type","application/json");try{void 0===t&&(t=null),o.send(t)}catch(e){console.log("request error:"+JSON.stringify(e)),n(Error("Network Error"))}}else o.send()}))},r}(o));r._RF.pop()}}}));

System.register("chunks:///_virtual/RDPlatformManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Log.ts","./RDPlatformType.ts","./ConstantCommon.ts","./RDPlatformParam.ts","./RDCommand.ts","./RDWeiXinMiniPlatform.ts","./RDPCPlatform.ts","./RDVIVOMiniPlatform.ts","./RDOppoMiniPlatform.ts","./RDTTMiniPlatform.ts","./RDTencentGDTPlatform.ts","./RDCoralPlatform.ts","./RDAndroidPlatform.ts","./RDIOSPlatform.ts","./RDKGPlatform.ts","./RDOppoMusicMiniPlatform.ts","./RDXMMiniPlatform.ts","./RD4399Platform.ts"],(function(t){"use strict";var e,n,a,i,s,r,o,f,c,d,m,l,u,P,h,k,D,p,g,R,_,I;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,a=t.sys},function(t){i=t.EventManager},function(t){s=t.Log},function(t){r=t.RDPlatformType},function(t){o=t.ConstantCommon},function(t){f=t.RDPlatformParam},function(t){c=t.RDCommand},function(t){d=t.RDWeiXinMiniPlatform},function(t){m=t.RDPCPlatform},function(t){l=t.RDVIVOMiniPlatform},function(t){u=t.RDOppoMiniPlatform},function(t){P=t.RDTTMiniPlatform},function(t){h=t.RDTencentGDTPlatform},function(t){k=t.RDCoralPlatform},function(t){D=t.RDAndroidPlatform},function(t){p=t.RDIOSPlatform},function(t){g=t.RDKGPlatform},function(t){R=t.RDOppoMusicMiniPlatform},function(t){_=t.RDXMMiniPlatform},function(t){I=t.RD4399Platform}],execute:function(){n._RF.push({},"b9a3agNhlVOkJRCKmqq3CAE","RDPlatformManager",void 0);var M=t("RDPlatformManager",function(){function t(){this._type=r.None,this.rdPlatform=null}t.getInstance=function(){return this._instance};var n=t.prototype;return n.getPlatformName=function(){var t="";switch(this._type){case r.None:t="PC";break;case r.WeixinMinGame:t="WeChatMiniGame";break;case r.TTMinGame:t="byteDance";break;case r.VIVOGame:t="VIVO";break;case r.OPPOGame:t="OPPO";break;case r.OPPOMusicGame:t="OPPOMusicGame";break;case r.CoralGame:t="CoralGame";break;case r.Ios:t="IOS";break;case r.Android:t="android";break;case r.KG:t="kG";break;case r.Game4399:t="4399";break;default:t="undefined"}return t},n.getSdkConfig=function(t){var e=this.getPlatformName();return s.log("渠道=====",e),"android"===e?t[e][this.getAndroidPlatName()]:t[e]},n.getPlatformAreaCode=function(){return"version="+this.getVersionName()+"&platid="+this.getPlatId()},n.initPlatfom=function(t){switch(void 0===t&&(t=void 0),void 0===t&&(t=void 0!==window.tt?r.TTMinGame:a.platform===a.Platform.WECHAT_GAME?r.WeixinMinGame:a.platform===a.Platform.OPPO_MINI_GAME?r.OPPOGame:a.platform===a.Platform.VIVO_MINI_GAME?r.VIVOGame:a.platform===a.Platform.XIAOMI_QUICK_GAME?r.XMGame:a.isNative?a.platform===a.Platform.IOS?r.Ios:r.Android:r.None),this._type=t,s.log("初始平台="+this.getPlatformName()),this._type){case r.None:this.rdPlatform=new m(this._type);break;case r.WeixinMinGame:this.rdPlatform=new d(this._type);break;case r.TTMinGame:this.rdPlatform=new P(this._type);break;case r.VIVOGame:this.rdPlatform=new l(this._type);break;case r.OPPOGame:f.ADPARAM[r.OPPOGame.toString()].oppo_music?(this._type=r.OPPOMusicGame,this.rdPlatform=new R(this._type)):this.rdPlatform=new u(this._type);break;case r.TencentGTD7377:this.rdPlatform=new h(this._type);break;case r.CoralGame:this.rdPlatform=new k(this._type);break;case r.Android:this.rdPlatform=new D(this._type);break;case r.Ios:this.rdPlatform=new p(this._type);break;case r.KG:this.rdPlatform=new g(this._type);break;case r.XMGame:this.rdPlatform=new _(this._type);break;case r.Game4399:this.rdPlatform=new I(this._type);break;case r.Facebook:case r.Web:break;default:this.rdPlatform=new m(this._type)}},n.init=function(){this.sdk&&this.sdk.init()},n.sendData=function(t,e){this.sdk.sendData(t,e)},n.loadStorageData=function(t,e,n){this.sdk&&this.sdk.loadStorageData(t,e,n)},n.flushStorageData=function(t,e){this.sdk.flushStorageData(t,e)},n.LoadSubpackageTask=function(t,e,n){this.sdk.LoadSubpackageTask(t,e,n)},n.HasShortcutInstalled=function(){return this.sdk.HasShortcutInstalled()},n.bannerIsShow=function(){return this.sdk.bannerAdIsShow(null)},n.sendVideoReward=function(t){this.sdk.sendVideoReward(t)},n.saveScrore=function(t){this.sdk.setScore(t)},n.exitGame=function(){this.sdk.exitGame()},n.isShowNativeAd=function(t){return void 0===t&&(t=!1),this.sdk.isShowNativeAd(t)},n.isBtnFadeIn=function(t){return void 0===t&&(t=!0),this.sdk.isBtnFadeIn(t)},n.isMoreGameBtn=function(){return this.sdk.isMoreGameBtn()},n.isShowPrivacy=function(){return this.sdk.isShowPrivacy()},n.isShowContact=function(){return this.sdk.isShowContact()},n.isShowNativeSplash=function(){return this.sdk.isShowNativeSplash()},n.isReviewed=function(){return this.sdk.isReviewed()},n.canBaking=function(){return this.sdk.canBaking()},n.addCloseAdd=function(){this.sdk.addCloseAd()},n.getUserId=function(){return this.sdk.getUserInfByKey(o.USER_KEY.USER_ID)},n.getNikeName=function(){return this.sdk.getUserInfByKey(o.USER_KEY.USER_NAME)},n.getHeadUrl=function(){return this.sdk.getUserInfByKey(o.USER_KEY.USER_HEADE)},n.updateUserInf=function(t){this.sdk.updateUserInf(t)},n.getAndroidPlatName=function(){return this.sdk.getAndroidPlatName()},n.getVersionName=function(){return this.sdk.getVersionName()},n.getPlatId=function(){return this.sdk.getPlatId()},n.getNativeIdByIndex=function(t){return f.ADPARAM[this.platformType].native_id?f.ADPARAM[this.platformType].native_id[t]:null},n.nativeCallBack=function(e){s.log("native回调数据"+JSON.stringify(e)),e.type===c.CMD_SHOW_REWARD_VIDEO_AD.toString()?t.getInstance().sendVideoReward(e.result):e.type===c.CMD_SHOW_INTERSTITIAL_VIDEO_AD.toString()?i.getInstance().emit(o.EVENT_TYPE.ADS_INTERSTITIALAD,e.result):e.type===c.CMD_CREATE_NATIVE_AD.toString()?i.getInstance().emit("success"===e.result?"menuUp":"menuDown"):e.type===c.CMD_SDK_LOGIN.toString()&&t.getInstance().updateUserInf(e.result)},e(t,[{key:"platformType",get:function(){return this._type}},{key:"sdk",get:function(){return this.rdPlatform}}]),t}());M._instance=new M,window.callNative=M.getInstance(),n._RF.pop()}}}));

System.register("chunks:///_virtual/MapSelectUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDPlatformType.ts","./RDStatisticsManager.ts","./RDPlatformManager.ts","./AppManager.ts","./UIBase.ts","./UIScrollSelect.ts","./mapSelectItem.ts"],(function(t){"use strict";var e,o,n,a,i,c,s,l,d,r,m,p,u,_,h,I;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,a=t.Label,i=t.EventHandler,c=t.Sprite},function(t){s=t.CommonUtils},function(t){l=t.Constants},function(t){d=t.RDPlatformType},function(t){r=t.RDStatisticsMgr,m=t.EventResult},function(t){p=t.RDPlatformManager},function(t){u=t.App},function(t){_=t.UIBase},function(t){h=t.default},function(t){I=t.MapSelectItem}],execute:function(){var N;o._RF.push({},"ba35b4K+tNKnYBuCD7HJGp7","MapSelectUI",void 0);var f=n.ccclass;t("MapSelectUI",f("MapSelectUI")(N=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._titleNode=null,e._nativeAdNode=null,e._closeBtnNode=null,e._mapUIScrollSelect=null,e._mapSelectNode=null,e._mapSelectCompArr=[],e._mapInfoNode=null,e._lockBtnNode=null,e._diamondImgNode=null,e._nextBtnNode=null,e._previousBtnNode=null,e._diamondLbl=null,e._mapNameLbl=null,e._curMapInfoIdx=0,e}e(o,t);var n=o.prototype;return n.onLoad=function(){this._titleNode=s.getNodeByName(this.node,"title"),this._nativeAdNode=s.getNodeByName(this.node,"nativeAd"),this._mapUIScrollSelect=s.getNodeComponent(this.node,"UIScrollSelect",h),this._nextBtnNode=s.registerButtonEvent(this.node,"nextBtn",this._mapUIScrollSelect.scrollToRight,this._mapUIScrollSelect),this._previousBtnNode=s.registerButtonEvent(this.node,"previousBtn",this._mapUIScrollSelect.scrollToLeft,this._mapUIScrollSelect),this._mapSelectNode=s.getNodeByName(this.node,"mapSelectItem"),this._mapInfoNode=s.getNodeByName(this.node,"mapInfoNode"),this._lockBtnNode=s.registerButtonEvent(this._mapInfoNode,"lockBtn",this._onUnlockButton,this),this._diamondImgNode=s.getNodeByName(this._mapInfoNode,"diamondImg"),this._diamondLbl=s.getNodeComponent(this._mapInfoNode,"diamondLbl",a),this._mapNameLbl=s.getNodeComponent(this._mapInfoNode,"mapNameLbl",a),this._createMapSelect(),this._closeBtnNode=s.registerButtonEvent(this.node,"closeBtn",this._onCloseButton,this),this.initBgOpacity(),this.initOppoNativeAd(),this.alignOppoNativeAd(this._lockBtnNode,50)},n.getUIName=function(){return"场景"},n.show=function(){this._registerCustomEvent(!0),this._mapUIScrollSelect.scrollTo(u.GameData.curMapId-1,!1),this._mapSelectCompArr.forEach((function(t){return t.updateData()}));var t=[this._titleNode,this._mapUIScrollSelect.node,this._mapNameLbl.node,this._lockBtnNode];this.playScaleInAnim(t),this.showAdvertisement(),r.customEvent("显示窗口",{"当前窗口":this.getUIName()})},n.hide=function(){this._registerCustomEvent(!1),t.prototype.hide.call(this)},n._registerCustomEvent=function(t){var e=t?"on":"off";u.Event[e](l.EVENT_TYPE.UPDATE_MAP_INFO,this._updateMapInfoNode,this)},n._setNativeAd=function(){p.getInstance().platformType===d.OPPOGame&&(this._nativeAdNode.active=!0)},n._onCloseButton=function(){if(!u.UI.isUIAnimPlaying()){var t=[this._titleNode,this._mapUIScrollSelect.node,this._mapNameLbl.node,this._lockBtnNode];this.playScaleOutAnim(t,(function(){u.UI.hideDialog(l.UI_DIALOG_NAME.MAP_SELECT),u.Event.emit(l.EVENT_TYPE.UPDATE_AD)})),u.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭"})}},n._getEventHandler=function(t,e){return new i},n._onMapToggle=function(t){},n._createMapToggle=function(){},n._updateMapTogContainer=function(){},n._createMapSelect=function(){u.Pool.putNode(this._mapSelectNode);for(var t=0,e=u.MapDataMgr.getDataLength();t<e;t++){var o=u.Pool.getNode(this._mapSelectNode,this._mapUIScrollSelect.content);o.name="mapToggle_"+(t+1);var n=o.getComponent(I);n.init(u.MapDataMgr.getDataByIndex(t)),this._mapSelectCompArr.push(n)}this._mapUIScrollSelect.scrollTo(u.GameData.curMapId-1,!1)},n._updateMapInfoNode=function(t){if(void 0===t&&(t=!1),t)this._mapInfoNode.active=!1;else{this._mapInfoNode.active=!0,this._curMapInfoIdx=this._mapUIScrollSelect.currentIndex;var e=u.MapDataMgr.getDataByIndex(this._curMapInfoIdx),o="Used";o=u.Account.getMapData(e.id).isUnlock?u.GameData.curMapId==this._curMapInfoIdx+1?"Used":"Use":-1===e.amount?"Watch":"Diamond",s.getNodeComponent(this._lockBtnNode,"lockBtn",c).spriteFrame=u.SptFrame.getSpriteFrameByName("Map_Image_"+o),this._mapNameLbl.string=e.showName,"Diamond"===o?(this._diamondImgNode.active=!0,this._diamondLbl.node.active=!0,this._diamondLbl.string=e.amount.toString()):(this._diamondImgNode.active=!1,this._diamondLbl.node.active=!1)}},n._onUnlockButton=function(){var t=this,e=u.MapDataMgr.getDataByIndex(this._curMapInfoIdx);if(u.Account.getMapData(e.id).isUnlock)u.Account.curMapId!==this._curMapInfoIdx+1&&(u.GameData.curMapId=this._curMapInfoIdx+1,u.Account.curMapId=this._curMapInfoIdx+1,u.Event.emit(l.EVENT_TYPE.CHANGE_MAP),u.Event.emit(l.EVENT_TYPE.UPDATE_MAP_INFO,!1,this._curMapInfoIdx));else{var o=-1===e.amount,n={"当前窗口":"场景","场景名字":e.showName};if(o)n["按钮类型"]="视频广告",r.customEvent("按钮事件",n,m.onStarted),this.showRewardAd({success:function(){t._unlockMap(),r.customEvent("按钮事件",n)},fail:function(){r.customEvent("按钮事件",n,m.onFailed)}});else{n["按钮类型"]="使用钻石";var a=e.amount;u.GameData.gameGold>=a?(u.GameData.gameGold-=a,u.Account.gameGold=-a,this._unlockMap(),u.Event.emit(l.EVENT_TYPE.UPDATE_GOLD),r.customEvent("按钮事件",n)):(u.Event.emit(l.EVENT_TYPE.FREE_GOLD),r.customEvent("按钮事件",n,m.onFailed,"钻石不足"))}}},n._unlockMap=function(){var t=u.MapDataMgr.getDataByIndex(this._curMapInfoIdx),e=u.Account.getMapData(t.id);e.isUnlock=!0,u.Account.setMapData(t.id,e),u.GameData.curMapId=t.id,u.Account.curMapId=t.id,u.Event.emit(l.EVENT_TYPE.CHANGE_MAP),this._mapSelectCompArr.forEach((function(t){return t.updateData()})),u.Event.emit(l.EVENT_TYPE.UPDATE_MAP_INFO,!1,this._curMapInfoIdx)},o}(_))||N);o._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingletonBase.ts","./Constants.ts","./Log.ts","./AudioDownLoader.ts","./RDPlatformType.ts","./ConstantCommon.ts","./AppManager.ts"],(function(i){"use strict";var o,t,a,u,e,s,l,n,c,r,d,m,p,f,A,_;return{setters:[function(i){o=i.inheritsLoose},function(i){t=i.cclegacy,a=i.Node,u=i.AudioSource,e=i.director,s=i.game,l=i.sys,n=i.resources,c=i.assetManager},function(i){r=i.SingletonBase},function(i){d=i.Constants},function(i){m=i.Log},function(i){p=i.AudioDMgr},function(i){f=i.RDPlatformType},function(i){A=i.ConstantCommon},function(i){_=i.App}],execute:function(){t._RF.push({},"ba9acCXtqJF3KdEE2461nQR","AudioManager",void 0);var h=d.LOCAL_MUSIC;i("AudioManager",function(i){function t(){for(var o,t=arguments.length,a=new Array(t),u=0;u<t;u++)a[u]=arguments[u];return(o=i.call.apply(i,[this].concat(a))||this)._audioPersistNode=null,o._musicAudio=null,o._clipDict=Object.create(null),o._soundAudioArr=[],o._musicVolume=0,o}o(t,i);var r=t.prototype;return r.init=function(){this._audioPersistNode||(this._audioPersistNode=new a("audioPersistNode"),this._musicAudio=this._audioPersistNode.addComponent(u),e.getScene().addChild(this._audioPersistNode),s.addPersistRootNode(this._audioPersistNode))},r.playMusic=function(i,o,t,a,u){void 0===o&&(o=1),void 0===t&&(t=0),h[i]&&(a="music/localMusic/");var e=a?""+a+i:"audio/music/"+i,s=this._clipDict[i];return this._musicAudio.clip!==s&&this._musicAudio.stop(),m.log("歌曲地址 ======",e),o*=_.Account.settingInfo.musicVolume,l.platform===l.Platform.WECHAT_GAME||(s?this._playMusicClip(o,t,s):this._loadAudioClip(e,i,this._playMusicClip.bind(this,o,t))),!s&&l.platform!==l.Platform.WECHAT_GAME},r.playMusicByUrl=function(i,o,t,a,u,e){var s=this;if(void 0===o&&(o=!0),void 0===t&&(t=1),void 0===a&&(a=0),!o||!l.isNative&&_.Platform.platformType!==f.KG)return l.isNative&&(l.platform===l.Platform.IOS?window.jsb.reflection.callStaticMethod("AudioManager","stopByFileName:",""):window.jsb.reflection.callStaticMethod("com/rdgame/app_base/audio/AudioManager","stopByFileName","(Ljava/lang/String;)V","")),null==e||e.success(),this.playMusic(i,t,a,u);this._musicAudio.stop(),this._musicAudio.clip=null;var n="https://xcyy.tiequangame.com/xcyy-hot-update/music/"+i+".mp3";m.log("下载歌曲开始"+n);var c={url:n,rawUrl:"",name:""};return p.downloadAudio(c,(function(o,u){var e={fileName:i,volume:t,startTime:a};s._musicVolume=t,s._musicAudio.clip||(l.platform===l.Platform.IOS?window.jsb.reflection.callStaticMethod("AudioManager","playByFileName:",JSON.stringify(e)):window.jsb.reflection.callStaticMethod("com/rdgame/app_base/audio/AudioManager","playByFileName","(Ljava/lang/String;)V",JSON.stringify(e)),console.error("下载成功 开始加载"+u.rawUrl),setTimeout((function(){_.GameData.isLoadingMusic&&(_.GameData.isLoadingMusic=!1,_.Event.emit(A.EVENT_TYPE.UPDATE_AUD_MUSIC))}),100))})),!0},r.setWeChatStartData=function(){l.platform,l.Platform.WECHAT_GAME},r.getMusicDuration=function(){var i;if(l.platform!==l.Platform.WECHAT_GAME||!l.isNative)return null===(i=this._musicAudio.clip)||void 0===i?void 0:i.getDuration()},r.getMusicLeftTime=function(){if(l.platform!==l.Platform.WECHAT_GAME)return this._musicAudio.clip.getDuration()-this._musicAudio.currentTime},r.getMusicCurrentTime=function(){return this._musicAudio.clip&&l.platform!==l.Platform.WECHAT_GAME?this._musicAudio.currentTime:0},r.loadMusicClip=function(i,o){void 0===o&&(o=null);var t=h[i]?"music/localMusic/"+i:"audio/music/"+i;if(l.platform===l.Platform.WECHAT_GAME){var a;if(!this._clipDict[i]){var u=window.wx.createInnerAudioContext(),e=n.getInfoWithPath("resources/"+t).uuid,s=c.utils.getUrlWithUuid(e,{isNative:!0,ext:".mp3"});s=window.wxDownloader.REMOTE_SERVER_ROOT+"/"+s,u.src=s,this._clipDict[i]=u}null===(a=o)||void 0===a||a()}else this._loadAudioClip(t,i,o)},r._loadAudioClip=function(i,o,t){var a=this,u=-1!=i.indexOf("local")?"audio":"resources";m.log("loadAudioClip ===",i,u),_.RDAsset.loadAudioClip(i,u).then((function(i){a._clipDict[o]=i,null==t||t(i)}))},r.loadMusicClipByUrl=function(i,o,t){if(void 0===t&&(t=!0),t&&(l.isNative||_.Platform.platformType===f.KG)){var a="https://xcyy.tiequangame.com/xcyy-hot-update/music/"+i+".mp3";m.log("loadMusicClipByUrl下载歌曲开始"+a);var u={url:a,rawUrl:"",name:""};p.downloadAudio(u,(function(t,a){m.log("下载成功 开始加载"+a.rawUrl),l.platform===l.Platform.IOS?window.jsb.reflection.callStaticMethod("AudioManager","loadByPath:",i):window.jsb.reflection.callStaticMethod("com/rdgame/app_base/audio/AudioManager","loadByPath","(Ljava/lang/String;)V",i),null==o||o.success(null)}))}else this.loadMusicClip(i,o.success)},r._playMusicClip=function(i,o,t){m.log("playMusicClip === "+_.GameData.curAudName+"   "+t.name),_.GameData.curAudName&&_.GameData.curAudName!==t.name||(this._musicVolume=i,this._musicAudio.clip=t,this._musicAudio.volume=i,this._musicAudio.currentTime=o,this._musicAudio.loop=_.GameData.musicIsLoop,this._musicAudio.play(),_.GameData.isLoadingMusic&&(_.GameData.isLoadingMusic=!1,_.Event.emit(A.EVENT_TYPE.UPDATE_AUD_MUSIC)))},r.setMusicVolume=function(i){void 0===i&&(i=1),this._musicAudio.clip&&(i*=_.Account.settingInfo.musicVolume,this._musicVolume=i,l.platform===l.Platform.WECHAT_GAME||(this._musicAudio.volume=i))},r.pauseMusic=function(){l.isNative&&(m.log("pauseMusic 暂停音乐"),l.platform===l.Platform.IOS?(m.log("pauseMusic 暂停音乐 111"),window.jsb.reflection.callStaticMethod("AudioManager","pauseByFileName:","")):window.jsb.reflection.callStaticMethod("com/rdgame/app_base/audio/AudioManager","pauseByFileName","(Ljava/lang/String;)V","")),l.platform===l.Platform.WECHAT_GAME||(this._musicAudio.currentTime=_.GameData.curMusicTime,this._musicAudio.pause())},r.resumeMusic=function(i){if(void 0===i&&(i=0),l.isNative){var o={startTime:i||_.GameData.curMusicTime,volume:this._musicVolume};l.platform===l.Platform.IOS?window.jsb.reflection.callStaticMethod("AudioManager","resumeByFileName:",JSON.stringify(o)):window.jsb.reflection.callStaticMethod("com/rdgame/app_base/audio/AudioManager","resumeByFileName","(Ljava/lang/String;)V",JSON.stringify(o))}this._musicAudio.clip&&(l.platform===l.Platform.WECHAT_GAME||(this._musicAudio.volume=this._musicVolume,this._musicAudio.currentTime=i),this._musicAudio.play())},r.stopMusic=function(){l.isNative&&(m.log("stopMusic 停止音乐"),l.platform===l.Platform.IOS?(m.log("stopMusic 停止音乐 111"),window.jsb.reflection.callStaticMethod("AudioManager","stopByFileName:","")):window.jsb.reflection.callStaticMethod("com/rdgame/app_base/audio/AudioManager","stopByFileName","(Ljava/lang/String;)V","")),this._musicAudio.clip&&(l.platform===l.Platform.WECHAT_GAME||this._musicAudio.stop())},r.playSound=function(i,o,t,a){if(void 0===o&&(o=1),void 0===a&&(a=!1),0!==(o*=_.Account.settingInfo.soundVolume)){var u=""+(t||"sound/localSound/")+i,e=this._clipDict[i];l.platform===l.Platform.WECHAT_GAME||(e?this._playSoundClip(o,a,e):this._loadAudioClip(u,i,this._playSoundClip.bind(this,o,a)))}},r._playSoundClip=function(i,o,t){var a=this._getSoundAudioSource();o?(a.clip=t,a.volume=i,a.currentTime=0,a.loop=o):a.playOneShot(t,i)},r._getSoundAudioSource=function(){for(var i=null,o=0;o<this._soundAudioArr.length;++o){var t=this._soundAudioArr[o];if(!t.playing){i=t;break}}return i||(i=this._audioPersistNode.addComponent(u),this._soundAudioArr.push(i)),i},r.stopSound=function(i){var o=this._clipDict[i];if(o)for(var t=0;t<this._soundAudioArr.length;++t){var a=this._soundAudioArr[t];if(a.clip===o&&a.playing){a.stop();break}}},r.releaseAudioClip=function(){for(var i=0,o=Object.keys(this._clipDict);i<o.length;i++){var t=o[i],a=this._clipDict[t];c.releaseAsset(a)}l.platform,l.Platform.WECHAT_GAME},t}(r));t._RF.pop()}}}));

System.register("chunks:///_virtual/SoldierAgentMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts","./hitColor.ts","./Common.ts","./Simulator.ts","./EnemyAIMgr.ts","./MercenaryMgr.ts","./BloodBarMgr.ts","./PlayerMgr.ts"],(function(e){"use strict";var t,o,i,n,s,r,a,l,h,d,_,u,c,g,m,v,y,p,N,P,f,S,T,k,A,C;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass,i=e.asyncToGenerator},function(e){n=e.cclegacy,s=e._decorator,r=e.Vec3,a=e.tween,l=e.v3,h=e.SkeletalAnimation,d=e.find,_=e.MeshRenderer,u=e.math,c=e.Component,g=e.color,m=e.ParticleUtils},function(e){v=e.CommonUtils},function(e){y=e.Constants},function(e){p=e.App},function(e){N=e.HitColor},function(e){P=e.Vector2,f=e.RVOMath},function(e){S=e.Simulator},function(e){T=e.EnemyAIMgr},function(e){k=e.MercenaryMgr},function(e){A=e.BloodBarMgr},function(e){C=e.PlayerMgr}],execute:function(){var M;n._RF.push({},"bad7cgop1FKX7FffmkXB1Wn","SoldierAgentMgr",void 0);var R,I=s.ccclass;!function(e){e.IDLE="yuandijuqiang",e.RUN="juqiangyido",e.DEATH="siwang",e.WIN="shengli",e.SHOOT="yuandisheji",e.SHOOT_RUN="yidosheji"}(R||(R={}));e("SoldierAgentMgr",I("SoldierAgentMgr")(M=function(e){function n(){for(var t,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this)._characterNode=null,t._aid=-1,t._rankId=-1,t._teamType=-1,t._targetNode=null,t._shootTargetNode=null,t._isInit=!1,t._skeletalAnim=null,t._gunSocketNode=null,t._curGunNode=null,t._initPos=r.ZERO,t._leaderComp=null,t._isRunning=!1,t._isForSynthesis=!1,t._mySynthesisSoldier=null,t._isInSynthesis=!1,t._curLevel=1,t._curHP=0,t._shootTime=0,t._shootIntervalTime=.5,t._hitColorMgr=null,t.bloodBarMgr=null,t}t(n,e);var s=n.prototype;return s.onDisable=function(){this.unscheduleAllCallbacks(),this._registerCustomEvent(!1),this._resetData()},s.gameWin=function(){var e,t;a(this.node).to(.1,{eulerAngles:l(0,180,0)}).start(),null===(e=this._skeletalAnim)||void 0===e||e.stop(),null===(t=this._skeletalAnim)||void 0===t||t.crossFade(R.WIN)},s.init=function(e,t,o,i,n,s){var a,l;void 0===s&&(s=null),this._rankId=e,this._leaderComp=s,this._targetNode=o,this._isForSynthesis=n,this._isInSynthesis=!1,this._curLevel=1,this._teamType=t,this._initPos=i,this.node.setWorldPosition(i);var d=new P(i.x,i.z),_=S.instance.addAgent(d);S.instance.setAgentMass(_,1),this._aid=_,this._characterNode=v.getNodeByName(this.node,"characterNode"),this._skeletalAnim=v.getNodeComponent(this._characterNode,this._characterNode.children[0].name,h),null===(a=this._skeletalAnim)||void 0===a||a.stop(),null===(l=this._skeletalAnim)||void 0===l||l.crossFade(R.IDLE),this._loadSoldierMtl(),this._isRunning=!1,this._shootTargetNode=null,this._characterNode.setWorldRotation(this._targetNode.worldRotation);var u=t==p.RankDataMgr.getPlayerRankTeamType();this._curHP=u?p.RankDataMgr.getPlayerSoldierHP(this._curLevel):p.RankDataMgr.getAISoliderHpById(this._rankId,this._curLevel),this._shootTime=0,this._shootIntervalTime=p.RankDataMgr.getSoldierShootIntervalTime(),S.instance.buildAgentTree(),this._resetCollider(),this._registerCustomEvent(!0),this._isInit=!0,this.node.scale=r.ONE,!n&&this._leaderComp.updateScale(),!n&&this._initBloodBar()},s._initBloodBar=function(e){var t=this;void 0===e&&(e=l(0,80,0)),this.bloodBarMgr&&p.Pool.putNode(this.bloodBarMgr.node),this.bloodBarMgr=null,p.Res.loadPrefab("prefab/ui/item/bloodBarItem").then((function(o){var i=d("Canvas/BloodBarParentNode"),n=p.Pool.getNode(o,i);v.getNodeComponent(n,n.name,A).init(t,e)}))},s._loadSoldierMtl=function(){var e=this,t=this.teamType;t="skin/player_new/player_"+this.teamType,p.Res.loadTexture(t,"texture").then((function(t){var o,i;e._skeletalAnim=v.getNodeComponent(e._characterNode,e._characterNode.children[0].name,h),null===(o=e._skeletalAnim)||void 0===o||o.stop(),null===(i=e._skeletalAnim)||void 0===i||i.crossFade(e._isRunning?R.RUN:R.IDLE),v.getNodeComponent(e._characterNode,"js",_).material.setProperty("mainTexture",t),e._hitColorMgr=null,e._hitColorMgr=v.getNodeComponent(e._characterNode,"js",N),e._gunSocketNode=v.getNodeByName(e._characterNode,"gun Socket"),e._updateGun()}))},s._updateGun=function(){var e=this,t="gun_"+this.level;p.Res.loadPrefab("gun/"+t,"prefab").then((function(t){var o=v.getNodeByName(e._gunSocketNode,"gunParent");e._curGunNode=null,o.destroyAllChildren();var i=p.Pool.getNode(t,o);e._curGunNode=i}))},s._resetData=function(){var e;this.bloodBarMgr&&p.Pool.putNode(this.bloodBarMgr.node),this.bloodBarMgr=null,this._isInit=!1,!this._isForSynthesis&&this._leaderComp&&this._leaderComp.addSoldierPoint(this._targetNode),!this._isForSynthesis&&this._leaderComp&&this._leaderComp.updateSoldierNode(this.node),S.instance.removeAgent(this._aid),this._isForSynthesis=!1,this._isInSynthesis=!1,null===(e=this._mySynthesisSoldier)||void 0===e||e.getComponent(n).removeSoldier(),this._mySynthesisSoldier=null,this._leaderComp=null,this._targetNode=null,this._shootTargetNode=null,this._curLevel=1,this._aid=-1,this._rankId=-1,this._initPos=r.ZERO},s.removeSoldier=function(e,t){var o=this;if(void 0===e&&(e=!1),void 0===t&&(t=-1),this._registerCustomEvent(!1),this._resetData(),e){var i,n,s=p.RankDataMgr.getPlayerRankTeamType();(this.teamType==s||t==s)&&p.Audio.playSound(y.AUDIO_SOURCE_TYPE.SOLDIER_DEAD,.6),null===(i=this._skeletalAnim)||void 0===i||i.stop(),null===(n=this._skeletalAnim)||void 0===n||n.crossFade(R.DEATH),this.scheduleOnce((function(){p.Pool.putNode(o.node)}),2)}else p.Pool.putNode(this.node)},s._registerCustomEvent=function(e){if(!this._isForSynthesis)v.getNodeByName(this.node,"hitPoint")},s._resetCollider=function(){var e,t;this._shootTargetNode=null,null===(e=this._skeletalAnim)||void 0===e||e.stop(),null===(t=this._skeletalAnim)||void 0===t||t.crossFade(this._isRunning?R.RUN:R.IDLE)},s.setShootTargetNode=function(e){var t,o,i=r.squaredDistance(this.node.worldPosition,e.worldPosition);this._shootTargetNode||!this._isInit||!p.GameData.isInGame()||i>324||(this._shootTargetNode=e,null===(t=this._skeletalAnim)||void 0===t||t.stop(),null===(o=this._skeletalAnim)||void 0===o||o.crossFade(this._isRunning?R.SHOOT_RUN:R.SHOOT))},s.resetShootTargetNode=function(e){this._isInit&&p.GameData.isInGame()&&this._shootTargetNode==e&&this._resetCollider()},s._setPreferredVelocities=function(){var e=new P(this._targetNode.worldPosition.x,this._targetNode.worldPosition.z),t=S.instance.getAgentPosition(this._aid);(this.isForSynthesis||this._leaderComp)&&r.squaredDistance(this.node.worldPosition,this._targetNode.worldPosition)>1600&&(console.log(this.node.worldPosition.clone(),this._targetNode.worldPosition.clone()),t.setPos(e.x,e.y)),S.instance.setAgentPosition(this._aid,t);var o=e.minus(t);if(f.absSq(o)>1){var i=this._isForSynthesis?y.AGENT_SPEED+15:u.lerp(y.AGENT_SPEED,y.AGENT_SPEED+10,f.absSq(o)/100);if(this._leaderComp){var s=this._leaderComp.getBuffData(y.BUFF_TYPE.SPEED);s&&2==s.level?i*=2:s&&1==s.level&&(i*=1.5)}o=f.normalize(o).scale(i)}if(f.absSq(o)<1){if(S.instance.setAgentPrefVelocity(this._aid,new P(0,0)),this._shootTargetNode){var a=this._shootTargetNode.worldPosition.clone().subtract(this.node.worldPosition).normalize();this._characterNode.setWorldRotationFromEuler(0,u.toDegree(Math.atan2(-a.z,a.x))+90,0)}else this._characterNode.setWorldRotation(this._targetNode.worldRotation);var l,h;if(this._isRunning)null===(l=this._skeletalAnim)||void 0===l||l.stop(),null===(h=this._skeletalAnim)||void 0===h||h.crossFade(this._shootTargetNode?R.SHOOT:R.IDLE),this._isRunning=!1;if(this._isForSynthesis){var d=v.getNodeComponent(this._targetNode,this._targetNode.name,n);d&&d.LevelUp(),this.removeSoldier()}}else{S.instance.setAgentPrefVelocity(this._aid,o);var _=2*Math.random()*Math.PI,c=1e-4*Math.random();S.instance.setAgentPrefVelocity(this._aid,S.instance.getAgentPrefVelocity(this._aid).plus(new P(Math.cos(_),Math.sin(_)).scale(c)));var g,m,p=(this._shootTargetNode?this._shootTargetNode:this._targetNode).worldPosition.clone().subtract(this.node.worldPosition).normalize();if(this._characterNode.setWorldRotationFromEuler(0,u.toDegree(Math.atan2(-p.z,p.x))+90,0),!this._isRunning)null===(g=this._skeletalAnim)||void 0===g||g.stop(),null===(m=this._skeletalAnim)||void 0===m||m.crossFade(this._shootTargetNode?R.SHOOT_RUN:R.RUN),this._isRunning=!0}},s.update=function(e){if(p.GameData.isInGame()&&this._isInit&&this._targetNode&&S.instance.hasAgent(this._aid)){this._setPreferredVelocities(),S.instance.agentRun(this._aid,e);var t=S.instance.getAgentPosition(this._aid),o=l(t.x,0,t.y);this.node.setWorldPosition(o),this._shootTargetNode&&(this._shootTime+=e,this._shootTime>=this._shootIntervalTime&&(this._shootTime=0,this.Shoot()))}},s.InSynthesis=function(e){this._isInSynthesis=!0,this._mySynthesisSoldier=e},s.LevelUp=function(){var e,t;this._curLevel<y.MAX_SOLDIER_LEVEL&&this._curLevel++;var o=this._teamType==p.RankDataMgr.getPlayerRankTeamType();this._curHP=o?p.RankDataMgr.getPlayerSoldierHP(this._curLevel):p.RankDataMgr.getAISoliderHpById(this._rankId,this._curLevel),o?this._leaderComp.updateCameraPos():this._leaderComp.updateScale(),this._isInSynthesis=!1,this._mySynthesisSoldier=null,this._loadSoldierMtl(),null===(e=this.bloodBarMgr)||void 0===e||e.updateSoldierLevel(this._curLevel),null===(t=this.bloodBarMgr)||void 0===t||t.setOffsetPos(l(0,5*(this.level-1)+80,0));var i=1+.2*(this._curLevel-1);this.node.setScale(i,i,i),p.Event.emit(y.EVENT_TYPE.PLAY_EFFECT,"levelUp",this.node)},s.Shoot=function(){var e=i(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Res.loadPrefab("bullet","prefab").then((function(e){var o;if(p.GameData.isInGame()&&t._shootTargetNode){var i=r.distance(t.node.worldPosition,t._shootTargetNode.worldPosition),s=v.getParentComponent(t._shootTargetNode,"soldier",n)||v.getParentComponent(t._shootTargetNode,"enemyAI",T)||v.getParentComponent(t._shootTargetNode,"playerMgr",C)||v.getParentComponent(t._shootTargetNode,"mercenary",k),l=t.damage;if(!s.isCanShoot||s.HP<=0||i>18)t._resetCollider();else{var h=p.Pool.getNode(e,t.node.parent);v.getNodeComponent(h,"Cube",_).material.setProperty("mainColor",g("#ffffff"));var d=t._curGunNode?v.getNodeByName(t._curGunNode,"shootPoint").worldPosition.clone():v.getNodeByName(t._gunSocketNode,null===(o=t._gunSocketNode)||void 0===o?void 0:o.name).worldPosition.clone();h.setWorldPosition(d);var c=t._shootTargetNode.worldPosition.clone().subtract(d).normalize();h.setWorldRotationFromEuler(0,u.toDegree(Math.atan2(-c.z,c.x))+90,0),h.setScale(1,1,i),m.play(t._curGunNode);var N=p.RankDataMgr.getPlayerRankTeamType();(t.teamType==N||s.teamType==N)&&p.Audio.playSound(y.AUDIO_SOURCE_TYPE.SHOOT),s.HP-l<=0&&t._resetCollider(),s.HitByBullet(l,t.teamType),a(h).delay(.05).call((function(){return p.Pool.putNode(h)})).start()}}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.HitByBullet=function(e,t,o){var i,n;this.HP<=0||this._leaderComp&&this._leaderComp.getBuffData(y.BUFF_TYPE.INVINCIBLE)||(this.HP-=e,null===(i=this.bloodBarMgr)||void 0===i||i.updateBlood(-e),null===(n=this._hitColorMgr)||void 0===n||n.init(),this.HP<=0&&this.removeSoldier(!0,t))},o(n,[{key:"teamType",get:function(){return this._teamType}},{key:"isForSynthesis",get:function(){return this._isForSynthesis}},{key:"isInSynthesis",get:function(){return this._isInSynthesis}},{key:"level",get:function(){return this._curLevel},set:function(e){this._curLevel=e}},{key:"HP",get:function(){return this._curHP},set:function(e){this._curHP=e}},{key:"totalHP",get:function(){return this._teamType==p.RankDataMgr.getPlayerRankTeamType()?p.RankDataMgr.getPlayerSoldierHP(this._curLevel):p.RankDataMgr.getAISoliderHpById(this._rankId,this._curLevel)}},{key:"damage",get:function(){return this._teamType==p.RankDataMgr.getPlayerRankTeamType()?p.RankDataMgr.getPlayerSoldierDamage(this._curLevel):p.RankDataMgr.getAISoliderDamageById(this._rankId,this._curLevel)}},{key:"isCanShoot",get:function(){return!0}}]),n}(c))||M);n._RF.pop()}}}));

System.register("chunks:///_virtual/RaycastTest.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts"],(function(t){"use strict";var n,o,e,s,a,c,r,i,u;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,s=t.geometry,a=t.Camera,c=t.systemEvent,r=t.SystemEventType,i=t.Component},function(t){u=t.CommonUtils}],execute:function(){var l;o._RF.push({},"bc7dbDE+qFE1adw8NVGOcg+","RaycastTest",void 0);var h=e.ccclass;t("RaycastTest",h("RaycastTest")(l=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this)._camera=null,n._ray=new s.ray,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this._camera=u.getNodeComponent(this.node,this.node.name,a)},e.onEnable=function(){c.on(r.TOUCH_START,this.onTouchStart,this)},e.onDisable=function(){c.off(r.TOUCH_START,this.onTouchStart,this)},e.onTouchStart=function(t,n){},o}(i))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/RDCommand.ts",["cc"],(function(_){"use strict";var D;return{setters:[function(_){D=_.cclegacy}],execute:function(){D._RF.push({},"bd917/8pFhLlKHEZFb2hlpe","RDCommand",void 0);var S=_("RDCommand",(function(){}));S.CMD_SHOW_REWARD_VIDEO_AD=10001,S.CMD_SHOW_INTERSTITIAL_VIDEO_AD=10002,S.CMD_SHOW_STARTSCENE=10020,S.CMD_SHOW_BANNER_AD=10003,S.CMD_HIDE_BANNER_AD=10102,S.CMD_SHAKE=10004,S.CMD_TOAST=10005,S.CMD_TO_MINIPROGRAM=10009,S.CMD_SHAREVIDEO=10006,S.CMD_RECORDVIDEO=10007,S.CMD_STOPRECORDVIDEO=10008,S.CMD_DATA_STATISTICS=10010,S.CMD_CREATE_NATIVE_AD=10011,S.CMD_ClICK_NATIVE_AD=10012,S.CMD_DESTROY_NATIVE_AD=10013,S.CMD_DESTROY_BANNERISSHOW=10014,S.CMD_ADDSHORTCUT=10015,S.CMD_SHOW_BANNER_OFFICE_AD=10016,S.CMD_HIDE_BANNER_OFFICE_AD=10017,S.CMD_SHOW_OFFICE_PORTAL_AD=10018,S.CMD_HIDE_OFFICE_PORTAL_AD=10019,S.RESPONSE_CMD_SHOW_REWARD_VIDEO_AD=20001,S.CMD_SHARE=30001,S.CMD_GET_RANK=30002,S.CMD_FINISH_CHALLENGE=30003,S.FIELD_RESULT="result",S.RESULT_FAIL=0,S.RESULT_OK=1,S.CMD_SDK_INIT=1e4,S.CMD_SDK_LOGIN=60001,S.CMD_SDK_LOGOUT=60002,S.CMD_SDK_SYSDATA=60003,S.CMD_SDK_EXIT=60004,S.CMD_SDK_PAY=60005,S.CMD_SDK_PRIVACY_POLICY=60006,S.CMD_DATA_TKIOS_STATISTICS=7e4,S.STATISTICS_LOGIN="loading",S.STATISTICS_CLICK_VIDEO="video_click",S.STATISTICS_COMPLETE_VIDEO="watch",S.STATISTICS_FAIL_VIDEO="video_error",S.STATISTICS_SHARE="share",S.STATISTICS_SHOW_BANNER="banner_exposure",S.STATISTICS_CLICK_BANNER="banner",S.STATISTICS_GAME_ICON_SHARE="icon_click",S.STATISTICS_SHOW_SCREEN="screen_exposure",D._RF.pop()}}}));

System.register("chunks:///_virtual/AssetsPackageDefine.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"be23eK/6YVOQIGkwucxNmNn","AssetsPackageDefine",void 0);var s=e("default",(function(){}));s.TOAST_MESSAGE_LAYER="totas_message_layer",s.INIT_RES="init_res",t._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationEvent.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./AppManager.ts","./PlayerMgr.ts"],(function(t){"use strict";var n,e,o,r,a,i,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Component},function(t){a=t.CommonUtils},function(t){i=t.App},function(t){c=t.PlayerMgr}],execute:function(){var s;e._RF.push({},"c1b2fSMFt1Gf6HeoXkGcTsr","AnimationEvent",void 0);var p=o.ccclass;o.property,t("AnimationEvent",p("AnimationEvent")(s=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.playHammerSound=function(){a.getParentComponent(this.node,"playerMgr",c)&&i.Audio.playSound("sfx_attack_"+i.WeaponDataMgr.getCurrentWeaponData().weaponType)},e}(r))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/ADScreen.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./RDCommand.ts","./OptionsManager.ts","./GameListManger.ts","./ADMainPush.ts","./AdsManager.ts","./PushControl.ts","./RDPlatformManager.ts"],(function(t){"use strict";var n,e,i,o,s,a,h,c,l,r,u,d,m,g,C,f,p,b,B,M,P,I;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.ButtonComponent,s=t.UITransformComponent,a=t.v3,h=t.view,c=t.LayoutComponent,l=t.Size,r=t.loader,u=t.Prefab,d=t.instantiate,m=t.Component},function(t){g=t.CommonUtils},function(t){C=t.RDCommand},function(t){f=t.OpCommand,p=t.default},function(t){b=t.default},function(t){B=t.ADMainPush},function(t){M=t.AdsManager},function(t){P=t.PushControl},function(t){I=t.RDPlatformManager}],execute:function(){var v;e._RF.push({},"c25dbCeIARLW66KiCNeLxMK","ADScreen",void 0);var S=i.ccclass;i.property,t("ADScreen",S("ADScreen")(v=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).continueBtn=null,n.randBtn=null,n.topBtn=null,n.bottomContent=null,n._move=[1,1],n.count=1,n.topCont=0,n.dataList=[],n.isBanner=!1,n.isPYX=!1,n.callback=null,n.adMainPrefabs=null,n.scrollView=null,n}n(e,t);var i=e.prototype;return i.onLoad=function(){this.continueBtn=this.node.getChildByName("contionBtn").getComponent(o),this.continueBtn.node.on("click",this.onContinueGame,this),this.randBtn=g.getNodeByName(this.node,"randBtn").getComponent(o),this.randBtn.node.on("click",this.onRandGame,this),this.scrollView=g.getNodeByName(this.node,"ScrollView"),this.dataList=b.getInstance().getPushGameList(f.CMD_OPTION_SWITCH_RMTJQPDC)},i.onEnable=function(){this.isBanner=I.getInstance().bannerIsShow(),this.isBanner&&M.getInstance().hideBannerAd(),this.continueBtn.node.active=!0,p.getInstance().getOptionSwitchByKey(f.CMD_OPTION_SWITCH_WDKG)&&(this.scheduleOnce((function(){M.getInstance().showBannerAd()}),1),this.scheduleOnce((function(){M.getInstance().hideBannerAd()}),3)),this.topBtn=g.getNodeByName(this.node,"contentTop"),this.bottomContent=g.getNodeByName(this.node,"content"),this.scheduleOnce((function(){this.initTop()}),.01),this.scheduleOnce((function(){this.isPYX=P.getInstance().showJPYXBtn(!1),P.getInstance().showMainPush(!1)}),.5),this.schedule(this.scrolling,1/60,1e6,1)},i.onDisable=function(){P.getInstance().showJPYXBtn(this.isPYX),P.getInstance().showMainPush(!0),this.unschedule(this.scrolling)},i.scrolling=function(){1===this._move[0]&&this.bottomContent.getPosition().y>=this.bottomContent.getComponent(s).contentSize.height-this.scrollView.getComponent(s).contentSize.height/2&&(this._move[0]=-1),-1===this._move[0]&&this.bottomContent.getPosition().y<=this.scrollView.getComponent(s).contentSize.height/2&&(this._move[0]=1),this.bottomContent.setPosition(a(this.bottomContent.getPosition().x,this.bottomContent.getPosition().y+this._move[0],0))},i.setCloseCallback=function(t){this.callback=t},i.initTop=function(){this.count=0,this.topBtn.getComponent(s).setContentSize(h.getVisibleSize().width,this.topBtn.getComponent(s).contentSize.height),this.topCont=Math.min(Math.floor((h.getVisibleSize().width-40)/108),this.dataList.length),this.topBtn.getComponent(c).spacingX=(h.getVisibleSize().width-40-98*this.topCont)/(this.topCont-1),this.createItem(this.topBtn,1)},i.initBottomView=function(){this.count=0;this.dataList.length;var t=(h.getVisibleSize().width-20-100)/2/98;this.createItem(this.bottomContent,t),this.bottomContent.getComponent(c).spacingX=20,this.bottomContent.getComponent(c).paddingLeft=50,this.bottomContent.getComponent(c).paddingRight=50,this.bottomContent.getComponent(s).setContentSize(new l(h.getVisibleSize().width,(119*t+30)*Math.ceil(this.dataList.length/2)+10))},i.createItem=function(t,n){var e=this;if("contentTop"===t.name){if(this.count>=this.topCont)return void this.initBottomView()}else if(this.count>=this.dataList.length)return;var i=t.children[this.count],o=this.dataList[this.count];if(i){var s=i.getComponent(B);s.freash(o),s.setScale(n),this.count+=1,this.scheduleOnce((function(){e.createItem(t,n)}),0)}else this.adMainPrefabs?this.createAdMain(t,n,o,this.adMainPrefabs):r.loadRes("adUI/ADMainPush",u,null,(function(i,s){i?console.warn(i):(e.adMainPrefabs=s,e.createAdMain(t,n,o,e.adMainPrefabs))}))},i.createAdMain=function(t,n,e,i){var o=d(i);t.addChild(o);var s=o.getComponent(B);s.freash(e),s.setScale(n),this.count+=1,this.createItem(t,n)},i.onContinueGame=function(){this.node.active=!1,this.callback&&this.callback()},i.onRandGame=function(){var t=Math.floor(Math.random()*(this.dataList.length-0+1))+0,n=this.dataList[t];n&&I.getInstance().sendData(C.CMD_TO_MINIPROGRAM,n)},e}(m))||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/RD4399Platform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./UIManager.ts","./RDPlatform.ts"],(function(t){"use strict";var a,e,i,n,r,o;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,i=t.sys},function(t){n=t.Log},function(t){r=t.UIManager},function(t){o=t.RDPlatform}],execute:function(){e._RF.push({},"c3699HtiQJELam+dkohGaEw","RD4399Platform",void 0);t("RD4399Platform",function(t){function e(a){var e;return(e=t.call(this,a)||this).vibrateInterval=null,e}a(e,t);var o=e.prototype;return o.loadStorageData=function(t,a,e){var n=JSON.parse(i.localStorage.getItem(t[0]));a&&a(n)},o.flushStorageData=function(t,a){i.localStorage.setItem(t.key,JSON.stringify(t.data))},o.initAD=function(){var t,a,e;this._hasShortcutInstalled=!0,t=document,a=t.getElementsByTagName("head")[0],(e=t.createElement("script")).async=!0,e.src="//h.api.4399.com/h5mini-2.0/h5api-interface.php",a&&a.insertBefore(e,a.firstChild)},o._vibrateShort=function(t){void 0===t&&(t=50),100!=t?this.startVibrate(t):this.startPeristentVibrate(100,.01)},o.startVibrate=function(t){navigator.vibrate(t)},o.stopVibrate=function(){this.vibrateInterval&&clearInterval(this.vibrateInterval),navigator.vibrate(0)},o.startPeristentVibrate=function(t,a){this.vibrateInterval=setInterval((function(){this.startVibrate(t)}),a)},o._showBannerAd=function(t){this.isReviewed()&&n.log("审核中=====")},o._showVideo=function(t){var a=this;if(this.isReviewed())this._rewardCaback.success(null);else{var e=function(t){n.log("代码:"+t.code+",消息:"+t.message),1e4===t.code?n.log("开始播放"):10001===t.code?(n.log("播放结束"),a._rewardCaback.success(null)):(n.log("广告异常"),a._rewardCaback.fail())};n.log("调用4399激励视频广告"),window.h5api.canPlayAd((function(t){n.log("是否可播放广告",t.canPlayAd,"剩余次数",t.remain),!t.canPlayAd||t.remain<=0?(r.getInstance().showTipMessage("今日广告次数已用完，明日继续"),a._rewardCaback.fail()):window.h5api.playAd(e)}))}},o._showIntertitalAd=function(t){this.isReviewed()},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/CommonUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts","./DiamondFlyAnimation.ts"],(function(t){"use strict";var e,n,o,i,a,s,d,l,h,m,_,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Label,a=t.tween,s=t.v3},function(t){d=t.CommonUtils},function(t){l=t.Constants},function(t){h=t.EventResult},function(t){m=t.App},function(t){_=t.UIBase},function(t){u=t.DiamondFlyAnimation}],execute:function(){var c;n._RF.push({},"c44fdptGVRKoqK5MMQQ7KiC","CommonUI",void 0);var r=o.ccclass;t("CommonUI",r("CommonUI")(c=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this)._diamondNode=null,e._diamondImg=null,e._diamondLbl=null,e._freePanel=null,e._titleNode=null,e._getDiamondNode=null,e._getDiamondLbl=null,e._recvBtnNode=null,e._thankNode=null,e._diamondFlyComp=null,e}e(n,t);var o=n.prototype;return o.onLoad=function(){var t=this;this._diamondNode=d.getNodeByName(this.node,"diamondNode"),this._diamondImg=d.getNodeByName(this.node,"diamondImg"),this._diamondLbl=d.getNodeComponent(this.node,"diamondLbl",i),d.registerButtonEvent(this.node,"addBtn",this._onAddGoldButton,this),this._freePanel=d.getNodeByName(this.node,"freePanel"),this._titleNode=d.getNodeByName(this._freePanel,"title"),this._getDiamondNode=d.getNodeByName(this._freePanel,"getDiamondNode"),this._getDiamondLbl=d.getNodeComponent(this._freePanel,"getDiamondLbl",i),this._getDiamondLbl.string="+"+l.FREE_GET_GOLD_COUNT;var e=d.getNodeByName(this._freePanel,"buttonNode");this._recvBtnNode=d.registerButtonEvent(e,"freeRecvBtn",this._onReceiveButton,this),this._thankNode=d.registerButtonEvent(this._freePanel,"thankBtn",this._onCloseButton,this),this._topBtn=d.getNodeByName(this.node,"topBtn"),this._diamondFlyComp=this.node.getChildByName("flyDiamond").getComponent(u),this._diamondFlyComp.createDiamond(),this._adaptDiamondNode(),this.initBgOpacity(this._freePanel),this.initOppoNativeAd(this._freePanel),this.alignOppoNativeAd(this._thankNode,0),this.scheduleOnce((function(){t._freePanel.active=!1})),this.setZIndex(20)},o.show=function(){this._updateGold(),this._registerCustomEvent(!0)},o.hide=function(){this._registerCustomEvent(!1)},o.getUIName=function(){return"免费金币"},o._adaptDiamondNode=function(){},o._updateGold=function(t){var e=this;if(void 0===t&&(t=!1),this.scheduleOnce((function(){var t=m.Account.gameGold>=0?m.Account.gameGold:0;e._diamondLbl.string=t.toString()}),t?.25:0),t){var n=this._diamondNode.scale.clone();a(this._diamondNode).to(.1,{scale:s(1.2,1.2,1).multiply(n)}).to(.1,{scale:s(1,1,1).multiply(n)}).union().repeat(3).start(),m.Audio.playSound(l.AUDIO_SOURCE_TYPE.COLLECT_COIN)}},o._registerCustomEvent=function(t){var e=t?"on":"off";m.Event[e](l.EVENT_TYPE.UPDATE_GOLD,this._updateGold,this),m.Event[e](l.EVENT_TYPE.FREE_GOLD,this._onAddGoldButton,this),m.Event[e](l.EVENT_TYPE.GOLD_ANIM,this._playDiamondFlyAnim,this)},o._showFreeGoldPanel=function(){this._freePanel.active=!0,this.setOppoLookAdBtn(this.node),this.playScaleInAnim([this._titleNode,this._getDiamondNode,this._topBtn],this._thankNode),this.alignOppoNativeAd(this._thankNode,0),m.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},o._onAddGoldButton=function(){m.Ads.showInterstitialAd({type:0}),this._showFreeGoldPanel(),this.showAdvertisement()},o._playDiamondFlyAnim=function(t,e){void 0===e&&(e=!0),m.Account.gameGold+=t,m.Audio.playSound(l.AUDIO_SOURCE_TYPE.GET_DIAMOND_ANIM),this._diamondFlyComp.node.active=!0;var n=d.getNodeByName(this._diamondNode,"diamondImg");this._diamondFlyComp.playAnimation(this._freePanel,n,e)},o._onReceiveButton=function(){var t=this;if(!m.UI.isUIAnimPlaying()){var e={"当前窗口":this.getUIName(),"按钮类型":"视频广告","当前金币":m.GameData.gameGold};m.Stats.customEvent("按钮事件",e,h.onStarted),this.showRewardAd({success:function(){t._closeFreePanel(),m.Event.emit(l.EVENT_TYPE.GOLD_ANIM,l.FREE_GET_GOLD_COUNT),m.Stats.customEvent("按钮事件",e)},fail:function(){m.Stats.customEvent("按钮事件",e,h.onFailed)}})}},o._closeFreePanel=function(){this._freePanel.active=!1,t.prototype.hide.call(this),m.Event.emit(l.EVENT_TYPE.UPDATE_AD),m.Event.emit(l.EVENT_TYPE.UPDATE_ACHIEVE)},o._onCloseButton=function(){if(!m.UI.isUIAnimPlaying()){var t=[this._titleNode,this._getDiamondNode,this._topBtn];this.playScaleOutAnim(t,this._closeFreePanel.bind(this)),m.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭"})}},n}(_))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/moreClick.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,e,o,c;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,c=t.Component}],execute:function(){var n;e._RF.push({},"c535a0NBg1CDKIKLjJAv/34","moreClick",void 0);var i=o.ccclass;o.property,t("moreClick",i("moreClick")(n=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){},e}(c))||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/FireBallMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./AppManager.ts","./EnemyAIMgr.ts","./MercenaryMgr.ts","./SoldierAgentMgr.ts","./PlayerMgr.ts"],(function(e){"use strict";var t,i,o,l,r,n,a,s,d,c,h,_,g,B,N,p,u;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){o=e.cclegacy,l=e._decorator,r=e.SphereCollider,n=e.ParticleUtils,a=e.v3,s=e.Tween,d=e.tween,c=e.isValid,h=e.Component},function(e){_=e.CommonUtils},function(e){g=e.App},function(e){B=e.EnemyAIMgr},function(e){N=e.MercenaryMgr},function(e){p=e.SoldierAgentMgr},function(e){u=e.PlayerMgr}],execute:function(){var f;o._RF.push({},"ca841s0zUZJP6+hgC3b6dJj","FireBallMgr",void 0);var m=l.ccclass;e("FireBallMgr",m("FireBallMgr")(f=function(e){function o(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))||this)._warnNode=null,t._cicleNode=null,t._fireBallBigNode=null,t._hitFireBallNode=null,t._damage=0,t._teamType=-1,t._attackerComp=null,t._sphereCollider=null,t}t(o,e);var l=o.prototype;return l.onLoad=function(){this._warnNode=_.getNodeByName(this.node,"warnNode"),this._cicleNode=_.getNodeByName(this.node,"warnCircle"),this._fireBallBigNode=_.getNodeByName(this.node,"fireBallBig"),this._hitFireBallNode=_.getNodeByName(this.node,"hitFireBall"),this._sphereCollider=this.node.getComponent(r)},l.onEnable=function(){this._registerEvent(!0)},l.onDisable=function(){this._warnNode&&(this._warnNode.active=!1),this._cicleNode&&this._cicleNode.setScale(0,0,0),this._fireBallBigNode&&n.stop(this._fireBallBigNode),this._hitFireBallNode&&n.stop(this._hitFireBallNode),this._registerEvent(!1)},l._registerEvent=function(e){var t=e?"on":"off";this._sphereCollider[t]("onTriggerEnter",this._onTriggerEnter,this)},l.init=function(e,t,i){var o,l=this;void 0===t&&(t=1),void 0===i&&(i=a()),this._attackerComp=e,this._teamType=e.teamType,this._damage=t,this.node.setWorldPosition(i),null===(o=this._fireBallBigNode)||void 0===o||o.setWorldPosition(i.x,50,i.z),this._sphereCollider.enabled=!1,this._warnNode&&(this._warnNode.active=!0),this._cicleNode&&this._cicleNode.setScale(0,0,0),this._fireBallBigNode&&n.stop(this._fireBallBigNode),this._hitFireBallNode&&n.stop(this._hitFireBallNode),s.stopAllByTarget(this._fireBallBigNode);d(this._fireBallBigNode).to(.3,{worldPosition:a(i.x,50,i.z)},{onUpdate:function(e,t){l._cicleNode.setScale(t,t,t)}}).call((function(){l._warnNode&&(l._warnNode.active=!1),l._cicleNode&&l._cicleNode.setScale(0,0,0),l._fireBallBigNode&&n.play(l._fireBallBigNode)})).to(.2,{worldPosition:a(i.x,0,i.z)}).call((function(){l._fireBallBigNode&&n.stop(l._fireBallBigNode),l._hitFireBallNode&&n.play(l._hitFireBallNode),l._sphereCollider.enabled=!0})).delay(1).call((function(){l._hitFireBallNode&&n.stop(l._hitFireBallNode),g.Pool.putNode(l.node)})).start()},l._onTriggerEnter=function(e){var t=e.otherCollider,i=_.getParentComponent(t.node,"soldier",p)||_.getParentComponent(t.node,"enemyAI",B)||_.getParentComponent(t.node,"playerMgr",u)||_.getParentComponent(t.node,"mercenary",N);c(t)&&g.GameData.isInGame()&&i&&i.isCanShoot&&!(i.HP<=0)&&this._teamType!=i.teamType&&i.HitByBullet(this._damage,this._teamType,!0)},i(o,[{key:"attackerComp",get:function(){return this._attackerComp}}]),o}(h))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager2.ts",["cc","./Log.ts","./EventTarget.ts"],(function(t){"use strict";var e,r,n;return{setters:[function(t){e=t.cclegacy},function(t){r=t.Log},function(t){n=t.default}],execute:function(){e._RF.push({},"cb017L9HfhM2Yn0g89heQ3A","EventManager",void 0);var i=t("default",function(){function t(){}return t.getEventList=function(t){return this.eventList.has(t)||this.eventList.set(t,[]),this.eventList.get(t)},t.on=function(e,i,f){if(!e)return r.error(t.TAG,"监听事件没有事件名"),null;if(!i)return r.error(t.TAG,"监听事件没有回调函数"),null;var o=new n(e,i,f);return this.getEventList(e).push(o),f&&(f._$eventList||(f._$eventList=[])).push(o),o},t.once=function(e,n,i){if(!n)return r.error(t.TAG,"监听事件没有回调函数"),null;return this.on(e,(function r(){for(var f=arguments.length,o=new Array(f),a=0;a<f;a++)o[a]=arguments[a];n.apply(this,o),t.off(e,r,i)}),i)},t.off=function(e,n,i){if(!e)return r.error(t.TAG,"注销事件时没有指定事件"),null;if(!n)return r.error(t.TAG,"销毁事件没有回调函数"),null;var f=this.getEventList(e);if(f.length>0)for(var o=0,a=f.length;o<a;o++)if(f[o].check(i,n))return f.splice(o,1),a--,f[--o];return null},t.offByTarget=function(e,n){if(!e)return r.error(t.TAG,"offByTarget not target"),!1;if(n){if((a=this.getEventList(n)).length>0)for(var i=0,f=a.length;i<f;i++)a[i].checkByTarget(e)&&(a.splice(i,1),f--,i--);return!0}for(var o=this.eventList.values();;){var a,u=o.next();if(u.done)break;if((a=u.value).length>0)for(var l=0,s=a.length;l<s;l++)a[l].checkByTarget(e)&&(a.splice(l,1),s--,l--)}return!0},t.offByCallback=function(e,n){if(!e)return r.error(t.TAG,"offByCallback not callback"),!1;if(n){if((a=this.getEventList(n)).length>0)for(var i=0,f=a.length;i<f;i++)a[i].checkByCallback(e)&&(a.splice(i,1),f--,i--);return!0}for(var o=this.eventList.values();;){var a,u=o.next();if(u.done)break;if((a=u.value).length>0)for(var l=0,s=a.length;l<s;l++)a[l].checkByCallback(e)&&(a.splice(l,1),s--,l--)}return!0},t.offByEvent=function(e){return e?(this.eventList.set(e,[]),!0):(r.error(t.TAG,"offByEvent not event"),!1)},t.offByEventTarget=function(e){e?t.off(e.event,e.callback,e.target):r.error(t.TAG,"offByEventTarget not eventTarget")},t.emit=function(e){if(!e)return r.error(t.TAG,"发送事件时没有指定事件");var n=this.getEventList(e);if(n.length>0){for(var i=arguments.length,f=new Array(i>1?i-1:0),o=1;o<i;o++)f[o-1]=arguments[o];for(var a=0,u=n.length;a<u;a++)n[a].emit(f)}},t}());i.TAG="EventManager",i.eventList=new Map,e._RF.pop()}}}));

System.register("chunks:///_virtual/ADDoubleScreen.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./OptionsManager.ts","./GameListManger.ts","./ADMainPush.ts","./AdsManager.ts","./PushControl.ts","./RDPlatformManager.ts"],(function(t){"use strict";var n,e,o,i,s,a,c,h,l,r,u,d,g,m,C,f,b,p,B,P,I,M;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.ButtonComponent,s=t.v3,a=t.view,c=t.tween,h=t.macro,l=t.UITransformComponent,r=t.LayoutComponent,u=t.loader,d=t.Prefab,g=t.instantiate,m=t.Component},function(t){C=t.CommonUtils},function(t){f=t.default,b=t.OpCommand},function(t){p=t.default},function(t){B=t.ADMainPush},function(t){P=t.AdsManager},function(t){I=t.PushControl},function(t){M=t.RDPlatformManager}],execute:function(){var v;e._RF.push({},"cd3e2WY1+JDA57camDyZa3t","ADDoubleScreen",void 0);var w=o.ccclass;o.property,t("ADDoubleScreen",w("ADDoubleScreen")(v=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).continueBtn=null,n.bottomContent=null,n._move=[1,1],n.count=1,n.dataList=[],n.isBanner=!1,n.isPYX=!1,n.callback=null,n.adMainPrefabs=null,n.scrollView=null,n}n(e,t);var o=e.prototype;return o.onLoad=function(){this.continueBtn=this.node.getChildByName("contionBtn").getComponent(i),this.continueBtn.node.on("click",this.onContinueGame,this),this.bottomContent=C.getNodeByName(this.node,"content"),this.scrollView=C.getNodeByName(this.node,"ScrollView")},o.onEnable=function(){this.isBanner=M.getInstance().bannerIsShow(),f.getInstance().getOptionSwitchByKey(b.CMD_OPTION_SWITCH_WDKG)?(this.continueBtn.node.position=s(this.continueBtn.node.position.x,-a.getVisibleSize().height/2+80,0),P.getInstance().hideBannerAd(),this.continueBtn.interactable=!1,this.scheduleOnce(function(){P.getInstance().showBannerAd()}.bind(this),f.getInstance().getConfigByKey(b.CMD_OPTION_BUTTONSHOWTIME,1)),this.scheduleOnce((function(){var t=this;c(this.continueBtn.node).to(.5,{position:s(this.continueBtn.node.position.x,-335,0)}).call((function(){t.continueBtn.interactable=!0})).start()}),f.getInstance().getConfigByKey(b.CMD_OPTION_BUTTONMOVETIME,1.5))):(this.continueBtn.node.position=s(this.continueBtn.node.position.x,-335,0),this.isBanner||P.getInstance().showBannerAd()),this.scheduleOnce((function(){this.isPYX=I.getInstance().showJPYXBtn(!1),I.getInstance().showMainPush(!1)}),.05),this.dataList=p.getInstance().getPushGameList(b.CMD_OPTION_SWITCH_RMTJLL),this.initBottomView(),this.schedule(this.scrolling,1/60,h.REPEAT_FOREVER,1)},o.onDisable=function(){this.isBanner?P.getInstance().showBannerAd():P.getInstance().hideBannerAd(),I.getInstance().showJPYXBtn(this.isPYX),I.getInstance().showMainPush(!0),this.unschedule(this.scrolling)},o.scrolling=function(){1===this._move[0]&&this.bottomContent.getPosition().y>=this.bottomContent.getComponent(l).height-this.scrollView.getComponent(l).height/2&&(this._move[0]=-1),-1===this._move[0]&&this.bottomContent.getPosition().y<=this.scrollView.getComponent(l).height/2&&(this._move[0]=1),this.bottomContent.setPosition(s(this.bottomContent.getPosition().x,this.bottomContent.getPosition().y+this._move[0],0))},o.initBottomView=function(){this.count=0;var t=(a.getVisibleSize().width-20-100)/2/98;this.createItem(this.bottomContent,t),this.bottomContent.getComponent(r).spacingX=20,this.bottomContent.getComponent(r).paddingLeft=50,this.bottomContent.getComponent(r).paddingRight=50,this.bottomContent.getComponent(l).setContentSize(a.getVisibleSize().width,(119*t+30)*Math.ceil(this.dataList.length/2)+10)},o.createItem=function(t,n){var e=this;if(void 0===n&&(n=1),!(this.count>=this.dataList.length)){var o=t.children[this.count],i=this.dataList[this.count];if(o){var s=o.getComponent(B);s.freash(i),s.setScale(n),this.count+=1,this.createItem(t,n)}else this.adMainPrefabs?this.createAdMain(t,n,i,this.adMainPrefabs):u.loadRes("adUI/ADMainPush",d,null,(function(o,s){o?console.warn(o):(e.adMainPrefabs=s,e.createAdMain(t,n,i,e.adMainPrefabs))}))}},o.createAdMain=function(t,n,e,o){var i=g(o);t.addChild(i);var s=i.getComponent(B);s.freash(e),s.setScale(n),this.count+=1,this.createItem(t,n)},o.setCloseCallback=function(t){this.callback=t},o.onContinueGame=function(){this.callback&&this.callback(),this.node.active=!1},e}(m))||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./RDPlatformType.ts","./Utils.ts","./RDStatisticsManager.ts","./AppManager.ts"],(function(t){"use strict";var e,i,o,n,a,s,d,p,r,h,l,c,u,v,f,m,A,g,_,y,I,N,C;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){o=t.cclegacy,n=t._decorator,a=t.v3,s=t.Tween,d=t.find,p=t.UIOpacity,r=t.UITransform,h=t.view,l=t.Button,c=t.Widget,u=t.Layout,v=t.Sprite,f=t.instantiate,m=t.tween,A=t.Component},function(t){g=t.CommonUtils},function(t){_=t.RDPlatformType},function(t){y=t.Utils},function(t){I=t.CustomEventID,N=t.EventResult},function(t){C=t.App}],execute:function(){var P;o._RF.push({},"d0ba3LXxZ5EpLE4qjMAsb7Y","UIBase",void 0);var O=n.ccclass,U=a();t("UIBase",O("UIBase")(P=function(t){function o(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).centerUI=null,e.oppoNativeAd=null,e._bgCanvasNode=null,e._zIndex=0,e._bgOpaComp=null,e._nativeAdScript=null,e._adHeight=0,e._oppoAdInitPos=a(),e._fadeInNode=null,e._showUICnt=0,e._lookNativeAd=null,e}e(o,t);var n=o.prototype;return n.hide=function(){this._registerAdEvent(!1),C.Ads.hideBannerAd(),s.stopAllByTarget(this.centerUI),this.oppoNativeAd&&(s.stopAllByTarget(this.oppoNativeAd),this.oppoNativeAd.setPosition(this._oppoAdInitPos))},n.setZIndex=function(t){this._zIndex=t},n.initBgOpacity=function(t,e){void 0===t&&(t=this.node),void 0===e&&(e="bg");var i=g.getNodeByName(t,e);this._bgOpaComp=this.getOpacityComponent(i),this._bgCanvasNode=d("BGCanvas")},n.getOpacityComponent=function(t){return t.getComponent(p)||t.addComponent(p)},n.initAdData=function(t,e,i){void 0===t&&(t=this.node),void 0===e&&(e=0),void 0===i&&(i=null),this.centerUI=g.getNodeByName(t,"centerUI");var o=this.centerUI.getComponent(r).contentSize.height;this._adHeight=h.getVisibleSize().height-this._getTopOffsetHeight()-o-e,this._adHeight=Math.min(this._adHeight,480),this.initOppoNativeAd(t,i),this.isOppoPlatform&&(this.oppoNativeAd.getComponent(r).height=this._adHeight)},n.initOppoNativeAd=function(t,e){if(void 0===t&&(t=this.node),void 0===e&&(e=null),this.isOppoPlatform){var i,o=g.getNodeByName(t,"nativeAdBtn");o&&(C.Platform.sdk.isBtnFadeIn()&&o.on(l.EventType.CLICK,this._onLookOppoAdButton,this),o.active=!0),this.oppoNativeAd=g.getNodeByName(t,"nativeAd"),this.oppoNativeAd.active=!0,this._oppoAdInitPos.set(this.oppoNativeAd.position),null===(i=e)||void 0===i||i()}},n.alignOppoNativeAd=function(t,e){var i=this;void 0===e&&(e=10),this.isOppoPlatform&&this.scheduleOnce((function(){var o=t.getComponent(r),n=t.worldPosition.y-(.5===o.anchorY?.5*o.height:0)-i.oppoNativeAd.worldPosition.y-e;i.oppoNativeAd.getComponent(r).height=n,i.oppoNativeAd.getComponent(c).updateAlignment()}))},n.setOppoLookAdBtn=function(t,e,i){var o;(void 0===e&&(e="lookAdBtn"),void 0===i&&(i=!0),this._lookNativeAd=g.getNodeByName(t,e),this._lookNativeAd)&&(this._lookNativeAd.active=C.Platform.isShowNativeAd(!0),this._lookNativeAd.active&&(i&&!this._lookNativeAd.getComponent("LookAtAdButton")&&this._lookNativeAd.addComponent("LookAtAdButton"),this._lookNativeAd.on(l.EventType.CLICK,this._onLookOppoAdButton,this),null===(o=t.getComponent(u))||void 0===o||o.updateLayout()));return this._lookNativeAd},n.adaptUIPanel=function(t){y.isMiniScreen()&&(t.getComponent(c).top-=62)},n.setTTPlatformImage=function(t,e){this.isTTPlatformApproved&&(t.getComponent(v).spriteFrame=C.SptFrame.getSpriteFrameByName(e,!0))},n.adaptDisplayNode=function(t,e,i){var o=!y.isMiniScreen();if(i&&o||!i&&!o){var n=t.getComponent(c);n&&(n.top=e)}},n.setShowAdData=function(t){void 0===t&&(t=!0),this.centerUI.setPosition(0,0,0),this.oppoNativeAd&&(this.oppoNativeAd.active=!1),this._registerAdEvent(!0),t&&this.showAdvertisement()},n.getUIName=function(){return""},n.adaptAdLayout=function(t,e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!0),!i||!y.isMiniScreen())switch(C.Platform.platformType){case _.OPPOGame:case _.None:C.GameData.isCanShowAd&&this._updateAdLayout(t,e,!0);break;case _.TTMinGame:(this.isTTPlatformApproved||o)&&this._updateAdLayout(t,e+100)}},n.playScaleInAnim=function(t,e,i){void 0===e&&(e=null),e&&(C.Platform.sdk.isBtnFadeIn()?(e.active=!1,e.setScale(1,1,1)):t.push(e)),C.UI.playScaleInAnim(t,this.playFadeInAnim.bind(this,e,!0),i)},n.playFadeInAnim=function(t,e){if(void 0===e&&(e=!1),t){var i=C.Platform.sdk.isBtnFadeIn();i&&!e&&(t.active=!1,t.setScale(1,1,1)),this._fadeInNode=t,i&&this.scheduleOnce(this._playFadeInTween,C.Options.getConfigByKey("fade_in_delay",500)/1e3)}},n.playScaleOutAnim=function(t,e,i){var o,n=this;this._fadeInNode&&(this.unschedule(this._playFadeInTween),s.stopAllByTarget(this.getOpacityComponent(this._fadeInNode)));var a=null===(o=this._bgOpaComp)||void 0===o?void 0:o.node;C.UI.playScaleOutAnim(t,(function(){null==e||e(),n._bgOpaComp&&(n._bgOpaComp.opacity=255)}),a,i)},n.showAdvertisement=function(t,e,i,o,n){var a=this;void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===o&&(o=null),void 0===n&&(n=!0);var s=null;e&&(s=function(t){a._nativeAdScript=t}),C.Ads.hideBannerAd(),this.isOppoPlatform&&!this.oppoNativeAd&&console.error("OPPO原生广告节点未初始化！"),C.Ads.showNativeAd(this.oppoNativeAd,s,this.getUIName(),o,n)||(i?this.scheduleOnce((function(){C.Ads.showInterstitialAd()}),2):C.Ads.showBannerAd(this._adHeight>480?{}:{nativeType:2}))},n.showRewardAd=function(t){C.Ads.showRewardAd({success:function(e){t.success(e)},fail:function(){t.fail()}},this.getUIName())},n.createOppoNativeAdItem=function(t,e,i,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o="oppoNativeAdItem"),C.GameData.isCanShowAd&&!t.getChildByName(o)&&C.Platform.sdk.isBtnFadeIn()&&C.Res.loadPrefab("ui/item/"+o,"prefab").then((function(o){var n=f(o);if(t.addChild(n),n.setSiblingIndex(0),e&&i){var a=e.getComponent(c),s=i.getComponent(u);a.top+=n.getComponent(r).height+s.spacingY-s.paddingTop,g.getNodeComponent(e,"view",c).top+=0}}))},n._getTopOffsetHeight=function(){return y.isMiniScreen()?125:200},n._registerAdEvent=function(t){if(this.isOppoPlatform){var e=t?"on":"off";C.Event[e]("menuUp",this._setCenterUIUp,this),C.Event[e]("menuDown",this._setCenterUIDown,this)}},n._setCenterUIUp=function(){var t=this;C.Event.off("menuUp",this._setCenterUIUp,this);var e=h.getVisibleSize().height,i=this.oppoNativeAd.worldPosition,o=-e/2+i.y+this._adHeight+(e-this._getTopOffsetHeight()-this._adHeight-i.y)/2;U.set(0,o),m(this.centerUI).delay(.2).to(.2,{position:U}).call((function(){U.set(t.oppoNativeAd.worldPosition),t.oppoNativeAd.setWorldPosition(U.x,-1e3,U.z),t.oppoNativeAd.active=!0,m(t.oppoNativeAd).to(.15,{worldPosition:U}).start()})).start()},n._setCenterUIDown=function(){C.Event.off("menuDown",this._setCenterUIUp,this),U.set(),m(this.centerUI).delay(.1).to(.1,{position:U}).start()},n._playFadeInTween=function(){C.UI.playFadeInAnim(this._fadeInNode)},n._onLookOppoAdButton=function(){var t={currentWindow:this.getUIName(),buttonType:"查看广告"};this._nativeAdScript?(this._nativeAdScript.onNativeAdClick(),C.Stats.customEvent(I.custom_button_click,t)):(C.UI.showTipMessage("暂无广告"),C.Stats.customEvent(I.custom_button_click,t,N.onFailed,"暂无广告"))},n._updateAdLayout=function(t,e,i){void 0===i&&(i=!1),C.Ads.showBannerAd();var o=t.getComponent(c);o.bottom!==e&&(o.bottom=e,i&&this.scheduleOnce((function(){o.updateAlignment()})))},n._playBgAnimation=function(t){if(t)return t.setPosition(-724,-724,0),m(t).to(30,{position:a(590,590,0)}).call((function(){t.setPosition(-724,-724,0)})).union().repeatForever().start()},i(o,[{key:"showUICnt",get:function(){return this._showUICnt},set:function(t){this._showUICnt=t}},{key:"zIndex",get:function(){return this._zIndex}},{key:"isPCPlatform",get:function(){return C.Platform.platformType===_.None}},{key:"isOppoPlatform",get:function(){return C.Platform.isShowNativeAd()}},{key:"isOPPOMusicGame",get:function(){return C.Platform.platformType===_.OPPOMusicGame}},{key:"isTTPlatform",get:function(){return C.Platform.platformType===_.TTMinGame}},{key:"isTTPlatformApproved",get:function(){return this.isTTPlatform&&C.Options.getOptionSwitchByKey()}},{key:"isGame4399",get:function(){return C.Platform.platformType===_.Game4399}}]),o}(A))||P);o._RF.pop()}}}));

System.register("chunks:///_virtual/AgentMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./AppManager.ts","./Common.ts","./Simulator.ts"],(function(t){"use strict";var e,i,n,s,o,a,r,c,d,h,l;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,s=t.math,o=t.v3,a=t.Component},function(t){r=t.Constants},function(t){c=t.App},function(t){d=t.Vector2,h=t.RVOMath},function(t){l=t.Simulator}],execute:function(){var u;i._RF.push({},"d149dDZht5Ijpz3SQVZiHZz","AgentMgr",void 0);var _=n.ccclass;t("AgentMgr",_("AgentMgr")(u=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this)._aid=-1,e._targetNode=null,e._isInit=!1,e._isEnemyAI=!1,e}e(i,t);var n=i.prototype;return n.onEnable=function(){this._registerCustomEvent(!0)},n.onDisable=function(){this._registerCustomEvent(!1),this._isInit=!1},n._registerCustomEvent=function(t){var e=t?"on":"off";c.Event[e](r.EVENT_TYPE.UPDATE_AGENT_TARGET,this._updateTargetNode,this)},n.init=function(t,e){void 0===e&&(e=!0),this._targetNode=t,this._isEnemyAI=e;var i=new d(t.worldPosition.x,t.worldPosition.z),n=l.instance.addAgent(i);l.instance.setAgentMass(n,1),this._aid=n,this.node.worldPosition=t.worldPosition,this._isInit=!0,l.instance.buildAgentTree()},n._setPreferredVelocities=function(){var t=new d(this._targetNode.worldPosition.x,this._targetNode.worldPosition.z).minus(l.instance.getAgentPosition(this._aid));if(h.absSq(t)>1){var e=s.lerp(14,30,h.absSq(t)/10);t=h.normalize(t).scale(e)}if(h.absSq(t)<1)l.instance.setAgentPrefVelocity(this._aid,new d(0,0)),this._isEnemyAI&&c.Event.emit(r.EVENT_TYPE.SET_AGENT_TARGET,this._aid);else{l.instance.setAgentPrefVelocity(this._aid,t);var i=2*Math.random()*Math.PI,n=1e-4*Math.random();l.instance.setAgentPrefVelocity(this._aid,l.instance.getAgentPrefVelocity(this._aid).plus(new d(Math.cos(i),Math.sin(i)).scale(n)))}},n.update=function(t){if(c.GameData.isInGame()&&this._isInit&&this._targetNode){this._setPreferredVelocities(),l.instance.agentRun(this._aid,t);var e=l.instance.getAgentPosition(this._aid),i=o(e.x,0,e.y),n=i.clone().subtract(this.node.children[0].worldPosition).normalize();this.node.children[0].setWorldRotationFromEuler(0,s.toDegree(Math.atan2(-n.z,n.x)+90)-30,0),this.node.setWorldPosition(i)}},n._updateTargetNode=function(t,e){this._aid==t&&e&&(this._targetNode=e)},i}(a))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/camera-mgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts","./Simulator.ts"],(function(e){"use strict";var t,o,a,s,i,n,r,m,l,_,c,h,d;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,a=e.v3,s=e._decorator,i=e.Camera,n=e.Vec3,r=e.tween,m=e.Tween,l=e.Component},function(e){_=e.CommonUtils},function(e){c=e.Constants},function(e){h=e.App},function(e){d=e.Simulator}],execute:function(){var g;o._RF.push({},"d18fcM9l6pLoocKxlZFu4AU","camera-mgr",void 0);var u,N=a(0,32,-28),A=a(-50,180,0);!function(e){e[e.NONE=0]="NONE",e[e.PLAYER_RUN=1]="PLAYER_RUN",e[e.PLAYER_ATTACK=2]="PLAYER_ATTACK"}(u||(u={}));var T=s.ccclass;e("CameraMgr",T("CameraMgr")(g=function(e){function o(){for(var t,o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this)._camNode=null,t._shakeNode=null,t._initCamPos=a(),t._moveTime=0,t._camTargetPos=a(),t._initCamAngles=a(),t._camTargetAngles=a(),t._followTarget=null,t._cameraStage=u.NONE,t}t(o,e);var s=o.prototype;return s.onLoad=function(){this._camNode=_.getNodeByName(this.node,"camera"),this._shakeNode=_.getNodeByName(this.node,"shakeNode"),this._followTarget=_.getNodeByName(this.node.parent,"playerMgr"),h.GameData.curCamera=_.getNodeComponent(this._camNode,"camera",i),h.GameData.cameraDis=n.distance(this._camNode.worldPosition,this._followTarget.worldPosition),this._initCamPos.set(this._camNode.position),this._camTargetPos.set(this._camNode.position),this._initCamAngles.set(this._camNode.eulerAngles),this._camTargetAngles.set(this._camNode.eulerAngles),this._registerCustomEvent(!0),this._cameraStage=u.NONE},s._setCamToPreviewPos=function(){r(this._camNode).to(1.2,{position:N,eulerAngles:A}).start()},s._setCameraToPlayerRun=function(e){if(void 0===e&&(e=!1),!h.GameData.isInGame())return m.stopAllByTarget(this._shakeNode),this._cameraStage=u.NONE,void this._shakeNode.setPosition(0,0,0);if(e&&this._cameraStage!==u.PLAYER_RUN){m.stopAllByTarget(this._shakeNode),this._cameraStage=u.PLAYER_RUN;var t=this._camNode.forward.clone().multiplyScalar(.8);r(this._shakeNode).to(.3,{position:a(t.x,t.y,t.z)}).to(.45,{position:a(0,0,0)}).union().repeatForever().start()}else e||this._cameraStage===u.NONE||(m.stopAllByTarget(this._shakeNode),this._cameraStage=u.NONE,r(this._shakeNode).to(.3,{position:a(0,0,0)},{easing:"backIn"}).start())},s._shakeCamera=function(e){void 0===e&&(e=!1);var t=.02,o=e?2.5:.5;r(this._shakeNode).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:n.random(a(),o)}).to(t,{eulerAngles:a()}).start()},s._registerCustomEvent=function(e){var t=e?"on":"off";h.Event[t](c.EVENT_TYPE.CLEAR_MAP_INFO,this._resetData,this),h.Event[t](c.EVENT_TYPE.UPDATE_CAMERA_POS,this._updateCamPos,this),h.Event[t](c.EVENT_TYPE.CAMERA_PLAYER_ATTACK,this._shakeCamera,this),h.Event[t](c.EVENT_TYPE.GAME_WIN,this._setCamToPreviewPos,this)},s._resetData=function(){this._camTargetPos.set(this._initCamPos),this._camTargetAngles.set(this._initCamAngles),this._camNode.eulerAngles=this._camTargetAngles,this._camNode.position=this._camTargetPos},s._updateCamPos=function(e,t){void 0===e&&(e=1),void 0===t&&(t=null),this._moveTime=0;var o=this._initCamPos.clone().subtract(this._camNode.forward.multiplyScalar(e<=1?e:1.5*e));t&&o.subtract(this._camNode.forward.multiplyScalar(2==t.level?12:6)),this._camTargetPos=o},s._setCameraMove=function(e){this._moveTime+=e;var t=null,o=null,a=d.instance.getCurTime()<5?2:1.2;this._moveTime>a?(this._moveTime=0,t=this._camTargetPos,o=this._camTargetAngles):(t=this._camNode.position.lerp(this._camTargetPos,this._moveTime/a),o=this._camNode.eulerAngles.lerp(this._camTargetAngles,this._moveTime/a)),this._camNode.setPosition(t),this._camNode.setRotationFromEuler(o.x,o.y,o.z),h.GameData.cameraDis=n.distance(this._camNode.worldPosition,this._followTarget.worldPosition)},s.update=function(e){this._camNode.position.y!==this._camTargetPos.y&&h.GameData.isInGame()&&this._setCameraMove(e)},s.lateUpdate=function(e){if(this._followTarget){var t=this.node.worldPosition.lerp(this._followTarget.worldPosition,4*e);this.node.worldPosition=t}},s.onDestroy=function(){this._registerCustomEvent(!1)},o}(l))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/guide-tips.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var i,e,s,a,o,r,n,h,c,l,u,_,m,d;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){s=t.cclegacy,a=t._decorator,o=t.v3,r=t.Sprite,n=t.view,h=t.UITransform,c=t.Vec3,l=t.math,u=t.Component},function(t){_=t.CommonUtils},function(t){m=t.Constants},function(t){d=t.App}],execute:function(){var p;s._RF.push({},"d2157pBVwxIBoPF6KkskrhH","guide-tips",void 0);var v=a.ccclass,g=o();t("GuideTips",v("GuideTips")(p=function(t){function s(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return(i=t.call.apply(t,[this].concat(s))||this)._arrowNode=null,i._mainCamera=null,i._target=null,i._visibleSize=null,i._lastPos=o(),i._curTime=0,i}i(s,t);var a=s.prototype;return a.onLoad=function(){this._arrowNode=_.getNodeByName(this.node,"arrow"),this._arrowNode.active=!1,this._initVisibleSize()},a.setGuideTarget=function(t,i){this._mainCamera=d.GameData.curCamera,this._target=t,this._arrowNode.getComponent(r).color=m.SOLDIER_COLOR_ARRAY[i%5]},a._initVisibleSize=function(){this._visibleSize=n.getVisibleSize(),this._visibleSize.height-=300;var t=this._arrowNode.getComponent(h);this._visibleSize.width-=t.width,this._visibleSize.height-=t.height},a.lateUpdate=function(t){if(this._curTime+=t,this._target&&!(this._curTime<.2)){this._curTime=0;var i=this._mainCamera.worldToScreen(this._target.position);if(!(c.squaredDistance(this._lastPos,i)<1)){this._lastPos.set(i);var e=this._mainCamera.camera;i.x>0&&i.x<e.width&&i.y>0&&i.y<e.height&&i.z>0?this._arrowNode.active=!1:(this._arrowNode.active=!0,this._mainCamera.convertToUINode(this._target.worldPosition,this.node.parent,g),this._setArrowAttribute())}}},a._setArrowAttribute=function(){var t=.5*this._visibleSize.width,i=.5*this._visibleSize.height;g.x=l.clamp(g.x,-t,t),g.y=l.clamp(g.y,-i,i),this.node.setPosition(g),this.node.setRotationFromEuler(0,0,l.toDegree(Math.atan2(g.y,g.x)))},e(s,[{key:"mainCamera",set:function(t){this._mainCamera=t}}]),s}(u))||p);s._RF.pop()}}}));

System.register("chunks:///_virtual/SettingUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDCommand.ts","./RDStatisticsManager.ts","./RDPlatformManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var e,n,o,i,s,a,u,c,r,d,l,g,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.ToggleContainer,s=t.Toggle,a=t.EventHandler},function(t){u=t.CommonUtils},function(t){c=t.Constants},function(t){r=t.RDCommand},function(t){d=t.CustomEventID},function(t){l=t.RDPlatformManager},function(t){g=t.App},function(t){h=t.UIBase}],execute:function(){var _;n._RF.push({},"d415dxX3v9N24VF7nIlYTHu","SettingUI",void 0);var m,N=o.ccclass;!function(t){t.OPEN="openToggle",t.CLOSE="closeToggle"}(m||(m={}));t("SettingUI",N("SettingUI")(_=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this)._titleNode=null,e._vibrateNode=null,e._soundNode=null,e._yszcNode=null,e._closeBtn=null,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this._titleNode=u.getNodeByName(this.node,"title"),this._vibrateNode=u.getNodeByName(this.node,"vibrateNode"),u.getNodeComponent(this._vibrateNode,"vibrateToggleGroup",i).checkEvents.push(this._getEventHandler("_onVibrateToggle")),this._soundNode=u.getNodeByName(this.node,"soundNode"),u.getNodeComponent(this._soundNode,"soundToggleGroup",i).checkEvents.push(this._getEventHandler("_onSoundToggle")),this._closeBtn=u.registerButtonEvent(this.node,"closeBtn",this._onCloseButton,this),this._yszcNode=u.registerButtonEvent(this.node,"yszcBtn",this._ysxyButton,this),this.initBgOpacity(),this.initAdData(),this.setZIndex(2)},o.getUIName=function(){return"设置"},o.show=function(){this._updateToggleContainer();var t=[this._titleNode,this._soundNode,this._vibrateNode,this._yszcNode];this.playScaleInAnim(t,this._closeBtn),this.setShowAdData(),g.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},o._updateToggleContainer=function(){var t=g.GameData.settingInfo,e=t.isVibrate?m.OPEN:m.CLOSE;u.getNodeComponent(this._vibrateNode,e,s).setIsCheckedWithoutNotify(!0);var n=1==t.soundVolume?m.OPEN:m.CLOSE;u.getNodeComponent(this._soundNode,n,s).setIsCheckedWithoutNotify(!0)},o._onCloseButton=function(){if(!g.UI.isUIAnimPlaying()){var t=[this._titleNode,this._soundNode,this._vibrateNode,this._yszcNode,this._closeBtn];this.playScaleOutAnim(t,(function(){g.UI.hideDialog(c.UI_DIALOG_NAME.SETTING),g.Event.emit(c.EVENT_TYPE.UPDATE_AD)})),g.Stats.customEvent(d.custom_button_click,{currentWindow:this.getUIName(),buttonType:"关闭"})}},o._getEventHandler=function(t,e){void 0===e&&(e="");var n=new a;return n.target=this.node,n.component="SettingUI",n.handler=t,n.customEventData=e,n},o._onVibrateToggle=function(t){var e=t.target.name===m.OPEN,n=g.GameData.settingInfo;n.isVibrate!==e&&(n.isVibrate=e,g.Account.settingInfo=n),g.Stats.customEvent(d.custom_button_click,{currentWindow:this.getUIName(),buttonType:"震动","是否开启":e.toString()})},o._onSoundToggle=function(t){var e=t.target.name===m.OPEN,n=g.GameData.settingInfo;n.soundVolume!==e&&(n.soundVolume=e?1:0,n.musicVolume=e?1:0,g.Account.settingInfo=n,e?g.playBgm():g.stopBgm()),g.Stats.customEvent(d.custom_button_click,{currentWindow:this.getUIName(),buttonType:"声音","是否开启":e.toString()})},o._ysxyButton=function(){l.getInstance().sendData(r.CMD_SDK_PRIVACY_POLICY,{})},n}(h))||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/UnlockEndlessUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var e,s,i,n,o,a,l,d,u,c,h;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy,i=t._decorator,n=t.Sprite,o=t.Label,a=t.tween,l=t.v3},function(t){d=t.CommonUtils},function(t){u=t.Constants},function(t){c=t.App},function(t){h=t.UIBase}],execute:function(){var r;s._RF.push({},"d477fjSxy5MT4N57wNF+OKr","UnlockEndlessUI",void 0);var _=i.ccclass;t("UnlockEndlessUI",_("UnlockEndlessUI")(r=function(t){function s(){for(var e,s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this)._titleNode=null,e._musicNode=null,e._cdCoverSpt=null,e._nameLbl=null,e._startBtnNode=null,e._closeBtnNode=null,e._cdAnim=null,e._endlessData=null,e._lookAdBtnNode=null,e}e(s,t);var i=s.prototype;return i.onLoad=function(){this._titleNode=d.getNodeByName(this.node,"title"),this._musicNode=d.getNodeByName(this.node,"endlessMusic"),this._cdCoverSpt=d.getNodeComponent(this._musicNode,"cdCover",n),this._nameLbl=d.getNodeComponent(this._musicNode,"musicNameLbl",o);var t=d.getNodeByName(this.node,"buttonNode");this._startBtnNode=d.registerButtonEvent(t,"startBtn",this._onStartButton,this),this._closeBtnNode=d.registerButtonEvent(t,"thanksBtn",this._onCloseButton,this),this._setOppoPlatformInfo(),this.initBgOpacity(),this.initOppoNativeAd(),this.alignOppoNativeAd(this._closeBtnNode)},i.show=function(){this.showUICnt++,this._setEndlessMusicInfo(),this.playScaleInAnim([this._titleNode,this._musicNode,this._startBtnNode,this._lookAdBtnNode],this._closeBtnNode),this.showAdvertisement(),c.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},i.hide=function(){var t;null===(t=this._cdAnim)||void 0===t||t.stop(),this._cdCoverSpt.node.setRotationFromEuler(0,0,0),this.unschedule(this._loopAuditionMusic)},i.getUIName=function(){return"无尽模式"},i._setOppoPlatformInfo=function(){this.isOppoPlatform&&(this._lookAdBtnNode=this.setOppoLookAdBtn(this.node),this._lookAdBtnNode.active=!0)},i._setEndlessMusicInfo=function(){var t=this._endlessData=c.MusicDataMgr.getDataById(c.GameData.unlockEndlessId);t&&(this._nameLbl.string=t.showName,this._cdAnim=a(this._cdCoverSpt.node).by(u.COVER_ANIM_TIME,{eulerAngles:l(0,0,-360)}).repeatForever().start(),this._cdCoverSpt.spriteFrame=c.SptFrame.getSpriteFrameByName(t.getCoverFilename()),this._loopAuditionMusic(),this.schedule(this._loopAuditionMusic,t.audEndTime-t.audStartTime))},i._loopAuditionMusic=function(){c.Audio.playMusicByUrl(this._endlessData.filename,this._endlessData.isUrl(),1,this._endlessData.audStartTime)},i._onStartButton=function(){if(!c.UI.isUIAnimPlaying()){this._playScaleOutAnim(!0);var t=c.MusicDataMgr.getDataById(c.GameData.playMusicId);c.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"开始游戏","歌曲":t.showName})}},i._onCloseButton=function(){if(!c.UI.isUIAnimPlaying()){this._playScaleOutAnim(!1);var t=c.MusicDataMgr.getDataById(c.GameData.playMusicId);c.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭","歌曲":t.showName})}},i._playScaleOutAnim=function(t){var e=this,s=[this._titleNode,this._musicNode,this._startBtnNode,this._lookAdBtnNode,this._closeBtnNode];this.playScaleOutAnim(s,(function(){if(c.UI.hideDialog(u.UI_DIALOG_NAME.UNLOCK_ENDLESS),t)c.Event.emit(u.EVENT_TYPE.QUICK_START,e._endlessData,u.GAME_MODE.ENDLESS);else{var s=c.MapDataMgr.getRandomlockMap();1==e.showUICnt&&s?c.UI.showDialog(u.UI_DIALOG_NAME.MAP_RECOMMEND):c.Event.emit(u.EVENT_TYPE.LOOP_MUSIC)}}))},s}(h))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/scroll-view-optimize.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,r,c,s,l,a,h,u,p,d,_;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,n=t.color,r=t.mat4,c=t.UITransform,s=t.ScrollView,l=t.error,a=t.Node,h=t.Renderable2D,u=t.UIOpacity,p=t.Mat4,d=t.Rect,_=t.Component}],execute:function(){var m;o._RF.push({},"d4d83UwKYNCGJWIDtntRLQ1","scroll-view-optimize",void 0);var g=i.ccclass,f=i.menu,w=n(),y=r(),v=r();t("ScrollViewOptimize",g("ScrollViewOptimize")(m=f("Utils/ScrollViewOptimize")(m=function(t){function o(){for(var e,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this)._uiTransform=null,e._scrollView=null,e}e(o,t);var i=o.prototype;return i.onLoad=function(){this._uiTransform=this.getComponent(c),this._scrollView=this.getComponent(s),this._scrollView?(this._updateItemOpacity(),this._scrollView.content.on(a.EventType.CHILD_ADDED,this._updateItemOpacity,this),this._scrollView.content.on(a.EventType.CHILD_REMOVED,this._updateItemOpacity,this),this.node.on(s.EventType.SCROLLING,this._updateItemOpacity,this)):l("不存在ScrollView组件！")},i._updateItemOpacity=function(){var t=this;this._scrollView.content.children.forEach((function(e){t.setNodeOpacity(e,t._checkCollision(e)?255:0)}))},i.setNodeOpacity=function(t,e){var o=t.getComponent(h);o?(w.set(o.color),w.a=e,o.color=w):(t.getComponent(u)||t.addComponent(u)).opacity=e},i._checkCollision=function(t){var e=this._getBoundingBoxToWorld(this._scrollView.content.parent),o=this._getBoundingBoxToWorld(t);return e.width+=.5*e.width,e.height+=.5*e.height,e.x-=.25*e.width,e.y-=.25*e.height,e.intersects(o)},i._getBoundingBoxToWorld=function(t){p.fromRTS(y,this.node.getRotation(),this.node.getPosition(),this.node.getScale()),t.getWorldMatrix(v);var e=this._uiTransform.contentSize,o=this._uiTransform.anchorPoint,i=e.width,n=e.height,r=new d(-o.x*i,-o.y*n,i,n);return p.multiply(v,v,y),r.transformMat4(v),r},o}(_))||m)||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteFrameManager.ts",["cc","./RDAssetManager.ts"],(function(e){"use strict";var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.RDAssetManager}],execute:function(){t._RF.push({},"d70f6pFS6VG76FEuP7Bu/tW","SpriteFrameManager",void 0);var n=e("SpriteFrameManager",function(){function e(){this._assetMgr=r.getInstance()}e.getInstance=function(){return this._instance};var t=e.prototype;return t.getSpriteFrame=function(e,t){var r=this._assetMgr.getAsset(e);return r?r.getSpriteFrame(t):null},t.getSpriteFrameByName=function(e,t){void 0===t&&(t=!1);var r=this._assetMgr.getAsset(e);return t&&this._assetMgr.removeAsset(e),r||null},t.getTextureByName=function(e){var t=this.getSpriteFrameByName(e);return t?t.texture:null},e}());n._instance=new n,t._RF.pop()}}}));

System.register("chunks:///_virtual/IDataModel.ts",["cc","./Log.ts","./RDPlatformManager.ts"],(function(t){"use strict";var a,e,o;return{setters:[function(t){a=t.cclegacy},function(t){e=t.Log},function(t){o=t.RDPlatformManager}],execute:function(){a._RF.push({},"d96e9vwNCtA/46Abw/GaPP6","IDataModel",void 0),t("IDataModel",function(){function t(t){void 0===t&&(t="default"),this.modelName="default",this._dLocalData={},this.modelName=t,this.LoadStorage(),this.registerListeners()}var a=t.prototype;return a.clear=function(){this._dLocalData={},this.initData(),this.Save()},a.registerListeners=function(){var t=this.getMessageListeners();for(var a in t)t.hasOwnProperty(a)},a.getMessageListeners=function(){return{}},a.sendProtocolMsg=function(t){},a.LoadStorage=function(){var a=this;o.getInstance().loadStorageData(["model_"+this.modelName],(function(o){o&&""!==o?a._dLocalData=o:(a._dLocalData={},a.initData(),a.Save()),e.debug(t.TAG,"init 数据获取 model_"+a.modelName),e.debug(t.TAG,JSON.stringify(a._dLocalData))}),(function(t){}))},a.initData=function(){},a.Query=function(t,a){return void 0===a&&(a=null),null!=this._dLocalData[t]?this._dLocalData[t]:a},a.Set=function(t,a){return(!this._dLocalData[t]||this._dLocalData[t]!=a)&&(this._dLocalData[t]=a,!0)},a.Save=function(){try{o.getInstance().flushStorageData({key:"model_"+this.modelName,data:this._dLocalData},(function(){})),e.debug(t.TAG,"数据保存model_"+this.modelName);var a=this;o.getInstance().loadStorageData(["model_"+this.modelName],(function(o){e.debug(t.TAG,"数据获取model_"+a.modelName),e.debug(t.TAG,JSON.stringify(a._dLocalData))}),(function(t){}))}catch(t){e.error("IDataModel","err = ??",t)}},t}()).TAG="IDataModel",a._RF.pop()}}}));

System.register("chunks:///_virtual/RDAsset.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"daab5BTBtxJUqEhlicE4SAT","RDAsset",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/TTButton.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./RDPlatformType.ts","./RDPlatformManager.ts"],(function(t){"use strict";var e,r,n,o,i,a,l,p,u,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,l=t.SpriteFrame,p=t.Sprite,u=t.Component},function(t){c=t.RDPlatformType},function(t){s=t.RDPlatformManager}],execute:function(){var f,m,y,T,g,h,F;i._RF.push({},"dcbe2oVXCpEeLrd1PVxYfLV","TTButton",void 0);var d=a.ccclass,b=a.property;t("TTButton",(f=d("TTButton"),m=b({type:l,tooltip:"字节按钮"}),y=b({type:l,tooltip:"非字节按钮"}),f((h=e((g=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,n(e,"ttFrame",h,o(e)),n(e,"noneFrame",F,o(e)),e}return r(e,t),e.prototype.onLoad=function(){this.node.getComponent(p).spriteFrame=s.getInstance().platformType===c.TTMinGame?this.ttFrame:this.noneFrame},e}(u)).prototype,"ttFrame",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(g.prototype,"noneFrame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=g))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/CircleMask.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,r,s,a,n,o,p,u,c,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,s=t.assertThisInitialized,a=t.createClass},function(t){n=t.cclegacy,o=t._decorator,p=t.MaskComponent,u=t.game,c=t.Game,h=t.Component}],execute:function(){var d,l,_,m,k,C,f,y,g;n._RF.push({},"de139nmbV9A07AQcXko0Oz7","CircleMask",void 0);var M=o.ccclass,v=o.property,w=o.menu,b=o.executeInEditMode,D=o.disallowMultiple,E=o.requireComponent;t("CircleMask",(d=M(),l=b(!0),_=D(!0),m=E(p),k=w("Utils/CircleMask"),C=v({tooltip:"圆角半径：\n0-1之间为最小边长比例值\n>1为具体像素值"}),d(f=l(f=_(f=m(f=k((g=i((y=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return i=t.call.apply(t,[this].concat(a))||this,r(i,"_radius",g,s(i)),i._maskComp=null,i}e(i,t);var n=i.prototype;return n.onEnable=function(){this._maskComp=this.getComponent(p),this.updateMask()},n.updateMask=function(){var t=this._radius>=0?this._radius:0;t<1&&(t=Math.min(this.node.width,this.node.height)*t),this._maskComp.radius=t,this._maskComp.onDraw=this._onDraw.bind(this._maskComp),this._maskComp._updateGraphics=this._updateGraphics.bind(this._maskComp),this._maskComp.type=p.Type.RECT},n._onDraw=function(t){t.clear(!1);var i=this.node,e=i.width,r=i.height,s=-e*i.anchorX,a=-r*i.anchorY;t.roundRect(s,a,e,r,this.radius||0),u.renderType===c.RENDER_TYPE_CANVAS?t.stroke():t.fill()},n._updateGraphics=function(){var t=this._graphics;t&&this.onDraw(t)},a(i,[{key:"radius",get:function(){return this._radius},set:function(t){this._radius!==t&&(this._radius=t,this.updateMask())}}]),i}(h)).prototype,"_radius",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),i(y.prototype,"radius",[C],Object.getOwnPropertyDescriptor(y.prototype,"radius"),y.prototype),f=y))||f)||f)||f)||f)||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/RichText.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var c,o,e,n;return{setters:[function(t){c=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,n=t.Component}],execute:function(){var i;o._RF.push({},"e1d778LPgNIhI56Azx77De2","RichText",void 0);var r=e.ccclass;t("RichText",r("RichText")(i=function(t){function o(){return t.apply(this,arguments)||this}c(o,t);var e=o.prototype;return e.onLoad=function(){},e.setCallback=function(t){this._callback=t},e.onUserProtocolClicked=function(){var t;console.log("隐私政策"),null===(t=this._callback)||void 0===t||t.call(this)},o}(n))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonBase2.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.construct},function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"e300dkRjfRHo6j98vhTUSPy","SingletonBase",void 0);n("SingletonBase",function(){function n(){}return n.getInstance=function(){for(var n=this,e=arguments.length,c=new Array(e),r=0;r<e;r++)c[r]=arguments[r];return n._instance||(n._instance=t(n,c))},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/MapToggleItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var a,n,o,e,i,s,c,u,d,l,m;return{setters:[function(t){a=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,e=t.Sprite,i=t.ButtonComponent,s=t.Label},function(t){c=t.CommonUtils},function(t){u=t.Constants},function(t){d=t.EventResult},function(t){l=t.App},function(t){m=t.UIBase}],execute:function(){var _;n._RF.push({},"e5d35PzSH5P96dU29lH4yGP","MapToggleItem",void 0);var p=o.ccclass;t("MapToggleItem",p("MapToggleItem")(_=function(t){function n(){for(var a,n=arguments.length,o=new Array(n),e=0;e<n;e++)o[e]=arguments[e];return(a=t.call.apply(t,[this].concat(o))||this)._mapTogSpt=null,a._unlockBtnNode=null,a._watchNode=null,a._diamondNode=null,a._diamondLbl=null,a._mapData=null,a._isVideoUnlock=!1,a}a(n,t);var o=n.prototype;return o.onLoad=function(){this._mapTogSpt=this.getComponent(e),this._unlockBtnNode=c.getNodeByName(this.node,"unlockBtn"),this._unlockBtnNode.on(i.EventType.CLICK,this._onUnlockButton,this),this._watchNode=c.getNodeByName(this._unlockBtnNode,"watchNode"),this._diamondNode=c.getNodeByName(this._unlockBtnNode,"diamondNode"),this._diamondLbl=c.getNodeComponent(this._diamondNode,"diamondLbl",s)},o.init=function(t){this._mapData=t,this._mapTogSpt.spriteFrame=l.SptFrame.getSpriteFrameByName("Map_Image_0"+t.id),this.updateData(),this._setUnlockMapInfo()},o.updateData=function(){var t=l.Account.getMapData(this._mapData.id);this._unlockBtnNode.active=!t.isUnlock},o._setUnlockMapInfo=function(){this._unlockBtnNode.active&&(-1===this._mapData.amount?(this._watchNode.active=!0,this._isVideoUnlock=!0):0!==this._mapData.amount&&(this._diamondNode.active=!0,this._diamondLbl.string=this._mapData.amount.toString()))},o._onUnlockButton=function(){var t=this,a={"当前窗口":"场景","场景名字":this._mapData.showName};if(this._isVideoUnlock)a["按钮类型"]="视频广告",l.Stats.customEvent("按钮事件",a,d.onStarted),this.showRewardAd({success:function(){t._unlockMap(),l.Stats.customEvent("按钮事件",a)},fail:function(){l.Stats.customEvent("按钮事件",a,d.onFailed)}});else{a["按钮类型"]="使用钻石";var n=this._mapData.amount;l.GameData.gameGold>=n?(l.GameData.gameGold-=n,l.Account.gameGold=-n,this._unlockMap(),l.Event.emit(u.EVENT_TYPE.UPDATE_GOLD),l.Stats.customEvent("按钮事件",a)):(l.Event.emit(u.EVENT_TYPE.FREE_GOLD),l.Stats.customEvent("按钮事件",a,d.onFailed,"钻石不足"))}},o._unlockMap=function(){var t=l.Account.getMapData(this._mapData.id);t.isUnlock=!0,l.Account.setMapData(this._mapData.id,t),l.GameData.curMapId=this._mapData.id,this._unlockBtnNode.active=!1,l.Event.emit(u.EVENT_TYPE.UPDATE_MAP_TOG)},n}(m))||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/ResultUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./Log.ts","./RDPlatformType.ts","./OptionsManager.ts","./RDStatisticsManager.ts","./RDPlatformManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var e,n,a,i,o,s,l,d,r,c,u,g,_,h,m,N,v,p,A;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,i=t.Label,o=t.Sprite,s=t.dragonBones,l=t.Tween,d=t.tween,r=t.v3},function(t){c=t.CommonUtils},function(t){u=t.Constants},function(t){g=t.Log},function(t){_=t.RDPlatformType},function(t){h=t.default},function(t){m=t.StageEventType,N=t.EventResult},function(t){v=t.RDPlatformManager},function(t){p=t.App},function(t){A=t.UIBase}],execute:function(){var D;n._RF.push({},"e6c732warhEh4Cgco5meoXE","ResultUI",void 0);var I=a.ccclass;t("ResultUI",I("ResultUI")(D=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this)._uiNode=null,e._titleNode=null,e._rankNode=null,e._getGoldNode=null,e._keyNode=null,e._getTipsNode=null,e._adOrRecvBtnNode=null,e._lookAdBtnNode=null,e._receiveBtnNode=null,e._getGoldLbl=null,e._multipleBtnNode=null,e._initUIPosY=0,e._isEndless=!1,e._rcmdSkinId=null,e._isWin=!1,e}e(n,t);var a=n.prototype;return a.onLoad=function(){this._uiNode=c.getNodeByName(this.node,"centerUI"),this._titleNode=c.getNodeByName(this._uiNode,"title"),this._rankNode=c.getNodeByName(this._uiNode,"rankNode"),this._adOrRecvBtnNode=c.getNodeByName(this.node,"adOrRecvBtn"),this._keyNode=c.getNodeByName(this.node,"keyNode"),this._getTipsNode=c.getNodeByName(this.node,"getTips"),this._getGoldNode=c.getNodeByName(this.node,"getGoldNode"),this._getGoldLbl=c.getNodeComponent(this._getGoldNode,"getGoldLbl",i),this._receiveBtnNode=c.registerButtonEvent(this.node,"receiveBtn",this._onReceiveButton,this),this._multipleBtnNode=c.registerButtonEvent(this._adOrRecvBtnNode,"multipleBtn",this._onMultipleGetButton,this),this._lookAdBtnNode=this.setOppoLookAdBtn(this._adOrRecvBtnNode),this.initBgOpacity(),this.initAdData()},a.show=function(){this._setResultInfo(),this._setUiData(!0),this.setShowAdData(!1),this.shwoAd(),p.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},a.shwoAd=function(){var t=this;if(p.Ads.hideBannerAd(),v.getInstance().platformType===_.OPPOGame)p.Ads.showNativeAd(this.oppoNativeAd,(function(e){return t._nativeAdScript=e}),"结算",null,!0);else{var e=h.getInstance().getConfigByKey("gameEnd_a",1),n=h.getInstance().getConfigByKey("gameEnd_b",1),a=h.getInstance().getConfigByKey("gameEnd_c",3),i=h.getInstance().getConfigByKey("gameEnd_d",1),o=p.GameData.gameCount>=e&&p.GameData.gameCount<=a&&(p.GameData.gameCount-e)%n==0,s=p.GameData.gameCount>a&&(p.GameData.gameCount-a)%i==0,l=o||s;g.log("结算概率",e,n,a,i,l,p.GameData.gameCount),l&&p.Ads.showInterstitialAd({type:1,nativeRand:o?1:0,levelId:p.GameData.gameCount})||p.Ads.showNativeAd(this.oppoNativeAd,(function(e){return t._nativeAdScript=e}),"结算",null,!0)||p.Ads.showBannerAd()}},a.getUIName=function(){return"结算"},a._setUiData=function(t){if(t){var e=[this._titleNode,this._rankNode,this._getTipsNode,this._keyNode,this._getGoldNode,this._adOrRecvBtnNode,this._receiveBtnNode];this.playScaleInAnim(e,this._receiveBtnNode);var n=p.Platform.sdk.isBtnFadeIn();this._multipleBtnNode.active=!n}p.Event.emit(u.EVENT_TYPE.CLEAR_MAP_INFO)},a._setResultInfo=function(){p.Account.isFirstGame&&(p.Account.isFirstGame=!1),this._setRankNode(),this._keyNode.active=!1;var t=1+p.GameData.curAICnt,e="Result_Title_"+t;c.getNodeComponent(this._titleNode,"nameSpt",o).spriteFrame=p.SptFrame.getSpriteFrameByName(e),this._isWin=0==p.GameData.curAICnt;var n=p.RankDataMgr.getPlayerRankData();p.Stats.stageRunning(n.rankId.toString(),p.RankDataMgr.getDataById(n.rankId).name,m.TOOLS,{ranking:"游戏排名 "+t.toString()}),p.GameData.curGetGold+=this._isWin?400:100+50*Math.trunc((5-p.GameData.curAICnt)/2),this._getGoldLbl.string=p.GameData.curGetGold.toString(),this._setRankData()},a._setRankNode=function(t){var e=this;void 0===t&&(t=!1);var n=p.RankDataMgr.getRankSptName(),a=p.RankDataMgr.getRankStarCnt(),l=c.getNodeComponent(this._rankNode,"bg",o),d="Challenger"==n,r=c.getNodeComponent(this._rankNode,"star",s.ArmatureDisplay),u=c.getNodeComponent(this._rankNode,"starLbl",i),g=(d?"wangzhe":a+"xing")+(t?"":"jingzhi");u.string=a,l.spriteFrame=p.SptFrame.getSpriteFrameByName("Rank_Image_"+n),u.node.active=d,this._showStarLblAnim(d),null==r||r.playAnimation(g,1),p.Platform.sdk.isBtnFadeIn()&&this.scheduleOnce((function(){e._multipleBtnNode.active=!0}),h.getInstance().getConfigByKey("fade_in_delay",500)/1e3)},a._showStarLblAnim=function(t){if(void 0===t&&(t=!1),t){var e=c.getNodeComponent(this._rankNode,"starLbl",i);l.stopAllByTarget(e.node),e.node.active=!0,d(e.node).to(.2,{scale:r(1.5,1.5,1.5)}).to(.1,{scale:r(1,1,1)})}},a._setRankData=function(){var t=p.RankDataMgr.getPlayerRankData();if(p.Stats.stageEnd(t.rankId.toString(),p.RankDataMgr.getDataById(t.rankId).name,this._isWin?N.onSuccess:N.onFailed),this._isWin){p.GameData.curLevel++,p.Account.level<p.GameData.curLevel&&(p.Account.level=p.GameData.curLevel),!(t.rankId>=p.RankDataMgr.getDataCount())&&t.rankId++,p.RankDataMgr.setPlayerRankData(t);c.getNodeComponent(this._keyNode,"keyLbl",i).string="+1",p.RankDataMgr.keyCnt+=1,this._keyNode.active=!0}this._setRankNode(this._isWin)},a._onReceiveButton=function(){var t=this;p.UI.isUIAnimPlaying()||(this._playScaleOutAnim((function(){p.GameData.curGetGold>0&&p.Event.emit(u.EVENT_TYPE.GOLD_ANIM,p.GameData.curGetGold),t._closeDialog()})),p.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"直接领取"}))},a._closeDialog=function(t){this.isOppoPlatform&&p.Ads.hideGameBannerAd(),this.unscheduleAllCallbacks(),p.UI.hideDialog(u.UI_DIALOG_NAME.GAME_RESULT),this._backToHome()},a._backToHome=function(){p.UI.hideDialog(u.UI_DIALOG_NAME.GAME),p.UI.showDialog(u.UI_DIALOG_NAME.COMMON),p.UI.showDialog(u.UI_DIALOG_NAME.MAIN,null,this._isWin),p.playBgm(),0==p.GameData.curAICnt&&p.UI.showDialog(u.UI_DIALOG_NAME.TREASURE_BOX,null,!0)},a._onMultipleGetButton=function(){var t=this,e={"当前窗口":this.getUIName(),"按钮类型":"三倍领取"};p.Stats.customEvent("按钮事件",e,N.onStarted),this.showRewardAd({success:function(){p.Stats.customEvent("按钮事件",e,N.onSuccess),t._playScaleOutAnim((function(){p.GameData.curGetGold>0&&p.Event.emit(u.EVENT_TYPE.GOLD_ANIM,2*p.GameData.curGetGold),t._closeDialog()}))},fail:function(){p.Stats.customEvent("按钮事件",e,N.onFailed)}})},a._playScaleOutAnim=function(t){var e=[this._titleNode,this._rankNode,this._getTipsNode,this._keyNode,this._getGoldNode,this._adOrRecvBtnNode,this._receiveBtnNode];this.playScaleOutAnim(e,t)},n}(A))||D);n._RF.pop()}}}));

System.register("chunks:///_virtual/MapMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./Utils.ts","./AppManager.ts","./Simulator.ts","./EnemyAIMgr.ts","./MercenaryCampMgr.ts","./PlayerMgr.ts","./BrickGroupMgr.ts"],(function(e){"use strict";var t,o,n,a,i,r,s,c,d,l,u,p,h,m,f,g,_,N,P;return{setters:[function(e){t=e.inheritsLoose,o=e.asyncToGenerator},function(e){n=e.cclegacy,a=e._decorator,i=e.Vec3,r=e.instantiate,s=e.v3,c=e.MeshRenderer,d=e.macro,l=e.Component},function(e){u=e.CommonUtils},function(e){p=e.Constants},function(e){h=e.Utils},function(e){m=e.App},function(e){f=e.Simulator},function(e){g=e.EnemyAIMgr},function(e){_=e.MercenaryCampMgr},function(e){N=e.PlayerMgr},function(e){P=e.BrickGroupMgr}],execute:function(){var y;n._RF.push({},"e72cb1DzjhAD5EsFeAqWEWQ","MapMgr",void 0);var v=a.ccclass;e("MapMgr",v("MapMgr")(y=function(e){function n(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this)._playerNode=null,t._playerComp=null,t._AIParentNode=null,t._curMapNode=null,t._isMapLoaded=!1,t._bricksPointNodes=[],t._buffPointNodes=[],t._wayPointNodes=[],t._BornPointNodes=[],t._MercenaryCampPointNodes=[],t}t(n,e);var a=n.prototype;return a.start=function(){this._playerNode=u.getNodeByName(this.node,"playerMgr"),this._playerComp=u.getNodeComponent(this.node,"playerMgr",N),this._AIParentNode=u.getNodeByName(this.node,"AIParentNode"),this._loadMap(!1),this._registerCustomEvent(!0)},a.initMapInfo=function(){this.unscheduleAllCallbacks();for(var e=u.getNodeByName(this.node,"soldierParentNode").children,t=e.length-1;t>=0;t--)m.Pool.putNode(e[t]);for(var o=this._AIParentNode.children,n=o.length-1;n>=0;n--)m.Pool.putNode(o[n]);for(var a=0;a<this._bricksPointNodes.length;a++){var i=this._bricksPointNodes[a].getComponent(P);null==i||i.resetData()}for(var r=0;r<this._buffPointNodes.length;r++){var s=this._buffPointNodes[r].getComponent(P);null==s||s.resetData()}for(var c=0;c<this._MercenaryCampPointNodes.length;c++){var d=u.getNodeComponent(this._MercenaryCampPointNodes[c],"MercenaryCamp",_);null==d||d.remove()}f.instance.clear()},a._registerCustomEvent=function(e){var t=e?"on":"off";m.Event[t](p.EVENT_TYPE.CHANGE_MAP,this._loadMap,this),m.Event[t](p.EVENT_TYPE.SET_AGENT_TARGET,this._setAgentTarget,this),m.Event[t](p.EVENT_TYPE.UPDATE_BRICK,this._updateBrick,this)},a._setAgentTarget=function(e,t,o){if(m.GameData.isInGame()){var n=h.random(1,100)<=t.pickUpPB[e-1]?this._getRandomBrickPoint(o):this._getRandomWayPoint();m.Event.emit(p.EVENT_TYPE.UPDATE_AGENT_TARGET,e,n)}},a._getRandomBrickPoint=function(e,t,o){void 0===t&&(t=50),void 0===o&&(o=!0);for(var n=Math.pow(t,2),a=null,r=[],s=0;s<this._bricksPointNodes.length;s++){var c=this._bricksPointNodes[s];if(!c)return;var d=this._bricksPointNodes[s].getComponent(P),l=i.squaredDistance(e,c.worldPosition);(o?d.isHasBrick&&l<n:!d.isHasBrick&&l<n)&&r.push(c)}if(r.length<=0)for(var u=0;u<this._bricksPointNodes.length;u++){var p=this._bricksPointNodes[u].getComponent(P);if(o?p.isHasBrick:!p.isHasBrick){a=this._bricksPointNodes[u];break}}else a=r[h.random(0,r.length-1)];return a},a._getRandomWayPoint=function(){return this._wayPointNodes[h.random(0,this._wayPointNodes.length-1)]},a._updateBrick=function(e){m.GameData.isInGame()&&this._getRandomBrickPoint(e,50,!1).getComponent(P).showBrick()},a._updateBuffPoint=function(){if(m.GameData.isInGame()){m.Event.emit(p.EVENT_TYPE.REMOVE_BUFF_POINT);for(var e=0;e<this._buffPointNodes.length;e++){this._buffPointNodes[e].getComponent(P).showBuff()}}},a._loadMap=function(e){var t=this;void 0===e&&(e=!0);m.Res.loadPrefab("map/Map1","prefab").then((function(o){(t._recycleMap(),t._curMapNode=r(o),t._curMapNode.parent=t.node,t._setMapMtl(),t._MercenaryCampPointNodes=u.getNodeByName(t._curMapNode,"MercenaryCampPoints").children,m.Event.emit(p.EVENT_TYPE.UPDATE_SKIN),t._loadResPoint(),t._isMapLoaded=!0,m.Event.emit(p.EVENT_TYPE.MAP_LOAD_FINISH),e||p.IS_DEBUG)||h.isNextDay((new Date).getTime(),m.Account.signInfo.time)&&m.UI.showDialog(p.UI_DIALOG_NAME.SIGN_IN)}))},a._getMapResPointJson=function(){var e=u.getNodeByName(this._curMapNode,"BricksPoints").children,t=[];e.forEach((function(e){var o=e.position,n=s(u.getDecimalDigits(o.x),u.getDecimalDigits(o.y),u.getDecimalDigits(o.z));t.push(n)}));var o=u.getNodeByName(this._curMapNode,"BuffPoints").children,n=[];o.forEach((function(e){var t=e.position,o=s(u.getDecimalDigits(t.x),u.getDecimalDigits(t.y),u.getDecimalDigits(t.z));n.push(o)}));var a=u.getNodeByName(this._curMapNode,"WayPoints").children,i=[];a.forEach((function(e){var t=e.position,o=s(u.getDecimalDigits(t.x),u.getDecimalDigits(t.y),u.getDecimalDigits(t.z));i.push(o)}));var r=u.getNodeByName(this._curMapNode,"BarrackNodes").children,c=[],d=[];r.forEach((function(e){var t=e.position,o=s(u.getDecimalDigits(t.x),u.getDecimalDigits(t.y),u.getDecimalDigits(t.z));c.push(o);var n=e.eulerAngles,a=s(u.getDecimalDigits(n.x),u.getDecimalDigits(n.y),u.getDecimalDigits(n.z));d.push(a)}));var l={brickPoints:t,wayPoints:i,buffPoints:n,barrackPoints:c,barrackPointRot:d};console.log(JSON.stringify(l))},a._loadResPoint=function(){var e=this,t=m.RDAsset.getAsset("MapResPointList").json,o=u.getNodeByName(this._curMapNode,"BricksPoints"),n=t.brickPoints;this._bricksPointNodes=[],n&&m.Res.loadPrefab("BrickGroup","prefab").then((function(t){for(var a=0;a<n.length;a++){var i=m.Pool.getNode(t,o),r=n[a];i.setPosition(r.x,r.y,r.z),e._bricksPointNodes.push(i);var s=u.getNodeComponent(i,i.name,P);null==s||s.loadBrickGroup()}}));var a=u.getNodeByName(this._curMapNode,"BuffPoints"),i=t.buffPoints;this._buffPointNodes=[],i&&m.Res.loadPrefab("buffPoint","prefab").then((function(t){for(var o=0;o<i.length;o++){var n=m.Pool.getNode(t,a),r=i[o];n.setPosition(r.x,r.y,r.z),e._buffPointNodes.push(n);var s=u.getNodeComponent(n,n.name,P);null==s||s.loadBuffPoint()}}));var r=u.getNodeByName(this._curMapNode,"WayPoints"),c=t.wayPoints;this._wayPointNodes=[],c&&m.Res.loadPrefab("wayPoint","prefab").then((function(t){for(var o=0;o<c.length;o++){var n=m.Pool.getNode(t,r),a=c[o];n.setPosition(a.x,a.y,a.z),e._wayPointNodes.push(n)}}));var d=u.getNodeByName(this._curMapNode,"BornPoints"),l=t.barrackPoints,p=t.barrackPointRot;this._BornPointNodes=[],l&&m.Res.loadPrefab("bornPoint","prefab").then((function(t){for(var o=0;o<l.length;o++){var n=m.Pool.getNode(t,d),a=l[o],i=p[o];n.setPosition(a.x,a.y,a.z),n.eulerAngles=s(i.x,i.y,i.z),e._BornPointNodes.push(n)}}))},a._setMapMtl=function(){var e=u.getRandomInteger(2,4);console.log("---------------map",e);var t=u.getNodeByName(this._curMapNode,"MapNode"),o=u.getNodeByName(this._curMapNode,"Plane"),n=u.getNodeByName(this._curMapNode,"BoxNodes").children;m.Res.loadTexture("map/map_"+e,"texture").then((function(e){u.getNodeComponent(t,t.name,c).material.setProperty("mainTexture",e)})),m.Res.loadTexture("map/map_plane_"+e,"texture").then((function(e){u.getNodeComponent(o,o.name,c).material.setProperty("mainTexture",e)})),m.Res.loadTexture("map/map_box_"+e,"texture").then((function(e){for(var t=0;t<n.length;t++){var o=n[t];u.getNodeComponent(o,o.name,c).material.setProperty("mainTexture",e)}}))},a._initBricks=function(){var e=o(regeneratorRuntime.mark((function e(){var t,o,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],o=0;o<this._bricksPointNodes.length;o++)t.push(o);for(n=h.getRandFromArr(t,200,!0),a=0;a<n.length;a++)this._bricksPointNodes[n[a]].getComponent(P).showBrick();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a._initObstacles=function(){for(var e=u.getNodeByName(this._curMapNode,"BoxNodes").children,t=0;t<e.length;t++){var o=e[t],n=s();o.worldRotation.getEulerAngles(n);var a=u.getNodeComponent(o,o.name,c).model.worldBounds,i=2*a.halfExtents.x,r=2*a.halfExtents.z;this._addBoxObstacle(o.worldPosition.clone(),i,r,!1,n.y)}for(var d=u.getNodeByName(this._curMapNode,"Edge_Obs").children,l=0;l<d.length;l++){var p=d[l],h=s();p.worldRotation.getEulerAngles(h);var m=u.getNodeComponent(d[0],d[0].name,c).model.worldBounds,f=2*m.halfExtents.x,g=2*m.halfExtents.z;this._addBoxObstacle(p.worldPosition.clone(),f,g,!1,h.y)}for(var _=u.getNodeByName(this._curMapNode,"Box_Obs").children,N=0;N<_.length;N++){var P=_[N],y=u.getNodeComponent(P,P.name,c).model.worldBounds,v=2*y.halfExtents.x,M=2*y.halfExtents.z;this._addBoxObstacle(y.center.clone(),v,M,!1)}},a._addBoxObstacle=function(e,t,o,n,a){var i=this;void 0===n&&(n=!1),void 0===a&&(a=0);var r=e,s=f.instance.addBoxObstacle(r,t,o,a).obsPointArr;n&&m.Res.loadPrefab("obsCube","prefab").then((function(e){for(var t=0;t<s.length;t++){var o=m.Pool.getNode(e,i._curMapNode),n=s[t];o.setWorldPosition(n.x,0,n.y)}}))},a._loadEnemyAI=function(){var e=o(regeneratorRuntime.mark((function e(){var t,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._randomColorType(),e.next=3,m.Res.loadPrefab("enemyAI","prefab").then((function(e){for(var n=m.GameData.curAICnt,a=0;a<n;a++){var i=m.Pool.getNode(e,o._AIParentNode),r=o._wayPointNodes[h.random(0,o._wayPointNodes.length-1)],s=o._BornPointNodes[a+1]?o._BornPointNodes[a+1].worldPosition.clone():o._wayPointNodes[h.random(0,o._wayPointNodes.length-1)].worldPosition.clone();i.setWorldPosition(s),i.getComponent(g).init(t[a],r,s)}}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a._randomColorType=function(){for(var e=[],t=m.RankDataMgr.getPlayerRankTeamType(),o=0;o<m.GameData.curAICnt+1;o++)o!=t&&e.push(o);return e=h.getRandFromArr(e,m.GameData.curAICnt,!0)},a._loadMercenaryCamp=function(){var e=o(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Res.loadPrefab("MercenaryCamp","prefab").then((function(e){for(var o=function(o){var n=m.Pool.getNode(e,t._MercenaryCampPointNodes[o]);n.setWorldPosition(t._MercenaryCampPointNodes[o].worldPosition.clone());var a=u.getNodeComponent(n,n.name,_);null==a||a.init(),m.GameData.mercenaryCampArr.push(a),t.scheduleOnce((function(){var e=u.getNodeComponent(n,"Stage",c).model.worldBounds,o=.7*e.halfExtents.x,a=.7*e.halfExtents.z;t._addBoxObstacle(e.center.clone(),o,a,!1)}),.5)},n=0;n<t._MercenaryCampPointNodes.length;n++)o(n)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.update2=function(e){this._isMapLoaded&&m.GameData.isInGame()&&f.instance.run(e)},a.enterGameScene=function(){this.initMapInfo(),this._initObstacles(),this._playerComp.init(this._BornPointNodes[0].worldPosition.clone()),this._initBricks(),this._loadEnemyAI(),this._loadMercenaryCamp(),this.scheduleOnce((function(){var e=m.UI.getDialogScript(p.UI_DIALOG_NAME.LOADING);null==e||e.finishLoading(),m.Stats.customEvent("进入游戏",{}),m.playBgm(!0)}),1)},a.startGame=function(){var e=this;this._playerComp.addStartBuff(),this.schedule((function(){e._updateBuffPoint()}),20,d.REPEAT_FOREVER,20)},a.pauseGame=function(){this._playerComp.pauseGame()},a.continueGame=function(){this._playerComp.continueGame()},a.gameOver=function(){},a.gameWin=function(){this._playerComp.gameWin()},a.clearMapInfo=function(){this.initMapInfo(),this._setMapMtl()},a.restartGame=function(){},a._recycleMap=function(){this._curMapNode&&(this._isMapLoaded=!1,this.clearMapInfo(),this._curMapNode.destroy(),this._curMapNode=null)},a.onDestroy=function(){this._registerCustomEvent(!1)},n}(l))||y);n._RF.pop()}}}));

System.register("chunks:///_virtual/BuffRcmdUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./Utils.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var e,n,s,i,r,o,a,c,u,f,d;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,s=t._decorator,i=t.Sprite,r=t.Label},function(t){o=t.CommonUtils},function(t){a=t.Constants},function(t){c=t.Utils},function(t){u=t.EventResult},function(t){f=t.App},function(t){d=t.UIBase}],execute:function(){var m;n._RF.push({},"e8b22rwnZBLUJQP5gH+BZdK","BuffRcmdUI",void 0);var h=s.ccclass;t("BuffRcmdUI",h("BuffRcmdUI")(m=function(t){function n(){for(var e,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))||this)._titleNode=null,e._rcmdNode=null,e._rcmdItems=[],e._buffArr=[],e._receiveBtnNode=null,e._resetBtnNode=null,e._lookAdBtnNode=null,e}e(n,t);var s=n.prototype;return s.onLoad=function(){this._titleNode=o.getNodeByName(this.node,"title"),this._rcmdNode=o.getNodeByName(this.node,"RcmdNode"),this._lookAdBtnNode=this.setOppoLookAdBtn(this._rcmdNode,"lookAdBtn",!1),this._lookAdBtnNode||(o.getNodeByName(this._rcmdNode,"lookAdBtn").active=!1);var t=o.getNodeByName(this.node,"buttonNode");this._receiveBtnNode=o.registerButtonEvent(t,"receiveBtn",this._onReceiveButton,this),this._resetBtnNode=o.registerButtonEvent(t,"resetBtn",this._onResetButton,this),this._registerBuffButtons(),this.initBgOpacity(),this.initAdData()},s.show=function(){this._updateBuffItems(),this.playScaleInAnim([].concat(this._titleNode.children,this._rcmdNode.children,[this._resetBtnNode,this._receiveBtnNode])),this.setShowAdData()},s.getUIName=function(){return"BUFF选择"},s._registerBuffButtons=function(){this._rcmdItems=[];for(var t=0;t<this._rcmdNode.children.length;t++){var e=this._rcmdNode.children[t];"lookAdBtn"!=e.name&&this._rcmdItems.push(e)}for(var n=0;n<this._rcmdItems.length;n++){var s=this._rcmdItems[n];o.registerButtonEvent(s,s.name,this._onBuffItemButton,this)}},s._updateBuffItems=function(){this._updateBuffArr();for(var t=0;t<this._rcmdItems.length;t++){var e=this._rcmdItems[t],n=(o.getNodeComponent(e,e.name,i),o.getNodeComponent(e,"buffSpt",i)),s=o.getNodeComponent(e,"nameSpt",i),a=o.getNodeComponent(e,"nameLabel",r),c=o.getNodeByName(e,"lockNode");n.spriteFrame=f.SptFrame.getSpriteFrameByName("buff_image_"+this._buffArr[t].type),s.spriteFrame=f.SptFrame.getSpriteFrameByName("buffRcmdUI_Word_Buff"+this._buffArr[t].level),c.active=2==this._buffArr[t].level,a.string=this._getBuffName(this._buffArr[t])}},s._updateBuffArr=function(){this._buffArr=[],f.GameData.startBuffArr=[];for(var t=c.random(0,this._rcmdItems.length-1),e=[],n=0;n<a.BUFF_TYPE.LENGTH;n++)n!=a.BUFF_TYPE.INVINCIBLE&&e.push(n);for(var s=c.getRandFromArr(e,this._rcmdItems.length,!0),i=0;i<this._rcmdItems.length;i++)this._buffArr.push({type:s[i],level:i==t?2:1})},s._getBuffName=function(t){var e="";switch(t.type){case 0:e="移动速度x"+(2==t.level?"1.6":"1.4");break;case 1:e="无敌";break;case 2:e="收取数量+"+(2==t.level?"2":"1");break;case 3:e="视野范围x"+(2==t.level?"1.5":"1.3");break;case 4:e="拾取范围x"+(2==t.level?"1.5":"1.3");break;case 5:e="砖块x"+(2==t.level?"10":"5");break;default:e=""}return e},s._onBuffItemButton=function(t){var e=this,n=t.target,s=o.getNodeByName(n,"lockNode").active,i=this._rcmdItems.indexOf(n);if(s){var r={"当前窗口":this.getUIName(),"按钮类型":"解锁2级BUFF","BUFF类型":this._buffArr[i].type};f.Stats.customEvent("按钮事件",r,u.onStarted),this.showRewardAd({success:function(){o.getNodeByName(n,"lockNode").active=!1,f.GameData.startBuffArr.push(e._buffArr[i]),e._playScaleOutAnim((function(){e._readyStartGame()}))},fail:function(){f.Stats.customEvent("按钮事件",r,u.onFailed)}})}else f.GameData.startBuffArr.push(this._buffArr[i]),this._playScaleOutAnim((function(){e._readyStartGame()}))},s._onReceiveButton=function(){var t=this;if(!f.UI.isUIAnimPlaying()){var e={"当前窗口":this.getUIName(),"按钮类型":"我全都要"};f.Stats.customEvent("按钮事件",e,u.onStarted),this.showRewardAd({success:function(){f.GameData.startBuffArr=t._buffArr,t._playScaleOutAnim((function(){t._readyStartGame()})),f.Stats.customEvent("按钮事件",e,u.onSuccess)},fail:function(){f.Stats.customEvent("按钮事件",e,u.onFailed)}})}},s._onResetButton=function(){var t=this;if(!f.UI.isUIAnimPlaying()){var e={"当前窗口":this.getUIName(),"按钮类型":"换一批"};f.Stats.customEvent("按钮事件",e,u.onStarted),this.showRewardAd({success:function(){t._updateBuffItems()},fail:function(){f.Stats.customEvent("按钮事件",e,u.onFailed)}})}},s._readyStartGame=function(){f.GameData.gameCount++,f.Event.emit(a.EVENT_TYPE.QUICK_START)},s._playScaleOutAnim=function(t){var e=[].concat(this._titleNode.children,this._rcmdNode.children,[this._resetBtnNode,this._receiveBtnNode]);this.playScaleOutAnim(e,(function(){f.UI.hideDialog(a.UI_DIALOG_NAME.BUFF_RECOMMEND),t&&t()}))},n}(d))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingletonBase2.ts","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var i,s,e,u,a,n,o,c,d;return{setters:[function(t){i=t.inheritsLoose,s=t.createClass},function(t){e=t.cclegacy,u=t.find,a=t.Canvas,n=t.tween},function(t){o=t.SingletonBase},function(t){c=t.Constants},function(t){d=t.App}],execute:function(){e._RF.push({},"ea0d4BZ5QZPuIMzkrSgiG9N","AuditionMgr",void 0);t("AuditionMgr",function(t){function e(){for(var i,s=arguments.length,e=new Array(s),u=0;u<s;u++)e[u]=arguments[u];return(i=t.call.apply(t,[this].concat(e))||this)._canvasComp=null,i._nextIdx=-1,i._lastIdx=-1,i._pauseTime=0,i._isPause=!1,i._volumeTween=null,i}i(e,t);var o=e.prototype;return o.init=function(){d.GameData.curAuditionIdx=c.IS_DEBUG?1:0,this._registerCustomEvent(!0)},o.auditionMusic=function(t){void 0===t&&(t=!1),d.Audio.stopMusic();var i=t&&-1!==this._nextIdx?this._nextIdx:d.GameData.curAuditionIdx;d.GameData.curAuditionIdx=i;var s=d.MusicDataMgr.getDataByIndex(i),e=d.GameData.curAuditionName=s.getMusicFilename(t);d.GameData.isLoadingMusic=d.Audio.playMusicByUrl(e,!t&&s.isUrl(),t?0:1,0,t?"audio/auditionMusic/":""),d.Event.emit(c.EVENT_TYPE.UPDATE_MUSIC,this._lastIdx),this._lastIdx=d.GameData.curAuditionIdx,this._isPause=!1,t&&this._setLoopMusicData()},o.pauseAudition=function(){this._pauseTime=d.Audio.getMusicCurrentTime(),this._isPause=!0,d.Audio.stopMusic()},o.resumeAudition=function(){this._isPause=!1,d.Audio.resumeMusic(1,this._pauseTime)},o._registerCustomEvent=function(t){var i=t?"on":"off";d.Event[i](c.EVENT_TYPE.LOOP_MUSIC,this._loopAuditionMusic,this),d.Event[i](c.EVENT_TYPE.STOP_LOOP_MUSIC,this._stopLoopMusic,this),d.Event[i](c.EVENT_TYPE.ENTER_GAME,this._resetData,this)},o._loopAuditionMusic=function(){this.auditionMusic(!0),!this._canvasComp&&(this._canvasComp=u("Canvas").getComponent(a));var t=d.MusicDataMgr.getDataByIndex(d.GameData.curAuditionIdx);this._canvasComp.scheduleOnce(this._loopAuditionMusic.bind(this),t.audEndTime-t.audStartTime)},o._stopLoopMusic=function(){var t;null===(t=this._canvasComp)||void 0===t||t.unscheduleAllCallbacks()},o._resetData=function(){var t;this._nextIdx=-1,this._lastIdx=-1,this._pauseTime=0,this._isPause=!1,null===(t=this._volumeTween)||void 0===t||t.stop(),this._stopLoopMusic(),d.GameData.curAuditionIdx=c.IS_DEBUG?1:0,d.GameData.curAuditionName="",d.GameData.isLoadingMusic=!1,d.Audio.stopMusic()},o._setLoopMusicData=function(){this._volumeTween=n({volume:0}).to(2,{volume:1},{onUpdate:function(t){d.Audio.setMusicVolume(t.volume)}}).start(),c.IS_DEBUG?this._nextIdx=d.GameData.curAuditionIdx%c.AUDITION_LOOP_COUNT+1:this._nextIdx=(d.GameData.curAuditionIdx+1)%c.AUDITION_LOOP_COUNT},s(e,[{key:"pauseTime",get:function(){return this._pauseTime}},{key:"isPause",get:function(){return this._isPause}}]),e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/RDAssetManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./RDBundleManager.ts","./Dictionary.ts"],(function(e){"use strict";var t,n,r,s,a,i,o,c,u,l,d,f,h;return{setters:[function(e){t=e.asyncToGenerator},function(e){n=e.cclegacy,r=e.assetManager,s=e.resources,a=e.Texture2D,i=e.JsonAsset,o=e.TextAsset,c=e.TextureCube,u=e.AudioClip,l=e.Prefab},function(e){d=e.Log},function(e){f=e.RDBundleManager},function(e){h=e.Dictionary}],execute:function(){n._RF.push({},"eb7eeSkQ29IiKmroLwWLCgw","RDAssetManager",void 0);var g=e("RDAssetManager",function(){function e(){this._cacheAssetDic=new h,this._cacheBundleDic=new h,this._loadingResInfo=Object.create(null)}e.getInstance=function(){return this._instance};var n=e.prototype;return n.loadResDirOrArray=function(e,t,n,r,a){var i=this,o=Array.isArray(e)?"load":"loadDir",c=0;d.log("loadResDirOrArray=========",n);var u=function(n){n[o](e,t,(function(e,t,n){if(a){var r=e/t;a(c=r>c?r:c,n)}}),(function(e,t){e?console.warn(JSON.stringify(e)):(t.forEach((function(e){return i.addAsset(e.name?e.name:e.data.name,e,n)})),null==r||r(t))}))};n?f.getInstance().loadBundle(n).then((function(e){u(e)})).catch((function(){u(s)})):u(s)},n.loadPrefab=function(){var e=t(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n="resources"),e.next=3,f.getInstance().loadBundle(n);case 3:return r=e.sent,e.abrupt("return",this._loadAsset(r,t,l));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.loadImage=function(){var e=t(regeneratorRuntime.mark((function e(t,n,r){var s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!1),void 0===r&&(r="resources"),s=function(e){var t=new a;return t.image=e,t},e.next=5,f.getInstance().loadBundle(r);case 5:return i=e.sent,e.abrupt("return",this._loadAsset(i,t,a,s,n));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.loadTexture=function(){var e=t(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n="resources"),e.next=3,f.getInstance().loadBundle(n);case 3:return r=e.sent,e.abrupt("return",this._loadAsset(r,t+"/texture",a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.loadJsonAsset=function(){var e=t(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n="resources"),e.next=3,f.getInstance().loadBundle(n);case 3:return r=e.sent,e.abrupt("return",this._loadAsset(r,t,i));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.loadTextAsset=function(){var e=t(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n="resources"),e.next=3,f.getInstance().loadBundle(n);case 3:return r=e.sent,e.abrupt("return",this._loadAsset(r,t,o));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.loadSkybox=function(){var e=t(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n="resources"),e.next=3,f.getInstance().loadBundle(n);case 3:return r=e.sent,e.abrupt("return",this._loadAsset(r,t+"/textureCube",c));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.loadAudioClip=function(){var e=t(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n="resources"),console.log("加载AudioClip",t,n),e.next=4,f.getInstance().loadBundle(n);case 4:return r=e.sent,e.abrupt("return",this._loadAsset(r,t,u));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n._loadAsset=function(e,t,n,s,a){var i=this;void 0===a&&(a=!1);var o=this.getAsset(t);if(o)return Promise.resolve(o);if(this._loadingResInfo[t])return this._loadingResInfo[t];var c=new Promise((function(o,c){var u=function(r,a){if(r)return console.error("加载"+n.name+"出错",JSON.stringify(r)),void c(r);s&&(a=s(a)),i.addAsset(t,a,e),o(a),delete i._loadingResInfo[t]};a?r.loadRemote(t,u):e.load(t,n,u)}));return this._loadingResInfo[t]=c},n.getAsset=function(e){return this._cacheAssetDic.get(e)},n.hasAsset=function(e){return this._cacheAssetDic.containsKey(e)},n.addAsset=function(e,t,n){t&&t.isValid?(t.addRef(),this._cacheAssetDic.set(e,t),this._cacheBundleDic.set(e,n)):console.error("添加资源失败, 资源不可用:"+e)},n.releaseAsset=function(e,t){var n,r=this.getAsset(e);r&&(r.decRef(),delete this._cacheAssetDic[e],0===r.refCount&&(null===(n=this._cacheBundleDic.get(e))||void 0===n||n.release(e,t)))},n.removeAsset=function(e){this._cacheAssetDic.containsKey(e)||(this._cacheAssetDic.get(e).decRef(!1),this._cacheAssetDic.remove(e))},n.clearCache=function(){for(var e=0,t=this._cacheAssetDic.length;e<t;e++){var n=this._cacheAssetDic[e];r.releaseAsset(n),n.destroy()}this._cacheAssetDic.clear()},e}());g.TAG="BenzAssetManager",g.MAX_RETRY_COUNT=3,g._instance=new g,n._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./Log.ts","./RDStatisticsManager.ts","./AdsManager.ts","./RDPlatformManager.ts","./AppManager.ts","./UIBase.ts","./GameInit.ts"],(function(s){"use strict";var o,e,t,n,a,r,i,c,u,g,l,d,p,_,f,h,v,m,P,I,A,y,D;return{setters:[function(s){o=s.inheritsLoose},function(s){e=s.cclegacy,t=s._decorator,n=s.ProgressBarComponent,a=s.game,r=s.sys,i=s.SpriteFrame,c=s.Prefab,u=s.JsonAsset,g=s.director,l=s.find},function(s){d=s.CommonUtils},function(s){p=s.Constants},function(s){_=s.Log},function(s){f=s.RDStatisticsManager,h=s.CustomEventID,v=s.RDStatisticsMgr,m=s.EventResult},function(s){P=s.AdsManager},function(s){I=s.RDPlatformManager},function(s){A=s.App},function(s){y=s.UIBase},function(s){D=s.GameInit}],execute:function(){var S,b,R;e._RF.push({},"ebfd3du0FFGdqzrhH0vnMwN","Loading",void 0);var N=t.ccclass;t.property,s("Loading",N("Loading")((R=b=function(s){function e(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(o=s.call.apply(s,[this].concat(t))||this)._loadProgress=null,o._subpackageProgress=.8,o}o(e,s);var t=e.prototype;return t.onLoad=function(){var s=d.getNodeByName(this.node,"progressNode");this._loadProgress=d.getNodeComponent(s,"loadProgress",n),this._loadProgress.progress=0,this._initData(),this.adaptAdLayout(s,160),a.addPersistRootNode(this.node),A.Event.on(p.EVENT_TYPE.MAP_LOAD_FINISH,this._removeLoadingNode,this)},t._initData=function(){I.getInstance().initPlatfom(),this._loadSubpackage()},t._loadSubpackage=function(){var s=this;console.log("开始分包===="),I.getInstance().LoadSubpackageTask((function(o){var t=o.progress/100*s._subpackageProgress;s._loadProgress.progress=t<.3?.3:t,console.log(e.TAG,"分包加载中..."+o.progress)}),(function(){s._loadProgress.progress=s._subpackageProgress,f.getInstance().customEvent(h.custom_user_subpackages,{steps:"分包成功"}),v.login(),new D((function(){s.showPrivacyDialog()}))}),(function(s){f.getInstance().customEvent(h.custom_user_subpackages,{steps:"分包失败"}),console.log(e.TAG,"分包加载失败!"+JSON.stringify(s))}))},t.showPrivacyDialog=function(){var s=this;console.log(e.TAG,"是否已经同意隐私政策!",I.getInstance().isShowPrivacy()),!p.IS_DEBUG||!r.isNative&&!A.Account.isPrivacyAgree&&I.getInstance().isShowPrivacy()?A.UI.showDialog("adUI/privacyPolicy",null,!1,(function(o){s._loadResource()})):this._loadResource()},t._loadResource=function(){this._loadSpriteFrame()},t._loadSpriteFrame=function(){var s=this;console.log("加载精灵==="),A.RDAsset.loadResDirOrArray("ui/",i,"texture",(function(){f.getInstance().customEvent(h.custom_churn_load,{type:"加载精灵成功"}),s._loadPrefabResource()}),(function(o){var e=s._subpackageProgress;s._loadProgress.progress=e+o*(1-e)/2}))},t._loadPrefabResource=function(){var s=this;console.log("加载预制体==="),this._subpackageProgress=this._loadProgress.progress;A.RDAsset.loadResDirOrArray(["prefab/ui/commonUI","prefab/ui/mainUI","prefab/ui/loadingUI","prefab/ui/gameUI"],c,"resources",(function(){f.getInstance().customEvent(h.custom_churn_load,{type:"加载预制体成功"}),s._loadJsonData()}),(function(o){var e=s._subpackageProgress,t=e+o*(1-e);t<=.99&&(s._loadProgress.progress=t)}))},t._loadJsonData=function(){var s=this;A.RDAsset.loadResDirOrArray("data/",u,"resources",(function(){s._loadProgress.progress=1,f.getInstance().customEvent(h.custom_churn_load,{type:"加载数据表成功"}),P.getInstance().hideBannerAd(),s._gotoGame()}))},t._gotoGame=function(){var s=this;A.initLocalData(),v.login(m.onSuccess),g.loadScene("game",(function(o,e){I.getInstance().isShowNativeSplash()&&s.showSplash()}))},t.showSplash=function(){_.log("开启原生开屏广告");var s=l("Canvas");f.getInstance().customEvent(h.custom_churn_native_splash,{steps:"开启原生开屏"}),P.getInstance().showNativeSplash(s,(function(){_.log("关闭原生开屏广告"),P.getInstance().hideNativeAd(s,"nativeSplashADPrefab"),f.getInstance().customEvent(h.custom_churn_native_splash,{steps:"正常原生开屏"})}),null,null)},t._removeLoadingNode=function(){a.removePersistRootNode(this.node),this.node.destroy(),A.Event.off(p.EVENT_TYPE.MAP_LOAD_FINISH,this._removeLoadingNode,this)},e}(y),b.TAG="Loading",S=R))||S);e._RF.pop()}}}));

System.register("chunks:///_virtual/MainUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./SpriteFrameManager.ts","./RDCommand.ts","./Utils.ts","./RDStatisticsManager.ts","./AdsManager.ts","./AppManager.ts","./UIBase.ts","./ListView.ts","./SkinItem.ts"],(function(t){"use strict";var e,n,o,a,i,s,r,d,l,_,g,h,u,N,m,I,c,p,D,f,v,B,E;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,a=t.Button,i=t.ScrollView,s=t.sys,r=t.Sprite,d=t.dragonBones,l=t.Label,_=t.v3,g=t.SkeletalAnimation,h=t.MeshRenderer},function(t){u=t.CommonUtils},function(t){N=t.Constants},function(t){m=t.SpriteFrameManager},function(t){I=t.RDCommand},function(t){c=t.Utils},function(t){p=t.EventResult},function(t){D=t.AdsManager},function(t){f=t.App},function(t){v=t.UIBase},function(t){B=t.ListView},function(t){E=t.SkinItem}],execute:function(){var A;n._RF.push({},"ed2fcx841dPDrvu65jMXtp0","MainUI",void 0);var S=o.ccclass,k=300;t("MainUI",S("MainUI")(A=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this)._signInBtnNode=null,e._desktopBtnNode=null,e._rankNode=null,e._soldierInfoNode=null,e._damageInfoNode=null,e._bloodInfoNode=null,e._lookAdBtnNode=null,e._redDotNode=null,e._clickTimes=0,e._playerParentNode=null,e._skinScrollView=null,e._listViewComp=null,e._listAdIdx=-1,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this._signInBtnNode=u.getNodeByName(this.node,"signInBtn"),this._redDotNode=u.getNodeByName(this._signInBtnNode,"redDot"),this._signInBtnNode.on(a.EventType.CLICK,this._onSignInButton,this),u.getNodeByName(this.node,"settingBtn").on(a.EventType.CLICK,this._onSettingButton,this),this._desktopBtnNode=u.getNodeByName(this.node,"desktopBtn"),this._desktopBtnNode.on(a.EventType.CLICK,this._onDesktopButton,this);u.registerButtonEvent(this.node,"treasureBtn",this._onTreasureButton,this);this._setSignBtnVisible(),this._setOppoMoreGameButton();u.registerButtonEvent(this.node,"startNode",this._readyStartGame,this);this._rankNode=u.getNodeByName(this.node,"rankNode"),this._soldierInfoNode=u.getNodeByName(this.node,"soldierInfoNode"),this._damageInfoNode=u.getNodeByName(this._soldierInfoNode,"damageInfo"),this._bloodInfoNode=u.getNodeByName(this._soldierInfoNode,"bloodInfo");u.registerButtonEvent(this._damageInfoNode,"damageBtn",this._upgradeDamageBtn,this),u.registerButtonEvent(this._bloodInfoNode,"bloodBtn",this._upgradeBloodBtn,this);this._playerParentNode=u.getNodeByName(this.node,"playerParentNode"),this._skinScrollView=u.getNodeComponent(this.node,"skinListScrollView",i),this._listViewComp=this._skinScrollView.getComponent(B),this.initBgOpacity(),this.initOppoNativeAd(),this.alignOppoNativeAd(this._listViewComp.node,0);var t=u.getNodeByName(this._bgCanvasNode,"bgStar");this._playBgAnimation(t)},o.show=function(t){void 0===t&&(t=!1),this._bgCanvasNode.active=!0,this.showUICnt++,f.GameData.isInHome=!0,this._registerCustomEvent(!0);var e=f.Platform.isBtnFadeIn();this._listViewComp.itemCnt=f.SkinDataMgr.getDataCount(),this._listViewComp.scrollTo(f.SkinDataMgr.getCurrentSkin()-(e?1:3));var n=c.isNextDay((new Date).getTime(),f.Account.signInfo.time);this._setRedDotVisible(n),this._updateRankInfo(),this._updateRankNode(t||1==this.showUICnt),this._setDesktopBtnInfo(),this._showNativeAd(),f.Stats.customEvent("显示窗口",{"当前窗口":"主界面"})},o._readyStartGame=function(){f.UI.hideDialog(N.UI_DIALOG_NAME.COMMON),f.UI.hideDialog(N.UI_DIALOG_NAME.MAIN),f.UI.showDialog(N.UI_DIALOG_NAME.BUFF_RECOMMEND);var t=f.RankDataMgr.getPlayerRankData();f.Stats.stageStart(t.rankId.toString(),f.RankDataMgr.getDataById(t.rankId).name)},o.hide=function(){this._bgCanvasNode.active=!1,this._registerCustomEvent(!1)},o._showPopupDialog=function(){1===this.showUICnt&&(c.isNextDay((new Date).getTime(),f.Account.signInfo.time)&&f.UI.showDialog(N.UI_DIALOG_NAME.SIGN_IN))},o._registerCustomEvent=function(t){var e=t?"on":"off";f.Event[e](N.EVENT_TYPE.UPDATE_SIGN_BTN,this._setSignBtnVisible,this),f.Event[e](N.EVENT_TYPE.SHOW_NATIVE_AD,this._showNativeAd,this),f.Event[e](N.EVENT_TYPE.UPDATE_SKIN,this._setPlayerNode,this),f.Event[e](N.EVENT_TYPE.UPDATE_RED_DOT,this._setRedDotVisible,this)},o._setRedDotVisible=function(t){this._redDotNode.active=t},o._setSignBtnVisible=function(){this._signInBtnNode.active=f.Account.signInfo.count<N.TOTAl_SIGN_IN_DAYS},o._setOppoMoreGameButton=function(){var t=u.getNodeByName(this.node,"moreGame");if(t.active=!1,f.Platform.isMoreGameBtn()){var e=u.getNodeByName(this.node,"moreGameBtn");s.isNative&&(e.getComponent(r).spriteFrame=m.getInstance().getSpriteFrameByName("Main_Button_MoreGame_oppo")),u.registerButtonEvent(t,"moreGameBtn",(function(){f.Ads.showGamePortalAd()})),t.active=!0}},o._updateRankNode=function(t){var e=f.RankDataMgr.getRankSptName(),n=f.RankDataMgr.getRankStarCnt(),o=u.getNodeComponent(this._rankNode,"bg",r),a=u.getNodeComponent(this._rankNode,"star",d.ArmatureDisplay),i=u.getNodeComponent(this._rankNode,"starLbl",l);o.spriteFrame=f.SptFrame.getSpriteFrameByName("Rank_Image_"+e),null==a||a.playAnimation("Challenger"==e?"wangzhejingzhi":n+"xingjingzhi",1),i.string=n,i.node.active="Challenger"==e},o._showNativeAd=function(){var t=this;s.isNative?D.getInstance().showBannerAd():(this.showAdvertisement(!1,!0,!1),setTimeout((function(){var e;if((null===(e=t._nativeAdScript)||void 0===e?void 0:e.isVisible())&&f.Platform.isShowNativeAd(!0)){f.GameData.isCanShowAd=!0;var n=f.SkinDataMgr.getCurrentSkin();t._listViewComp.itemCnt=f.SkinDataMgr.getDataCount()+1,t._listAdIdx=n+(n+3>=f.SkinDataMgr.getDataCount()?-1:1),t._listViewComp.updateAll()}}),1e3))},o._upgradeDamageBtn=function(){var t=f.RankDataMgr.getPlayerRankData(),e={"当前窗口":"首页","升级小兵攻击":t.damageLevel,"按钮类型":"使用钻石"};f.Account.gameGold>=300?(f.Account.gameGold-=300,t.damageLevel++,f.RankDataMgr.setPlayerRankData(t),this._updateRankInfo(!0,1),f.Stats.customEvent("按钮事件",e)):(f.Event.emit(N.EVENT_TYPE.FREE_GOLD),f.Stats.customEvent("按钮事件",e,p.onFailed,"钻石不足"))},o._upgradeBloodBtn=function(){var t=f.RankDataMgr.getPlayerRankData(),e={"当前窗口":"首页","升级小兵血量":t.HpLevel,"按钮类型":"使用钻石"};f.Account.gameGold>=300?(f.Account.gameGold-=300,t.HpLevel++,f.RankDataMgr.setPlayerRankData(t),this._updateRankInfo(!0,2),f.Stats.customEvent("按钮事件",e)):(f.Event.emit(N.EVENT_TYPE.FREE_GOLD),f.Stats.customEvent("按钮事件",e,p.onFailed,"钻石不足"))},o._updateRankInfo=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=1);var n=u.getNodeComponent(this._damageInfoNode,"nameLabel",l),o=u.getNodeComponent(this._damageInfoNode,"valueLabel",l),a=u.getNodeComponent(this._bloodInfoNode,"nameLabel",l),i=u.getNodeComponent(this._bloodInfoNode,"valueLabel",l);n.string="lv: "+f.RankDataMgr.getPlayerRankData().damageLevel,o.string=k.toString(),a.string="lv: "+f.RankDataMgr.getPlayerRankData().HpLevel,i.string=k.toString();var s=1==e?this._damageInfoNode:this._bloodInfoNode;t&&f.Event.emit(N.EVENT_TYPE.PLAY_UPGRADE_EFFECT,s,_(0,40,0))},o.onSkinItemRender=function(t,e){var n=f.GameData.isCanShowAd,o=t.getComponent(E),a=f.SkinDataMgr.getDataByIndex(n&&e>this._listAdIdx?e-1:e),i=e==this._listAdIdx&&n;o.init(a,i,i?this._nativeAdScript:null)},o._setPlayerNode=function(){var t=this;f.Res.loadPrefab("leader","prefab").then((function(e){t._playerParentNode.children[1]&&f.Pool.putNode(t._playerParentNode.children[1]);var n=f.Pool.getNode(e,t._playerParentNode),o=n.getComponent(g);null==o||o.crossFade("Idle"),t._loadCap(n)}))},o._loadCap=function(t){var e=f.SkinDataMgr.getCurrentSkin()>0&&f.SkinDataMgr.getCurrentSkin()<3;f.Res.loadTexture("skin/player_new/player_0"+(e?"_"+f.SkinDataMgr.getCurrentSkin().toString():""),"texture").then((function(e){u.getNodeComponent(t,"js",h).material.setProperty("mainTexture",e)})),f.Res.loadPrefab("playerCap/cap_"+f.SkinDataMgr.getCurrentSkin(),"prefab").then((function(e){var n=u.getNodeByName(t,"cp Socket");n.destroyAllChildren();f.Pool.getNode(e,n)}))},o._setDesktopBtnInfo=function(){this._desktopBtnNode.active=!f.Platform.HasShortcutInstalled(),2===this.showUICnt&&this._desktopBtnNode.active&&this._onDesktopButton()},o._onSignInButton=function(){f.UI.showDialog(N.UI_DIALOG_NAME.SIGN_IN),this._dealWithInter()},o._onTreasureButton=function(){f.UI.showDialog(N.UI_DIALOG_NAME.TREASURE_BOX),this._dealWithInter()},o._onDrawButton=function(){f.UI.showDialog(N.UI_DIALOG_NAME.TURNTABLE)},o._onMapButton=function(){f.UI.showDialog(N.UI_DIALOG_NAME.MAP_SELECT)},o._onSettingButton=function(){f.UI.showDialog(N.UI_DIALOG_NAME.SETTING),this._dealWithInter()},o._onAchievementButton=function(){f.UI.showDialog(N.UI_DIALOG_NAME.ACHIEVEMENT)},o._onLevelButton=function(){f.UI.showDialog(N.UI_DIALOG_NAME.LEVELUI)},o._onSkinButton=function(){f.UI.showDialog(N.UI_DIALOG_NAME.SKIN)},o._onDesktopButton=function(){f.Platform.sendData(I.CMD_ADDSHORTCUT,{success:function(){},fail:function(){}})},o._dealWithInter=function(){D.getInstance().showInterstitialAd({type:0})},n}(v))||A);n._RF.pop()}}}));

System.register("chunks:///_virtual/constant-power.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ee933on12dEWK3GaQ9EQejW","constant-power",void 0);var n=function(){};n.POWER_COUNT="powerCount",n.POWER_LAST_GET_TIME="powerLastGetTime";t("POWER",n);e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts","./UIBase.ts"],(function(s){"use strict";var e,t,o,r,i,n,a,d,h;return{setters:[function(s){e=s.inheritsLoose},function(s){t=s.cclegacy,o=s._decorator,r=s.ProgressBar,i=s.Node},function(s){n=s.CommonUtils},function(s){a=s.Constants},function(s){d=s.App},function(s){h=s.UIBase}],execute:function(){var _;t._RF.push({},"efba82jyEZB6pys+v4Twryk","LoadingUI",void 0);var g=o.ccclass;s("LoadingUI",g("LoadingUI")(_=function(s){function t(){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=s.call.apply(s,[this].concat(o))||this)._progressNode=null,e._loadProgress=null,e._loadProgressCnt=5,e._progressDelta=8,e._loadIntervalTime=.2,e._progress=0,e._startProgressValue=0,e._endProgressValue=0,e._diffProgressValue=0,e._curUpdateTime=0,e._totalUpdateTime=0,e._isUpdateProgress=!1,e}e(t,s);var o=t.prototype;return o.onLoad=function(){this._progressNode=n.getNodeByName(this.node,"progressNode"),this._loadProgress=n.getNodeComponent(this.node,"loadProgress",r),this.setZIndex(99)},o.show=function(){this._loadProgressCnt=5,this._progress=50,this._progressNode.active=!0,this.showUICnt++,this._setProgressValue(this._progress,this._progress,0),this.adaptAdLayout(this._progressNode,160,!0,!1),this.scheduleOnce(this._loadingSchedule,this._loadIntervalTime)},o._onClose=function(s){void 0===s&&(s=!0),s&&(d.Account.isFirstGame=!1),d.UI.hideDialog(a.UI_DIALOG_NAME.LOADING),d.UI.showDialog(a.UI_DIALOG_NAME.GAME)},o._setProgressValue=function(s,e,t){this._startProgressValue=s,this._endProgressValue=e,this._diffProgressValue=e-s,this._curUpdateTime=0,this._totalUpdateTime=t,0===t?this._setLoadingProgress(e):(this._setLoadingProgress(s),this._isUpdateProgress=!0)},o._setLoadingProgress=function(s){s>100&&(s=100),this._loadProgress.progress=s/100},o._loadingSchedule=function(){var s=this;this._loadProgressCnt<=0||(this._loadProgressCnt--,this._updateProgress(this._progressDelta,this._loadIntervalTime),this.scheduleOnce((function(){s.scheduleOnce(s._loadingSchedule,s._loadIntervalTime)})))},o._updateProgress=function(s,e){void 0===e&&(e=.2);var t=this._progress+s;this._setProgressValue(this._progress,t,e),this._progress+=s},o.finishLoading=function(s){var e=this;void 0===s&&(s=.2),this._loadProgressCnt=0,this._setProgressValue(this._progress,100,s),this._progress=100,this.scheduleOnce((function(){e._onClose(!1)}),1)},o.update=function(s){if(this._isUpdateProgress)if(this._curUpdateTime<this._totalUpdateTime){this._curUpdateTime+=s;var e=this._startProgressValue+Math.floor(this._curUpdateTime/this._totalUpdateTime*this._diffProgressValue);this._setLoadingProgress(e)}else this._setLoadingProgress(this._endProgressValue),this._isUpdateProgress=!1},o.onDestroy=function(){this.node.off(i.EventType.TOUCH_END,this._onClose,this)},t}(h))||_);t._RF.pop()}}}));

System.register("chunks:///_virtual/ShareVideoUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./EventManager.ts","./Constants.ts","./UIManager.ts","./GameData.ts","./Utils.ts","./RDStatisticsManager.ts","./AdsManager.ts","./RDSocialManager.ts"],(function(t){"use strict";var e,n,i,o,a,s,c,r,d,h,u,l,_,g,p,m,N,v;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.UIOpacityComponent,a=t.LabelComponent,s=t.ButtonComponent,c=t.v3,r=t.Component},function(t){d=t.CommonUtils},function(t){h=t.EventManager},function(t){u=t.Constants},function(t){l=t.UIManager},function(t){_=t.GameData},function(t){g=t.Utils},function(t){p=t.RDStatisticsMgr,m=t.EventResult},function(t){N=t.AdsManager},function(t){v=t.RDSocialManager}],execute:function(){var I;n._RF.push({},"f09b7qUVT1AZLuDKSRZiDsZ","ShareVideoUI",void 0);var f=i.ccclass;t("ShareVideoUI",f("ShareVideoUI")(I=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._bgOpacityComp=null,e._titleNode=null,e._rewardNode=null,e._shareBtnNode=null,e._giveUpBtnNode=null,e._gameData=_.instance,e}e(n,t);var i=n.prototype;return i.onLoad=function(){var t=d.getNodeByName(this.node,"bg");this._bgOpacityComp=t.addComponent(o),this._titleNode=d.getNodeByName(this.node,"title"),this._rewardNode=d.getNodeByName(this.node,"rewardNode"),d.getNodeComponent(this._rewardNode,"diamondLbl",a).string="*"+u.SHARE_DIAMOND_COUNT;var e=this.node.getChildByName("buttonNode");this._shareBtnNode=d.getNodeByName(e,"shareRecordBtn"),this._shareBtnNode.on(s.EventType.CLICK,this._onShareButton,this),this._giveUpBtnNode=d.getNodeByName(e,"giveUpBtn"),this._giveUpBtnNode.on(s.EventType.CLICK,this._onGiveUpButton,this)},i.show=function(){this._bgOpacityComp.opacity=255,this._showAdvertisement(),this._playScaleInAnim(),p.customEvent("显示窗口",{"当前窗口":"分享视频"})},i.hide=function(){N.getInstance().hideBannerAd()},i._showAdvertisement=function(){!g.isMiniScreen()&&N.getInstance().showBannerAd()},i._playScaleInAnim=function(){var t=this;this._giveUpBtnNode.active=!1,this._giveUpBtnNode.scale=c(1,1,1),this._giveUpBtnNode.getComponent(o).opacity=0;var e=[this._titleNode,this._rewardNode,this._shareBtnNode];l.getInstance().playScaleInAnimation(e,(function(){t.scheduleOnce((function(){l.getInstance().playFadeInTween(t._giveUpBtnNode)}),u.FADE_IN_DELAY_TIME)}))},i._onShareButton=function(){var t=this;if(!l.getInstance().isUIAnimPlaying()){var e={"当前窗口":"分享视频","按钮类型":"分享录屏","歌曲":this._gameData.musicShowName};p.customEvent("按钮事件",e,m.onStarted),v.getInstance().shareVideo({success:function(){h.dispatch(u.EVENT_TYPE.DIAMOND_ANIM,u.SHARE_DIAMOND_COUNT),t.scheduleOnce((function(){t._playScaleOutAnim()}),1),p.customEvent("按钮事件",e)},fail:function(){p.customEvent("按钮事件",e,m.onFailed)}})}},i._onGiveUpButton=function(){l.getInstance().isUIAnimPlaying()||(this._playScaleOutAnim(),p.customEvent("按钮事件",{"当前窗口":"分享视频","按钮类型":"关闭","歌曲":this._gameData.musicShowName}))},i._playScaleOutAnim=function(){var t=[this._titleNode,this._rewardNode,this._shareBtnNode,this._giveUpBtnNode];l.getInstance().playScaleOutAnimation(t,(function(){l.getInstance().hideDialog(u.UI_DIALOG_NAME.SHARE_VIDEO),l.getInstance().showDialog(u.UI_DIALOG_NAME.GAME_RESULT)}),this._bgOpacityComp.node)},n}(r))||I);n._RF.pop()}}}));

System.register("chunks:///_virtual/SkinRcmdUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var n,e,i,o,s,a,c,d,r,u,h;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Sprite},function(t){s=t.CommonUtils},function(t){a=t.Constants},function(t){c=t.CustomEventID,d=t.EventResult,r=t.StageEventType},function(t){u=t.App},function(t){h=t.UIBase}],execute:function(){var l;e._RF.push({},"f6bdcIGkTxBTKy75iqdp8B7","SkinRcmdUI",void 0);var _=i.ccclass;t("SkinRcmdUI",_("SkinRcmdUI")(l=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._titleNode=null,n._rcmdNode=null,n._skinSpt=null,n._lookAdBtnNode=null,n._receiveBtnNode=null,n._thankBtnNode=null,n._rcmdSkinId=null,n}n(e,t);var i=e.prototype;return i.onLoad=function(){this._titleNode=s.getNodeByName(this.node,"title"),this._rcmdNode=s.getNodeByName(this.node,"RcmdNode"),this._skinSpt=s.getNodeComponent(this._rcmdNode,"skinSpt",o);var t=s.getNodeByName(this.node,"buttonNode");this._receiveBtnNode=s.registerButtonEvent(t,"receiveBtn",this._onReceiveButton,this),this._thankBtnNode=s.registerButtonEvent(this.node,"thankBtn",this._onThanksButton,this),this.initBgOpacity(),this.initAdData(),this._lookAdBtnNode=this.setOppoLookAdBtn(t),this.setZIndex(4)},i.show=function(t){this._rcmdSkinId=t,this._updatePlayerSkin(),this.playScaleInAnim([this._titleNode,this._rcmdNode,this._receiveBtnNode,this._lookAdBtnNode],this._thankBtnNode),this.setShowAdData(),u.Ads.showInterstitialAd({type:2,levelId:u.GameData.gameCount}),u.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},i.hide=function(){t.prototype.hide.call(this),u.Ads.showBannerAd()},i.getUIName=function(){return"皮肤试用"},i._updatePlayerSkin=function(){var t="Main_Skin_"+this._rcmdSkinId;this._skinSpt.spriteFrame=u.SptFrame.getSpriteFrameByName(t)},i._onReceiveButton=function(){var t=this;if(!u.UI.isUIAnimPlaying()){var n={currentWindow:this.getUIName(),buttonType:"获取按钮"};u.Stats.customEvent(c.custom_button_click,n,d.onStarted),this.showRewardAd({success:function(){var e=u.RankDataMgr.getPlayerRankData();u.Stats.stageRunning(e.rankId.toString(),u.RankDataMgr.getDataById(e.rankId).name,r.TOOLS,{itemName:"试用皮肤"}),u.Stats.customEvent(c.custom_button_click,n,d.onSuccess),t._playScaleOutAnim((function(){u.Event.emit(a.EVENT_TYPE.UPDATE_SKIN,t._rcmdSkinId),t._readyStartGame()}))},fail:function(){u.Stats.customEvent("按钮事件",n,d.onFailed)}})}},i._onThanksButton=function(){var t=this;u.UI.isUIAnimPlaying()||(this._playScaleOutAnim((function(){t._readyStartGame()})),u.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"暂不试用"}))},i._readyStartGame=function(){u.Event.emit(a.EVENT_TYPE.GAME_CONTINUE)},i._playScaleOutAnim=function(t){var n=[this._titleNode,this._rcmdNode,this._receiveBtnNode,this._lookAdBtnNode,this._thankBtnNode];this.playScaleOutAnim(n,(function(){u.UI.hideDialog(a.UI_DIALOG_NAME.SKIN_RECOMMEND),t&&t()}))},e}(h))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/RDAndroidPlatform.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./RDPlatformType.ts","./RDPlatformParam.ts","./RDCommand.ts","./OptionsManager.ts","./RDPlatform.ts"],(function(a){"use strict";var t,i,n,e,o,r,s,l,d;return{setters:[function(a){t=a.inheritsLoose},function(a){i=a.cclegacy,n=a.sys},function(a){e=a.Log},function(a){o=a.RDPlatformType},function(a){r=a.RDPlatformParam},function(a){s=a.RDCommand},function(a){l=a.default},function(a){d=a.RDPlatform}],execute:function(){i._RF.push({},"f8f38JAT55B9JKBXxL6Pija","RDAndroidPlatform",void 0);a("RDAndroidPlatform",function(a){function i(t){var i;return(i=a.call(this,t)||this).platformName="4399",i.android_platName="office",i.android_versionName="1.0.0",i.android_platId="1050",i.platformName=r.ADPARAM[o.Android.toString()].platformName,i.android_platName=window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","getPlatName","(Ljava/lang/String;)Ljava/lang/String;","test"),i.android_versionName=window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","getVersionName","(Ljava/lang/String;)Ljava/lang/String;","test"),i.android_platId=window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","getPlatId","(Ljava/lang/String;)Ljava/lang/String;","test"),i}t(i,a);var d=i.prototype;return d.initAD=function(){this._login(null),this._hasShortcutInstalled=!0},d.isReviewed=function(){var a=window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","getDeviceId","(Ljava/lang/String;)Ljava/lang/String;","test");if((e.log("设备id",a),l.getInstance().config&&l.getInstance().config.android&&l.getInstance().config.android.deviceIds)&&-1!=l.getInstance().config.android.deviceIds.indexOf(a))return!0;return!1},d._showBannerAd=function(a){if(!this.isReviewed()){e.log("Android show Banner");var t={type:s.CMD_SHOW_BANNER_AD,platformName:this.platformName,config:l.getInstance().config,nativeType:a.nativeType?a.nativeType:1};window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify(t))}},d._hideBannerAd=function(a){if(!this.isReviewed()){e.log("Android hide Banner");var t={type:s.CMD_HIDE_BANNER_AD,platformName:this.platformName};window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify(t))}},d._showVideo=function(a){if(this.isReviewed())this._rewardCaback&&this._rewardCaback.success(null);else{e.log("Android show video");var t=r.ADPARAM[o.Android.toString()].video_id,i={type:s.CMD_SHOW_REWARD_VIDEO_AD,videoId:t,platformName:this.platformName,config:l.getInstance().config};window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify(i))}},d._showIntertitalAd=function(a){if(this.isReviewed())return!1;e.log("Android show video");var t={type:s.CMD_SHOW_INTERSTITIAL_VIDEO_AD,platformName:this.platformName,config:l.getInstance().config,param:a};window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify(t))},d._nativeAdClick=function(a){var t={type:s.CMD_ClICK_NATIVE_AD,platformName:this.platformName,config:l.getInstance().config,param:a};window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify(t))},d._vibrateShort=function(a){var t={type:s.CMD_SHAKE,platformName:this.platformName};window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify(t))},d._showGamePortalAd=function(a){e.log("_showGamePortalAd");var t={type:s.CMD_SHOW_OFFICE_PORTAL_AD,platformName:this.platformName};window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify(t))},d.getAndroidPlatName=function(){return e.log("当前安卓平台",this.android_platName),this.android_platName},d.getVersionName=function(){return this.android_versionName},d.loadStorageData=function(a,t,i){var e=JSON.parse(n.localStorage.getItem(a[0]));t&&t(e)},d.flushStorageData=function(a,t){n.localStorage.setItem(a.key,JSON.stringify(a.data))},d._login=function(a){var t=window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","getDeviceId","(Ljava/lang/String;)Ljava/lang/String;","test");this._userInf.userId=t},d.isShowNativeAd=function(a){void 0===a&&(a=!1);var t=window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","isShowNativeAd","(Ljava/lang/String;)Ljava/lang/String;",a?"0":"1");return"0"===t},d.isMoreGameBtn=function(){var a=window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","isMoreGameBtn","(Ljava/lang/String;)Ljava/lang/String;","test");return e.log("更多游戏按钮",a),"0"===a},d.openPrivacyPolicy=function(){var a={type:s.CMD_SDK_PRIVACY_POLICY};window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","JsToJava","(Ljava/lang/String;)V",JSON.stringify(a))},d.isShowPrivacy=function(){var a=window.jsb.reflection.callStaticMethod("com/rdgame/app_base/jni/JsbApi","showPrivacy","(Ljava/lang/String;)Ljava/lang/String;","test");return e.log("是否显示隐私政策",a),"0"===a},d.isShowContact=function(){return"oppo_android"===this.getAndroidPlatName()},d.isShowNativeSplash=function(){return!1},d.getPlatId=function(){return this.android_platId},i}(d));i._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var n,e,t,i,r,o,a;return{setters:[function(c){n=c.cclegacy,e=c.director,t=c.Director,i=c.Canvas,r=c.Camera,o=c.game,a=c.Node}],execute:function(){n._RF.push({},"f9acbQ/WfRHbLdaG+DPu7KS","migrate-canvas",void 0);var c=1048575;function l(n,e){for(var t=0,i=n.children.length;t<i;t++)n.children[t].layer=e,l(n.children[t],e)}e.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var n,t,a,s=null===(n=e.getScene())||void 0===n?void 0:n.children,v=null===(t=e.getScene())||void 0===t?void 0:t.getComponentsInChildren(i);if(!(v.length<=1)){v=v.filter((function(n){return!!n.cameraComponent}));var m=null===(a=e.getScene())||void 0===a?void 0:a.getComponentsInChildren(r),u=0;m.forEach((function(n){return u|=n.visibility&c}));for(var p=[],f=0,d=s.length;f<d;f++){var C=s[f];if(o.isPersistRootNode(C)){var h=C.getComponentsInChildren(i);0!==h.length&&p.push.apply(p,h.filter((function(n){return!!n.cameraComponent})))}}p.forEach((function(n){if(v.find((function(e){return e!==n&&e.cameraComponent.visibility&n.cameraComponent.visibility&c}))){var e=~u,t=e&~(e-1);n.cameraComponent.visibility=t|4293918720&n.cameraComponent.visibility,l(n.node,t),u|=e}}))}}));var s=a.prototype.setParent;function v(n){var e=0,t=n.getComponent(i);return t&&t.cameraComponent?e=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(n.parent&&(e=v(n.parent)),e)}a.prototype.setParent=function(n,e){if(s.call(this,n,e),n){var t=v(this);t&&(this.layer=t,l(this,t))}},n._RF.pop()}}}));

System.register("chunks:///_virtual/RDAdsEntity.ts",["cc"],(function(){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"fa264C/JrBAD40ykL9wnnCE","RDAdsEntity",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/RDPlatformType.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){var n;e("RDPlatformType",void 0),a._RF.push({},"fa3fdfANi1BPo3fvdAqM+Vn","RDPlatformType",void 0),function(e){e[e.None=-1]="None",e[e.WeixinMinGame=1]="WeixinMinGame",e[e.TTMinGame=2]="TTMinGame",e[e.VIVOGame=3]="VIVOGame",e[e.OPPOGame=4]="OPPOGame",e[e.TencentGTD7377=5]="TencentGTD7377",e[e.CoralGame=6]="CoralGame",e[e.Android=7]="Android",e[e.Ios=8]="Ios",e[e.KG=9]="KG",e[e.OPPOMusicGame=10]="OPPOMusicGame",e[e.XMGame=11]="XMGame",e[e.Game4399=12]="Game4399",e[e.Facebook=13]="Facebook",e[e.Web=14]="Web"}(n||(n=e("RDPlatformType",{}))),a._RF.pop()}}}));

System.register("chunks:///_virtual/EffectManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./AppManager.ts"],(function(t){"use strict";var o,e,n,i,r,c,f,s,a,E,l,d;return{setters:[function(t){o=t.inheritsLoose,e=t.asyncToGenerator},function(t){n=t.cclegacy,i=t._decorator,r=t.v3,c=t.ParticleSystem,f=t.color,s=t.Component,a=t.ParticleUtils},function(t){E=t.CommonUtils},function(t){l=t.Constants},function(t){d=t.App}],execute:function(){var u;n._RF.push({},"fa4b4mq2Q1KGqcooWXTV5Ip","EffectManager",void 0);var p=i.ccclass;t("EffectManager",p("EffectManager")(u=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var i=n.prototype;return i.onLoad=function(){this._registerCustomEvent(!0)},i._registerCustomEvent=function(t){var o=t?"on":"off";d.Event[o](l.EVENT_TYPE.PLAY_SPARK_EFFECT,this._playSparkEffect,this),d.Event[o](l.EVENT_TYPE.PLAY_GATEFX_EFFECT,this._playGateFXEffect,this),d.Event[o](l.EVENT_TYPE.PLAY_EXPLODE_EFFECT,this._playExplodeEffect,this),d.Event[o](l.EVENT_TYPE.PLAY_UPGRADE_EFFECT,this._playUpgradeEffect,this),d.Event[o](l.EVENT_TYPE.PLAY_CONFTTI_EFFECT,this._playConfttiEffect,this),d.Event[o](l.EVENT_TYPE.PLAY_FIRE_EFFECT,this._playFireEffect,this),d.Event[o](l.EVENT_TYPE.PLAY_EFFECT,this._playEffect,this)},i._playEffect=function(t,o,e,n){void 0===o&&(o=this.node),void 0===e&&(e=r(0,0,0)),void 0===n&&(n=1.5),this._loadEffect(t,o,(function(t){e&&t.setPosition(e)}),n)},i._playFireEffect=function(t,o){void 0===o&&(o=r()),this._loadEffect("fire",t,(function(t){o&&t.setPosition(o)}))},i._playGateFXEffect=function(t,o,e){void 0===t&&(t=0),void 0===o&&(o=r()),this._loadEffect("GateFX",this.node,(function(e){e.setWorldPosition(o);var n=l.SOLDIER_COLOR_ARRAY[t],i=E.getNodeComponent(e,"Light",c),r=E.getNodeComponent(e,"Spark",c),s=E.getNodeComponent(e,"GlowWave",c),a=E.getNodeComponent(e,"Column",c);i.colorOverLifetimeModule.color.gradient.colorKeys[1].color=f(n.r,n.g,n.b,1),r.colorOverLifetimeModule.color.gradient.colorKeys[1].color=f(n.r,n.g,n.b,1),s.colorOverLifetimeModule.color.gradient.colorKeys[1].color=f(n.r,n.g,n.b,1),a.colorOverLifetimeModule.color.gradient.colorKeys[1].color=f(n.r,n.g,n.b,1)}),5)},i._playSparkEffect=function(t,o,e){void 0===t&&(t=0),void 0===o&&(o=r()),void 0===e&&(e=3),this._loadEffect("Spark",this.node,(function(n){n.setWorldPosition(o),n.setWorldScale(e,e,e);var i=l.SOLDIER_COLOR_ARRAY[t];E.getNodeComponent(n,n.name,c).colorOverLifetimeModule.color.gradient.colorKeys[1].color=f(i.r,i.g,i.b,1)}))},i._playExplodeEffect=function(t){this._loadEffect("explode",this.node,(function(o){t&&o.setWorldPosition(t)}),3)},i._playUpgradeEffect=function(t,o){this._loadEffect("weaponUpgrade",t,(function(t){o&&t.setPosition(o)}),3)},i._playConfttiEffect=function(t,o){void 0===o&&(o=r(0,0,0)),this._loadEffect("confettiEffect",t,(function(t){t.position=o}),2)},i._loadEffect=function(){var t=e(regeneratorRuntime.mark((function t(o,e,n,i){var r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=this.node),void 0===n&&(n=null),void 0===i&&(i=1.5),t.next=5,d.Res.loadPrefab("effect/"+o,"prefab");case 5:r=t.sent,c=d.Pool.getNode(r,e),n&&n(c),a.play(c),this.scheduleOnce((function(){c&&d.Pool.putNode(c)}),i);case 10:case"end":return t.stop()}}),t,this)})));return function(o,e,n,i){return t.apply(this,arguments)}}(),i.onDestroy=function(){this._registerCustomEvent(!1)},n}(s))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureBoxUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Constants.ts","./Utils.ts","./RDStatisticsManager.ts","./AppManager.ts","./UIBase.ts"],(function(t){"use strict";var e,o,n,i,a,s,r,d,u,c,l,m,h,N,_;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Label,a=t.Sprite,s=t.Animation,r=t.Vec3,d=t.tween,u=t.v3},function(t){c=t.CommonUtils},function(t){l=t.Constants},function(t){m=t.Utils},function(t){h=t.EventResult},function(t){N=t.App},function(t){_=t.UIBase}],execute:function(){var B;o._RF.push({},"fadfb25T4tERKNQ9UbOML2a","TreasureBoxUI",void 0);var g=n.ccclass,p=l.AWARD_TYPE,y=[{type:p.GOLD,diamond:100,ratio:40},{type:p.GOLD,diamond:200,ratio:30},{type:p.GOLD,diamond:300,ratio:20},{type:p.GOLD,diamond:400,ratio:10}];t("TreasureBoxUI",g("TreasureBoxUI")(B=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._titleNode=null,e._treasureBoxNode=null,e._boxItem=null,e._lookAdBtnNode=null,e._addKeyBtnNode=null,e._closeBtnNode=null,e._keyNode=null,e._keyLbl=null,e}e(o,t);var n=o.prototype;return n.onLoad=function(){this._titleNode=c.getNodeByName(this.node,"title"),this._treasureBoxNode=c.getNodeByName(this.node,"treasureBoxNode"),this._boxItem=c.getNodeByName(this._treasureBoxNode,"boxItem"),N.Pool.putNode(this._boxItem);var t=c.getNodeByName(this.node,"buttonNode");this._addKeyBtnNode=c.registerButtonEvent(t,"addKeyBtn",this._onAddKeyButton,this),this._closeBtnNode=c.registerButtonEvent(this.node,"closeBtn",this._onCloseButton,this),this._keyNode=c.getNodeByName(this.node,"keyNode"),this._keyLbl=c.getNodeComponent(this.node,"keyLbl",i),this.initBgOpacity(),this.initAdData(),this._lookAdBtnNode=this.setOppoLookAdBtn(t),this._createBoxItem()},n.getUIName=function(){return"宝箱"},n.show=function(t){void 0===t&&(t=!1),this.showUICnt++,this._updateBoxItem(t,!0);var e=[].concat(this._titleNode.children,this._treasureBoxNode.children,[this._keyNode,this._lookAdBtnNode,this._addKeyBtnNode,this._closeBtnNode]);this.playScaleInAnim(e,this._closeBtnNode,.05),this.setShowAdData(),N.Stats.customEvent("显示窗口",{"当前窗口":this.getUIName()})},n._onAddKeyButton=function(){var t=this;if(!N.UI.isUIAnimPlaying()){var e={"当前窗口":this.getUIName(),"按钮类型":"我还要开"};N.Stats.customEvent("按钮事件",e,h.onStarted),this.showRewardAd({success:function(){N.RankDataMgr.keyCnt+=2,t._updateBoxItem(),N.Stats.customEvent("按钮事件",e)},fail:function(){N.Stats.customEvent("按钮事件",e,h.onFailed)}})}},n._onCloseButton=function(){if(!N.UI.isUIAnimPlaying()){var t=[].concat(this._titleNode.children,this._treasureBoxNode.children,[this._keyNode,this._lookAdBtnNode,this._addKeyBtnNode,this._closeBtnNode]);this.playScaleOutAnim(t,(function(){N.UI.hideDialog(l.UI_DIALOG_NAME.TREASURE_BOX),N.Event.emit(l.EVENT_TYPE.UPDATE_AD)}),.03),N.Stats.customEvent("按钮事件",{"当前窗口":this.getUIName(),"按钮类型":"关闭"})}},n._createBoxItem=function(){for(var t=0;t<9;t++){var e=N.Pool.getNode(this._boxItem,this._treasureBoxNode);e.name="boxItem"+t;var o=c.getNodeComponent(e,"diamondLbl",i),n=c.getNodeComponent(e,"boxSpt",a),s=c.getNodeByName(e,"adNode");o.string="",n.spriteFrame=N.SptFrame.getSpriteFrameByName("Treasure_Box_Close"),o.node.active=!1,s.active=!1,c.registerButtonEvent(e,e.name,this._onBoxItemButton,this)}},n._updateBoxItem=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var o=0;o<this._treasureBoxNode.children.length;o++){var n=this._treasureBoxNode.children[o],d=c.getNodeComponent(n,"diamondLbl",i),u=c.getNodeComponent(n,"boxSpt",a),l=c.getNodeByName(n,"adNode"),m=c.getNodeComponent(n,n.name,s),h=N.Account.getTreasureBoxData(o);t&&(h.isOpen=!1,h.diamond=0,N.Account.setTreasureBoxData(o,h)),n.eulerAngles=r.ZERO,u.spriteFrame=N.SptFrame.getSpriteFrameByName("Treasure_Box_"+(h.isOpen?"Open":"Close")),l.active=0==N.RankDataMgr.keyCnt&&!h.isOpen,!h.isOpen&&N.RankDataMgr.keyCnt>0?m.play():m.stop(),d.string="+"+h.diamond.toString(),(t||e)&&(d.node.active=!1),this._updateKeyCnt()}},n._getAwardIndex=function(t){for(var e=0,o=0,n=y.length;o<n;o++)if(t<=(e+=y[o].ratio))return o;return 0},n._onBoxItemButton=function(t){var e=this,o=t.target;if(!N.Account.getTreasureBoxData(o.getSiblingIndex()).isOpen)if(N.RankDataMgr.keyCnt>0)N.RankDataMgr.keyCnt--,this._updateKeyCnt(),this._openBoxItem(o);else{var n={"当前窗口":this.getUIName(),"按钮类型":"点击宝箱"};N.Stats.customEvent("按钮事件",n,h.onStarted),this.showRewardAd({success:function(){e._openBoxItem(o)},fail:function(){N.Stats.customEvent("按钮事件",n,h.onFailed)}})}},n._openBoxItem=function(t){var e=this,o=this._getAwardIndex(m.random(0,100)),n=y[o];N.Account.setTreasureBoxData(t.getSiblingIndex(),{isOpen:!0,diamond:n.diamond});var h=c.getNodeComponent(t,"diamondLbl",i),_=c.getNodeComponent(t,"boxSpt",a),B=c.getNodeByName(t,"adNode"),g=c.getNodeComponent(t,t.name,s);t.eulerAngles=r.ZERO,h.string="+"+n.diamond.toString(),_.spriteFrame=N.SptFrame.getSpriteFrameByName("Treasure_Box_Open"),h.node.active=!0,B.active=!1,g.stop(),h.node.setPosition(0,0,0),d(h.node).to(.5,{position:u(0,90,0)},{easing:"backOut"}).call((function(){for(var t=0,o=0;o<e._treasureBoxNode.children.length;o++){N.Account.getTreasureBoxData(o).isOpen&&t++}e._updateBoxItem(t==e._treasureBoxNode.children.length)})).delay(2).call((function(){h.node.active=!1})).start(),N.Event.emit(l.EVENT_TYPE.GOLD_ANIM,n.diamond)},n._updateKeyCnt=function(){this._keyLbl.string="x"+N.RankDataMgr.keyCnt},o}(_))||B);o._RF.pop()}}}));

System.register("chunks:///_virtual/PropMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts"],(function(r){"use strict";var e,o,t,n,c,a;return{setters:[function(r){e=r.inheritsLoose,o=r.createForOfIteratorHelperLoose},function(r){t=r.cclegacy,n=r._decorator,c=r.Component},function(r){a=r.PoolManager}],execute:function(){var s;t._RF.push({},"fcaebj2MrpPfISCDLbO68l1","PropMgr",void 0);var i=n.ccclass;n.property,r("PropMgr",i("PropMgr")(s=function(r){function t(){for(var e,o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];return(e=r.call.apply(r,[this].concat(t))||this)._keyNodeArr=[],e}e(t,r);var n=t.prototype;return n.resetProp=function(r){this._recycleKey(),this._createKey(r.keyPosArr)},n._recycleKey=function(){for(var r,e=o(this._keyNodeArr);!(r=e()).done;){var t=r.value;a.instance.putNode(t)}this._keyNodeArr=[]},n._createKey=function(r){for(var e,t=o(r);!(e=t()).done;)e.value},n.onDestroy=function(){},t}(c))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonUtils.ts","./SingletonBase2.ts","./EventManager.ts","./SingletonBase.ts","./PoolManager.ts","./Constants.ts","./Log.ts","./UIManager.ts","./GameData.ts","./AudioDownLoader.ts","./RDPlatformType.ts","./ConstantCommon.ts","./AudioManager.ts","./RDBundleManager.ts","./Dictionary.ts","./RDAssetManager.ts","./SpriteFrameManager.ts","./RDPlatformParam.ts","./RDCommand.ts","./OptionsManager.ts","./Utils.ts","./RDPlatform.ts","./RDWeiXinMiniPlatform.ts","./GameListManger.ts","./ADMainPush.ts","./ADBannerList.ts","./ADDrawer.ts","./RDStatisticsManager.ts","./NativeAds.ts","./ADScreen.ts","./ADWxScreen.ts","./ADBombGame.ts","./ADDoubleScreen.ts","./ADGameOver.ts","./AdsManager.ts","./PushControl.ts","./RDPCPlatform.ts","./RDVIVOMiniPlatform.ts","./RDOppoMiniPlatform.ts","./RDTTMiniPlatform.ts","./RDTencentGDTPlatform.ts","./RDCoralPlatform.ts","./RDAndroidPlatform.ts","./RDIOSPlatform.ts","./RDKGPlatform.ts","./RDOppoMusicMiniPlatform.ts","./RDXMMiniPlatform.ts","./RD4399Platform.ts","./RDPlatformManager.ts","./IDataModel.ts","./constant-user.ts","./AccountData.ts","./MapData.ts","./AchievementData.ts","./RankData.ts","./PlayerSkinData.ts","./HttpManager.ts","./WeaponData.ts","./AppManager.ts","./UIBase.ts","./AchievementItem.ts","./AchievementUI.ts","./PerlinNoise.ts","./ButtonComponent.ts","./TempUI.ts","./TimeTask.ts","./TaskManager.ts","./Async.ts","./hitColor.ts","./UIConstant.ts","./RDSocialManager.ts","./Common.ts","./Agent.ts","./kdtree.ts","./Simulator.ts","./AttackAreaMgr.ts","./EnemyAIMgr.ts","./LightningBulletMgr.ts","./MercenaryCampMgr.ts","./BrickCountMgr.ts","./FireBallMgr.ts","./FinalWeaponMgr.ts","./RocketExplosionMgr.ts","./TrajectoryBulletMgr.ts","./MercenaryMgr.ts","./SoldierAgentMgr.ts","./BloodBarMgr.ts","./PlayerMgr.ts","./BrickGroupMgr.ts","./MapMgr.ts","./GameControl.ts","./ListViewItem.ts","./ListView.ts","./LevelItem.ts","./LevelUI.ts","./MapBase.ts","./JungleMap.ts","./joystick.ts","./LookAtAdButton.ts","./WinterMap.ts","./BarrackMgr.ts","./StoneMap.ts","./BulletMgr.ts","./touch-mgr.ts","./ICannonScene.ts","./AssetsUtils.ts","./SetZIndex.ts","./ConfirmUI.ts","./UIScrollSelect.ts","./ICannonSharedBody.ts","./ICannonRigidBody.ts","./DiamondFlyAnimation.ts","./Queue.ts","./Types.ts","./GameMap.ts","./ReviveUI.ts","./ICannonBoxShape.ts","./ADDialog.ts","./ToastUI.ts","./SkinItem.ts","./SkinUI.ts","./MusicItem.ts","./OceanMap.ts","./AssetsPackageDefine.ts","./JsonManager.ts","./AssetsHelper.ts","./calculate-uv.ts","./guide-tips.ts","./GameUI.ts","./DirectoryAsset.ts","./OppoNativeAdItem.ts","./HotUpdateManager.ts","./TurntableUI.ts","./DesertMap.ts","./RDLeaderboardEntity.ts","./EventManager2.ts","./EventTarget.ts","./mapSelectItem.ts","./FlamethrowerMgr.ts","./WeaponItem.ts","./MusicRcmdUI.ts","./GameInit.ts","./Handler.ts","./musicBarAni.ts","./ResManager.ts","./Encode.ts","./ICannonSphereShape.ts","./SignInUI.ts","./AnimEventTest.ts","./MapRcmdUI.ts","./PrivacyPolicy.ts","./TextureManager.ts","./GameEvents.ts","./QueueManager.ts","./GuideMgr.ts","./ButtonUtils.ts","./MapSelectUI.ts","./RaycastTest.ts","./AnimationEvent.ts","./CommonUI.ts","./moreClick.ts","./AgentMgr.ts","./camera-mgr.ts","./SettingUI.ts","./UnlockEndlessUI.ts","./scroll-view-optimize.ts","./RDAsset.ts","./TTButton.ts","./CircleMask.ts","./RichText.ts","./MapToggleItem.ts","./ResultUI.ts","./BuffRcmdUI.ts","./AuditionMgr.ts","./Loading.ts","./MainUI.ts","./constant-power.ts","./LoadingUI.ts","./ShareVideoUI.ts","./SkinRcmdUI.ts","./migrate-canvas.ts","./RDAdsEntity.ts","./EffectManager.ts","./TreasureBoxUI.ts","./PropMgr.ts","./uma.min.mjs_cjs=&original=.js","./uma_tt.min.mjs_cjs=&original=.js","./cocosAnalytics.min.mjs_cjs=&original=.js"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});